window.tinyMCEPreInit={suffix:"",base:"/shared/libs/tinymce-3.5.8-jquery",query:""};
!function(e,t){function n(e){return H.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}function r(e){if(!xn[e]){var t=M.body,n=H("<"+e+">").appendTo(t),r=n.css("display");n.remove(),("none"===r||""===r)&&(gn||(gn=M.createElement("iframe"),gn.frameBorder=gn.width=gn.height=0),t.appendChild(gn),yn&&gn.createElement||(yn=(gn.contentWindow||gn.contentDocument).document,yn.write(("CSS1Compat"===M.compatMode?"<!doctype html>":"")+"<html><body>"),yn.close()),n=yn.createElement(e),yn.body.appendChild(n),r=H.css(n,"display"),t.removeChild(gn)),xn[e]=r}return xn[e]}function i(e,t){var n={};return H.each(Nn.concat.apply([],Nn.slice(0,t)),function(){n[this]=e}),n}function o(){bn=t}function a(){return setTimeout(o,0),bn=H.now()}function s(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function l(){try{return new e.XMLHttpRequest}catch(t){}}function u(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var r,i,o,a,s,l,u,c,f=e.dataTypes,d={},p=f.length,h=f[0];for(r=1;p>r;r++){if(1===r)for(i in e.converters)"string"==typeof i&&(d[i.toLowerCase()]=e.converters[i]);if(a=h,h=f[r],"*"===h)h=a;else if("*"!==a&&a!==h){if(s=a+" "+h,l=d[s]||d["* "+h],!l){c=t;for(u in d)if(o=u.split(" "),(o[0]===a||"*"===o[0])&&(c=d[o[1]+" "+h])){u=d[u],u===!0?l=c:c===!0&&(l=u);break}}!l&&!c&&H.error("No conversion from "+s.replace(" "," to ")),l!==!0&&(n=l?l(n):c(u(n)))}}return n}function c(e,n,r){var i,o,a,s,l=e.contents,u=e.dataTypes,c=e.responseFields;for(o in c)o in r&&(n[c[o]]=r[o]);for(;"*"===u[0];)u.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(o in l)if(l[o]&&l[o].test(i)){u.unshift(o);break}if(u[0]in r)a=u[0];else{for(o in r){if(!u[0]||e.converters[o+" "+u[0]]){a=o;break}s||(s=o)}a=a||s}return a?(a!==u[0]&&u.unshift(a),r[a]):void 0}function f(e,t,n,r){if(H.isArray(t))H.each(t,function(t,i){n||zt.test(e)?r(e,i):f(e+"["+("object"==typeof i||H.isArray(i)?t:"")+"]",i,n,r)});else if(n||null==t||"object"!=typeof t)r(e,t);else for(var i in t)f(e+"["+i+"]",t[i],n,r)}function d(e,n){var r,i,o=H.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((o[r]?e:i||(i={}))[r]=n[r]);i&&H.extend(!0,e,i)}function p(e,n,r,i,o,a){o=o||n.dataTypes[0],a=a||{},a[o]=!0;for(var s,l=e[o],u=0,c=l?l.length:0,f=e===sn;c>u&&(f||!s);u++)s=l[u](n,r,i),"string"==typeof s&&(!f||a[s]?s=t:(n.dataTypes.unshift(s),s=p(e,n,r,i,s,a)));return(f||!s)&&!a["*"]&&(s=p(e,n,r,i,"*",a)),s}function h(e){return function(t,n){if("string"!=typeof t&&(n=t,t="*"),H.isFunction(n))for(var r,i,o,a=t.toLowerCase().split(nn),s=0,l=a.length;l>s;s++)r=a[s],o=/^\+/.test(r),o&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[o?"unshift":"push"](n)}}function m(e,t,n){var r="width"===t?e.offsetWidth:e.offsetHeight,i="width"===t?Wt:It,o=0,a=i.length;if(r>0){if("border"!==n)for(;a>o;o++)n||(r-=parseFloat(H.css(e,"padding"+i[o]))||0),"margin"===n?r+=parseFloat(H.css(e,n+i[o]))||0:r-=parseFloat(H.css(e,"border"+i[o]+"Width"))||0;return r+"px"}if(r=jt(e,t,t),(0>r||null==r)&&(r=e.style[t]||0),r=parseFloat(r)||0,n)for(;a>o;o++)r+=parseFloat(H.css(e,"padding"+i[o]))||0,"padding"!==n&&(r+=parseFloat(H.css(e,"border"+i[o]+"Width"))||0),"margin"===n&&(r+=parseFloat(H.css(e,n+i[o]))||0);return r+"px"}function g(e,t){t.src?H.ajax({url:t.src,async:!1,dataType:"script"}):H.globalEval((t.text||t.textContent||t.innerHTML||"").replace(St,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function y(e){var t=M.createElement("div");return Lt.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function v(e){var t=(e.nodeName||"").toLowerCase();"input"===t?b(e):"script"!==t&&"undefined"!=typeof e.getElementsByTagName&&H.grep(e.getElementsByTagName("input"),b)}function b(e){("checkbox"===e.type||"radio"===e.type)&&(e.defaultChecked=e.checked)}function x(e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll("*"):[]}function T(e,t){var n;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),"object"===n?t.outerHTML=e.outerHTML:"input"!==n||"checkbox"!==e.type&&"radio"!==e.type?"option"===n?t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue):(e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value)),t.removeAttribute(H.expando))}function w(e,t){if(1===t.nodeType&&H.hasData(e)){var n,r,i,o=H._data(e),a=H._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)H.event.add(t,n+(s[n][r].namespace?".":"")+s[n][r].namespace,s[n][r],s[n][r].data)}a.data&&(a.data=H.extend({},a.data))}}function N(e){return H.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function C(e){var t=mt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function E(e,t,n){if(t=t||0,H.isFunction(t))return H.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return H.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=H.grep(e,function(e){return 1===e.nodeType});if(ft.test(t))return H.filter(t,r,!n);t=H.filter(t,r)}return H.grep(e,function(e){return H.inArray(e,t)>=0===n})}function k(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function S(){return!0}function A(){return!1}function L(e,t,n){var r=t+"defer",i=t+"queue",o=t+"mark",a=H._data(e,r);!(!a||"queue"!==n&&H._data(e,i)||"mark"!==n&&H._data(e,o)||!setTimeout(function(){!H._data(e,i)&&!H._data(e,o)&&(H.removeData(e,r,!0),a.fire())},0))}function j(e){for(var t in e)if(("data"!==t||!H.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function F(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(W,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:H.isNumeric(r)?parseFloat(r):q.test(r)?H.parseJSON(r):r}catch(o){}H.data(e,n,r)}else r=t}return r}function D(e){var t,n,r=B[e]={};for(e=e.split(/\s+/),t=0,n=e.length;n>t;t++)r[e[t]]=!0;return r}var M=e.document,O=e.navigator,_=e.location,H=function(){function n(){if(!s.isReady){try{M.documentElement.doScroll("left")}catch(e){return void setTimeout(n,1)}s.ready()}}var r,i,o,a,s=function(e,t){return new s.fn.init(e,t,r)},l=e.jQuery,u=e.$,c=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,f=/\S/,d=/^\s+/,p=/\s+$/,h=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,m=/^[\],:{}\s]*$/,g=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,y=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,v=/(?:^|:|,)(?:\s*\[)+/g,b=/(webkit)[ \/]([\w.]+)/,x=/(opera)(?:.*version)?[ \/]([\w.]+)/,T=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,N=/-([a-z]|[0-9])/gi,C=/^-ms-/,E=function(e,t){return(t+"").toUpperCase()},k=O.userAgent,S=Object.prototype.toString,A=Object.prototype.hasOwnProperty,L=Array.prototype.push,j=Array.prototype.slice,F=String.prototype.trim,D=Array.prototype.indexOf,_={};return s.fn=s.prototype={constructor:s,init:function(e,n,r){var i,o,a,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("body"===e&&!n&&M.body)return this.context=M,this[0]=M.body,this.selector=e,this.length=1,this;if("string"==typeof e){if(i="<"!==e.charAt(0)||">"!==e.charAt(e.length-1)||e.length<3?c.exec(e):[null,e,null],i&&(i[1]||!n)){if(i[1])return n=n instanceof s?n[0]:n,l=n?n.ownerDocument||n:M,a=h.exec(e),a?s.isPlainObject(n)?(e=[M.createElement(a[1])],s.fn.attr.call(e,n,!0)):e=[l.createElement(a[1])]:(a=s.buildFragment([i[1]],[l]),e=(a.cacheable?s.clone(a.fragment):a.fragment).childNodes),s.merge(this,e);if(o=M.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=M,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return s.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),s.makeArray(e,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return j.call(this,0)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=this.constructor();return s.isArray(e)?L.apply(r,e):s.merge(r,e),r.prevObject=this,r.context=this.context,"find"===t?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return s.each(this,e,t)},ready:function(e){return s.bindReady(),o.add(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(j.apply(this,arguments),"slice",j.call(arguments).join(","))},map:function(e){return this.pushStack(s.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:L,sort:[].sort,splice:[].splice},s.fn.init.prototype=s.fn,s.extend=s.fn.extend=function(){var e,n,r,i,o,a,l=arguments[0]||{},u=1,c=arguments.length,f=!1;for("boolean"==typeof l&&(f=l,l=arguments[1]||{},u=2),"object"!=typeof l&&!s.isFunction(l)&&(l={}),c===u&&(l=this,--u);c>u;u++)if(null!=(e=arguments[u]))for(n in e)r=l[n],i=e[n],l!==i&&(f&&i&&(s.isPlainObject(i)||(o=s.isArray(i)))?(o?(o=!1,a=r&&s.isArray(r)?r:[]):a=r&&s.isPlainObject(r)?r:{},l[n]=s.extend(f,a,i)):i!==t&&(l[n]=i));return l},s.extend({noConflict:function(t){return e.$===s&&(e.$=u),t&&e.jQuery===s&&(e.jQuery=l),s},isReady:!1,readyWait:1,holdReady:function(e){e?s.readyWait++:s.ready(!0)},ready:function(e){if(e===!0&&!--s.readyWait||e!==!0&&!s.isReady){if(!M.body)return setTimeout(s.ready,1);if(s.isReady=!0,e!==!0&&--s.readyWait>0)return;o.fireWith(M,[s]),s.fn.trigger&&s(M).trigger("ready").off("ready")}},bindReady:function(){if(!o){if(o=s.Callbacks("once memory"),"complete"===M.readyState)return setTimeout(s.ready,1);if(M.addEventListener)M.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",s.ready,!1);else if(M.attachEvent){M.attachEvent("onreadystatechange",a),e.attachEvent("onload",s.ready);var t=!1;try{t=null==e.frameElement}catch(r){}M.documentElement.doScroll&&t&&n()}}},isFunction:function(e){return"function"===s.type(e)},isArray:Array.isArray||function(e){return"array"===s.type(e)},isWindow:function(e){return e&&"object"==typeof e&&"setInterval"in e},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):_[S.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==s.type(e)||e.nodeType||s.isWindow(e))return!1;try{if(e.constructor&&!A.call(e,"constructor")&&!A.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||A.call(e,r)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){return"string"==typeof t&&t?(t=s.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):m.test(t.replace(g,"@").replace(y,"]").replace(v,""))?new Function("return "+t)():void s.error("Invalid JSON: "+t)):null},parseXML:function(n){var r,i;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&s.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&f.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(N,E)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,r){var i,o=0,a=e.length,l=a===t||s.isFunction(e);if(r)if(l){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;a>o&&n.apply(e[o++],r)!==!1;);else if(l){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;a>o&&n.call(e[o],o,e[o++])!==!1;);return e},trim:F?function(e){return null==e?"":F.call(e)}:function(e){return null==e?"":(e+"").replace(d,"").replace(p,"")},makeArray:function(e,t){var n=t||[];if(null!=e){var r=s.type(e);null==e.length||"string"===r||"function"===r||"regexp"===r||s.isWindow(e)?L.call(n,e):s.merge(n,e)}return n},inArray:function(e,t,n){var r;if(t){if(D)return D.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=e.length,i=0;if("number"==typeof n.length)for(var o=n.length;o>i;i++)e[r++]=n[i];else for(;n[i]!==t;)e[r++]=n[i++];return e.length=r,e},grep:function(e,t,n){var r,i=[];n=!!n;for(var o=0,a=e.length;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,n,r){var i,o,a=[],l=0,u=e.length,c=e instanceof s||u!==t&&"number"==typeof u&&(u>0&&e[0]&&e[u-1]||0===u||s.isArray(e));if(c)for(;u>l;l++)i=n(e[l],l,r),null!=i&&(a[a.length]=i);else for(o in e)i=n(e[o],o,r),null!=i&&(a[a.length]=i);return a.concat.apply([],a)},guid:1,proxy:function(e,n){if("string"==typeof n){var r=e[n];n=e,e=r}if(!s.isFunction(e))return t;var i=j.call(arguments,2),o=function(){return e.apply(n,i.concat(j.call(arguments)))};return o.guid=e.guid=e.guid||o.guid||s.guid++,o},access:function(e,n,r,i,o,a){var l=e.length;if("object"==typeof n){for(var u in n)s.access(e,u,n[u],i,o,r);return e}if(r!==t){i=!a&&i&&s.isFunction(r);for(var c=0;l>c;c++)o(e[c],n,i?r.call(e[c],c,o(e[c],n)):r,a);return e}return l?o(e[0],n):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=b.exec(e)||x.exec(e)||T.exec(e)||e.indexOf("compatible")<0&&w.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}s.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,r){return r&&r instanceof s&&!(r instanceof e)&&(r=e(r)),s.fn.init.call(this,n,r,t)},e.fn.init.prototype=e.fn;var t=e(M);return e},browser:{}}),s.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){_["[object "+t+"]"]=t.toLowerCase()}),i=s.uaMatch(k),i.browser&&(s.browser[i.browser]=!0,s.browser.version=i.version),s.browser.webkit&&(s.browser.safari=!0),f.test(" ")&&(d=/^[\s\xA0]+/,p=/[\s\xA0]+$/),r=s(M),M.addEventListener?a=function(){M.removeEventListener("DOMContentLoaded",a,!1),s.ready()}:M.attachEvent&&(a=function(){"complete"===M.readyState&&(M.detachEvent("onreadystatechange",a),s.ready())}),s}(),B={};H.Callbacks=function(e){e=e?B[e]||D(e):{};var n,r,i,o,a,s=[],l=[],u=function(t){var n,r,i,o;for(n=0,r=t.length;r>n;n++)i=t[n],o=H.type(i),"array"===o?u(i):"function"===o&&(!e.unique||!f.has(i))&&s.push(i)},c=function(t,u){for(u=u||[],n=!e.memory||[t,u],r=!0,a=i||0,i=0,o=s.length;s&&o>a;a++)if(s[a].apply(t,u)===!1&&e.stopOnFalse){n=!0;break}r=!1,s&&(e.once?n===!0?f.disable():s=[]:l&&l.length&&(n=l.shift(),f.fireWith(n[0],n[1])))},f={add:function(){if(s){var e=s.length;u(arguments),r?o=s.length:n&&n!==!0&&(i=e,c(n[0],n[1]))}return this},remove:function(){if(s)for(var t=arguments,n=0,i=t.length;i>n;n++)for(var l=0;l<s.length&&(t[n]!==s[l]||(r&&o>=l&&(o--,a>=l&&a--),s.splice(l--,1),!e.unique));l++);return this},has:function(e){if(s)for(var t=0,n=s.length;n>t;t++)if(e===s[t])return!0;return!1},empty:function(){return s=[],this},disable:function(){return s=l=n=t,this},disabled:function(){return!s},lock:function(){return l=t,(!n||n===!0)&&f.disable(),this},locked:function(){return!l},fireWith:function(t,i){return l&&(r?e.once||l.push([t,i]):(!e.once||!n)&&c(t,i)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!n}};return f};var P=[].slice;H.extend({Deferred:function(e){var t,n=H.Callbacks("once memory"),r=H.Callbacks("once memory"),i=H.Callbacks("memory"),o="pending",a={resolve:n,reject:r,notify:i},s={done:n.add,fail:r.add,progress:i.add,state:function(){return o},isResolved:n.fired,isRejected:r.fired,then:function(e,t,n){return l.done(e).fail(t).progress(n),this},always:function(){return l.done.apply(l,arguments).fail.apply(l,arguments),this},pipe:function(e,t,n){return H.Deferred(function(r){H.each({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n,i=t[0],o=t[1];l[e](H.isFunction(i)?function(){n=i.apply(this,arguments),n&&H.isFunction(n.promise)?n.promise().then(r.resolve,r.reject,r.notify):r[o+"With"](this===l?r:this,[n])}:r[o])})}).promise()},promise:function(e){if(null==e)e=s;else for(var t in s)e[t]=s[t];return e}},l=s.promise({});for(t in a)l[t]=a[t].fire,l[t+"With"]=a[t].fireWith;return l.done(function(){o="resolved"},r.disable,i.lock).fail(function(){o="rejected"},n.disable,i.lock),e&&e.call(l,l),l},when:function(e){function t(e){return function(t){a[e]=arguments.length>1?P.call(arguments,0):t,l.notifyWith(u,a)}}function n(e){return function(t){r[e]=arguments.length>1?P.call(arguments,0):t,--s||l.resolveWith(l,r)}}var r=P.call(arguments,0),i=0,o=r.length,a=Array(o),s=o,l=1>=o&&e&&H.isFunction(e.promise)?e:H.Deferred(),u=l.promise();if(o>1){for(;o>i;i++)r[i]&&r[i].promise&&H.isFunction(r[i].promise)?r[i].promise().then(n(i),l.reject,t(i)):--s;s||l.resolveWith(l,r)}else l!==e&&l.resolveWith(l,o?[e]:[]);return u}}),H.support=function(){{var t,n,r,i,o,a,s,l,u,c,f,d,p=M.createElement("div");M.documentElement}if(p.setAttribute("className","t"),p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0],!n||!n.length||!r)return{};i=M.createElement("select"),o=i.appendChild(M.createElement("option")),a=p.getElementsByTagName("input")[0],t={leadingWhitespace:3===p.firstChild.nodeType,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.55/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:"on"===a.value,optSelected:o.selected,getSetAttribute:"t"!==p.className,enctype:!!M.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==M.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,i.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(h){t.deleteExpando=!1}if(!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick")),a=M.createElement("input"),a.value="t",a.setAttribute("type","radio"),t.radioValue="t"===a.value,a.setAttribute("checked","checked"),p.appendChild(a),l=M.createDocumentFragment(),l.appendChild(p.lastChild),t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=a.checked,l.removeChild(a),l.appendChild(p),p.innerHTML="",e.getComputedStyle&&(s=M.createElement("div"),s.style.width="0",s.style.marginRight="0",p.style.width="2px",p.appendChild(s),t.reliableMarginRight=0===(parseInt((e.getComputedStyle(s,null)||{marginRight:0}).marginRight,10)||0)),p.attachEvent)for(f in{submit:1,change:1,focusin:1})c="on"+f,d=c in p,d||(p.setAttribute(c,"return;"),d="function"==typeof p[c]),t[f+"Bubbles"]=d;return l.removeChild(p),l=i=o=s=p=a=null,H(function(){var e,n,r,i,o,a,s,l,c,f,h=M.getElementsByTagName("body")[0];!h||(a=1,s="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",l="visibility:hidden;border:0;",c="style='"+s+"border:5px solid #000;padding:0;'",f="<div "+c+"><div></div></div><table "+c+" cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",e=M.createElement("div"),e.style.cssText=l+"width:0;height:0;position:static;top:0;margin-top:"+a+"px",h.insertBefore(e,h.firstChild),p=M.createElement("div"),e.appendChild(p),p.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",u=p.getElementsByTagName("td"),d=0===u[0].offsetHeight,u[0].style.display="",u[1].style.display="none",t.reliableHiddenOffsets=d&&0===u[0].offsetHeight,p.innerHTML="",p.style.width=p.style.paddingLeft="1px",H.boxModel=t.boxModel=2===p.offsetWidth,"undefined"!=typeof p.style.zoom&&(p.style.display="inline",p.style.zoom=1,t.inlineBlockNeedsLayout=2===p.offsetWidth,p.style.display="",p.innerHTML="<div style='width:4px;'></div>",t.shrinkWrapBlocks=2!==p.offsetWidth),p.style.cssText=s+l,p.innerHTML=f,n=p.firstChild,r=n.firstChild,i=n.nextSibling.firstChild.firstChild,o={doesNotAddBorder:5!==r.offsetTop,doesAddBorderForTableAndCells:5===i.offsetTop},r.style.position="fixed",r.style.top="20px",o.fixedPosition=20===r.offsetTop||15===r.offsetTop,r.style.position=r.style.top="",n.style.overflow="hidden",n.style.position="relative",o.subtractsBorderForOverflowNotVisible=-5===r.offsetTop,o.doesNotIncludeMarginInBodyOffset=h.offsetTop!==a,h.removeChild(e),p=e=null,H.extend(t,o))}),t}();var q=/^(?:\{.*\}|\[.*\])$/,W=/([A-Z])/g;H.extend({cache:{},uuid:0,expando:"jQuery"+(H.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?H.cache[e[H.expando]]:e[H.expando],!!e&&!j(e)},data:function(e,n,r,i){if(H.acceptData(e)){var o,a,s,l=H.expando,u="string"==typeof n,c=e.nodeType,f=c?H.cache:e,d=c?e[l]:e[l]&&l,p="events"===n;if(!(d&&f[d]&&(p||i||f[d].data)||!u||r!==t))return;return d||(c?e[l]=d=++H.uuid:d=l),f[d]||(f[d]={},c||(f[d].toJSON=H.noop)),("object"==typeof n||"function"==typeof n)&&(i?f[d]=H.extend(f[d],n):f[d].data=H.extend(f[d].data,n)),o=a=f[d],i||(a.data||(a.data={}),a=a.data),r!==t&&(a[H.camelCase(n)]=r),p&&!a[n]?o.events:(u?(s=a[n],null==s&&(s=a[H.camelCase(n)])):s=a,s)}},removeData:function(e,t,n){if(H.acceptData(e)){var r,i,o,a=H.expando,s=e.nodeType,l=s?H.cache:e,u=s?e[a]:a;if(!l[u])return;if(t&&(r=n?l[u]:l[u].data)){H.isArray(t)||(t in r?t=[t]:(t=H.camelCase(t),t=t in r?[t]:t.split(" ")));for(i=0,o=t.length;o>i;i++)delete r[t[i]];if(!(n?j:H.isEmptyObject)(r))return}if(!n&&(delete l[u].data,!j(l[u])))return;H.support.deleteExpando||!l.setInterval?delete l[u]:l[u]=null,s&&(H.support.deleteExpando?delete e[a]:e.removeAttribute?e.removeAttribute(a):e[a]=null)}},_data:function(e,t,n){return H.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=H.noData[e.nodeName.toLowerCase()];if(t)return t!==!0&&e.getAttribute("classid")===t}return!0}}),H.fn.extend({data:function(e,n){var r,i,o,a=null;if("undefined"==typeof e){if(this.length&&(a=H.data(this[0]),1===this[0].nodeType&&!H._data(this[0],"parsedAttrs"))){i=this[0].attributes;for(var s=0,l=i.length;l>s;s++)o=i[s].name,0===o.indexOf("data-")&&(o=H.camelCase(o.substring(5)),F(this[0],o,a[o]));H._data(this[0],"parsedAttrs",!0)}return a}return"object"==typeof e?this.each(function(){H.data(this,e)}):(r=e.split("."),r[1]=r[1]?"."+r[1]:"",n===t?(a=this.triggerHandler("getData"+r[1]+"!",[r[0]]),a===t&&this.length&&(a=H.data(this[0],e),a=F(this[0],e,a)),a===t&&r[1]?this.data(r[0]):a):this.each(function(){var t=H(this),i=[r[0],n];t.triggerHandler("setData"+r[1]+"!",i),H.data(this,e,n),t.triggerHandler("changeData"+r[1]+"!",i)}))},removeData:function(e){return this.each(function(){H.removeData(this,e)})}}),H.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",H._data(e,t,(H._data(e,t)||0)+1))},_unmark:function(e,t,n){if(e!==!0&&(n=t,t=e,e=!1),t){n=n||"fx";var r=n+"mark",i=e?0:(H._data(t,r)||1)-1;i?H._data(t,r,i):(H.removeData(t,r,!0),L(t,n,"mark"))}},queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=H._data(e,t),n&&(!r||H.isArray(n)?r=H._data(e,t,H.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=H.queue(e,t),r=n.shift(),i={};"inprogress"===r&&(r=n.shift()),r&&("fx"===t&&n.unshift("inprogress"),H._data(e,t+".run",i),r.call(e,function(){H.dequeue(e,t)},i)),n.length||(H.removeData(e,t+"queue "+t+".run",!0),L(e,t,"queue"))}}),H.fn.extend({queue:function(e,n){return"string"!=typeof e&&(n=e,e="fx"),n===t?H.queue(this[0],e):this.each(function(){var t=H.queue(this,e,n);"fx"===e&&"inprogress"!==t[0]&&H.dequeue(this,e)})},dequeue:function(e){return this.each(function(){H.dequeue(this,e)})},delay:function(e,t){return e=H.fx?H.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function r(){--l||o.resolveWith(a,[a])}"string"!=typeof e&&(n=e,e=t),e=e||"fx";for(var i,o=H.Deferred(),a=this,s=a.length,l=1,u=e+"defer",c=e+"queue",f=e+"mark";s--;)(i=H.data(a[s],u,t,!0)||(H.data(a[s],c,t,!0)||H.data(a[s],f,t,!0))&&H.data(a[s],u,H.Callbacks("once memory"),!0))&&(l++,i.add(r));return r(),o.promise()}});var I,$,R,X=/[\n\t\r]/g,z=/\s+/,V=/\r/g,U=/^(?:button|input)$/i,G=/^(?:button|input|object|select|textarea)$/i,J=/^a(?:rea)?$/i,Y=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Q=H.support.getSetAttribute;H.fn.extend({attr:function(e,t){return H.access(this,e,t,!0,H.attr)},removeAttr:function(e){return this.each(function(){H.removeAttr(this,e)})},prop:function(e,t){return H.access(this,e,t,!0,H.prop)},removeProp:function(e){return e=H.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a,s;if(H.isFunction(e))return this.each(function(t){H(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(z),n=0,r=this.length;r>n;n++)if(i=this[n],1===i.nodeType)if(i.className||1!==t.length){for(o=" "+i.className+" ",a=0,s=t.length;s>a;a++)~o.indexOf(" "+t[a]+" ")||(o+=t[a]+" ");i.className=H.trim(o)}else i.className=e;return this},removeClass:function(e){var n,r,i,o,a,s,l;if(H.isFunction(e))return this.each(function(t){H(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(n=(e||"").split(z),r=0,i=this.length;i>r;r++)if(o=this[r],1===o.nodeType&&o.className)if(e){for(a=(" "+o.className+" ").replace(X," "),s=0,l=n.length;l>s;s++)a=a.replace(" "+n[s]+" "," ");o.className=H.trim(a)}else o.className="";return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return this.each(H.isFunction(e)?function(n){H(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var i,o=0,a=H(this),s=t,l=e.split(z);i=l[o++];)s=r?s:!a.hasClass(i),a[s?"addClass":"removeClass"](i);else("undefined"===n||"boolean"===n)&&(this.className&&H._data(this,"__className__",this.className),this.className=this.className||e===!1?"":H._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,r,i,o=this[0];return arguments.length?(i=H.isFunction(e),this.each(function(r){var o,a=H(this);1===this.nodeType&&(o=i?e.call(this,r,a.val()):e,null==o?o="":"number"==typeof o?o+="":H.isArray(o)&&(o=H.map(o,function(e){return null==e?"":e+""})),n=H.valHooks[this.nodeName.toLowerCase()]||H.valHooks[this.type],n&&"set"in n&&n.set(this,o,"value")!==t||(this.value=o))})):o?(n=H.valHooks[o.nodeName.toLowerCase()]||H.valHooks[o.type],n&&"get"in n&&(r=n.get(o,"value"))!==t?r:(r=o.value,"string"==typeof r?r.replace(V,""):null==r?"":r)):void 0}}),H.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,o=e.selectedIndex,a=[],s=e.options,l="select-one"===e.type;if(0>o)return null;for(n=l?o:0,r=l?o+1:s.length;r>n;n++)if(i=s[n],!(!i.selected||(H.support.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&H.nodeName(i.parentNode,"optgroup"))){if(t=H(i).val(),l)return t;a.push(t)}return l&&!a.length&&s.length?H(s[o]).val():a},set:function(e,t){var n=H.makeArray(t);return H(e).find("option").each(function(){this.selected=H.inArray(H(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,r,i){var o,a,s,l=e.nodeType;return e&&3!==l&&8!==l&&2!==l?i&&n in H.attrFn?H(e)[n](r):"undefined"==typeof e.getAttribute?H.prop(e,n,r):(s=1!==l||!H.isXMLDoc(e),s&&(n=n.toLowerCase(),a=H.attrHooks[n]||(Y.test(n)?$:I)),r!==t?null===r?void H.removeAttr(e,n):a&&"set"in a&&s&&(o=a.set(e,r,n))!==t?o:(e.setAttribute(n,""+r),r):a&&"get"in a&&s&&null!==(o=a.get(e,n))?o:(o=e.getAttribute(n),null===o?t:o)):void 0},removeAttr:function(e,t){var n,r,i,o,a=0;if(t&&1===e.nodeType)for(r=t.toLowerCase().split(z),o=r.length;o>a;a++)i=r[a],i&&(n=H.propFix[i]||i,H.attr(e,i,""),e.removeAttribute(Q?i:n),Y.test(i)&&n in e&&(e[n]=!1))},attrHooks:{type:{set:function(e,t){if(U.test(e.nodeName)&&e.parentNode)H.error("type property can't be changed");else if(!H.support.radioValue&&"radio"===t&&H.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return I&&H.nodeName(e,"button")?I.get(e,t):t in e?e.value:null},set:function(e,t,n){return I&&H.nodeName(e,"button")?I.set(e,t,n):void(e.value=t)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,a,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?(a=1!==s||!H.isXMLDoc(e),a&&(n=H.propFix[n]||n,o=H.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]):void 0},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):G.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:t}}}}),H.attrHooks.tabindex=H.propHooks.tabIndex,$={get:function(e,n){var r,i=H.prop(e,n);return i===!0||"boolean"!=typeof i&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?H.removeAttr(e,n):(r=H.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},Q||(R={name:!0,id:!0},I=H.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(R[n]?""!==r.nodeValue:r.specified)?r.nodeValue:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=M.createAttribute(n),e.setAttributeNode(r)),r.nodeValue=t+""}},H.attrHooks.tabindex.set=I.set,H.each(["width","height"],function(e,t){H.attrHooks[t]=H.extend(H.attrHooks[t],{set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}})}),H.attrHooks.contenteditable={get:I.get,set:function(e,t,n){""===t&&(t="false"),I.set(e,t,n)}}),H.support.hrefNormalized||H.each(["href","src","width","height"],function(e,n){H.attrHooks[n]=H.extend(H.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null===r?t:r}})}),H.support.style||(H.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),H.support.optSelected||(H.propHooks.selected=H.extend(H.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),H.support.enctype||(H.propFix.enctype="encoding"),H.support.checkOn||H.each(["radio","checkbox"],function(){H.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),H.each(["radio","checkbox"],function(){H.valHooks[this]=H.extend(H.valHooks[this],{set:function(e,t){return H.isArray(t)?e.checked=H.inArray(H(e).val(),t)>=0:void 0}})});var K=/^(?:textarea|input|select)$/i,Z=/^([^\.]*)?(?:\.(.+))?$/,et=/\bhover(\.\S+)?\b/,tt=/^key/,nt=/^(?:mouse|contextmenu)|click/,rt=/^(?:focusinfocus|focusoutblur)$/,it=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,ot=function(e){var t=it.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},at=function(e,t){var n=e.attributes||{};return!(t[1]&&e.nodeName.toLowerCase()!==t[1]||t[2]&&(n.id||{}).value!==t[2]||t[3]&&!t[3].test((n["class"]||{}).value))},st=function(e){return H.event.special.hover?e:e.replace(et,"mouseenter$1 mouseleave$1")
};H.event={add:function(e,n,r,i,o){var a,s,l,u,c,f,d,p,h,m,g;if(3!==e.nodeType&&8!==e.nodeType&&n&&r&&(a=H._data(e))){for(r.handler&&(h=r,r=h.handler),r.guid||(r.guid=H.guid++),l=a.events,l||(a.events=l={}),s=a.handle,s||(a.handle=s=function(e){return"undefined"==typeof H||e&&H.event.triggered===e.type?t:H.event.dispatch.apply(s.elem,arguments)},s.elem=e),n=H.trim(st(n)).split(" "),u=0;u<n.length;u++)c=Z.exec(n[u])||[],f=c[1],d=(c[2]||"").split(".").sort(),g=H.event.special[f]||{},f=(o?g.delegateType:g.bindType)||f,g=H.event.special[f]||{},p=H.extend({type:f,origType:c[1],data:i,handler:r,guid:r.guid,selector:o,quick:ot(o),namespace:d.join(".")},h),m=l[f],m||(m=l[f]=[],m.delegateCount=0,g.setup&&g.setup.call(e,i,d,s)!==!1||(e.addEventListener?e.addEventListener(f,s,!1):e.attachEvent&&e.attachEvent("on"+f,s))),g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?m.splice(m.delegateCount++,0,p):m.push(p),H.event.global[f]=!0;e=null}},global:{},remove:function(e,t,n,r,i){var o,a,s,l,u,c,f,d,p,h,m,g,y=H.hasData(e)&&H._data(e);if(y&&(d=y.events)){for(t=H.trim(st(t||"")).split(" "),o=0;o<t.length;o++)if(a=Z.exec(t[o])||[],s=l=a[1],u=a[2],s){for(p=H.event.special[s]||{},s=(r?p.delegateType:p.bindType)||s,m=d[s]||[],c=m.length,u=u?new RegExp("(^|\\.)"+u.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,f=0;f<m.length;f++)g=m[f],!(!i&&l!==g.origType||n&&n.guid!==g.guid||u&&!u.test(g.namespace)||r&&r!==g.selector&&("**"!==r||!g.selector)||(m.splice(f--,1),g.selector&&m.delegateCount--,!p.remove||!p.remove.call(e,g)));0===m.length&&c!==m.length&&((!p.teardown||p.teardown.call(e,u)===!1)&&H.removeEvent(e,s,y.handle),delete d[s])}else for(s in d)H.event.remove(e,s+t[o],n,r,!0);H.isEmptyObject(d)&&(h=y.handle,h&&(h.elem=null),H.removeData(e,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,o){if(!i||3!==i.nodeType&&8!==i.nodeType){var a,s,l,u,c,f,d,p,h,m,g=n.type||n,y=[];if(rt.test(g+H.event.triggered))return;if(g.indexOf("!")>=0&&(g=g.slice(0,-1),s=!0),g.indexOf(".")>=0&&(y=g.split("."),g=y.shift(),y.sort()),(!i||H.event.customEvent[g])&&!H.event.global[g])return;if(n="object"==typeof n?n[H.expando]?n:new H.Event(g,n):new H.Event(g),n.type=g,n.isTrigger=!0,n.exclusive=s,n.namespace=y.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,f=g.indexOf(":")<0?"on"+g:"",!i){a=H.cache;for(l in a)a[l].events&&a[l].events[g]&&H.event.trigger(n,r,a[l].handle.elem,!0);return}if(n.result=t,n.target||(n.target=i),r=null!=r?H.makeArray(r):[],r.unshift(n),d=H.event.special[g]||{},d.trigger&&d.trigger.apply(i,r)===!1)return;if(h=[[i,d.bindType||g]],!o&&!d.noBubble&&!H.isWindow(i)){for(m=d.delegateType||g,u=rt.test(m+g)?i:i.parentNode,c=null;u;u=u.parentNode)h.push([u,m]),c=u;c&&c===i.ownerDocument&&h.push([c.defaultView||c.parentWindow||e,m])}for(l=0;l<h.length&&!n.isPropagationStopped();l++)u=h[l][0],n.type=h[l][1],p=(H._data(u,"events")||{})[n.type]&&H._data(u,"handle"),p&&p.apply(u,r),p=f&&u[f],p&&H.acceptData(u)&&p.apply(u,r)===!1&&n.preventDefault();return n.type=g,!(o||n.isDefaultPrevented()||d._default&&d._default.apply(i.ownerDocument,r)!==!1||"click"===g&&H.nodeName(i,"a")||!H.acceptData(i)||!f||!i[g]||("focus"===g||"blur"===g)&&0===n.target.offsetWidth||H.isWindow(i)||(c=i[f],c&&(i[f]=null),H.event.triggered=g,i[g](),H.event.triggered=t,!c||!(i[f]=c))),n.result}},dispatch:function(n){n=H.event.fix(n||e.event);var r,i,o,a,s,l,u,c,f,d,p=(H._data(this,"events")||{})[n.type]||[],h=p.delegateCount,m=[].slice.call(arguments,0),g=!n.exclusive&&!n.namespace,y=[];if(m[0]=n,n.delegateTarget=this,h&&!n.target.disabled&&(!n.button||"click"!==n.type))for(a=H(this),a.context=this.ownerDocument||this,o=n.target;o!=this;o=o.parentNode||this){for(l={},c=[],a[0]=o,r=0;h>r;r++)f=p[r],d=f.selector,l[d]===t&&(l[d]=f.quick?at(o,f.quick):a.is(d)),l[d]&&c.push(f);c.length&&y.push({elem:o,matches:c})}for(p.length>h&&y.push({elem:this,matches:p.slice(h)}),r=0;r<y.length&&!n.isPropagationStopped();r++)for(u=y[r],n.currentTarget=u.elem,i=0;i<u.matches.length&&!n.isImmediatePropagationStopped();i++)f=u.matches[i],(g||!n.namespace&&!f.namespace||n.namespace_re&&n.namespace_re.test(f.namespace))&&(n.data=f.data,n.handleObj=f,s=((H.event.special[f.origType]||{}).handle||f.handler).apply(u.elem,m),s!==t&&(n.result=s,s===!1&&(n.preventDefault(),n.stopPropagation())));return n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,a=n.button,s=n.fromElement;return null==e.pageX&&null!=n.clientX&&(r=e.target.ownerDocument||M,i=r.documentElement,o=r.body,e.pageX=n.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?n.toElement:s),!e.which&&a!==t&&(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[H.expando])return e;var n,r,i=e,o=H.event.fixHooks[e.type]||{},a=o.props?this.props.concat(o.props):this.props;for(e=H.Event(i),n=a.length;n;)r=a[--n],e[r]=i[r];return e.target||(e.target=i.srcElement||M),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),o.filter?o.filter(e,i):e},special:{ready:{setup:H.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){H.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=H.extend(new H.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?H.event.trigger(i,null,t):H.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},H.event.handle=H.event.dispatch,H.removeEvent=M.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},H.Event=function(e,t){return this instanceof H.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?S:A):this.type=e,t&&H.extend(this,t),this.timeStamp=e&&e.timeStamp||H.now(),this[H.expando]=!0,void 0):new H.Event(e,t)},H.Event.prototype={preventDefault:function(){this.isDefaultPrevented=S;var e=this.originalEvent;!e||(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=S;var e=this.originalEvent;!e||(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=S,this.stopPropagation()},isDefaultPrevented:A,isPropagationStopped:A,isImmediatePropagationStopped:A},H.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){H.event.special[e]={delegateType:t,bindType:t,handle:function(e){{var n,r=this,i=e.relatedTarget,o=e.handleObj;o.selector}return(!i||i!==r&&!H.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),H.support.submitBubbles||(H.event.special.submit={setup:function(){return H.nodeName(this,"form")?!1:void H.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=H.nodeName(n,"input")||H.nodeName(n,"button")?n.form:t;r&&!r._submit_attached&&(H.event.add(r,"submit._submit",function(e){this.parentNode&&!e.isTrigger&&H.event.simulate("submit",this.parentNode,e,!0)}),r._submit_attached=!0)})},teardown:function(){return H.nodeName(this,"form")?!1:void H.event.remove(this,"._submit")}}),H.support.changeBubbles||(H.event.special.change={setup:function(){return K.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(H.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),H.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,H.event.simulate("change",this,e,!0))})),!1):void H.event.add(this,"beforeactivate._change",function(e){var t=e.target;K.test(t.nodeName)&&!t._change_attached&&(H.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&H.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return H.event.remove(this,"._change"),K.test(this.nodeName)}}),H.support.focusinBubbles||H.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){H.event.simulate(t,e.target,H.event.fix(e),!0)};H.event.special[t]={setup:function(){0===n++&&M.addEventListener(e,r,!0)},teardown:function(){0===--n&&M.removeEventListener(e,r,!0)}}}),H.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=n,n=t);for(s in e)this.on(s,n,r,e[s],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=A;else if(!i)return this;return 1===o&&(a=i,i=function(e){return H().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=H.guid++)),this.each(function(){H.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on.call(this,e,t,n,r,1)},off:function(e,n,r){if(e&&e.preventDefault&&e.handleObj){var i=e.handleObj;return H(e.delegateTarget).off(i.namespace?i.type+"."+i.namespace:i.type,i.selector,i.handler),this}if("object"==typeof e){for(var o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=A),this.each(function(){H.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return H(this.context).on(e,this.selector,t,n),this},die:function(e,t){return H(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1==arguments.length?this.off(e,"**"):this.off(t,e,n)},trigger:function(e,t){return this.each(function(){H.event.trigger(e,t,this)})},triggerHandler:function(e,t){return this[0]?H.event.trigger(e,t,this[0],!0):void 0},toggle:function(e){var t=arguments,n=e.guid||H.guid++,r=0,i=function(n){var i=(H._data(this,"lastToggle"+e.guid)||0)%r;return H._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};for(i.guid=n;r<t.length;)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),H.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){H.fn[t]=function(e,n){return null==n&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},H.attrFn&&(H.attrFn[t]=!0),tt.test(t)&&(H.event.fixHooks[t]=H.event.keyHooks),nt.test(t)&&(H.event.fixHooks[t]=H.event.mouseHooks)}),function(){function e(e,t,n,r,o,a){for(var s=0,l=r.length;l>s;s++){var u=r[s];if(u){var c=!1;for(u=u[e];u;){if(u[i]===n){c=r[u.sizset];break}if(1===u.nodeType)if(a||(u[i]=n,u.sizset=s),"string"!=typeof t){if(u===t){c=!0;break}}else if(d.filter(t,[u]).length>0){c=u;break}u=u[e]}r[s]=c}}}function n(e,t,n,r,o,a){for(var s=0,l=r.length;l>s;s++){var u=r[s];if(u){var c=!1;for(u=u[e];u;){if(u[i]===n){c=r[u.sizset];break}if(1===u.nodeType&&!a&&(u[i]=n,u.sizset=s),u.nodeName.toLowerCase()===t){c=u;break}u=u[e]}r[s]=c}}}var r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,i="sizcache"+(Math.random()+"").replace(".",""),o=0,a=Object.prototype.toString,s=!1,l=!0,u=/\\/g,c=/\r\n/g,f=/\W/;[0,0].sort(function(){return l=!1,0});var d=function(e,t,n,i){n=n||[],t=t||M;var o=t;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return n;var s,l,u,c,f,p,g,y,b=!0,x=d.isXML(t),T=[],N=e;do if(r.exec(""),s=r.exec(N),s&&(N=s[3],T.push(s[1]),s[2])){c=s[3];break}while(s);if(T.length>1&&m.exec(e))if(2===T.length&&h.relative[T[0]])l=w(T[0]+T[1],t,i);else for(l=h.relative[T[0]]?[t]:d(T.shift(),t);T.length;)e=T.shift(),h.relative[e]&&(e+=T.shift()),l=w(e,l,i);else if(!i&&T.length>1&&9===t.nodeType&&!x&&h.match.ID.test(T[0])&&!h.match.ID.test(T[T.length-1])&&(f=d.find(T.shift(),t,x),t=f.expr?d.filter(f.expr,f.set)[0]:f.set[0]),t)for(f=i?{expr:T.pop(),set:v(i)}:d.find(T.pop(),1!==T.length||"~"!==T[0]&&"+"!==T[0]||!t.parentNode?t:t.parentNode,x),l=f.expr?d.filter(f.expr,f.set):f.set,T.length>0?u=v(l):b=!1;T.length;)p=T.pop(),g=p,h.relative[p]?g=T.pop():p="",null==g&&(g=t),h.relative[p](u,g,x);else u=T=[];if(u||(u=l),u||d.error(p||e),"[object Array]"===a.call(u))if(b)if(t&&1===t.nodeType)for(y=0;null!=u[y];y++)u[y]&&(u[y]===!0||1===u[y].nodeType&&d.contains(t,u[y]))&&n.push(l[y]);else for(y=0;null!=u[y];y++)u[y]&&1===u[y].nodeType&&n.push(l[y]);else n.push.apply(n,u);else v(u,n);return c&&(d(c,o,n,i),d.uniqueSort(n)),n};d.uniqueSort=function(e){if(x&&(s=l,e.sort(x),s))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},d.matches=function(e,t){return d(e,null,null,t)},d.matchesSelector=function(e,t){return d(t,null,null,[e]).length>0},d.find=function(e,t,n){var r,i,o,a,s,l;if(!e)return[];for(i=0,o=h.order.length;o>i;i++)if(s=h.order[i],(a=h.leftMatch[s].exec(e))&&(l=a[1],a.splice(1,1),"\\"!==l.substr(l.length-1)&&(a[1]=(a[1]||"").replace(u,""),r=h.find[s](a,t,n),null!=r))){e=e.replace(h.match[s],"");break}return r||(r="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName("*"):[]),{set:r,expr:e}},d.filter=function(e,n,r,i){for(var o,a,s,l,u,c,f,p,m,g=e,y=[],v=n,b=n&&n[0]&&d.isXML(n[0]);e&&n.length;){for(s in h.filter)if(null!=(o=h.leftMatch[s].exec(e))&&o[2]){if(c=h.filter[s],f=o[1],a=!1,o.splice(1,1),"\\"===f.substr(f.length-1))continue;if(v===y&&(y=[]),h.preFilter[s])if(o=h.preFilter[s](o,v,r,y,i,b)){if(o===!0)continue}else a=l=!0;if(o)for(p=0;null!=(u=v[p]);p++)u&&(l=c(u,o,p,v),m=i^l,r&&null!=l?m?a=!0:v[p]=!1:m&&(y.push(u),a=!0));if(l!==t){if(r||(v=y),e=e.replace(h.match[s],""),!a)return[];break}}if(e===g){if(null!=a)break;d.error(e)}g=e}return v},d.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var p=d.getText=function(e){var t,n,r=e.nodeType,i="";if(r){if(1===r||9===r){if("string"==typeof e.textContent)return e.textContent;if("string"==typeof e.innerText)return e.innerText.replace(c,"");for(e=e.firstChild;e;e=e.nextSibling)i+=p(e)}else if(3===r||4===r)return e.nodeValue}else for(t=0;n=e[t];t++)8!==n.nodeType&&(i+=p(n));return i},h=d.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n="string"==typeof t,r=n&&!f.test(t),i=n&&!r;r&&(t=t.toLowerCase());for(var o,a=0,s=e.length;s>a;a++)if(o=e[a]){for(;(o=o.previousSibling)&&1!==o.nodeType;);e[a]=i||o&&o.nodeName.toLowerCase()===t?o||!1:o===t}i&&d.filter(t,e,!0)},">":function(e,t){var n,r="string"==typeof t,i=0,o=e.length;if(r&&!f.test(t)){for(t=t.toLowerCase();o>i;i++)if(n=e[i]){var a=n.parentNode;e[i]=a.nodeName.toLowerCase()===t?a:!1}}else{for(;o>i;i++)n=e[i],n&&(e[i]=r?n.parentNode:n.parentNode===t);r&&d.filter(t,e,!0)}},"":function(t,r,i){var a,s=o++,l=e;"string"==typeof r&&!f.test(r)&&(r=r.toLowerCase(),a=r,l=n),l("parentNode",r,s,t,a,i)},"~":function(t,r,i){var a,s=o++,l=e;"string"==typeof r&&!f.test(r)&&(r=r.toLowerCase(),a=r,l=n),l("previousSibling",r,s,t,a,i)}},find:{ID:function(e,t,n){if("undefined"!=typeof t.getElementById&&!n){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if("undefined"!=typeof t.getElementsByName){for(var n=[],r=t.getElementsByName(e[1]),i=0,o=r.length;o>i;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return 0===n.length?null:n}},TAG:function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e[1]):void 0}},preFilter:{CLASS:function(e,t,n,r,i,o){if(e=" "+e[1].replace(u,"")+" ",o)return e;for(var a,s=0;null!=(a=t[s]);s++)a&&(i^(a.className&&(" "+a.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||r.push(a):n&&(t[s]=!1));return!1},ID:function(e){return e[1].replace(u,"")},TAG:function(e){return e[1].replace(u,"").toLowerCase()},CHILD:function(e){if("nth"===e[1]){e[2]||d.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===e[2]&&"2n"||"odd"===e[2]&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&d.error(e[0]);return e[0]=o++,e},ATTR:function(e,t,n,r,i,o){var a=e[1]=e[1].replace(u,"");return!o&&h.attrMap[a]&&(e[1]=h.attrMap[a]),e[4]=(e[4]||e[5]||"").replace(u,""),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,n,i,o){if("not"===e[1]){if(!((r.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var a=d.filter(e[3],t,n,!0^o);return n||i.push.apply(i,a),!1}e[3]=d(e[3],null,null,t)}else if(h.match.POS.test(e[0])||h.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&"hidden"!==e.type},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!d(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return"input"===e.nodeName.toLowerCase()&&"text"===n&&(t===n||null===t)},radio:function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},checkbox:function(e){return"input"===e.nodeName.toLowerCase()&&"checkbox"===e.type},file:function(e){return"input"===e.nodeName.toLowerCase()&&"file"===e.type},password:function(e){return"input"===e.nodeName.toLowerCase()&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"submit"===e.type},image:function(e){return"input"===e.nodeName.toLowerCase()&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],o=h.filters[i];if(o)return o(e,n,t,r);if("contains"===i)return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0;if("not"===i){for(var a=t[3],s=0,l=a.length;l>s;s++)if(a[s]===e)return!1;return!0}d.error(i)},CHILD:function(e,t){var n,r,o,a,s,l,u=t[1],c=e;switch(u){case"only":case"first":for(;c=c.previousSibling;)if(1===c.nodeType)return!1;if("first"===u)return!0;c=e;case"last":for(;c=c.nextSibling;)if(1===c.nodeType)return!1;return!0;case"nth":if(n=t[2],r=t[3],1===n&&0===r)return!0;if(o=t[0],a=e.parentNode,a&&(a[i]!==o||!e.nodeIndex)){for(s=0,c=a.firstChild;c;c=c.nextSibling)1===c.nodeType&&(c.nodeIndex=++s);a[i]=o}return l=e.nodeIndex-r,0===n?0===l:l%n===0&&l/n>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=d.attr?d.attr(e,n):h.attrHandle[n]?h.attrHandle[n](e):null!=e[n]?e[n]:e.getAttribute(n),i=r+"",o=t[2],a=t[4];return null==r?"!="===o:!o&&d.attr?null!=r:"="===o?i===a:"*="===o?i.indexOf(a)>=0:"~="===o?(" "+i+" ").indexOf(a)>=0:a?"!="===o?i!==a:"^="===o?0===i.indexOf(a):"$="===o?i.substr(i.length-a.length)===a:"|="===o?i===a||i.substr(0,a.length+1)===a+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],o=h.setFilters[i];return o?o(e,n,t,r):void 0}}},m=h.match.POS,g=function(e,t){return"\\"+(t-0+1)};for(var y in h.match)h.match[y]=new RegExp(h.match[y].source+/(?![^\[]*\])(?![^\(]*\))/.source),h.leftMatch[y]=new RegExp(/(^(?:.|\r|\n)*?)/.source+h.match[y].source.replace(/\\(\d+)/g,g));var v=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(M.documentElement.childNodes,0)[0].nodeType}catch(b){v=function(e,t){var n=0,r=t||[];if("[object Array]"===a.call(e))Array.prototype.push.apply(r,e);else if("number"==typeof e.length)for(var i=e.length;i>n;n++)r.push(e[n]);else for(;e[n];n++)r.push(e[n]);return r}}var x,T;M.documentElement.compareDocumentPosition?x=function(e,t){return e===t?(s=!0,0):e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1}:(x=function(e,t){if(e===t)return s=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],o=[],a=e.parentNode,l=t.parentNode,u=a;if(a===l)return T(e,t);if(!a)return-1;if(!l)return 1;for(;u;)i.unshift(u),u=u.parentNode;for(u=l;u;)o.unshift(u),u=u.parentNode;n=i.length,r=o.length;for(var c=0;n>c&&r>c;c++)if(i[c]!==o[c])return T(i[c],o[c]);return c===n?T(e,o[c],-1):T(i[c],t,1)},T=function(e,t,n){if(e===t)return n;for(var r=e.nextSibling;r;){if(r===t)return-1;r=r.nextSibling}return 1}),function(){var e=M.createElement("div"),n="script"+(new Date).getTime(),r=M.documentElement;e.innerHTML="<a name='"+n+"'/>",r.insertBefore(e,r.firstChild),M.getElementById(n)&&(h.find.ID=function(e,n,r){if("undefined"!=typeof n.getElementById&&!r){var i=n.getElementById(e[1]);return i?i.id===e[1]||"undefined"!=typeof i.getAttributeNode&&i.getAttributeNode("id").nodeValue===e[1]?[i]:t:[]}},h.filter.ID=function(e,t){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&n&&n.nodeValue===t}),r.removeChild(e),r=e=null}(),function(){var e=M.createElement("div");e.appendChild(M.createComment("")),e.getElementsByTagName("*").length>0&&(h.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var r=[],i=0;n[i];i++)1===n[i].nodeType&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&"undefined"!=typeof e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(h.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),M.querySelectorAll&&function(){var e=d,t=M.createElement("div"),n="__sizzle__";if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){d=function(t,r,i,o){if(r=r||M,!o&&!d.isXML(r)){var a=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(a&&(1===r.nodeType||9===r.nodeType)){if(a[1])return v(r.getElementsByTagName(t),i);if(a[2]&&h.find.CLASS&&r.getElementsByClassName)return v(r.getElementsByClassName(a[2]),i)}if(9===r.nodeType){if("body"===t&&r.body)return v([r.body],i);if(a&&a[3]){var s=r.getElementById(a[3]);if(!s||!s.parentNode)return v([],i);if(s.id===a[3])return v([s],i)}try{return v(r.querySelectorAll(t),i)}catch(l){}}else if(1===r.nodeType&&"object"!==r.nodeName.toLowerCase()){var u=r,c=r.getAttribute("id"),f=c||n,p=r.parentNode,m=/^\s*[+~]/.test(t);c?f=f.replace(/'/g,"\\$&"):r.setAttribute("id",f),m&&p&&(r=r.parentNode);try{if(!m||p)return v(r.querySelectorAll("[id='"+f+"'] "+t),i)}catch(g){}finally{c||u.removeAttribute("id")}}}return e(t,r,i,o)};for(var r in e)d[r]=e[r];t=null}}(),function(){var e=M.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var n=!t.call(M.createElement("div"),"div"),r=!1;try{t.call(M.documentElement,"[test!='']:sizzle")}catch(i){r=!0}d.matchesSelector=function(e,i){if(i=i.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!d.isXML(e))try{if(r||!h.match.PSEUDO.test(i)&&!/!=/.test(i)){var o=t.call(e,i);if(o||!n||e.document&&11!==e.document.nodeType)return o}}catch(a){}return d(i,null,null,[e]).length>0}}}(),function(){var e=M.createElement("div");if(e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length){if(e.lastChild.className="e",1===e.getElementsByClassName("e").length)return;h.order.splice(1,0,"CLASS"),h.find.CLASS=function(e,t,n){return"undefined"==typeof t.getElementsByClassName||n?void 0:t.getElementsByClassName(e[1])},e=null}}(),d.contains=M.documentElement.contains?function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:M.documentElement.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:function(){return!1},d.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?"HTML"!==t.nodeName:!1};var w=function(e,t,n){for(var r,i=[],o="",a=t.nodeType?[t]:t;r=h.match.PSEUDO.exec(e);)o+=r[0],e=e.replace(h.match.PSEUDO,"");e=h.relative[e]?e+"*":e;for(var s=0,l=a.length;l>s;s++)d(e,a[s],i,n);return d.filter(o,i)};d.attr=H.attr,d.selectors.attrMap={},H.find=d,H.expr=d.selectors,H.expr[":"]=H.expr.filters,H.unique=d.uniqueSort,H.text=d.getText,H.isXMLDoc=d.isXML,H.contains=d.contains}();var lt=/Until$/,ut=/^(?:parents|prevUntil|prevAll)/,ct=/,/,ft=/^.[^:#\[\.,]*$/,dt=Array.prototype.slice,pt=H.expr.match.POS,ht={children:!0,contents:!0,next:!0,prev:!0};H.fn.extend({find:function(e){var t,n,r=this;if("string"!=typeof e)return H(e).filter(function(){for(t=0,n=r.length;n>t;t++)if(H.contains(r[t],this))return!0});var i,o,a,s=this.pushStack("","find",e);for(t=0,n=this.length;n>t;t++)if(i=s.length,H.find(e,this[t],s),t>0)for(o=i;o<s.length;o++)for(a=0;i>a;a++)if(s[a]===s[o]){s.splice(o--,1);break}return s},has:function(e){var t=H(e);return this.filter(function(){for(var e=0,n=t.length;n>e;e++)if(H.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(E(this,e,!1),"not",e)},filter:function(e){return this.pushStack(E(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?pt.test(e)?H(e,this.context).index(this[0])>=0:H.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r,i=[],o=this[0];if(H.isArray(e)){for(var a=1;o&&o.ownerDocument&&o!==t;){for(n=0;n<e.length;n++)H(o).is(e[n])&&i.push({selector:e[n],elem:o,level:a});o=o.parentNode,a++}return i}var s=pt.test(e)||"string"!=typeof e?H(e,t||this.context):0;for(n=0,r=this.length;r>n;n++)for(o=this[n];o;){if(s?s.index(o)>-1:H.find.matchesSelector(o,e)){i.push(o);break}if(o=o.parentNode,!o||!o.ownerDocument||o===t||11===o.nodeType)break}return i=i.length>1?H.unique(i):i,this.pushStack(i,"closest",e)},index:function(e){return e?"string"==typeof e?H.inArray(this[0],H(e)):H.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n="string"==typeof e?H(e,t):H.makeArray(e&&e.nodeType?[e]:e),r=H.merge(this.get(),n);return this.pushStack(k(n[0])||k(r[0])?r:H.unique(r))},andSelf:function(){return this.add(this.prevObject)}}),H.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return H.dir(e,"parentNode")},parentsUntil:function(e,t,n){return H.dir(e,"parentNode",n)},next:function(e){return H.nth(e,2,"nextSibling")},prev:function(e){return H.nth(e,2,"previousSibling")},nextAll:function(e){return H.dir(e,"nextSibling")},prevAll:function(e){return H.dir(e,"previousSibling")},nextUntil:function(e,t,n){return H.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return H.dir(e,"previousSibling",n)},siblings:function(e){return H.sibling(e.parentNode.firstChild,e)},children:function(e){return H.sibling(e.firstChild)},contents:function(e){return H.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:H.makeArray(e.childNodes)}},function(e,t){H.fn[e]=function(n,r){var i=H.map(this,t,n);return lt.test(e)||(r=n),r&&"string"==typeof r&&(i=H.filter(r,i)),i=this.length>1&&!ht[e]?H.unique(i):i,(this.length>1||ct.test(r))&&ut.test(e)&&(i=i.reverse()),this.pushStack(i,e,dt.call(arguments).join(","))}}),H.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?H.find.matchesSelector(t[0],e)?[t[0]]:[]:H.find.matches(e,t)},dir:function(e,n,r){for(var i=[],o=e[n];o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!H(o).is(r));)1===o.nodeType&&i.push(o),o=o[n];return i},nth:function(e,t,n){t=t||1;for(var r=0;e&&(1!==e.nodeType||++r!==t);e=e[n]);return e},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var mt="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:\d+|null)"/g,yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,xt=/<tbody/i,Tt=/<|&#?\w+;/,wt=/<(?:script|style)/i,Nt=/<(?:script|object|embed|option|style)/i,Ct=new RegExp("<(?:"+mt+")","i"),Et=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/\/(java|ecma)script/i,St=/^\s*<!(?:\[CDATA\[|\-\-)/,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Lt=C(M);At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,H.support.htmlSerialize||(At._default=[1,"div<div>","</div>"]),H.fn.extend({text:function(e){return H.isFunction(e)?this.each(function(t){var n=H(this);n.text(e.call(this,t,n.text()))}):"object"!=typeof e&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||M).createTextNode(e)):H.text(this)},wrapAll:function(e){if(H.isFunction(e))return this.each(function(t){H(this).wrapAll(e.call(this,t))});if(this[0]){var t=H(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(H.isFunction(e)?function(t){H(this).wrapInner(e.call(this,t))}:function(){var t=H(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=H.isFunction(e);return this.each(function(n){H(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){H.nodeName(this,"body")||H(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=H.clean(arguments);
return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,H.clean(arguments)),e}},remove:function(e,t){for(var n,r=0;null!=(n=this[r]);r++)(!e||H.filter(e,[n]).length)&&(!t&&1===n.nodeType&&(H.cleanData(n.getElementsByTagName("*")),H.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&H.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return H.clone(this,e,t)})},html:function(e){if(e===t)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(gt,""):null;if("string"!=typeof e||wt.test(e)||!H.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])H.isFunction(e)?this.each(function(t){var n=H(this);n.html(e.call(this,t,n.html()))}):this.empty().append(e);else{e=e.replace(vt,"<$1></$2>");try{for(var n=0,r=this.length;r>n;n++)1===this[n].nodeType&&(H.cleanData(this[n].getElementsByTagName("*")),this[n].innerHTML=e)}catch(i){this.empty().append(e)}}return this},replaceWith:function(e){return this[0]&&this[0].parentNode?H.isFunction(e)?this.each(function(t){var n=H(this),r=n.html();n.replaceWith(e.call(this,t,r))}):("string"!=typeof e&&(e=H(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;H(this).remove(),t?H(t).before(e):H(n).append(e)})):this.length?this.pushStack(H(H.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){var i,o,a,s,l=e[0],u=[];if(!H.support.checkClone&&3===arguments.length&&"string"==typeof l&&Et.test(l))return this.each(function(){H(this).domManip(e,n,r,!0)});if(H.isFunction(l))return this.each(function(i){var o=H(this);e[0]=l.call(this,i,n?o.html():t),o.domManip(e,n,r)});if(this[0]){if(s=l&&l.parentNode,i=H.support.parentNode&&s&&11===s.nodeType&&s.childNodes.length===this.length?{fragment:s}:H.buildFragment(e,this,u),a=i.fragment,o=1===a.childNodes.length?a=a.firstChild:a.firstChild,o){n=n&&H.nodeName(o,"tr");for(var c=0,f=this.length,d=f-1;f>c;c++)r.call(n?N(this[c],o):this[c],i.cacheable||f>1&&d>c?H.clone(a,!0,!0):a)}u.length&&H.each(u,g)}return this}}),H.buildFragment=function(e,t,n){var r,i,o,a,s=e[0];return t&&t[0]&&(a=t[0].ownerDocument||t[0]),a.createDocumentFragment||(a=M),1===e.length&&"string"==typeof s&&s.length<512&&a===M&&"<"===s.charAt(0)&&!Nt.test(s)&&(H.support.checkClone||!Et.test(s))&&(H.support.html5Clone||!Ct.test(s))&&(i=!0,o=H.fragments[s],o&&1!==o&&(r=o)),r||(r=a.createDocumentFragment(),H.clean(e,a,r,n)),i&&(H.fragments[s]=o?r:1),{fragment:r,cacheable:i}},H.fragments={},H.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){H.fn[e]=function(n){var r=[],i=H(n),o=1===this.length&&this[0].parentNode;if(o&&11===o.nodeType&&1===o.childNodes.length&&1===i.length)return i[t](this[0]),this;for(var a=0,s=i.length;s>a;a++){var l=(a>0?this.clone(!0):this).get();H(i[a])[t](l),r=r.concat(l)}return this.pushStack(r,e,i.selector)}}),H.extend({clone:function(e,t,n){var r,i,o,a=H.support.html5Clone||!Ct.test("<"+e.nodeName)?e.cloneNode(!0):y(e);if(!(H.support.noCloneEvent&&H.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||H.isXMLDoc(e)))for(T(e,a),r=x(e),i=x(a),o=0;r[o];++o)i[o]&&T(r[o],i[o]);if(t&&(w(e,a),n))for(r=x(e),i=x(a),o=0;r[o];++o)w(r[o],i[o]);return r=i=null,a},clean:function(e,t,n,r){var i;t=t||M,"undefined"==typeof t.createElement&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||M);for(var o,a,s=[],l=0;null!=(a=e[l]);l++)if("number"==typeof a&&(a+=""),a){if("string"==typeof a)if(Tt.test(a)){a=a.replace(vt,"<$1></$2>");var u=(bt.exec(a)||["",""])[1].toLowerCase(),c=At[u]||At._default,f=c[0],d=t.createElement("div");for(t===M?Lt.appendChild(d):C(t).appendChild(d),d.innerHTML=c[1]+a+c[2];f--;)d=d.lastChild;if(!H.support.tbody){var p=xt.test(a),h="table"!==u||p?"<table>"!==c[1]||p?[]:d.childNodes:d.firstChild&&d.firstChild.childNodes;for(o=h.length-1;o>=0;--o)H.nodeName(h[o],"tbody")&&!h[o].childNodes.length&&h[o].parentNode.removeChild(h[o])}!H.support.leadingWhitespace&&yt.test(a)&&d.insertBefore(t.createTextNode(yt.exec(a)[0]),d.firstChild),a=d.childNodes}else a=t.createTextNode(a);var m;if(!H.support.appendChecked)if(a[0]&&"number"==typeof(m=a.length))for(o=0;m>o;o++)v(a[o]);else v(a);a.nodeType?s.push(a):s=H.merge(s,a)}if(n)for(i=function(e){return!e.type||kt.test(e.type)},l=0;s[l];l++)if(!r||!H.nodeName(s[l],"script")||s[l].type&&"text/javascript"!==s[l].type.toLowerCase()){if(1===s[l].nodeType){var g=H.grep(s[l].getElementsByTagName("script"),i);s.splice.apply(s,[l+1,0].concat(g))}n.appendChild(s[l])}else r.push(s[l].parentNode?s[l].parentNode.removeChild(s[l]):s[l]);return s},cleanData:function(e){for(var t,n,r,i=H.cache,o=H.event.special,a=H.support.deleteExpando,s=0;null!=(r=e[s]);s++)if((!r.nodeName||!H.noData[r.nodeName.toLowerCase()])&&(n=r[H.expando])){if(t=i[n],t&&t.events){for(var l in t.events)o[l]?H.event.remove(r,l):H.removeEvent(r,l,t.handle);t.handle&&(t.handle.elem=null)}a?delete r[H.expando]:r.removeAttribute&&r.removeAttribute(H.expando),delete i[n]}}});var jt,Ft,Dt,Mt=/alpha\([^)]*\)/i,Ot=/opacity=([^)]*)/,_t=/([A-Z]|^ms)/g,Ht=/^-?\d+(?:px)?$/i,Bt=/^-?\d/,Pt=/^([\-+])=([\-+.\de]+)/,qt={position:"absolute",visibility:"hidden",display:"block"},Wt=["Left","Right"],It=["Top","Bottom"];H.fn.css=function(e,n){return 2===arguments.length&&n===t?this:H.access(this,e,n,!0,function(e,n,r){return r!==t?H.style(e,n,r):H.css(e,n)})},H.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=jt(e,"opacity","opacity");return""===n?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":H.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s=H.camelCase(n),l=e.style,u=H.cssHooks[s];if(n=H.cssProps[s]||s,r===t)return u&&"get"in u&&(o=u.get(e,!1,i))!==t?o:l[n];if(a=typeof r,"string"===a&&(o=Pt.exec(r))&&(r=+(o[1]+1)*+o[2]+parseFloat(H.css(e,n)),a="number"),null==r||"number"===a&&isNaN(r))return;if("number"===a&&!H.cssNumber[s]&&(r+="px"),!(u&&"set"in u&&(r=u.set(e,r))===t))try{l[n]=r}catch(c){}}},css:function(e,n,r){var i,o;return n=H.camelCase(n),o=H.cssHooks[n],n=H.cssProps[n]||n,"cssFloat"===n&&(n="float"),o&&"get"in o&&(i=o.get(e,!0,r))!==t?i:jt?jt(e,n):void 0},swap:function(e,t,n){var r={};for(var i in t)r[i]=e.style[i],e.style[i]=t[i];n.call(e);for(i in t)e.style[i]=r[i]}}),H.curCSS=H.css,H.each(["height","width"],function(e,t){H.cssHooks[t]={get:function(e,n,r){var i;return n?0!==e.offsetWidth?m(e,t,r):(H.swap(e,qt,function(){i=m(e,t,r)}),i):void 0},set:function(e,t){return Ht.test(t)?(t=parseFloat(t),t>=0?t+"px":void 0):t}}}),H.support.opacity||(H.cssHooks.opacity={get:function(e,t){return Ot.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=H.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,t>=1&&""===H.trim(o.replace(Mt,""))&&(n.removeAttribute("filter"),r&&!r.filter)||(n.filter=Mt.test(o)?o.replace(Mt,i):o+" "+i)}}),H(function(){H.support.reliableMarginRight||(H.cssHooks.marginRight={get:function(e,t){var n;return H.swap(e,{display:"inline-block"},function(){n=t?jt(e,"margin-right","marginRight"):e.style.marginRight}),n}})}),M.defaultView&&M.defaultView.getComputedStyle&&(Ft=function(e,t){var n,r,i;return t=t.replace(_t,"-$1").toLowerCase(),(r=e.ownerDocument.defaultView)&&(i=r.getComputedStyle(e,null))&&(n=i.getPropertyValue(t),""===n&&!H.contains(e.ownerDocument.documentElement,e)&&(n=H.style(e,t))),n}),M.documentElement.currentStyle&&(Dt=function(e,t){var n,r,i,o=e.currentStyle&&e.currentStyle[t],a=e.style;return null===o&&a&&(i=a[t])&&(o=i),!Ht.test(o)&&Bt.test(o)&&(n=a.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),a.left="fontSize"===t?"1em":o||0,o=a.pixelLeft+"px",a.left=n,r&&(e.runtimeStyle.left=r)),""===o?"auto":o}),jt=Ft||Dt,H.expr&&H.expr.filters&&(H.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return 0===t&&0===n||!H.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||H.css(e,"display"))},H.expr.filters.visible=function(e){return!H.expr.filters.hidden(e)});var $t,Rt,Xt=/%20/g,zt=/\[\]$/,Vt=/\r?\n/g,Ut=/#.*$/,Gt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Jt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Yt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Qt=/^(?:GET|HEAD)$/,Kt=/^\/\//,Zt=/\?/,en=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,tn=/^(?:select|textarea)/i,nn=/\s+/,rn=/([?&])_=[^&]*/,on=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,an=H.fn.load,sn={},ln={},un=["*/"]+["*"];try{$t=_.href}catch(cn){$t=M.createElement("a"),$t.href="",$t=$t.href}Rt=on.exec($t.toLowerCase())||[],H.fn.extend({load:function(e,n,r){if("string"!=typeof e&&an)return an.apply(this,arguments);if(!this.length)return this;var i=e.indexOf(" ");if(i>=0){var o=e.slice(i,e.length);e=e.slice(0,i)}var a="GET";n&&(H.isFunction(n)?(r=n,n=t):"object"==typeof n&&(n=H.param(n,H.ajaxSettings.traditional),a="POST"));var s=this;return H.ajax({url:e,type:a,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),s.html(o?H("<div>").append(n.replace(en,"")).find(o):n)),r&&s.each(r,[n,t,e])}}),this},serialize:function(){return H.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?H.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||tn.test(this.nodeName)||Jt.test(this.type))}).map(function(e,t){var n=H(this).val();return null==n?null:H.isArray(n)?H.map(n,function(e){return{name:t.name,value:e.replace(Vt,"\r\n")}}):{name:t.name,value:n.replace(Vt,"\r\n")}}).get()}}),H.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){H.fn[t]=function(e){return this.on(t,e)}}),H.each(["get","post"],function(e,n){H[n]=function(e,r,i,o){return H.isFunction(r)&&(o=o||i,i=r,r=t),H.ajax({type:n,url:e,data:r,success:i,dataType:o})}}),H.extend({getScript:function(e,n){return H.get(e,t,n,"script")},getJSON:function(e,t,n){return H.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?d(e,H.ajaxSettings):(t=e,e=H.ajaxSettings),d(e,t),e},ajaxSettings:{url:$t,isLocal:Yt.test(Rt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":un},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":H.parseJSON,"text xml":H.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:h(sn),ajaxTransport:h(ln),ajax:function(e,n){function r(e,n,r,a){if(2!==N){N=2,l&&clearTimeout(l),s=t,o=a||"",C.readyState=e>0?4:0;var f,p,h,T,w,E=n,k=r?c(m,C,r):t;if(e>=200&&300>e||304===e)if(m.ifModified&&((T=C.getResponseHeader("Last-Modified"))&&(H.lastModified[i]=T),(w=C.getResponseHeader("Etag"))&&(H.etag[i]=w)),304===e)E="notmodified",f=!0;else try{p=u(m,k),E="success",f=!0}catch(S){E="parsererror",h=S}else h=E,(!E||e)&&(E="error",0>e&&(e=0));C.status=e,C.statusText=""+(n||E),f?v.resolveWith(g,[p,E,C]):v.rejectWith(g,[C,E,h]),C.statusCode(x),x=t,d&&y.trigger("ajax"+(f?"Success":"Error"),[C,m,f?p:h]),b.fireWith(g,[C,E]),d&&(y.trigger("ajaxComplete",[C,m]),--H.active||H.event.trigger("ajaxStop"))}}"object"==typeof e&&(n=e,e=t),n=n||{};var i,o,a,s,l,f,d,h,m=H.ajaxSetup({},n),g=m.context||m,y=g!==m&&(g.nodeType||g instanceof H)?H(g):H.event,v=H.Deferred(),b=H.Callbacks("once memory"),x=m.statusCode||{},T={},w={},N=0,C={readyState:0,setRequestHeader:function(e,t){if(!N){var n=e.toLowerCase();e=w[n]=w[n]||e,T[e]=t}return this},getAllResponseHeaders:function(){return 2===N?o:null},getResponseHeader:function(e){var n;if(2===N){if(!a)for(a={};n=Gt.exec(o);)a[n[1].toLowerCase()]=n[2];n=a[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return N||(m.mimeType=e),this},abort:function(e){return e=e||"abort",s&&s.abort(e),r(0,e),this}};if(v.promise(C),C.success=C.done,C.error=C.fail,C.complete=b.add,C.statusCode=function(e){if(e){var t;if(2>N)for(t in e)x[t]=[x[t],e[t]];else t=e[C.status],C.then(t,t)}return this},m.url=((e||m.url)+"").replace(Ut,"").replace(Kt,Rt[1]+"//"),m.dataTypes=H.trim(m.dataType||"*").toLowerCase().split(nn),null==m.crossDomain&&(f=on.exec(m.url.toLowerCase()),m.crossDomain=!(!f||f[1]==Rt[1]&&f[2]==Rt[2]&&(f[3]||("http:"===f[1]?80:443))==(Rt[3]||("http:"===Rt[1]?80:443)))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=H.param(m.data,m.traditional)),p(sn,m,n,C),2===N)return!1;if(d=m.global,m.type=m.type.toUpperCase(),m.hasContent=!Qt.test(m.type),d&&0===H.active++&&H.event.trigger("ajaxStart"),!m.hasContent&&(m.data&&(m.url+=(Zt.test(m.url)?"&":"?")+m.data,delete m.data),i=m.url,m.cache===!1)){var E=H.now(),k=m.url.replace(rn,"$1_="+E);m.url=k+(k===m.url?(Zt.test(m.url)?"&":"?")+"_="+E:"")}(m.data&&m.hasContent&&m.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",m.contentType),m.ifModified&&(i=i||m.url,H.lastModified[i]&&C.setRequestHeader("If-Modified-Since",H.lastModified[i]),H.etag[i]&&C.setRequestHeader("If-None-Match",H.etag[i])),C.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+un+"; q=0.01":""):m.accepts["*"]);for(h in m.headers)C.setRequestHeader(h,m.headers[h]);if(m.beforeSend&&(m.beforeSend.call(g,C,m)===!1||2===N))return C.abort(),!1;for(h in{success:1,error:1,complete:1})C[h](m[h]);if(s=p(ln,m,n,C)){C.readyState=1,d&&y.trigger("ajaxSend",[C,m]),m.async&&m.timeout>0&&(l=setTimeout(function(){C.abort("timeout")},m.timeout));try{N=1,s.send(T,r)}catch(S){if(!(2>N))throw S;r(-1,S)}}else r(-1,"No Transport");return C},param:function(e,n){var r=[],i=function(e,t){t=H.isFunction(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=H.ajaxSettings.traditional),H.isArray(e)||e.jquery&&!H.isPlainObject(e))H.each(e,function(){i(this.name,this.value)});else for(var o in e)f(o,e[o],n,i);return r.join("&").replace(Xt,"+")}}),H.extend({active:0,lastModified:{},etag:{}});var fn=H.now(),dn=/(\=)\?(&|$)|\?\?/i;H.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return H.expando+"_"+fn++}}),H.ajaxPrefilter("json jsonp",function(t,n,r){var i="application/x-www-form-urlencoded"===t.contentType&&"string"==typeof t.data;if("jsonp"===t.dataTypes[0]||t.jsonp!==!1&&(dn.test(t.url)||i&&dn.test(t.data))){var o,a=t.jsonpCallback=H.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s=e[a],l=t.url,u=t.data,c="$1"+a+"$2";return t.jsonp!==!1&&(l=l.replace(dn,c),t.url===l&&(i&&(u=u.replace(dn,c)),t.data===u&&(l+=(/\?/.test(l)?"&":"?")+t.jsonp+"="+a))),t.url=l,t.data=u,e[a]=function(e){o=[e]},r.always(function(){e[a]=s,o&&H.isFunction(s)&&e[a](o[0])}),t.converters["script json"]=function(){return o||H.error(a+" was not called"),o[0]},t.dataTypes[0]="json","script"}}),H.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return H.globalEval(e),e}}}),H.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),H.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=M.head||M.getElementsByTagName("head")[0]||M.documentElement;return{send:function(i,o){n=M.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){(i||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||o(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var pn,hn=e.ActiveXObject?function(){for(var e in pn)pn[e](0,1)}:!1,mn=0;H.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&l()||s()}:l,function(e){H.extend(H.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(H.ajaxSettings.xhr()),H.support.ajax&&H.ajaxTransport(function(n){if(!n.crossDomain||H.support.cors){var r;return{send:function(i,o){var a,s,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)l[s]=n.xhrFields[s];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)l.setRequestHeader(s,i[s])}catch(u){}l.send(n.hasContent&&n.data||null),r=function(e,i){var s,u,c,f,d;try{if(r&&(i||4===l.readyState))if(r=t,a&&(l.onreadystatechange=H.noop,hn&&delete pn[a]),i)4!==l.readyState&&l.abort();else{s=l.status,c=l.getAllResponseHeaders(),f={},d=l.responseXML,d&&d.documentElement&&(f.xml=d),f.text=l.responseText;try{u=l.statusText}catch(p){u=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=f.text?200:404}}catch(h){i||o(-1,h)}f&&o(s,u,f,c)},n.async&&4!==l.readyState?(a=++mn,hn&&(pn||(pn={},H(e).unload(hn)),pn[a]=r),l.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var gn,yn,vn,bn,xn={},Tn=/^(?:toggle|show|hide)$/,wn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,Nn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];H.fn.extend({show:function(e,t,n){var o,a;if(e||0===e)return this.animate(i("show",3),e,t,n);for(var s=0,l=this.length;l>s;s++)o=this[s],o.style&&(a=o.style.display,!H._data(o,"olddisplay")&&"none"===a&&(a=o.style.display=""),""===a&&"none"===H.css(o,"display")&&H._data(o,"olddisplay",r(o.nodeName)));for(s=0;l>s;s++)o=this[s],o.style&&(a=o.style.display,(""===a||"none"===a)&&(o.style.display=H._data(o,"olddisplay")||""));return this},hide:function(e,t,n){if(e||0===e)return this.animate(i("hide",3),e,t,n);for(var r,o,a=0,s=this.length;s>a;a++)r=this[a],r.style&&(o=H.css(r,"display"),"none"!==o&&!H._data(r,"olddisplay")&&H._data(r,"olddisplay",o));for(a=0;s>a;a++)this[a].style&&(this[a].style.display="none");return this},_toggle:H.fn.toggle,toggle:function(e,t,n){var r="boolean"==typeof e;return H.isFunction(e)&&H.isFunction(t)?this._toggle.apply(this,arguments):null==e||r?this.each(function(){var t=r?e:H(this).is(":hidden");H(this)[t?"show":"hide"]()}):this.animate(i("toggle",3),e,t,n),this},fadeTo:function(e,t,n,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,i){function o(){a.queue===!1&&H._mark(this);var t,n,i,o,s,l,u,c,f,d=H.extend({},a),p=1===this.nodeType,h=p&&H(this).is(":hidden");d.animatedProperties={};for(i in e){if(t=H.camelCase(i),i!==t&&(e[t]=e[i],delete e[i]),n=e[t],H.isArray(n)?(d.animatedProperties[t]=n[1],n=e[t]=n[0]):d.animatedProperties[t]=d.specialEasing&&d.specialEasing[t]||d.easing||"swing","hide"===n&&h||"show"===n&&!h)return d.complete.call(this);p&&("height"===t||"width"===t)&&(d.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===H.css(this,"display")&&"none"===H.css(this,"float")&&(H.support.inlineBlockNeedsLayout&&"inline"!==r(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=d.overflow&&(this.style.overflow="hidden");for(i in e)o=new H.fx(this,d,i),n=e[i],Tn.test(n)?(f=H._data(this,"toggle"+i)||("toggle"===n?h?"show":"hide":0),f?(H._data(this,"toggle"+i,"show"===f?"hide":"show"),o[f]()):o[n]()):(s=wn.exec(n),l=o.cur(),s?(u=parseFloat(s[2]),c=s[3]||(H.cssNumber[i]?"":"px"),"px"!==c&&(H.style(this,i,(u||1)+c),l=(u||1)/o.cur()*l,H.style(this,i,l+c)),s[1]&&(u=("-="===s[1]?-1:1)*u+l),o.custom(l,u,c)):o.custom(l,n,""));return!0}var a=H.speed(t,n,i);return H.isEmptyObject(e)?this.each(a.complete,[!1]):(e=H.extend({},e),a.queue===!1?this.each(o):this.queue(a.queue,o))},stop:function(e,n,r){return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function t(e,t,n){var i=t[n];H.removeData(e,n,!0),i.stop(r)}var n,i=!1,o=H.timers,a=H._data(this);if(r||H._unmark(!0,this),null==e)for(n in a)a[n]&&a[n].stop&&n.indexOf(".run")===n.length-4&&t(this,a,n);else a[n=e+".run"]&&a[n].stop&&t(this,a,n);for(n=o.length;n--;)o[n].elem===this&&(null==e||o[n].queue===e)&&(r?o[n](!0):o[n].saveState(),i=!0,o.splice(n,1));(!r||!i)&&H.dequeue(this,e)})}}),H.each({slideDown:i("show",1),slideUp:i("hide",1),slideToggle:i("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){H.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),H.extend({speed:function(e,t,n){var r=e&&"object"==typeof e?H.extend({},e):{complete:n||!n&&t||H.isFunction(e)&&e,duration:e,easing:n&&t||t&&!H.isFunction(t)&&t};return r.duration=H.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in H.fx.speeds?H.fx.speeds[r.duration]:H.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(e){H.isFunction(r.old)&&r.old.call(this),r.queue?H.dequeue(this,r.queue):e!==!1&&H._unmark(this)},r},easing:{linear:function(e,t,n,r){return n+r*e},swing:function(e,t,n,r){return(-Math.cos(e*Math.PI)/2+.5)*r+n}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),H.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(H.fx.step[this.prop]||H.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var e,t=H.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?t&&"auto"!==t?t:0:e},custom:function(e,n,r){function i(e){return o.step(e)}var o=this,s=H.fx;this.startTime=bn||a(),this.end=n,this.now=this.start=e,this.pos=this.state=0,this.unit=r||this.unit||(H.cssNumber[this.prop]?"":"px"),i.queue=this.options.queue,i.elem=this.elem,i.saveState=function(){o.options.hide&&H._data(o.elem,"fxshow"+o.prop)===t&&H._data(o.elem,"fxshow"+o.prop,o.start)},i()&&H.timers.push(i)&&!vn&&(vn=setInterval(s.tick,s.interval))},show:function(){var e=H._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||H.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),H(this.elem).show()},hide:function(){this.options.orig[this.prop]=H._data(this.elem,"fxshow"+this.prop)||H.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,r,i=bn||a(),o=!0,s=this.elem,l=this.options;if(e||i>=l.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),l.animatedProperties[this.prop]=!0;for(t in l.animatedProperties)l.animatedProperties[t]!==!0&&(o=!1);if(o){if(null!=l.overflow&&!H.support.shrinkWrapBlocks&&H.each(["","X","Y"],function(e,t){s.style["overflow"+t]=l.overflow[e]}),l.hide&&H(s).hide(),l.hide||l.show)for(t in l.animatedProperties)H.style(s,t,l.orig[t]),H.removeData(s,"fxshow"+t,!0),H.removeData(s,"toggle"+t,!0);r=l.complete,r&&(l.complete=!1,r.call(s))}return!1}return 1/0==l.duration?this.now=i:(n=i-this.startTime,this.state=n/l.duration,this.pos=H.easing[l.animatedProperties[this.prop]](this.state,n,0,1,l.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},H.extend(H.fx,{tick:function(){for(var e,t=H.timers,n=0;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||H.fx.stop()},interval:13,stop:function(){clearInterval(vn),vn=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){H.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&null!=e.elem.style[e.prop]?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),H.each(["width","height"],function(e,t){H.fx.step[t]=function(e){H.style(e.elem,t,Math.max(0,e.now)+e.unit)}}),H.expr&&H.expr.filters&&(H.expr.filters.animated=function(e){return H.grep(H.timers,function(t){return e===t.elem}).length});var Cn=/^t(?:able|d|h)$/i,En=/^(?:body|html)$/i;H.fn.offset="getBoundingClientRect"in M.documentElement?function(e){var t,r=this[0];if(e)return this.each(function(t){H.offset.setOffset(this,e,t)});if(!r||!r.ownerDocument)return null;if(r===r.ownerDocument.body)return H.offset.bodyOffset(r);try{t=r.getBoundingClientRect()}catch(i){}var o=r.ownerDocument,a=o.documentElement;if(!t||!H.contains(a,r))return t?{top:t.top,left:t.left}:{top:0,left:0};var s=o.body,l=n(o),u=a.clientTop||s.clientTop||0,c=a.clientLeft||s.clientLeft||0,f=l.pageYOffset||H.support.boxModel&&a.scrollTop||s.scrollTop,d=l.pageXOffset||H.support.boxModel&&a.scrollLeft||s.scrollLeft,p=t.top+f-u,h=t.left+d-c;return{top:p,left:h}}:function(e){var t=this[0];if(e)return this.each(function(t){H.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return H.offset.bodyOffset(t);for(var n,r=t.offsetParent,i=t,o=t.ownerDocument,a=o.documentElement,s=o.body,l=o.defaultView,u=l?l.getComputedStyle(t,null):t.currentStyle,c=t.offsetTop,f=t.offsetLeft;(t=t.parentNode)&&t!==s&&t!==a&&(!H.support.fixedPosition||"fixed"!==u.position);)n=l?l.getComputedStyle(t,null):t.currentStyle,c-=t.scrollTop,f-=t.scrollLeft,t===r&&(c+=t.offsetTop,f+=t.offsetLeft,H.support.doesNotAddBorder&&(!H.support.doesAddBorderForTableAndCells||!Cn.test(t.nodeName))&&(c+=parseFloat(n.borderTopWidth)||0,f+=parseFloat(n.borderLeftWidth)||0),i=r,r=t.offsetParent),H.support.subtractsBorderForOverflowNotVisible&&"visible"!==n.overflow&&(c+=parseFloat(n.borderTopWidth)||0,f+=parseFloat(n.borderLeftWidth)||0),u=n;return("relative"===u.position||"static"===u.position)&&(c+=s.offsetTop,f+=s.offsetLeft),H.support.fixedPosition&&"fixed"===u.position&&(c+=Math.max(a.scrollTop,s.scrollTop),f+=Math.max(a.scrollLeft,s.scrollLeft)),{top:c,left:f}},H.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return H.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(H.css(e,"marginTop"))||0,n+=parseFloat(H.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=H.css(e,"position");"static"===r&&(e.style.position="relative");var i,o,a=H(e),s=a.offset(),l=H.css(e,"top"),u=H.css(e,"left"),c=("absolute"===r||"fixed"===r)&&H.inArray("auto",[l,u])>-1,f={},d={};c?(d=a.position(),i=d.top,o=d.left):(i=parseFloat(l)||0,o=parseFloat(u)||0),H.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+i),null!=t.left&&(f.left=t.left-s.left+o),"using"in t?t.using.call(e,f):a.css(f)}},H.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),r=En.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(H.css(e,"marginTop"))||0,n.left-=parseFloat(H.css(e,"marginLeft"))||0,r.top+=parseFloat(H.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(H.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||M.body;e&&!En.test(e.nodeName)&&"static"===H.css(e,"position");)e=e.offsetParent;return e})}}),H.each(["Left","Top"],function(e,r){var i="scroll"+r;H.fn[i]=function(r){var o,a;return r===t?(o=this[0])?(a=n(o),a?"pageXOffset"in a?a[e?"pageYOffset":"pageXOffset"]:H.support.boxModel&&a.document.documentElement[i]||a.document.body[i]:o[i]):null:this.each(function(){a=n(this),a?a.scrollTo(e?H(a).scrollLeft():r,e?r:H(a).scrollTop()):this[i]=r})}}),H.each(["Height","Width"],function(e,n){var r=n.toLowerCase();H.fn["inner"+n]=function(){var e=this[0];return e?e.style?parseFloat(H.css(e,r,"padding")):this[r]():null},H.fn["outer"+n]=function(e){var t=this[0];return t?t.style?parseFloat(H.css(t,r,e?"margin":"border")):this[r]():null},H.fn[r]=function(e){var i=this[0];if(!i)return null==e?null:this;if(H.isFunction(e))return this.each(function(t){var n=H(this);n[r](e.call(this,t,n[r]()))});if(H.isWindow(i)){var o=i.document.documentElement["client"+n],a=i.document.body;return"CSS1Compat"===i.document.compatMode&&o||a&&a["client"+n]||o}if(9===i.nodeType)return Math.max(i.documentElement["client"+n],i.body["scroll"+n],i.documentElement["scroll"+n],i.body["offset"+n],i.documentElement["offset"+n]);if(e===t){var s=H.css(i,r),l=parseFloat(s);return H.isNumeric(l)?l:s}return this.css(r,"string"==typeof e?e:e+"px")}}),e.jQuery=e.$=H,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return H})}(window);
!function(t,e){function i(e){return!t(e).parents().andSelf().filter(function(){return"hidden"===t.curCSS(this,"visibility")||t.expr.filters.hidden(this)}).length}function s(e,s){var n=e.nodeName.toLowerCase();if("area"===n){var a,o=e.parentNode,r=o.name;return e.href&&r&&"map"===o.nodeName.toLowerCase()?(a=t("img[usemap=#"+r+"]")[0],!!a&&i(a)):!1}return(/input|select|textarea|button|object/.test(n)?!e.disabled:"a"==n?e.href||s:s)&&i(e)}t.ui=t.ui||{},t.ui.version||(t.extend(t.ui,{version:"1.8.17",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),t.fn.extend({propAttr:t.fn.prop||t.fn.attr,_focus:t.fn.focus,focus:function(e,i){return"number"==typeof e?this.each(function(){var s=this;setTimeout(function(){t(s).focus(),i&&i.call(s)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;return e=t.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.curCSS(this,"position",1))&&/(auto|scroll)/.test(t.curCSS(this,"overflow",1)+t.curCSS(this,"overflow-y",1)+t.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.curCSS(this,"overflow",1)+t.curCSS(this,"overflow-y",1)+t.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var s,n,a=t(this[0]);a.length&&a[0]!==document;){if(s=a.css("position"),("absolute"===s||"relative"===s||"fixed"===s)&&(n=parseInt(a.css("zIndex"),10),!isNaN(n)&&0!==n))return n;a=a.parent()}return 0},disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.each(["Width","Height"],function(i,s){function n(e,i,s,n){return t.each(a,function(){i-=parseFloat(t.curCSS(e,"padding"+this,!0))||0,s&&(i-=parseFloat(t.curCSS(e,"border"+this+"Width",!0))||0),n&&(i-=parseFloat(t.curCSS(e,"margin"+this,!0))||0)}),i}var a="Width"===s?["Left","Right"]:["Top","Bottom"],o=s.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+s]=function(i){return i===e?r["inner"+s].call(this):this.each(function(){t(this).css(o,n(this,i)+"px")})},t.fn["outer"+s]=function(e,i){return"number"!=typeof e?r["outer"+s].call(this,e):this.each(function(){t(this).css(o,n(this,e,!0,i)+"px")})}}),t.extend(t.expr[":"],{data:function(e,i,s){return!!t.data(e,s[3])},focusable:function(e){return s(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),n=isNaN(i);return(n||i>=0)&&s(e,!n)}}),t(function(){var e=document.body,i=e.appendChild(i=document.createElement("div"));t.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),t.support.minHeight=100===i.offsetHeight,t.support.selectstart="onselectstart"in i,e.removeChild(i).style.display="none"}),t.extend(t.ui,{plugin:{add:function(e,i,s){var n=t.ui[e].prototype;for(var a in s)n.plugins[a]=n.plugins[a]||[],n.plugins[a].push([i,s[a]])},call:function(t,e,i){var s=t.plugins[e];if(s&&t.element[0].parentNode)for(var n=0;n<s.length;n++)t.options[s[n][0]]&&s[n][1].apply(t.element,i)}},contains:function(t,e){return document.compareDocumentPosition?16&t.compareDocumentPosition(e):t!==e&&t.contains(e)},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return e[s]>0?!0:(e[s]=1,n=e[s]>0,e[s]=0,n)},isOverAxis:function(t,e,i){return t>e&&e+i>t},isOver:function(e,i,s,n,a,o){return t.ui.isOverAxis(e,s,a)&&t.ui.isOverAxis(i,n,o)}}))}(jQuery),function(t,e){if(t.cleanData){var i=t.cleanData;t.cleanData=function(e){for(var s,n=0;null!=(s=e[n]);n++)try{t(s).triggerHandler("remove")}catch(a){}i(e)}}else{var s=t.fn.remove;t.fn.remove=function(e,i){return this.each(function(){return i||(!e||t.filter(e,[this]).length)&&t("*",this).add([this]).each(function(){try{t(this).triggerHandler("remove")}catch(e){}}),s.call(t(this),e,i)})}}t.widget=function(e,i,s){var n,a=e.split(".")[0];e=e.split(".")[1],n=a+"-"+e,s||(s=i,i=t.Widget),t.expr[":"][n]=function(i){return!!t.data(i,e)},t[a]=t[a]||{},t[a][e]=function(t,e){arguments.length&&this._createWidget(t,e)};var o=new i;o.options=t.extend(!0,{},o.options),t[a][e].prototype=t.extend(!0,o,{namespace:a,widgetName:e,widgetEventPrefix:t[a][e].prototype.widgetEventPrefix||e,widgetBaseClass:n},s),t.widget.bridge(e,t[a][e])},t.widget.bridge=function(i,s){t.fn[i]=function(n){var a="string"==typeof n,o=Array.prototype.slice.call(arguments,1),r=this;return n=!a&&o.length?t.extend.apply(null,[!0,n].concat(o)):n,a&&"_"===n.charAt(0)?r:(this.each(a?function(){var s=t.data(this,i),a=s&&t.isFunction(s[n])?s[n].apply(s,o):s;return a!==s&&a!==e?(r=a,!1):void 0}:function(){var e=t.data(this,i);e?e.option(n||{})._init():t.data(this,i,new s(n,this))}),r)}},t.Widget=function(t,e){arguments.length&&this._createWidget(t,e)},t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(e,i){t.data(i,this.widgetName,this),this.element=t(i),this.options=t.extend(!0,{},this.options,this._getCreateOptions(),e);var s=this;this.element.bind("remove."+this.widgetName,function(){s.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return t.metadata&&t.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(i,s){var n=i;if(0===arguments.length)return t.extend({},this.options);if("string"==typeof i){if(s===e)return this.options[i];n={},n[i]=s}return this._setOptions(n),this},_setOptions:function(e){var i=this;return t.each(e,function(t,e){i._setOption(t,e)}),this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&this.widget()[e?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",e),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(e,i,s){var n,a,o=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],a=i.originalEvent,a)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(t.isFunction(o)&&o.call(this.element[0],i,s)===!1||i.isDefaultPrevented())}}}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1==i.which,a="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return n&&!a&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return s._mouseMove(t)},this._mouseUpDelegate=function(t){return s._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return!t.browser.msie||document.documentMode>=9||e.button?this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted):this._mouseUp(e)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target==this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t){t.ui=t.ui||{};var e=/left|center|right/,i=/top|center|bottom/,s="center",n={},a=t.fn.position,o=t.fn.offset;t.fn.position=function(o){if(!o||!o.of)return a.apply(this,arguments);o=t.extend({},o);var r,l,h,c=t(o.of),u=c[0],d=(o.collision||"flip").split(" "),p=o.offset?o.offset.split(" "):[0,0];return 9===u.nodeType?(r=c.width(),l=c.height(),h={top:0,left:0}):u.setTimeout?(r=c.width(),l=c.height(),h={top:c.scrollTop(),left:c.scrollLeft()}):u.preventDefault?(o.at="left top",r=l=0,h={top:o.of.pageY,left:o.of.pageX}):(r=c.outerWidth(),l=c.outerHeight(),h=c.offset()),t.each(["my","at"],function(){var t=(o[this]||"").split(" ");1===t.length&&(t=e.test(t[0])?t.concat([s]):i.test(t[0])?[s].concat(t):[s,s]),t[0]=e.test(t[0])?t[0]:s,t[1]=i.test(t[1])?t[1]:s,o[this]=t}),1===d.length&&(d[1]=d[0]),p[0]=parseInt(p[0],10)||0,1===p.length&&(p[1]=p[0]),p[1]=parseInt(p[1],10)||0,"right"===o.at[0]?h.left+=r:o.at[0]===s&&(h.left+=r/2),"bottom"===o.at[1]?h.top+=l:o.at[1]===s&&(h.top+=l/2),h.left+=p[0],h.top+=p[1],this.each(function(){var e,i=t(this),a=i.outerWidth(),c=i.outerHeight(),u=parseInt(t.curCSS(this,"marginLeft",!0))||0,f=parseInt(t.curCSS(this,"marginTop",!0))||0,g=a+u+(parseInt(t.curCSS(this,"marginRight",!0))||0),m=c+f+(parseInt(t.curCSS(this,"marginBottom",!0))||0),v=t.extend({},h);"right"===o.my[0]?v.left-=a:o.my[0]===s&&(v.left-=a/2),"bottom"===o.my[1]?v.top-=c:o.my[1]===s&&(v.top-=c/2),n.fractions||(v.left=Math.round(v.left),v.top=Math.round(v.top)),e={left:v.left-u,top:v.top-f},t.each(["left","top"],function(i,s){t.ui.position[d[i]]&&t.ui.position[d[i]][s](v,{targetWidth:r,targetHeight:l,elemWidth:a,elemHeight:c,collisionPosition:e,collisionWidth:g,collisionHeight:m,offset:p,my:o.my,at:o.at})}),t.fn.bgiframe&&i.bgiframe(),i.offset(t.extend(v,{using:o.using}))})},t.ui.position={fit:{left:function(e,i){var s=t(window),n=i.collisionPosition.left+i.collisionWidth-s.width()-s.scrollLeft();e.left=n>0?e.left-n:Math.max(e.left-i.collisionPosition.left,e.left)},top:function(e,i){var s=t(window),n=i.collisionPosition.top+i.collisionHeight-s.height()-s.scrollTop();e.top=n>0?e.top-n:Math.max(e.top-i.collisionPosition.top,e.top)}},flip:{left:function(e,i){if(i.at[0]!==s){var n=t(window),a=i.collisionPosition.left+i.collisionWidth-n.width()-n.scrollLeft(),o="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,r="left"===i.at[0]?i.targetWidth:-i.targetWidth,l=-2*i.offset[0];e.left+=i.collisionPosition.left<0?o+r+l:a>0?o+r+l:0}},top:function(e,i){if(i.at[1]!==s){var n=t(window),a=i.collisionPosition.top+i.collisionHeight-n.height()-n.scrollTop(),o="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,r="top"===i.at[1]?i.targetHeight:-i.targetHeight,l=-2*i.offset[1];e.top+=i.collisionPosition.top<0?o+r+l:a>0?o+r+l:0}}}},t.offset.setOffset||(t.offset.setOffset=function(e,i){/static/.test(t.curCSS(e,"position"))&&(e.style.position="relative");var s=t(e),n=s.offset(),a=parseInt(t.curCSS(e,"top",!0),10)||0,o=parseInt(t.curCSS(e,"left",!0),10)||0,r={top:i.top-n.top+a,left:i.left-n.left+o};"using"in i?i.using.call(e,r):s.css(r)},t.fn.offset=function(e){var i=this[0];return i&&i.ownerDocument?e?this.each(function(){t.offset.setOffset(this,e)}):o.call(this):null}),function(){var e,i,s,a,o,r=document.getElementsByTagName("body")[0],l=document.createElement("div");e=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&jQuery.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(var h in s)e.style[h]=s[h];e.appendChild(l),i=r||document.documentElement,i.insertBefore(e,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",a=t(l).offset(function(t,e){return e}).offset(),e.innerHTML="",i.removeChild(e),o=a.top+a.left+(r?2e3:0),n.fractions=o>21&&22>o}()}(jQuery),function(t){t.widget("ui.draggable",t.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(e),this.handle?(i.iframeFix&&t(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){t('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=!1;if(t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),!(this.element[0]&&this.element[0].parentNode||"original"!=this.options.helper))return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var s=this;t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",e)!==!1&&s._clear()})}else this._trigger("stop",e)!==!1&&this._clear();return!1},_mouseUp:function(e){return this.options.iframeFix===!0&&t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){var i=this.options.handle&&t(this.options.handle,this.element).length?!1:!0;return t(this.options.handle,this.element).find("*").andSelf().each(function(){this==e.target&&(i=!0)}),i},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),s[0]!=this.element[0]&&!/(fixed|absolute)/.test(s.css("position"))&&s.css("position","absolute"),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.browser.msie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),("document"==e.containment||"window"==e.containment)&&(this.containment=["document"==e.containment?0:t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==e.containment?0:t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==e.containment?0:t(window).scrollLeft())+t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==e.containment?0:t(window).scrollTop())+(t("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||e.containment.constructor==Array)e.containment.constructor==Array&&(this.containment=e.containment);else{var i=t(e.containment),s=i[0];if(!s)return;var n=(i.offset(),"hidden"!=t(s).css("overflow"));this.containment=[(parseInt(t(s).css("borderLeftWidth"),10)||0)+(parseInt(t(s).css("paddingLeft"),10)||0),(parseInt(t(s).css("borderTopWidth"),10)||0)+(parseInt(t(s).css("paddingTop"),10)||0),(n?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(t(s).css("borderLeftWidth"),10)||0)-(parseInt(t(s).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(n?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(t(s).css("borderTopWidth"),10)||0)-(parseInt(t(s).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"==e?1:-1,n=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-(t.browser.safari&&t.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s),left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-(t.browser.safari&&t.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s)}},_generatePosition:function(e){var i=this.options,s="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(s[0].tagName),a=e.pageX,o=e.pageY;if(this.originalPosition){var r;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();r=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else r=this.containment;e.pageX-this.offset.click.left<r[0]&&(a=r[0]+this.offset.click.left),e.pageY-this.offset.click.top<r[1]&&(o=r[1]+this.offset.click.top),e.pageX-this.offset.click.left>r[2]&&(a=r[2]+this.offset.click.left),e.pageY-this.offset.click.top>r[3]&&(o=r[3]+this.offset.click.top)}if(i.grid){var h=i.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1]:this.originalPageY;o=r&&(h-this.offset.click.top<r[1]||h-this.offset.click.top>r[3])?h-this.offset.click.top<r[1]?h+i.grid[1]:h-i.grid[1]:h;var c=i.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/i.grid[0])*i.grid[0]:this.originalPageX;a=r&&(c-this.offset.click.left<r[0]||c-this.offset.click.left>r[2])?c-this.offset.click.left<r[0]?c+i.grid[0]:c-i.grid[0]:c}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(t.browser.safari&&t.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:s.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(t.browser.safari&&t.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:s.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s]),"drag"==e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.extend(t.ui.draggable,{version:"1.8.17"}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var s=t(this).data("draggable"),n=s.options,a=t.extend({},i,{item:s.element});s.sortables=[],t(n.connectToSortable).each(function(){var i=t.data(this,"sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,a))})},stop:function(e,i){var s=t(this).data("draggable"),n=t.extend({},i,{item:s.element});t.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"==s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,n))})},drag:function(e,i){var s=t(this).data("draggable"),n=this;t.each(s.sortables,function(){this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(n).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",e),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",e),s.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var s=t(i.helper),n=t(this).data("draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(e,i){var s=t(this).data("draggable").options;s._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("draggable");e.scrollParent[0]!=document&&"HTML"!=e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("draggable"),s=i.options,n=!1;i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName?(s.axis&&"x"==s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"==s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"==s.axis||(e.pageY-t(document).scrollTop()<s.scrollSensitivity?n=t(document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(n=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"==s.axis||(e.pageX-t(document).scrollLeft()<s.scrollSensitivity?n=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(n=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed)))),n!==!1&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var i=t(this),s=i.offset();this!=e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(e,i){for(var s=t(this).data("draggable"),n=s.options,a=n.snapTolerance,o=i.offset.left,r=o+s.helperProportions.width,l=i.offset.top,h=l+s.helperProportions.height,c=s.snapElements.length-1;c>=0;c--){var u=s.snapElements[c].left,d=u+s.snapElements[c].width,p=s.snapElements[c].top,f=p+s.snapElements[c].height;if(o>u-a&&d+a>o&&l>p-a&&f+a>l||o>u-a&&d+a>o&&h>p-a&&f+a>h||r>u-a&&d+a>r&&l>p-a&&f+a>l||r>u-a&&d+a>r&&h>p-a&&f+a>h){if("inner"!=n.snapMode){var g=Math.abs(p-h)<=a,m=Math.abs(f-l)<=a,v=Math.abs(u-r)<=a,b=Math.abs(d-o)<=a;g&&(i.position.top=s._convertPositionTo("relative",{top:p-s.helperProportions.height,left:0}).top-s.margins.top),m&&(i.position.top=s._convertPositionTo("relative",{top:f,left:0}).top-s.margins.top),v&&(i.position.left=s._convertPositionTo("relative",{top:0,left:u-s.helperProportions.width}).left-s.margins.left),b&&(i.position.left=s._convertPositionTo("relative",{top:0,left:d}).left-s.margins.left)}var _=g||m||v||b;if("outer"!=n.snapMode){var g=Math.abs(p-l)<=a,m=Math.abs(f-h)<=a,v=Math.abs(u-o)<=a,b=Math.abs(d-r)<=a;g&&(i.position.top=s._convertPositionTo("relative",{top:p,left:0}).top-s.margins.top),m&&(i.position.top=s._convertPositionTo("relative",{top:f-s.helperProportions.height,left:0}).top-s.margins.top),v&&(i.position.left=s._convertPositionTo("relative",{top:0,left:u}).left-s.margins.left),b&&(i.position.left=s._convertPositionTo("relative",{top:0,left:d-s.helperProportions.width}).left-s.margins.left)}!s.snapElements[c].snapping&&(g||m||v||b||_)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=g||m||v||b||_}else s.snapElements[c].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=!1}}}),t.ui.plugin.add("draggable","stack",{start:function(){var e=t(this).data("draggable").options,i=t.makeArray(t(e.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});if(i.length){var s=parseInt(i[0].style.zIndex)||0;t(i).each(function(t){this.style.zIndex=s+t}),this[0].style.zIndex=s+i.length}}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var s=t(i.helper),n=t(this).data("draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(e,i){var s=t(this).data("draggable").options;s._zIndex&&t(i.helper).css("zIndex",s._zIndex)}})}(jQuery),function(t){t.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var e=this.options,i=e.accept;this.isover=0,this.isout=1,this.accept=t.isFunction(i)?i:function(t){return t.is(i)
},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},t.ui.ddmanager.droppables[e.scope]=t.ui.ddmanager.droppables[e.scope]||[],t.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var e=t.ui.ddmanager.droppables[this.options.scope],i=0;i<e.length;i++)e[i]==this&&e.splice(i,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(e,i){"accept"==e&&(this.accept=t.isFunction(i)?i:function(t){return t.is(i)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;!!i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;!!i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current;if(!s||(s.currentItem||s.element)[0]==this.element[0])return!1;var n=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"droppable");return e.options.greedy&&!e.options.disabled&&e.options.scope==s.options.scope&&e.accept.call(e.element[0],s.currentItem||s.element)&&t.ui.intersect(s,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(n=!0,!1):void 0}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(s)),this.element):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.extend(t.ui.droppable,{version:"1.8.17"}),t.ui.intersect=function(e,i,s){if(!i.offset)return!1;var n=(e.positionAbs||e.position.absolute).left,a=n+e.helperProportions.width,o=(e.positionAbs||e.position.absolute).top,r=o+e.helperProportions.height,l=i.offset.left,h=l+i.proportions.width,c=i.offset.top,u=c+i.proportions.height;switch(s){case"fit":return n>=l&&h>=a&&o>=c&&u>=r;case"intersect":return l<n+e.helperProportions.width/2&&a-e.helperProportions.width/2<h&&c<o+e.helperProportions.height/2&&r-e.helperProportions.height/2<u;case"pointer":var d=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,p=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,f=t.ui.isOver(p,d,c,l,i.proportions.height,i.proportions.width);return f;case"touch":return(o>=c&&u>=o||r>=c&&u>=r||c>o&&r>u)&&(n>=l&&h>=n||a>=l&&h>=a||l>n&&a>h);default:return!1}},t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var s=t.ui.ddmanager.droppables[e.options.scope]||[],n=i?i.type:null,a=(e.currentItem||e.element).find(":data(droppable)").andSelf();t:for(var o=0;o<s.length;o++)if(!(s[o].options.disabled||e&&!s[o].accept.call(s[o].element[0],e.currentItem||e.element))){for(var r=0;r<a.length;r++)if(a[r]==s[o].element[0]){s[o].proportions.height=0;continue t}s[o].visible="none"!=s[o].element.css("display"),s[o].visible&&("mousedown"==n&&s[o]._activate.call(s[o],i),s[o].offset=s[o].element.offset(),s[o].proportions={width:s[o].element[0].offsetWidth,height:s[o].element[0].offsetHeight})}},drop:function(e,i){var s=!1;return t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){!this.options||(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))}),s},dragStart:function(e,i){e.element.parents(":not(body,html)").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s=t.ui.intersect(e,this,this.options.tolerance),n=s||1!=this.isover?s&&0==this.isover?"isover":null:"isout";if(!n)return;var a;if(this.options.greedy){var o=this.element.parents(":data(droppable):eq(0)");o.length&&(a=t.data(o[0],"droppable"),a.greedyChild="isover"==n?1:0)}a&&"isover"==n&&(a.isover=0,a.isout=1,a._out.call(a,i)),this[n]=1,this["isout"==n?"isover":"isout"]=0,this["isover"==n?"_over":"_out"].call(this,i),a&&"isout"==n&&(a.isout=0,a.isover=1,a._over.call(a,i))}})},dragStop:function(e,i){e.element.parents(":not(body,html)").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}}}(jQuery),function(t){t.widget("ui.resizable",t.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var e=this,i=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(/relative/.test(this.element.css("position"))&&t.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"}),this.element.wrap(t('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var s=this.handles.split(",");this.handles={};for(var n=0;n<s.length;n++){var a=t.trim(s[n]),o="ui-resizable-"+a,r=t('<div class="ui-resizable-handle '+o+'"></div>');/sw|se|ne|nw/.test(a)&&r.css({zIndex:++i.zIndex}),"se"==a&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[a]=".ui-resizable-"+a,this.element.append(r)}}this._renderAxis=function(e){e=e||this.element;for(var i in this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var s=t(this.handles[i],this.element),n=0;n=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth();var a=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");e.css(a,n),this._proportionallyResize()}t(this.handles[i]).length}},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!e.resizing){if(this.className)var t=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);e.axis=t&&t[1]?t[1]:"se"}}),i.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").hover(function(){i.disabled||(t(this).removeClass("ui-resizable-autohide"),e._handles.show())},function(){i.disabled||e.resizing||(t(this).addClass("ui-resizable-autohide"),e._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var e=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);var i=this.element;i.after(this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_mouseCapture:function(e){var i=!1;for(var s in this.handles)t(this.handles[s])[0]==e.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(i){var s=this.options,n=this.element.position(),a=this.element;this.resizing=!0,this.documentScroll={top:t(document).scrollTop(),left:t(document).scrollLeft()},(a.is(".ui-draggable")||/absolute/.test(a.css("position")))&&a.css({position:"absolute",top:n.top,left:n.left}),t.browser.opera&&/relative/.test(a.css("position"))&&a.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy();var o=e(this.helper.css("left")),r=e(this.helper.css("top"));s.containment&&(o+=t(s.containment).scrollLeft()||0,r+=t(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:r},this.size=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:o,top:r},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1;var l=t(".ui-resizable-"+this.axis).css("cursor");return t("body").css("cursor","auto"==l?this.axis+"-resize":l),a.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(e){var i=this.helper,s=(this.options,this.originalMousePosition),n=this.axis,a=e.pageX-s.left||0,o=e.pageY-s.top||0,r=this._change[n];if(!r)return!1;{var l=r.apply(this,[e,a,o]);t.browser.msie&&t.browser.version<7,this.sizeDiff}return this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(l=this._updateRatio(l,e)),l=this._respectSize(l,e),this._propagate("resize",e),i.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(e){this.resizing=!1;var i=this.options,s=this;if(this._helper){var n=this._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&t.ui.hasScroll(n[0],"left")?0:s.sizeDiff.height,r=a?0:s.sizeDiff.width,l={width:s.helper.width()-r,height:s.helper.height()-o},h=parseInt(s.element.css("left"),10)+(s.position.left-s.originalPosition.left)||null,c=parseInt(s.element.css("top"),10)+(s.position.top-s.originalPosition.top)||null;i.animate||this.element.css(t.extend(l,{top:c,left:h})),s.helper.height(s.size.height),s.helper.width(s.size.width),this._helper&&!i.animate&&this._proportionallyResize()}return t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,s,n,a,o,r=this.options;o={minWidth:i(r.minWidth)?r.minWidth:0,maxWidth:i(r.maxWidth)?r.maxWidth:1/0,minHeight:i(r.minHeight)?r.minHeight:0,maxHeight:i(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,n=o.minWidth/this.aspectRatio,s=o.maxHeight*this.aspectRatio,a=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),n>o.minHeight&&(o.minHeight=n),s<o.maxWidth&&(o.maxWidth=s),a<o.maxHeight&&(o.maxHeight=a)),this._vBoundaries=o},_updateCache:function(t){this.options;this.offset=this.helper.offset(),i(t.left)&&(this.position.left=t.left),i(t.top)&&(this.position.top=t.top),i(t.height)&&(this.size.height=t.height),i(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=(this.options,this.position),s=this.size,n=this.axis;return i(t.height)?t.width=t.height*this.aspectRatio:i(t.width)&&(t.height=t.width/this.aspectRatio),"sw"==n&&(t.left=e.left+(s.width-t.width),t.top=null),"nw"==n&&(t.top=e.top+(s.height-t.height),t.left=e.left+(s.width-t.width)),t},_respectSize:function(t,e){var s=(this.helper,this._vBoundaries),n=(this._aspectRatio||e.shiftKey,this.axis),a=i(t.width)&&s.maxWidth&&s.maxWidth<t.width,o=i(t.height)&&s.maxHeight&&s.maxHeight<t.height,r=i(t.width)&&s.minWidth&&s.minWidth>t.width,l=i(t.height)&&s.minHeight&&s.minHeight>t.height;r&&(t.width=s.minWidth),l&&(t.height=s.minHeight),a&&(t.width=s.maxWidth),o&&(t.height=s.maxHeight);var h=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,u=/sw|nw|w/.test(n),d=/nw|ne|n/.test(n);r&&u&&(t.left=h-s.minWidth),a&&u&&(t.left=h-s.maxWidth),l&&d&&(t.top=c-s.minHeight),o&&d&&(t.top=c-s.maxHeight);var p=!t.width&&!t.height;return p&&!t.left&&t.top?t.top=null:p&&!t.top&&t.left&&(t.left=null),t},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var e=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var s=this._proportionallyResizeElements[i];if(!this.borderDif){var n=[s.css("borderTopWidth"),s.css("borderRightWidth"),s.css("borderBottomWidth"),s.css("borderLeftWidth")],a=[s.css("paddingTop"),s.css("paddingRight"),s.css("paddingBottom"),s.css("paddingLeft")];this.borderDif=t.map(n,function(t,e){var i=parseInt(t,10)||0,s=parseInt(a[e],10)||0;return i+s})}t.browser.msie&&(t(e).is(":hidden")||t(e).parents(":hidden").length)||s.css({height:e.height()-this.borderDif[0]-this.borderDif[2]||0,width:e.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var e=this.element,i=this.options;if(this.elementOffset=e.offset(),this._helper){this.helper=this.helper||t('<div style="overflow:hidden;"></div>');var s=t.browser.msie&&t.browser.version<7,n=s?1:0,a=s?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+a,height:this.element.outerHeight()+a,position:"absolute",left:this.elementOffset.left-n+"px",top:this.elementOffset.top-n+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=(this.options,this.originalSize),s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=(this.options,this.originalSize),n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!=e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.extend(t.ui.resizable,{version:"1.8.17"}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("resizable"),i=e.options,s=function(e){t(e).each(function(){var e=t(this);e.data("resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10),position:e.css("position")})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):t.each(i.alsoResize,function(t){s(t)})},resize:function(e,i){var s=t(this).data("resizable"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},l=function(e,n){t(e).each(function(){var e=t(this),a=t(this).data("resizable-alsoresize"),o={},l=n&&n.length?n:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(l,function(t,e){var i=(a[e]||0)+(r[e]||0);i&&i>=0&&(o[e]=i||null)}),t.browser.opera&&/relative/.test(e.css("position"))&&(s._revertToRelativePosition=!0,e.css({position:"absolute",top:"auto",left:"auto"})),e.css(o)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?l(n.alsoResize):t.each(n.alsoResize,function(t,e){l(t,e)})},stop:function(){var e=t(this).data("resizable"),i=e.options,s=function(e){t(e).each(function(){var e=t(this);e.css({position:e.data("resizable-alsoresize").position})})};e._revertToRelativePosition&&(e._revertToRelativePosition=!1,"object"!=typeof i.alsoResize||i.alsoResize.nodeType?s(i.alsoResize):t.each(i.alsoResize,function(t){s(t)})),t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("resizable"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&t.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-o},h=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,c&&h?{top:c,left:h}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var i=t(this).data("resizable"),s=i.options,n=i.element,a=s.containment,o=a instanceof t?a.get(0):/parent/.test(a)?n.parent().get(0):a;if(o)if(i.containerElement=t(o),/document/.test(a)||a==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight};else{var r=t(o),l=[];t(["Top","Right","Left","Bottom"]).each(function(t,i){l[t]=e(r.css("padding"+i))}),i.containerOffset=r.offset(),i.containerPosition=r.position(),i.containerSize={height:r.innerHeight()-l[3],width:r.innerWidth()-l[1]};var h=i.containerOffset,c=i.containerSize.height,u=i.containerSize.width,d=t.ui.hasScroll(o,"left")?o.scrollWidth:u,p=t.ui.hasScroll(o)?o.scrollHeight:c;i.parentData={element:o,left:h.left,top:h.top,width:d,height:p}}},resize:function(e){var i=t(this).data("resizable"),s=i.options,n=(i.containerSize,i.containerOffset),a=(i.size,i.position),o=i._aspectRatio||e.shiftKey,r={top:0,left:0},l=i.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(r=n),a.left<(i._helper?n.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-n.left:i.position.left-r.left),o&&(i.size.height=i.size.width/s.aspectRatio),i.position.left=s.helper?n.left:0),a.top<(i._helper?n.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-n.top:i.position.top),o&&(i.size.width=i.size.height*s.aspectRatio),i.position.top=i._helper?n.top:0),i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top;var h=Math.abs((i._helper?i.offset.left-r.left:i.offset.left-r.left)+i.sizeDiff.width),c=Math.abs((i._helper?i.offset.top-r.top:i.offset.top-n.top)+i.sizeDiff.height),u=i.containerElement.get(0)==i.element.parent().get(0),d=/relative|absolute/.test(i.containerElement.css("position"));u&&d&&(h-=i.parentData.left),h+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-h,o&&(i.size.height=i.size.width/i.aspectRatio)),c+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-c,o&&(i.size.width=i.size.height*i.aspectRatio))},stop:function(){var e=t(this).data("resizable"),i=e.options,s=(e.position,e.containerOffset),n=e.containerPosition,a=e.containerElement,o=t(e.helper),r=o.offset(),l=o.outerWidth()-e.sizeDiff.width,h=o.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(a.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:l,height:h}),e._helper&&!i.animate&&/static/.test(a.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:l,height:h})}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("resizable"),i=e.options,s=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){{var e=t(this).data("resizable");e.options}e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){{var e=t(this).data("resizable");e.options}e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(e){{var i=t(this).data("resizable"),s=i.options,n=i.size,a=i.originalSize,o=i.originalPosition,r=i.axis;s._aspectRatio||e.shiftKey}s.grid="number"==typeof s.grid?[s.grid,s.grid]:s.grid;var l=Math.round((n.width-a.width)/(s.grid[0]||1))*(s.grid[0]||1),h=Math.round((n.height-a.height)/(s.grid[1]||1))*(s.grid[1]||1);/^(se|s|e)$/.test(r)?(i.size.width=a.width+l,i.size.height=a.height+h):/^(ne)$/.test(r)?(i.size.width=a.width+l,i.size.height=a.height+h,i.position.top=o.top-h):/^(sw)$/.test(r)?(i.size.width=a.width+l,i.size.height=a.height+h,i.position.left=o.left-l):(i.size.width=a.width+l,i.size.height=a.height+h,i.position.top=o.top-h,i.position.left=o.left-l)}});var e=function(t){return parseInt(t,10)||0},i=function(t){return!isNaN(parseInt(t,10))}}(jQuery),function(t){t.widget("ui.selectable",t.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var e=this;this.element.addClass("ui-selectable"),this.dragged=!1;var i;this.refresh=function(){i=t(e.options.filter,e.element[0]),i.addClass("ui-selectee"),i.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=i.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(e){var i=this;if(this.opos=[e.pageX,e.pageY],!this.options.disabled){var s=this.options;this.selectees=t(s.filter,this.element[0]),this._trigger("start",e),t(s.appendTo).append(this.helper),this.helper.css({left:e.clientX,top:e.clientY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=t.data(this,"selectable-item");s.startselected=!0,!e.metaKey&&!e.ctrlKey&&(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",e,{unselecting:s.element}))}),t(e.target).parents().andSelf().each(function(){var s=t.data(this,"selectable-item");if(s){var n=!e.metaKey&&!e.ctrlKey||!s.$element.hasClass("ui-selected");return s.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),s.unselecting=!n,s.selecting=n,s.selected=n,n?i._trigger("selecting",e,{selecting:s.element}):i._trigger("unselecting",e,{unselecting:s.element}),!1}})}},_mouseDrag:function(e){var i=this;if(this.dragged=!0,!this.options.disabled){var s=this.options,n=this.opos[0],a=this.opos[1],o=e.pageX,r=e.pageY;if(n>o){var l=o;o=n,n=l}if(a>r){var l=r;r=a,a=l}return this.helper.css({left:n,top:a,width:o-n,height:r-a}),this.selectees.each(function(){var l=t.data(this,"selectable-item");if(l&&l.element!=i.element[0]){var h=!1;"touch"==s.tolerance?h=!(l.left>o||l.right<n||l.top>r||l.bottom<a):"fit"==s.tolerance&&(h=l.left>n&&l.right<o&&l.top>a&&l.bottom<r),h?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,i._trigger("selecting",e,{selecting:l.element}))):(l.selecting&&((e.metaKey||e.ctrlKey)&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),i._trigger("unselecting",e,{unselecting:l.element}))),l.selected&&!e.metaKey&&!e.ctrlKey&&!l.startselected&&(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,i._trigger("unselecting",e,{unselecting:l.element})))}}),!1}},_mouseStop:function(e){var i=this;this.dragged=!1;this.options;return t(".ui-unselecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",e,{unselected:s.element})}),t(".ui-selecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",e,{selected:s.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),t.extend(t.ui.selectable,{version:"1.8.17"})}(jQuery),function(t){t.widget("ui.sortable",t.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget()[i?"addClass":"removeClass"]("ui-sortable-disabled")):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var s=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(e);{var n=null,a=this;t(e.target).parents().each(function(){return t.data(this,s.widgetName+"-item")==a?(n=t(this),!1):void 0})}if(t.data(e.target,s.widgetName+"-item")==a&&(n=t(e.target)),!n)return!1;if(this.options.handle&&!i){var o=!1;if(t(this.options.handle,n).find("*").andSelf().each(function(){this==e.target&&(o=!0)}),!o)return!1}return this.currentItem=n,this._removeCurrentsFromItems(),!0},_mouseStart:function(e,i,s){var n=this.options,a=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),n.containment&&this._setContainment(),n.cursor&&(t("body").css("cursor")&&(this._storedCursor=t("body").css("cursor")),t("body").css("cursor",n.cursor)),n.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",n.opacity)),n.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",n.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(var o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",e,a._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,s=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(e.pageY-t(document).scrollTop()<i.scrollSensitivity?s=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(s=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed)),e.pageX-t(document).scrollLeft()<i.scrollSensitivity?s=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(s=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed))),s!==!1&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)
}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var n=this.items.length-1;n>=0;n--){var a=this.items[n],o=a.item[0],r=this._intersectsWithPointer(a);if(r&&o!=this.currentItem[0]&&this.placeholder[1==r?"next":"prev"]()[0]!=o&&!t.ui.contains(this.placeholder[0],o)&&("semi-dynamic"==this.options.type?!t.ui.contains(this.element[0],o):!0)){if(this.direction=1==r?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(a))break;this._rearrange(e,a),this._trigger("change",e,this._uiHash());break}}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=s.placeholder.offset();s.reverting=!0,t(this.helper).animate({left:n.left-this.offset.parent.left-s.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:n.top-this.offset.parent.top-s.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){var e=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,e._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,e._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=t.left,o=a+t.width,r=t.top,l=r+t.height,h=this.offset.click.top,c=this.offset.click.left,u=s+h>r&&l>s+h&&e+c>a&&o>e+c;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?u:a<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&r<s+this.helperProportions.height/2&&n-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var i=t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),s=t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),n=i&&s,a=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return n?this.floating?o&&"right"==o||"down"==a?2:1:a&&("down"==a?2:1):!1},_intersectsWithSides:function(e){var i=t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),s=t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"==a&&s||"left"==a&&!s:n&&("down"==n&&i||"up"==n&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor==String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i=[],s=[],n=this._connectWith();if(n&&e)for(var a=n.length-1;a>=0;a--)for(var o=t(n[a]),r=o.length-1;r>=0;r--){var l=t.data(o[r],this.widgetName);l&&l!=this&&!l.options.disabled&&s.push([t.isFunction(l.options.items)?l.options.items.call(l.element):t(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}s.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var a=s.length-1;a>=0;a--)s[a][0].each(function(){i.push(this)});return t(i)},_removeCurrentsFromItems:function(){for(var t=this.currentItem.find(":data("+this.widgetName+"-item)"),e=0;e<this.items.length;e++)for(var i=0;i<t.length;i++)t[i]==this.items[e].item[0]&&this.items.splice(e,1)},_refreshItems:function(e){this.items=[],this.containers=[this];var i=this.items,s=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],n=this._connectWith();if(n)for(var a=n.length-1;a>=0;a--)for(var o=t(n[a]),r=o.length-1;r>=0;r--){var l=t.data(o[r],this.widgetName);l&&l!=this&&!l.options.disabled&&(s.push([t.isFunction(l.options.items)?l.options.items.call(l.element[0],e,{item:this.currentItem}):t(l.options.items,l.element),l]),this.containers.push(l))}for(var a=s.length-1;a>=0;a--)for(var h=s[a][1],c=s[a][0],r=0,u=c.length;u>r;r++){var d=t(c[r]);d.data(this.widgetName+"-item",h),i.push({item:d,instance:h,width:0,height:0,left:0,top:0})}},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var s=this.items[i];if(s.instance==this.currentContainer||!this.currentContainer||s.item[0]==this.currentItem[0]){var n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item;e||(s.width=n.outerWidth(),s.height=n.outerHeight());var a=n.offset();s.left=a.left,s.top=a.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var a=this.containers[i].element.offset();this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(e){var i=e||this,s=i.options;if(!s.placeholder||s.placeholder.constructor==String){var n=s.placeholder;s.placeholder={element:function(){var e=t(document.createElement(i.currentItem[0].nodeName)).addClass(n||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return n||(e.style.visibility="hidden"),e},update:function(t,e){(!n||s.forcePlaceholderSize)&&(e.height()||e.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}}i.placeholder=t(s.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),s.placeholder.update(i,i.placeholder)},_contactContainers:function(e){for(var i=null,s=null,n=this.containers.length-1;n>=0;n--)if(!t.ui.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(i&&t.ui.contains(this.containers[n].element[0],i.element[0]))continue;i=this.containers[n],s=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",e,this._uiHash(this)),this.containers[n].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[s]._trigger("over",e,this._uiHash(this)),this.containers[s].containerCache.over=1;else if(this.currentContainer!=this.containers[s]){for(var a=1e4,o=null,r=this.positionAbs[this.containers[s].floating?"left":"top"],l=this.items.length-1;l>=0;l--)if(t.ui.contains(this.containers[s].element[0],this.items[l].item[0])){var h=this.items[l][this.containers[s].floating?"left":"top"];Math.abs(h-r)<a&&(a=Math.abs(h-r),o=this.items[l])}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[s],o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[s].element,!0),this._trigger("change",e,this._uiHash()),this.containers[s]._trigger("change",e,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[s]._trigger("over",e,this._uiHash(this)),this.containers[s].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(""==s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.browser.msie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),("document"==e.containment||"window"==e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(e.containment)){var i=t(e.containment)[0],s=t(e.containment).offset(),n="hidden"!=t(i).css("overflow");this.containment=[s.left+(parseInt(t(i).css("borderLeftWidth"),10)||0)+(parseInt(t(i).css("paddingLeft"),10)||0)-this.margins.left,s.top+(parseInt(t(i).css("borderTopWidth"),10)||0)+(parseInt(t(i).css("paddingTop"),10)||0)-this.margins.top,s.left+(n?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t(i).css("borderLeftWidth"),10)||0)-(parseInt(t(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,s.top+(n?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t(i).css("borderTopWidth"),10)||0)-(parseInt(t(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"==e?1:-1,n=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-(t.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s),left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-(t.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s)}},_generatePosition:function(e){var i=this.options,s="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(s[0].tagName);"relative"==this.cssPosition&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var a=e.pageX,o=e.pageY;if(this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid)){var r=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1];o=this.containment&&(r-this.offset.click.top<this.containment[1]||r-this.offset.click.top>this.containment[3])?r-this.offset.click.top<this.containment[1]?r+i.grid[1]:r-i.grid[1]:r;var l=this.originalPageX+Math.round((a-this.originalPageX)/i.grid[0])*i.grid[0];a=this.containment&&(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l-this.offset.click.left<this.containment[0]?l+i.grid[0]:l-i.grid[0]:l}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(t.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:s.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(t.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:s.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this,a=this.counter;window.setTimeout(function(){a==n.counter&&n.refreshPositions(!s)},0)},_clear:function(e,i){this.reverting=!1;var s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var n in this._storedCSS)("auto"==this._storedCSS[n]||"static"==this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!i&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!i&&s.push(function(t){this._trigger("update",t,this._uiHash())}),!t.ui.contains(this.element[0],this.currentItem[0])){i||s.push(function(t){this._trigger("remove",t,this._uiHash())});for(var n=this.containers.length-1;n>=0;n--)t.ui.contains(this.containers[n].element[0],this.currentItem[0])&&!i&&(s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.containers[n])),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.containers[n])))}for(var n=this.containers.length-1;n>=0;n--)i||s.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(s.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this._storedCursor&&t("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",e,this._uiHash());for(var n=0;n<s.length;n++)s[n].call(this,e);this._trigger("stop",e,this._uiHash())}return!1}if(i||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(var n=0;n<s.length;n++)s[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.extend(t.ui.sortable,{version:"1.8.17"})}(jQuery),function(t){t.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var e=this,i=e.options;if(e.running=0,e.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),e.headers=e.element.find(i.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){i.disabled||t(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){i.disabled||t(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){i.disabled||t(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){i.disabled||t(this).removeClass("ui-state-focus")}),e.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),i.navigation){var s=e.element.find("a").filter(i.navigationFilter).eq(0);if(s.length){var n=s.closest(".ui-accordion-header");e.active=n.length?n:s.closest(".ui-accordion-content").prev()}}e.active=e._findActive(e.active||i.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),e.active.next().addClass("ui-accordion-content-active"),e._createIcons(),e.resize(),e.element.attr("role","tablist"),e.headers.attr("role","tab").bind("keydown.accordion",function(t){return e._keydown(t)}).next().attr("role","tabpanel"),e.headers.not(e.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),e.active.length?e.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):e.headers.eq(0).attr("tabIndex",0),t.browser.safari||e.headers.find("a").attr("tabIndex",-1),i.event&&e.headers.bind(i.event.split(" ").join(".accordion ")+".accordion",function(t){e._clickHandler.call(e,t,this),t.preventDefault()})},_createIcons:function(){var e=this.options;e.icons&&(t("<span></span>").addClass("ui-icon "+e.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(e.icons.header).toggleClass(e.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var e=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var i=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(e.autoHeight||e.fillHeight)&&i.css("height",""),t.Widget.prototype.destroy.call(this)},_setOption:function(e,i){t.Widget.prototype._setOption.apply(this,arguments),"active"==e&&this.activate(i),"icons"==e&&(this._destroyIcons(),i&&this._createIcons()),"disabled"==e&&this.headers.add(this.headers.next())[i?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(e){if(!(this.options.disabled||e.altKey||e.ctrlKey)){var i=t.ui.keyCode,s=this.headers.length,n=this.headers.index(e.target),a=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:a=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._clickHandler({target:e.target},e.target),e.preventDefault()}return a?(t(e.target).attr("tabIndex",-1),t(a).attr("tabIndex",0),a.focus(),!1):!0}},resize:function(){var e,i=this.options;if(i.fillSpace){if(t.browser.msie){var s=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}e=this.element.parent().height(),t.browser.msie&&this.element.parent().css("overflow",s),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")}else i.autoHeight&&(e=0,this.headers.next().each(function(){e=Math.max(e,t(this).height("").height())}).height(e));return this},activate:function(t){this.options.active=t;var e=this._findActive(t)[0];return this._clickHandler({target:e},e),this},_findActive:function(e){return e?"number"==typeof e?this.headers.filter(":eq("+e+")"):this.headers.not(this.headers.not(e)):e===!1?t([]):this.headers.filter(":eq(0)")},_clickHandler:function(e,i){var s=this.options;if(!s.disabled){if(!e.target){if(!s.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(s.icons.headerSelected).addClass(s.icons.header),this.active.next().addClass("ui-accordion-content-active");var n=this.active.next(),a={options:s,newHeader:t([]),oldHeader:s.active,newContent:t([]),oldContent:n},o=this.active=t([]);return void this._toggle(o,n,a)}var r=t(e.currentTarget||i),l=r[0]===this.active[0];if(s.active=s.collapsible&&l?!1:this.headers.index(r),this.running||!s.collapsible&&l)return;var h=this.active,o=r.next(),n=this.active.next(),a={options:s,newHeader:l&&s.collapsible?t([]):r,oldHeader:this.active,newContent:l&&s.collapsible?t([]):o,oldContent:n},c=this.headers.index(this.active[0])>this.headers.index(r[0]);return this.active=l?t([]):r,this._toggle(o,n,a,l,c),h.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(s.icons.headerSelected).addClass(s.icons.header),l||(r.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(s.icons.header).addClass(s.icons.headerSelected),r.next().addClass("ui-accordion-content-active")),void 0}},_toggle:function(e,i,s,n,a){var o=this,r=o.options;o.toShow=e,o.toHide=i,o.data=s;var l=function(){return o?o._completed.apply(o,arguments):void 0};if(o._trigger("changestart",null,o.data),o.running=0===i.size()?e.size():i.size(),r.animated){var h={};h=r.collapsible&&n?{toShow:t([]),toHide:i,complete:l,down:a,autoHeight:r.autoHeight||r.fillSpace}:{toShow:e,toHide:i,complete:l,down:a,autoHeight:r.autoHeight||r.fillSpace},r.proxied||(r.proxied=r.animated),r.proxiedDuration||(r.proxiedDuration=r.duration),r.animated=t.isFunction(r.proxied)?r.proxied(h):r.proxied,r.duration=t.isFunction(r.proxiedDuration)?r.proxiedDuration(h):r.proxiedDuration;var c=t.ui.accordion.animations,u=r.duration,d=r.animated;d&&!c[d]&&!t.easing[d]&&(d="slide"),c[d]||(c[d]=function(t){this.slide(t,{easing:d,duration:u||700})}),c[d](h)}else r.collapsible&&n?e.toggle():(i.hide(),e.show()),l(!0);i.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),e.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(t){this.running=t?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}}),t.extend(t.ui.accordion,{version:"1.8.17",animations:{slide:function(e,i){if(e=t.extend({easing:"swing",duration:300},e,i),e.toHide.size()){if(!e.toShow.size())return void e.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},e);var s,n=e.toShow.css("overflow"),a=0,o={},r={},l=["height","paddingTop","paddingBottom"],h=e.toShow;s=h[0].style.width,h.width(h.parent().width()-parseFloat(h.css("paddingLeft"))-parseFloat(h.css("paddingRight"))-(parseFloat(h.css("borderLeftWidth"))||0)-(parseFloat(h.css("borderRightWidth"))||0)),t.each(l,function(i,s){r[s]="hide";var n=(""+t.css(e.toShow[0],s)).match(/^([\d+-.]+)(.*)$/);o[s]={value:n[1],unit:n[2]||"px"}}),e.toShow.css({height:0,overflow:"hidden"}).show(),e.toHide.filter(":hidden").each(e.complete).end().filter(":visible").animate(r,{step:function(t,i){"height"==i.prop&&(a=i.end-i.start===0?0:(i.now-i.start)/(i.end-i.start)),e.toShow[0].style[i.prop]=a*o[i.prop].value+o[i.prop].unit},duration:e.duration,easing:e.easing,complete:function(){e.autoHeight||e.toShow.css("height",""),e.toShow.css({width:s,overflow:n}),e.complete()}})}else e.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},e)},bounceslide:function(t){this.slide(t,{easing:t.down?"easeOutBounce":"swing",duration:t.down?1e3:200})}}})}(jQuery),function(t){var e=0;t.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var e,i=this,s=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(s){if(!i.options.disabled&&!i.element.propAttr("readOnly")){e=!1;var n=t.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:i._move("previousPage",s);break;case n.PAGE_DOWN:i._move("nextPage",s);break;case n.UP:i._move("previous",s),s.preventDefault();break;case n.DOWN:i._move("next",s),s.preventDefault();break;case n.ENTER:case n.NUMPAD_ENTER:i.menu.active&&(e=!0,s.preventDefault());case n.TAB:if(!i.menu.active)return;i.menu.select(s);break;case n.ESCAPE:i.element.val(i.term),i.close(s);break;default:clearTimeout(i.searching),i.searching=setTimeout(function(){i.term!=i.element.val()&&(i.selectedItem=null,i.search(null,s))},i.options.delay)}}}).bind("keypress.autocomplete",function(t){e&&(e=!1,t.preventDefault())}).bind("focus.autocomplete",function(){i.options.disabled||(i.selectedItem=null,i.previous=i.element.val())}).bind("blur.autocomplete",function(t){i.options.disabled||(clearTimeout(i.searching),i.closing=setTimeout(function(){i.close(t),i._change(t)},150))}),this._initSource(),this.response=function(){return i._response.apply(i,arguments)},this.menu=t("<ul></ul>").addClass("ui-autocomplete").appendTo(t(this.options.appendTo||"body",s)[0]).mousedown(function(e){var s=i.menu.element[0];t(e.target).closest(".ui-menu-item").length||setTimeout(function(){t(document).one("mousedown",function(e){e.target!==i.element[0]&&e.target!==s&&!t.ui.contains(s,e.target)&&i.close()})},1),setTimeout(function(){clearTimeout(i.closing)},13)}).menu({focus:function(t,e){var s=e.item.data("item.autocomplete");!1!==i._trigger("focus",t,{item:s})&&/^key/.test(t.originalEvent.type)&&i.element.val(s.value)},selected:function(t,e){var n=e.item.data("item.autocomplete"),a=i.previous;i.element[0]!==s.activeElement&&(i.element.focus(),i.previous=a,setTimeout(function(){i.previous=a,i.selectedItem=n},1)),!1!==i._trigger("select",t,{item:n})&&i.element.val(n.value),i.term=i.element.val(),i.close(t),i.selectedItem=n},blur:function(){i.menu.element.is(":visible")&&i.element.val()!==i.term&&i.element.val(i.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),t.fn.bgiframe&&this.menu.element.bgiframe(),i.beforeunloadHandler=function(){i.element.removeAttr("autocomplete")},t(window).bind("beforeunload",i.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),t(window).unbind("beforeunload",this.beforeunloadHandler),t.Widget.prototype.destroy.call(this)},_setOption:function(e,i){t.Widget.prototype._setOption.apply(this,arguments),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(t(i||"body",this.element[0].ownerDocument)[0]),"disabled"===e&&i&&this.xhr&&this.xhr.abort()},_initSource:function(){var i,s,n=this;t.isArray(this.options.source)?(i=this.options.source,this.source=function(e,s){s(t.ui.autocomplete.filter(i,e.term))}):"string"==typeof this.options.source?(s=this.options.source,this.source=function(i,a){n.xhr&&n.xhr.abort(),n.xhr=t.ajax({url:s,data:i,dataType:"json",autocompleteRequest:++e,success:function(t){this.autocompleteRequest===e&&a(t)},error:function(){this.autocompleteRequest===e&&a([])}})}):this.source=this.options.source},search:function(t,e){return t=null!=t?t:this.element.val(),this.term=this.element.val(),t.length<this.options.minLength?this.close(e):(clearTimeout(this.closing),this._trigger("search",e)!==!1?this._search(t):void 0)},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:t},this.response)},_response:function(t){!this.options.disabled&&t&&t.length?(t=this._normalize(t),this._suggest(t),this._trigger("open")):this.close(),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(t){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",t))},_change:function(t){this.previous!==this.element.val()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)
})},_suggest:function(e){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,e),this.menu.deactivate(),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new t.Event("mouseover"))},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var s=this;t.each(i,function(t,i){s._renderItem(e,i)})},_renderItem:function(e,i){return t("<li></li>").data("item.autocomplete",i).append(t("<a></a>").text(i.label)).appendTo(e)},_move:function(t,e){if(this.menu.element.is(":visible")){if(this.menu.first()&&/^previous/.test(t)||this.menu.last()&&/^next/.test(t))return this.element.val(this.term),void this.menu.deactivate();this.menu[t](e)}else this.search(null,e)},widget:function(){return this.menu.element}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(e,i){var s=new RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return s.test(t.label||t.value||t)})}})}(jQuery),function(t){t.widget("ui.menu",{_create:function(){var e=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(i){!t(i.target).closest(".ui-menu-item a").length||(i.preventDefault(),e.select(i))}),this.refresh()},refresh:function(){var e=this,i=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");i.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(i){e.activate(i,t(this).parent())}).mouseleave(function(){e.deactivate()})},activate:function(t,e){if(this.deactivate(),this.hasScroll()){var i=e.offset().top-this.element.offset().top,s=this.element.scrollTop(),n=this.element.height();0>i?this.element.scrollTop(s+i):i>=n&&this.element.scrollTop(s+i-n+e.height())}this.active=e.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",t,{item:e})},deactivate:function(){!this.active||(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(t){this.move("next",".ui-menu-item:first",t)},previous:function(t){this.move("prev",".ui-menu-item:last",t)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(t,e,i){if(this.active){var s=this.active[t+"All"](".ui-menu-item").eq(0);s.length?this.activate(i,s):this.activate(i,this.element.children(e))}else this.activate(i,this.element.children(e))},nextPage:function(e){if(this.hasScroll()){if(!this.active||this.last())return void this.activate(e,this.element.children(".ui-menu-item:first"));var i=this.active.offset().top,s=this.element.height(),n=this.element.children(".ui-menu-item").filter(function(){var e=t(this).offset().top-i-s+t(this).height();return 10>e&&e>-10});n.length||(n=this.element.children(".ui-menu-item:last")),this.activate(e,n)}else this.activate(e,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(e){if(this.hasScroll()){if(!this.active||this.first())return void this.activate(e,this.element.children(".ui-menu-item:last"));var i=this.active.offset().top,s=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var e=t(this).offset().top-i+s-t(this).height();return 10>e&&e>-10}),result.length||(result=this.element.children(".ui-menu-item:first")),this.activate(e,result)}else this.activate(e,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[t.fn.prop?"prop":"attr"]("scrollHeight")},select:function(t){this._trigger("selected",t,{item:this.active})}})}(jQuery),function(t){var e,i,s,n,a="ui-button ui-widget ui-state-default ui-corner-all",o="ui-state-hover ui-state-active ",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var e=t(this).find(":ui-button");setTimeout(function(){e.button("refresh")},1)},h=function(e){var i=e.name,s=e.form,n=t([]);return i&&(n=s?t(s).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),n};t.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",l),"boolean"!=typeof this.options.disabled&&(this.options.disabled=this.element.propAttr("disabled")),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var o=this,r=this.options,c="checkbox"===this.type||"radio"===this.type,u="ui-state-hover"+(c?"":" ui-state-active"),d="ui-state-focus";null===r.label&&(r.label=this.buttonElement.html()),this.element.is(":disabled")&&(r.disabled=!0),this.buttonElement.addClass(a).attr("role","button").bind("mouseenter.button",function(){r.disabled||(t(this).addClass("ui-state-hover"),this===e&&t(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){r.disabled||t(this).removeClass(u)}).bind("click.button",function(t){r.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus.button",function(){o.buttonElement.addClass(d)}).bind("blur.button",function(){o.buttonElement.removeClass(d)}),c&&(this.element.bind("change.button",function(){n||o.refresh()}),this.buttonElement.bind("mousedown.button",function(t){r.disabled||(n=!1,i=t.pageX,s=t.pageY)}).bind("mouseup.button",function(t){!r.disabled&&(i!==t.pageX||s!==t.pageY)&&(n=!0)})),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){return r.disabled||n?!1:(t(this).toggleClass("ui-state-active"),void o.buttonElement.attr("aria-pressed",o.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(r.disabled||n)return!1;t(this).addClass("ui-state-active"),o.buttonElement.attr("aria-pressed","true");var e=o.element[0];h(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){return r.disabled?!1:(t(this).addClass("ui-state-active"),e=this,t(document).one("mouseup",function(){e=null}),void 0)}).bind("mouseup.button",function(){return r.disabled?!1:void t(this).removeClass("ui-state-active")}).bind("keydown.button",function(e){return r.disabled?!1:void((e.keyCode==t.ui.keyCode.SPACE||e.keyCode==t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"))}).bind("keyup.button",function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){if(this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type){var t=this.element.parents().filter(":last"),e="label[for='"+this.element.attr("id")+"']";this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible");var i=this.element.is(":checked");i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",i)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(a+" "+o+" "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),t.Widget.prototype.destroy.call(this)},_setOption:function(e,i){t.Widget.prototype._setOption.apply(this,arguments),"disabled"===e?i?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1):this._resetButton()},refresh:function(){var e=this.element.is(":disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?h(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var e=this.buttonElement.removeClass(r),i=t("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,a=[];s.primary||s.secondary?(this.options.text&&a.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",i))):a.push("ui-button-text-only"),e.addClass(a.join(" "))}}}),t.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,i){"disabled"===e&&this.buttons.button("option",e,i),t.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),t.Widget.prototype.destroy.call(this)}})}(jQuery),function(t,e){var i="ui-dialog ui-widget ui-widget-content ui-corner-all ",s={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},a=t.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};t.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;{var e=this,s=e.options,n=s.title||"&#160;",a=t.ui.dialog.getTitleId(e.element),o=(e.uiDialog=t("<div></div>")).appendTo(document.body).hide().addClass(i+s.dialogClass).css({zIndex:s.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(i){s.closeOnEscape&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===t.ui.keyCode.ESCAPE&&(e.close(i),i.preventDefault())}).attr({role:"dialog","aria-labelledby":a}).mousedown(function(t){e.moveToTop(!1,t)}),r=(e.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(o),(e.uiDialogTitlebar=t("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(o)),l=t('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){l.addClass("ui-state-hover")},function(){l.removeClass("ui-state-hover")}).focus(function(){l.addClass("ui-state-focus")}).blur(function(){l.removeClass("ui-state-focus")}).click(function(t){return e.close(t),!1}).appendTo(r);(e.uiDialogTitlebarCloseText=t("<span></span>")).addClass("ui-icon ui-icon-closethick").text(s.closeText).appendTo(l),t("<span></span>").addClass("ui-dialog-title").attr("id",a).html(n).prependTo(r)}t.isFunction(s.beforeclose)&&!t.isFunction(s.beforeClose)&&(s.beforeClose=s.beforeclose),r.find("*").add(r).disableSelection(),s.draggable&&t.fn.draggable&&e._makeDraggable(),s.resizable&&t.fn.resizable&&e._makeResizable(),e._createButtons(s.buttons),e._isOpen=!1,t.fn.bgiframe&&o.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var t=this;return t.overlay&&t.overlay.destroy(),t.uiDialog.hide(),t.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),t.uiDialog.remove(),t.originalTitle&&t.element.attr("title",t.originalTitle),t},widget:function(){return this.uiDialog},close:function(e){var i,s,n=this;return!1!==n._trigger("beforeClose",e)?(n.overlay&&n.overlay.destroy(),n.uiDialog.unbind("keypress.ui-dialog"),n._isOpen=!1,n.options.hide?n.uiDialog.hide(n.options.hide,function(){n._trigger("close",e)}):(n.uiDialog.hide(),n._trigger("close",e)),t.ui.dialog.overlay.resize(),n.options.modal&&(i=0,t(".ui-dialog").each(function(){this!==n.uiDialog[0]&&(s=t(this).css("z-index"),isNaN(s)||(i=Math.max(i,s)))}),t.ui.dialog.maxZ=i),n):void 0},isOpen:function(){return this._isOpen},moveToTop:function(e,i){var s,n=this,a=n.options;return a.modal&&!e||!a.stack&&!a.modal?n._trigger("focus",i):(a.zIndex>t.ui.dialog.maxZ&&(t.ui.dialog.maxZ=a.zIndex),n.overlay&&(t.ui.dialog.maxZ+=1,n.overlay.$el.css("z-index",t.ui.dialog.overlay.maxZ=t.ui.dialog.maxZ)),s={scrollTop:n.element.scrollTop(),scrollLeft:n.element.scrollLeft()},t.ui.dialog.maxZ+=1,n.uiDialog.css("z-index",t.ui.dialog.maxZ),n.element.attr(s),n._trigger("focus",i),n)},open:function(){if(!this._isOpen){var e=this,i=e.options,s=e.uiDialog;return e.overlay=i.modal?new t.ui.dialog.overlay(e):null,e._size(),e._position(i.position),s.show(i.show),e.moveToTop(!0),i.modal&&s.bind("keydown.ui-dialog",function(e){if(e.keyCode===t.ui.keyCode.TAB){var i=t(":tabbable",this),s=i.filter(":first"),n=i.filter(":last");if(e.target===n[0]&&!e.shiftKey)return s.focus(1),!1;if(e.target===s[0]&&e.shiftKey)return n.focus(1),!1}}),t(e.element.find(":tabbable").get().concat(s.find(".ui-dialog-buttonpane :tabbable").get().concat(s.get()))).eq(0).focus(),e._isOpen=!0,e._trigger("open"),e}},_createButtons:function(e){var i=this,s=!1,n=t("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),o=t("<div></div>").addClass("ui-dialog-buttonset").appendTo(n);i.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof e&&null!==e&&t.each(e,function(){return!(s=!0)}),s&&(t.each(e,function(e,s){s=t.isFunction(s)?{click:s,text:e}:s;var n=t('<button type="button"></button>').click(function(){s.click.apply(i.element[0],arguments)}).appendTo(o);t.each(s,function(t,e){"click"!==t&&(t in a?n[t](e):n.attr(t,e))}),t.fn.button&&n.button()}),n.appendTo(i.uiDialog))},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i,s=this,n=s.options,a=t(document);s.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(a,o){i="auto"===n.height?"auto":t(this).height(),t(this).height(t(this).height()).addClass("ui-dialog-dragging"),s._trigger("dragStart",a,e(o))},drag:function(t,i){s._trigger("drag",t,e(i))},stop:function(o,r){n.position=[r.position.left-a.scrollLeft(),r.position.top-a.scrollTop()],t(this).removeClass("ui-dialog-dragging").height(i),s._trigger("dragStop",o,e(r)),t.ui.dialog.overlay.resize()}})},_makeResizable:function(i){function s(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}i=i===e?this.options.resizable:i;var n=this,a=n.options,o=n.uiDialog.css("position"),r="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";n.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:n.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:n._minHeight(),handles:r,start:function(e,i){t(this).addClass("ui-dialog-resizing"),n._trigger("resizeStart",e,s(i))},resize:function(t,e){n._trigger("resize",t,s(e))},stop:function(e,i){t(this).removeClass("ui-dialog-resizing"),a.height=t(this).height(),a.width=t(this).width(),n._trigger("resizeStop",e,s(i)),t.ui.dialog.overlay.resize()}}).css("position",o).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(e){var i,s=[],n=[0,0];e?(("string"==typeof e||"object"==typeof e&&"0"in e)&&(s=e.split?e.split(" "):[e[0],e[1]],1===s.length&&(s[1]=s[0]),t.each(["left","top"],function(t,e){+s[t]===s[t]&&(n[t]=s[t],s[t]=e)}),e={my:s.join(" "),at:s.join(" "),offset:n.join(" ")}),e=t.extend({},t.ui.dialog.prototype.options.position,e)):e=t.ui.dialog.prototype.options.position,i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(t.extend({of:window},e)),i||this.uiDialog.hide()},_setOptions:function(e){var i=this,a={},o=!1;t.each(e,function(t,e){i._setOption(t,e),t in s&&(o=!0),t in n&&(a[t]=e)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(e,s){var n=this,a=n.uiDialog;switch(e){case"beforeclose":e="beforeClose";break;case"buttons":n._createButtons(s);break;case"closeText":n.uiDialogTitlebarCloseText.text(""+s);break;case"dialogClass":a.removeClass(n.options.dialogClass).addClass(i+s);break;case"disabled":s?a.addClass("ui-dialog-disabled"):a.removeClass("ui-dialog-disabled");break;case"draggable":var o=a.is(":data(draggable)");o&&!s&&a.draggable("destroy"),!o&&s&&n._makeDraggable();break;case"position":n._position(s);break;case"resizable":var r=a.is(":data(resizable)");r&&!s&&a.resizable("destroy"),r&&"string"==typeof s&&a.resizable("option","handles",s),!r&&s!==!1&&n._makeResizable(s);break;case"title":t(".ui-dialog-title",n.uiDialogTitlebar).html(""+(s||"&#160;"))}t.Widget.prototype._setOption.apply(n,arguments)},_size:function(){var e,i,s=this.options,n=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",width:s.width}).height(),i=Math.max(0,s.minHeight-e),"auto"===s.height)if(t.support.minHeight)this.element.css({minHeight:i,height:"auto"});else{this.uiDialog.show();var a=this.element.css("height","auto").height();n||this.uiDialog.hide(),this.element.height(Math.max(a,i))}else this.element.height(Math.max(s.height-e,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),t.extend(t.ui.dialog,{version:"1.8.17",uuid:0,maxZ:0,getTitleId:function(t){var e=t.attr("id");return e||(this.uuid+=1,e=this.uuid),"ui-dialog-title-"+e},overlay:function(e){this.$el=t.ui.dialog.overlay.create(e)}}),t.extend(t.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:t.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(t){return t+".dialog-overlay"}).join(" "),create:function(e){0===this.instances.length&&(setTimeout(function(){t.ui.dialog.overlay.instances.length&&t(document).bind(t.ui.dialog.overlay.events,function(e){return t(e.target).zIndex()<t.ui.dialog.overlay.maxZ?!1:void 0})},1),t(document).bind("keydown.dialog-overlay",function(i){e.options.closeOnEscape&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===t.ui.keyCode.ESCAPE&&(e.close(i),i.preventDefault())}),t(window).bind("resize.dialog-overlay",t.ui.dialog.overlay.resize));var i=(this.oldInstances.pop()||t("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return t.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(e){var i=t.inArray(e,this.instances);-1!=i&&this.oldInstances.push(this.instances.splice(i,1)[0]),0===this.instances.length&&t([document,window]).unbind(".dialog-overlay"),e.remove();var s=0;t.each(this.instances,function(){s=Math.max(s,this.css("z-index"))}),this.maxZ=s},height:function(){var e,i;return t.browser.msie&&t.browser.version<7?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),i>e?t(window).height()+"px":e+"px"):t(document).height()+"px"},width:function(){var e,i;return t.browser.msie?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),i>e?t(window).width()+"px":e+"px"):t(document).width()+"px"},resize:function(){var e=t([]);t.each(t.ui.dialog.overlay.instances,function(){e=e.add(this)}),e.css({width:0,height:0}).css({width:t.ui.dialog.overlay.width(),height:t.ui.dialog.overlay.height()})}}),t.extend(t.ui.dialog.overlay.prototype,{destroy:function(){t.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var i=this,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=s.values&&s.values.length||1,r=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(s.disabled?" ui-slider-disabled ui-disabled":"")),this.range=t([]),s.range&&(s.range===!0&&(s.values||(s.values=[this._valueMin(),this._valueMin()]),s.values.length&&2!==s.values.length&&(s.values=[s.values[0],s.values[0]])),this.range=t("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===s.range||"max"===s.range?" ui-slider-range-"+s.range:"")));for(var l=n.length;o>l;l+=1)r.push(a);this.handles=n.add(t(r.join("")).appendTo(i.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(t){t.preventDefault()}).hover(function(){s.disabled||t(this).addClass("ui-state-hover")},function(){t(this).removeClass("ui-state-hover")}).focus(function(){s.disabled?t(this).blur():(t(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),t(this).addClass("ui-state-focus"))}).blur(function(){t(this).removeClass("ui-state-focus")}),this.handles.each(function(e){t(this).data("index.ui-slider-handle",e)}),this.handles.keydown(function(s){var n,a,o,r,l=!0,h=t(this).data("index.ui-slider-handle");if(!i.options.disabled){switch(s.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(l=!1,!i._keySliding&&(i._keySliding=!0,t(this).addClass("ui-state-active"),n=i._start(s,h),n===!1))return}switch(r=i.options.step,a=o=i.options.values&&i.options.values.length?i.values(h):i.value(),s.keyCode){case t.ui.keyCode.HOME:o=i._valueMin();break;case t.ui.keyCode.END:o=i._valueMax();break;case t.ui.keyCode.PAGE_UP:o=i._trimAlignValue(a+(i._valueMax()-i._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:o=i._trimAlignValue(a-(i._valueMax()-i._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(a===i._valueMax())return;o=i._trimAlignValue(a+r);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(a===i._valueMin())return;o=i._trimAlignValue(a-r)}return i._slide(s,h,o),l}}).keyup(function(e){var s=t(this).data("index.ui-slider-handle");i._keySliding&&(i._keySliding=!1,i._stop(e,s),i._change(e,s),t(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(e){var i,s,n,a,o,r,l,h,c,u=this.options;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,o=this,this.handles.each(function(e){var i=Math.abs(s-o.values(e));n>i&&(n=i,a=t(this),r=e)}),u.range===!0&&this.values(1)===u.min&&(r+=1,a=t(this.handles[r])),l=this._start(e,r),l===!1?!1:(this._mouseSliding=!0,o._handleIndex=r,a.addClass("ui-state-active").focus(),h=a.offset(),c=!t(e.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:e.pageX-h.left-a.width()/2,top:e.pageY-h.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,r,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,n,a;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>s||1===e&&s>i)&&(i=s),i!==this.values(e)&&(n=this.values(),n[e]=i,a=this._trigger("slide",t,{handle:this.handles[e],value:i,values:n}),s=this.values(e?0:1),a!==!1&&this.values(e,i,!0))):i!==this.value()&&(a=this._trigger("slide",t,{handle:this.handles[e],value:i}),a!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(e,i){var s,n,a;if(arguments.length>1)this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e);else{if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(s=this.options.values,n=arguments[0],a=0;a<s.length;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()}},_setOption:function(e,i){var s,n=0;switch(t.isArray(this.options.values)&&(n=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);for(i=this.options.values.slice(),s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(i[s]);return i},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,s,n,a,o=this.options.range,r=this.options,l=this,h=this._animateOff?!1:r.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(s){e=(l.values(s)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=e+"%",t(this).stop(1,1)[h?"animate":"css"](c,r.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===s&&l.range.stop(1,1)[h?"animate":"css"]({left:e+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({width:e-i+"%"},{queue:!1,duration:r.animate})):(0===s&&l.range.stop(1,1)[h?"animate":"css"]({bottom:e+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({height:e-i+"%"},{queue:!1,duration:r.animate}))),i=e}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),e=a!==n?(s-n)/(a-n)*100:0,c["horizontal"===l.orientation?"left":"bottom"]=e+"%",this.handle.stop(1,1)[h?"animate":"css"](c,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:e+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[h?"animate":"css"]({width:100-e+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:e+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[h?"animate":"css"]({height:100-e+"%"},{queue:!1,duration:r.animate}))}}),t.extend(t.ui.slider,{version:"1.8.17"})}(jQuery),function(e,i){function s(){return++o}function n(){return++a}var a=0,o=0;e.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(t,e){if("selected"==t){if(this.options.collapsible&&e==this.options.selected)return;this.select(e)
}else this.options[t]=e,this._tabify()},_tabId:function(t){return t.title&&t.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+n()},_sanitizeSelector:function(t){return t.replace(/:/g,"\\:")},_cookie:function(){var t=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+s());return e.cookie.apply(null,[t].concat(e.makeArray(arguments)))},_ui:function(t,e){return{tab:t,panel:e,index:this.anchors.index(t)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var t=e(this);t.html(t.data("label.tabs")).removeData("label.tabs")})},_tabify:function(t){function s(t,i){t.css("display",""),!e.support.opacity&&i.opacity&&t[0].style.removeAttribute("filter")}var n=this,a=this.options,o=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=e(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return e("a",this)[0]}),this.panels=e([]),this.anchors.each(function(t,i){var s,r=e(i).attr("href"),l=r.split("#")[0];if(l&&(l===location.toString().split("#")[0]||(s=e("base")[0])&&l===s.href)&&(r=i.hash,i.href=r),o.test(r))n.panels=n.panels.add(n.element.find(n._sanitizeSelector(r)));else if(r&&"#"!==r){e.data(i,"href.tabs",r),e.data(i,"load.tabs",r.replace(/#.*$/,""));var h=n._tabId(i);i.href="#"+h;var c=n.element.find("#"+h);c.length||(c=e(a.panelTemplate).attr("id",h).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(n.panels[t-1]||n.list),c.data("destroy.tabs",!0)),n.panels=n.panels.add(c)}else a.disabled.push(t)}),t?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),a.selected===i?(location.hash&&this.anchors.each(function(t,e){return e.hash==location.hash?(a.selected=t,!1):void 0}),"number"!=typeof a.selected&&a.cookie&&(a.selected=parseInt(n._cookie(),10)),"number"!=typeof a.selected&&this.lis.filter(".ui-tabs-selected").length&&(a.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),a.selected=a.selected||(this.lis.length?0:-1)):null===a.selected&&(a.selected=-1),a.selected=a.selected>=0&&this.anchors[a.selected]||a.selected<0?a.selected:0,a.disabled=e.unique(a.disabled.concat(e.map(this.lis.filter(".ui-state-disabled"),function(t){return n.lis.index(t)}))).sort(),-1!=e.inArray(a.selected,a.disabled)&&a.disabled.splice(e.inArray(a.selected,a.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),a.selected>=0&&this.anchors.length&&(n.element.find(n._sanitizeSelector(n.anchors[a.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(a.selected).addClass("ui-tabs-selected ui-state-active"),n.element.queue("tabs",function(){n._trigger("show",null,n._ui(n.anchors[a.selected],n.element.find(n._sanitizeSelector(n.anchors[a.selected].hash))[0]))}),this.load(a.selected)),e(window).bind("unload",function(){n.lis.add(n.anchors).unbind(".tabs"),n.lis=n.anchors=n.panels=null})):a.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[a.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),a.cookie&&this._cookie(a.selected,a.cookie);for(var r,l=0;r=this.lis[l];l++)e(r)[-1==e.inArray(l,a.disabled)||e(r).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(a.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==a.event){var h=function(t,e){e.is(":not(.ui-state-disabled)")&&e.addClass("ui-state-"+t)},c=function(t,e){e.removeClass("ui-state-"+t)};this.lis.bind("mouseover.tabs",function(){h("hover",e(this))}),this.lis.bind("mouseout.tabs",function(){c("hover",e(this))}),this.anchors.bind("focus.tabs",function(){h("focus",e(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){c("focus",e(this).closest("li"))})}var u,d;a.fx&&(e.isArray(a.fx)?(u=a.fx[0],d=a.fx[1]):u=d=a.fx);var p=d?function(t,i){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),i.hide().removeClass("ui-tabs-hide").animate(d,d.duration||"normal",function(){s(i,d),n._trigger("show",null,n._ui(t,i[0]))})}:function(t,i){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),i.removeClass("ui-tabs-hide"),n._trigger("show",null,n._ui(t,i[0]))},f=u?function(t,e){e.animate(u,u.duration||"normal",function(){n.lis.removeClass("ui-tabs-selected ui-state-active"),e.addClass("ui-tabs-hide"),s(e,u),n.element.dequeue("tabs")})}:function(t,e){n.lis.removeClass("ui-tabs-selected ui-state-active"),e.addClass("ui-tabs-hide"),n.element.dequeue("tabs")};this.anchors.bind(a.event+".tabs",function(){var t=this,i=e(t).closest("li"),s=n.panels.filter(":not(.ui-tabs-hide)"),o=n.element.find(n._sanitizeSelector(t.hash));if(i.hasClass("ui-tabs-selected")&&!a.collapsible||i.hasClass("ui-state-disabled")||i.hasClass("ui-state-processing")||n.panels.filter(":animated").length||n._trigger("select",null,n._ui(this,o[0]))===!1)return this.blur(),!1;if(a.selected=n.anchors.index(this),n.abort(),a.collapsible){if(i.hasClass("ui-tabs-selected"))return a.selected=-1,a.cookie&&n._cookie(a.selected,a.cookie),n.element.queue("tabs",function(){f(t,s)}).dequeue("tabs"),this.blur(),!1;if(!s.length)return a.cookie&&n._cookie(a.selected,a.cookie),n.element.queue("tabs",function(){p(t,o)}),n.load(n.anchors.index(this)),this.blur(),!1}if(a.cookie&&n._cookie(a.selected,a.cookie),!o.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";s.length&&n.element.queue("tabs",function(){f(t,s)}),n.element.queue("tabs",function(){p(t,o)}),n.load(n.anchors.index(this)),e.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$="+t+"]"))),t},destroy:function(){var t=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var t=e.data(this,"href.tabs");t&&(this.href=t);var i=e(this).unbind(".tabs");e.each(["href","load","cache"],function(t,e){i.removeData(e+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){e.data(this,"destroy.tabs")?e(this).remove():e(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),t.cookie&&this._cookie(null,t.cookie),this},add:function(t,s,n){n===i&&(n=this.anchors.length);var a=this,o=this.options,r=e(o.tabTemplate.replace(/#\{href\}/g,t).replace(/#\{label\}/g,s)),l=t.indexOf("#")?this._tabId(e("a",r)[0]):t.replace("#","");r.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var h=a.element.find("#"+l);return h.length||(h=e(o.panelTemplate).attr("id",l).data("destroy.tabs",!0)),h.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),n>=this.lis.length?(r.appendTo(this.list),h.appendTo(this.list[0].parentNode)):(r.insertBefore(this.lis[n]),h.insertBefore(this.panels[n])),o.disabled=e.map(o.disabled,function(t){return t>=n?++t:t}),this._tabify(),1==this.anchors.length&&(o.selected=0,r.addClass("ui-tabs-selected ui-state-active"),h.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){a._trigger("show",null,a._ui(a.anchors[0],a.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[n],this.panels[n])),this},remove:function(t){t=this._getIndex(t);var i=this.options,s=this.lis.eq(t).remove(),n=this.panels.eq(t).remove();return s.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(t+(t+1<this.anchors.length?1:-1)),i.disabled=e.map(e.grep(i.disabled,function(e){return e!=t}),function(e){return e>=t?--e:e}),this._tabify(),this._trigger("remove",null,this._ui(s.find("a")[0],n[0])),this},enable:function(t){t=this._getIndex(t);var i=this.options;return-1!=e.inArray(t,i.disabled)?(this.lis.eq(t).removeClass("ui-state-disabled"),i.disabled=e.grep(i.disabled,function(e){return e!=t}),this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t])),this):void 0},disable:function(t){t=this._getIndex(t);var e=this.options;return t!=e.selected&&(this.lis.eq(t).addClass("ui-state-disabled"),e.disabled.push(t),e.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[t],this.panels[t]))),this},select:function(t){if(t=this._getIndex(t),-1==t){if(!this.options.collapsible||-1==this.options.selected)return this;t=this.options.selected}return this.anchors.eq(t).trigger(this.options.event+".tabs"),this},load:function(t){t=this._getIndex(t);var i=this,s=this.options,n=this.anchors.eq(t)[0],a=e.data(n,"load.tabs");if(this.abort(),a&&(0===this.element.queue("tabs").length||!e.data(n,"cache.tabs"))){if(this.lis.eq(t).addClass("ui-state-processing"),s.spinner){var o=e("span",n);o.data("label.tabs",o.html()).html(s.spinner)}return this.xhr=e.ajax(e.extend({},s.ajaxOptions,{url:a,success:function(a,o){i.element.find(i._sanitizeSelector(n.hash)).html(a),i._cleanup(),s.cache&&e.data(n,"cache.tabs",!0),i._trigger("load",null,i._ui(i.anchors[t],i.panels[t]));try{s.ajaxOptions.success(a,o)}catch(r){}},error:function(e,a){i._cleanup(),i._trigger("load",null,i._ui(i.anchors[t],i.panels[t]));try{s.ajaxOptions.error(e,a,t,n)}catch(o){}}})),i.element.dequeue("tabs"),this}this.element.dequeue("tabs")},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(t,e){return this.anchors.eq(t).removeData("cache.tabs").data("load.tabs",e),this},length:function(){return this.anchors.length}}),e.extend(e.ui.tabs,{version:"1.8.17"}),e.extend(e.ui.tabs.prototype,{rotation:null,rotate:function(e,i){var s=this,n=this.options,a=s._rotate||(s._rotate=function(t){clearTimeout(s.rotation),s.rotation=setTimeout(function(){var t=n.selected;s.select(++t<s.anchors.length?t:0)},e),t&&t.stopPropagation()}),o=s._unrotate||(s._unrotate=i?function(){t=n.selected,a()}:function(t){t.clientX&&s.rotate(null)});return e?(this.element.bind("tabsshow",a),this.anchors.bind(n.event+".tabs",o),a()):(clearTimeout(s.rotation),this.element.unbind("tabsshow",a),this.anchors.unbind(n.event+".tabs",o),delete this._rotate,delete this._unrotate),this}})}(jQuery),function($,undefined){function isArray(t){return t&&($.browser.safari&&"object"==typeof t&&t.length||t.constructor&&t.constructor.toString().match(/\Array\(\)/))}function extendRemove(t,e){$.extend(t,e);for(var i in e)(null==e[i]||e[i]==undefined)&&(t[i]=e[i]);return t}function bindHover(t){var e="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.bind("mouseout",function(t){var i=$(t.target).closest(e);!i.length||i.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(i){var s=$(i.target).closest(e);!$.datepicker._isDisabledDatepicker(instActive.inline?t.parent()[0]:instActive.input[0])&&!!s.length&&(s.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),s.addClass("ui-state-hover"),s.hasClass("ui-datepicker-prev")&&s.addClass("ui-datepicker-prev-hover"),s.hasClass("ui-datepicker-next")&&s.addClass("ui-datepicker-next-hover"))})}function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}$.extend($.ui,{datepicker:{version:"1.8.17"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return extendRemove(this._defaults,t||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(t,e){var i=t[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:i,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:e?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(t,e){var i=$(t);e.append=$([]),e.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,e),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(t,i,s){e.settings[i]=s}).bind("getData.datepicker",function(t,i){return this._get(e,i)}),this._autoSize(e),$.data(t,PROP_NAME,e),e.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,e){var i=this._get(e,"appendText"),s=this._get(e,"isRTL");e.append&&e.append.remove(),i&&(e.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),t[s?"before":"after"](e.append)),t.unbind("focus",this._showDatepicker),e.trigger&&e.trigger.remove();var n=this._get(e,"showOn");if(("focus"==n||"both"==n)&&t.focus(this._showDatepicker),"button"==n||"both"==n){var a=this._get(e,"buttonText"),o=this._get(e,"buttonImage");e.trigger=$(this._get(e,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:a,title:a}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==o?a:$("<img/>").attr({src:o,alt:a,title:a}))),t[s?"before":"after"](e.trigger),e.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==t[0]?$.datepicker._hideDatepicker():$.datepicker._showDatepicker(t[0]),!1})}},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e=new Date(2009,11,20),i=this._get(t,"dateFormat");if(i.match(/[DM]/)){var s=function(t){for(var e=0,i=0,s=0;s<t.length;s++)t[s].length>e&&(e=t[s].length,i=s);return i};e.setMonth(s(this._get(t,i.match(/MM/)?"monthNames":"monthNamesShort"))),e.setDate(s(this._get(t,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-e.getDay())}t.input.attr("size",this._formatDate(t,e).length)}},_inlineDatepicker:function(t,e){var i=$(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(e.dpDiv).bind("setData.datepicker",function(t,i,s){e.settings[i]=s}).bind("getData.datepicker",function(t,i){return this._get(e,i)}),$.data(t,PROP_NAME,e),this._setDate(e,this._getDefaultDate(e),!0),this._updateDatepicker(e),this._updateAlternate(e),e.settings.disabled&&this._disableDatepicker(t),e.dpDiv.css("display","block"))},_dialogDatepicker:function(t,e,i,s,n){var a=this._dialogInst;if(!a){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),a=this._dialogInst=this._newInst(this._dialogInput,!1),a.settings={},$.data(this._dialogInput[0],PROP_NAME,a)}if(extendRemove(a.settings,s||{}),e=e&&e.constructor==Date?this._formatDate(a,e):e,this._dialogInput.val(e),this._pos=n?n.length?n:[n.pageX,n.pageY]:null,!this._pos){var r=document.documentElement.clientWidth,l=document.documentElement.clientHeight,h=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[r/2-100+h,l/2-150+c]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),a.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,a),this},_destroyDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var s=t.nodeName.toLowerCase();$.removeData(t,PROP_NAME),"input"==s?(i.append.remove(),i.trigger.remove(),e.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==s||"span"==s)&&e.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var s=t.nodeName.toLowerCase();if("input"==s)t.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==s||"span"==s){var n=e.children("."+this._inlineClass);n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(e){return e==t?null:e})}},_disableDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var s=t.nodeName.toLowerCase();if("input"==s)t.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==s||"span"==s){var n=e.children("."+this._inlineClass);n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(e){return e==t?null:e}),this._disabledInputs[this._disabledInputs.length]=t}},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]==t)return!0;return!1},_getInst:function(t){try{return $.data(t,PROP_NAME)}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,e,i){var s=this._getInst(t);if(2==arguments.length&&"string"==typeof e)return"defaults"==e?$.extend({},$.datepicker._defaults):s?"all"==e?$.extend({},s.settings):this._get(s,e):null;var n=e||{};if("string"==typeof e&&(n={},n[e]=i),s){this._curInst==s&&this._hideDatepicker();var a=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(s,"min"),r=this._getMinMaxDate(s,"max");extendRemove(s.settings,n),null!==o&&n.dateFormat!==undefined&&n.minDate===undefined&&(s.settings.minDate=this._formatDate(s,o)),null!==r&&n.dateFormat!==undefined&&n.maxDate===undefined&&(s.settings.maxDate=this._formatDate(s,r)),this._attachments($(t),s),this._autoSize(s),this._setDate(s,a),this._updateAlternate(s),this._updateDatepicker(s)}},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(t){var e=$.datepicker._getInst(t.target),i=!0,s=e.dpDiv.is(".ui-datepicker-rtl");if(e._keyEvent=!0,$.datepicker._datepickerShowing)switch(t.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var n=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",e.dpDiv);n[0]&&$.datepicker._selectDay(t.target,e.selectedMonth,e.selectedYear,n[0]);var a=$.datepicker._get(e,"onSelect");if(a){var o=$.datepicker._formatDate(e);a.apply(e.input?e.input[0]:null,[o,e])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(t.target,t.ctrlKey?-$.datepicker._get(e,"stepBigMonths"):-$.datepicker._get(e,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(t.target,t.ctrlKey?+$.datepicker._get(e,"stepBigMonths"):+$.datepicker._get(e,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&$.datepicker._clearDate(t.target),i=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&$.datepicker._gotoToday(t.target),i=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,s?1:-1,"D"),i=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&$.datepicker._adjustDate(t.target,t.ctrlKey?-$.datepicker._get(e,"stepBigMonths"):-$.datepicker._get(e,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,-7,"D"),i=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,s?-1:1,"D"),i=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&$.datepicker._adjustDate(t.target,t.ctrlKey?+$.datepicker._get(e,"stepBigMonths"):+$.datepicker._get(e,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,7,"D"),i=t.ctrlKey||t.metaKey;break;default:i=!1}else 36==t.keyCode&&t.ctrlKey?$.datepicker._showDatepicker(this):i=!1;i&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var e=$.datepicker._getInst(t.target);if($.datepicker._get(e,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(e,"dateFormat")),s=String.fromCharCode(t.charCode==undefined?t.keyCode:t.charCode);return t.ctrlKey||t.metaKey||" ">s||!i||i.indexOf(s)>-1}},_doKeyUp:function(t){var e=$.datepicker._getInst(t.target);if(e.input.val()!=e.lastVal)try{var i=$.datepicker.parseDate($.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,$.datepicker._getFormatConfig(e));i&&($.datepicker._setDateFromField(e),$.datepicker._updateAlternate(e),$.datepicker._updateDatepicker(e))}catch(t){$.datepicker.log(t)}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!=t.nodeName.toLowerCase()&&(t=$("input",t.parentNode)[0]),!$.datepicker._isDisabledDatepicker(t)&&$.datepicker._lastInput!=t){var e=$.datepicker._getInst(t);$.datepicker._curInst&&$.datepicker._curInst!=e&&($.datepicker._curInst.dpDiv.stop(!0,!0),e&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var i=$.datepicker._get(e,"beforeShow"),s=i?i.apply(t,[t,e]):{};if(s===!1)return;extendRemove(e.settings,s),e.lastVal=null,$.datepicker._lastInput=t,$.datepicker._setDateFromField(e),$.datepicker._inDialog&&(t.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(t),$.datepicker._pos[1]+=t.offsetHeight);var n=!1;$(t).parents().each(function(){return n|="fixed"==$(this).css("position"),!n}),n&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var a={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,e.dpDiv.empty(),e.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(e),a=$.datepicker._checkOffset(e,a,n),e.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":n?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),!e.inline){var o=$.datepicker._get(e,"showAnim"),r=$.datepicker._get(e,"duration"),l=function(){var t=e.dpDiv.find("iframe.ui-datepicker-cover");if(t.length){var i=$.datepicker._getBorders(e.dpDiv);t.css({left:-i[0],top:-i[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()})}};e.dpDiv.zIndex($(t).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[o]?e.dpDiv.show(o,$.datepicker._get(e,"showOptions"),r,l):e.dpDiv[o||"show"](o?r:null,l),(!o||!r)&&l(),e.input.is(":visible")&&!e.input.is(":disabled")&&e.input.focus(),$.datepicker._curInst=e}}},_updateDatepicker:function(t){var e=this;e.maxRows=4;var i=$.datepicker._getBorders(t.dpDiv);instActive=t,t.dpDiv.empty().append(this._generateHTML(t));var s=t.dpDiv.find("iframe.ui-datepicker-cover");!s.length||s.css({left:-i[0],top:-i[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()}),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n=this._getNumberOfMonths(t),a=n[1],o=17;if(t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a>1&&t.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",o*a+"em"),t.dpDiv[(1!=n[0]||1!=n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t==$.datepicker._curInst&&$.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!=document.activeElement&&t.input.focus(),t.yearshtml){var r=t.yearshtml;setTimeout(function(){r===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),r=t.yearshtml=null},0)}},_getBorders:function(t){var e=function(t){return{thin:1,medium:2,thick:3}[t]||t};return[parseFloat(e(t.css("border-left-width"))),parseFloat(e(t.css("border-top-width")))]},_checkOffset:function(t,e,i){var s=t.dpDiv.outerWidth(),n=t.dpDiv.outerHeight(),a=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,r=document.documentElement.clientWidth+$(document).scrollLeft(),l=document.documentElement.clientHeight+$(document).scrollTop();return e.left-=this._get(t,"isRTL")?s-a:0,e.left-=i&&e.left==t.input.offset().left?$(document).scrollLeft():0,e.top-=i&&e.top==t.input.offset().top+o?$(document).scrollTop():0,e.left-=Math.min(e.left,e.left+s>r&&r>s?Math.abs(e.left+s-r):0),e.top-=Math.min(e.top,e.top+n>l&&l>n?Math.abs(n+o):0),e},_findPos:function(t){for(var e=this._getInst(t),i=this._get(e,"isRTL");t&&("hidden"==t.type||1!=t.nodeType||$.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];var s=$(t).offset();return[s.left,s.top]},_hideDatepicker:function(t){var e=this._curInst;if(e&&(!t||e==$.data(t,PROP_NAME))&&this._datepickerShowing){var i=this._get(e,"showAnim"),s=this._get(e,"duration"),n=this,a=function(){$.datepicker._tidyDialog(e),n._curInst=null};$.effects&&$.effects[i]?e.dpDiv.hide(i,$.datepicker._get(e,"showOptions"),s,a):e.dpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?s:null,a),i||a(),this._datepickerShowing=!1;var o=this._get(e,"onClose");o&&o.apply(e.input?e.input[0]:null,[e.input?e.input.val():"",e]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if($.datepicker._curInst){var e=$(t.target),i=$.datepicker._getInst(e[0]);(e[0].id!=$.datepicker._mainDivId&&0==e.parents("#"+$.datepicker._mainDivId).length&&!e.hasClass($.datepicker.markerClassName)&&!e.hasClass($.datepicker._triggerClass)&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||e.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=i)&&$.datepicker._hideDatepicker()}},_adjustDate:function(t,e,i){var s=$(t),n=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(n,e+("M"==i?this._get(n,"showCurrentAtPos"):0),i),this._updateDatepicker(n))},_gotoToday:function(t){var e=$(t),i=this._getInst(e[0]);if(this._get(i,"gotoCurrent")&&i.currentDay)i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear;else{var s=new Date;i.selectedDay=s.getDate(),i.drawMonth=i.selectedMonth=s.getMonth(),i.drawYear=i.selectedYear=s.getFullYear()}this._notifyChange(i),this._adjustDate(e)},_selectMonthYear:function(t,e,i){var s=$(t),n=this._getInst(s[0]);n["selected"+("M"==i?"Month":"Year")]=n["draw"+("M"==i?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10),this._notifyChange(n),this._adjustDate(s)},_selectDay:function(t,e,i,s){var n=$(t);if(!$(s).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(n[0])){var a=this._getInst(n[0]);a.selectedDay=a.currentDay=$("a",s).html(),a.selectedMonth=a.currentMonth=e,a.selectedYear=a.currentYear=i,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear))}},_clearDate:function(t){{var e=$(t);this._getInst(e[0])}this._selectDate(e,"")},_selectDate:function(t,e){var i=$(t),s=this._getInst(i[0]);e=null!=e?e:this._formatDate(s),s.input&&s.input.val(e),this._updateAlternate(s);var n=this._get(s,"onSelect");n?n.apply(s.input?s.input[0]:null,[e,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var e=this._get(t,"altField");if(e){var i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t));$(e).each(function(){$(this).val(n)})}},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e=new Date(t.getTime());e.setDate(e.getDate()+4-(e.getDay()||7));var i=e.getTime();return e.setMonth(0),e.setDate(1),Math.floor(Math.round((i-e)/864e5)/7)+1},parseDate:function(t,e,i){if(null==t||null==e)throw"Invalid arguments";if(e="object"==typeof e?e.toString():e+"",""==e)return null;var s=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff;s="string"!=typeof s?s:(new Date).getFullYear()%100+parseInt(s,10);for(var n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=-1,h=-1,c=-1,u=-1,d=!1,p=function(e){var i=b+1<t.length&&t.charAt(b+1)==e;return i&&b++,i},f=function(t){var i=p(t),s="@"==t?14:"!"==t?20:"y"==t&&i?4:"o"==t?3:2,n=new RegExp("^\\d{1,"+s+"}"),a=e.substring(v).match(n);if(!a)throw"Missing number at position "+v;return v+=a[0].length,parseInt(a[0],10)},g=function(t,i,s){var n=$.map(p(t)?s:i,function(t,e){return[[e,t]]
}).sort(function(t,e){return-(t[1].length-e[1].length)}),a=-1;if($.each(n,function(t,i){var s=i[1];return e.substr(v,s.length).toLowerCase()==s.toLowerCase()?(a=i[0],v+=s.length,!1):void 0}),-1!=a)return a+1;throw"Unknown name at position "+v},m=function(){if(e.charAt(v)!=t.charAt(b))throw"Unexpected literal at position "+v;v++},v=0,b=0;b<t.length;b++)if(d)"'"!=t.charAt(b)||p("'")?m():d=!1;else switch(t.charAt(b)){case"d":c=f("d");break;case"D":g("D",n,a);break;case"o":u=f("o");break;case"m":h=f("m");break;case"M":h=g("M",o,r);break;case"y":l=f("y");break;case"@":var _=new Date(f("@"));l=_.getFullYear(),h=_.getMonth()+1,c=_.getDate();break;case"!":var _=new Date((f("!")-this._ticksTo1970)/1e4);l=_.getFullYear(),h=_.getMonth()+1,c=_.getDate();break;case"'":p("'")?m():d=!0;break;default:m()}if(v<e.length)throw"Extra/unparsed characters found in date: "+e.substring(v);if(-1==l?l=(new Date).getFullYear():100>l&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(s>=l?0:-100)),u>-1)for(h=1,c=u;;){var y=this._getDaysInMonth(l,h-1);if(y>=c)break;h++,c-=y}var _=this._daylightSavingAdjust(new Date(l,h-1,c));if(_.getFullYear()!=l||_.getMonth()+1!=h||_.getDate()!=c)throw"Invalid date";return _},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";var s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,n=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,r=function(e){var i=d+1<t.length&&t.charAt(d+1)==e;return i&&d++,i},l=function(t,e,i){var s=""+e;if(r(t))for(;s.length<i;)s="0"+s;return s},h=function(t,e,i,s){return r(t)?s[e]:i[e]},c="",u=!1;if(e)for(var d=0;d<t.length;d++)if(u)"'"!=t.charAt(d)||r("'")?c+=t.charAt(d):u=!1;else switch(t.charAt(d)){case"d":c+=l("d",e.getDate(),2);break;case"D":c+=h("D",e.getDay(),s,n);break;case"o":c+=l("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":c+=l("m",e.getMonth()+1,2);break;case"M":c+=h("M",e.getMonth(),a,o);break;case"y":c+=r("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":c+=e.getTime();break;case"!":c+=1e4*e.getTime()+this._ticksTo1970;break;case"'":r("'")?c+="'":u=!0;break;default:c+=t.charAt(d)}return c},_possibleChars:function(t){for(var e="",i=!1,s=function(e){var i=n+1<t.length&&t.charAt(n+1)==e;return i&&n++,i},n=0;n<t.length;n++)if(i)"'"!=t.charAt(n)||s("'")?e+=t.charAt(n):i=!1;else switch(t.charAt(n)){case"d":case"m":case"y":case"@":e+="0123456789";break;case"D":case"M":return null;case"'":s("'")?e+="'":i=!0;break;default:e+=t.charAt(n)}return e},_get:function(t,e){return t.settings[e]!==undefined?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!=t.lastVal){var i,s,n=this._get(t,"dateFormat"),a=t.lastVal=t.input?t.input.val():null;i=s=this._getDefaultDate(t);var o=this._getFormatConfig(t);try{i=this.parseDate(n,a,o)||s}catch(r){this.log(r),a=e?"":a}t.selectedDay=i.getDate(),t.drawMonth=t.selectedMonth=i.getMonth(),t.drawYear=t.selectedYear=i.getFullYear(),t.currentDay=a?i.getDate():0,t.currentMonth=a?i.getMonth():0,t.currentYear=a?i.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(t,e,i){var s=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},n=function(e){try{return $.datepicker.parseDate($.datepicker._get(t,"dateFormat"),e,$.datepicker._getFormatConfig(t))}catch(i){}for(var s=(e.toLowerCase().match(/^c/)?$.datepicker._getDate(t):null)||new Date,n=s.getFullYear(),a=s.getMonth(),o=s.getDate(),r=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=r.exec(e);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(n,a));break;case"y":case"Y":n+=parseInt(l[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(n,a))}l=r.exec(e)}return new Date(n,a,o)},a=null==e||""===e?i:"string"==typeof e?n(e):"number"==typeof e?isNaN(e)?i:s(e):new Date(e.getTime());return a=a&&"Invalid Date"==a.toString()?i:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,a=t.selectedYear,o=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=o.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=o.getMonth(),t.drawYear=t.selectedYear=t.currentYear=o.getFullYear(),(n!=t.selectedMonth||a!=t.selectedYear)&&!i&&this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""==t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_generateHTML:function(t){var e=new Date;e=this._daylightSavingAdjust(new Date(e.getFullYear(),e.getMonth(),e.getDate()));var i=this._get(t,"isRTL"),s=this._get(t,"showButtonPanel"),n=this._get(t,"hideIfNoPrevNext"),a=this._get(t,"navigationAsDateFormat"),o=this._getNumberOfMonths(t),r=this._get(t,"showCurrentAtPos"),l=this._get(t,"stepMonths"),h=1!=o[0]||1!=o[1],c=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),u=this._getMinMaxDate(t,"min"),d=this._getMinMaxDate(t,"max"),p=t.drawMonth-r,f=t.drawYear;if(0>p&&(p+=12,f--),d){var g=this._daylightSavingAdjust(new Date(d.getFullYear(),d.getMonth()-o[0]*o[1]+1,d.getDate()));for(g=u&&u>g?u:g;this._daylightSavingAdjust(new Date(f,p,1))>g;)p--,0>p&&(p=11,f--)}t.drawMonth=p,t.drawYear=f;var m=this._get(t,"prevText");m=a?this.formatDate(m,this._daylightSavingAdjust(new Date(f,p-l,1)),this._getFormatConfig(t)):m;var v=this._canAdjustMonth(t,-1,f,p)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+t.id+"', -"+l+", 'M');\" title=\""+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+m+"</span></a>":n?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+m+"</span></a>",b=this._get(t,"nextText");b=a?this.formatDate(b,this._daylightSavingAdjust(new Date(f,p+l,1)),this._getFormatConfig(t)):b;var _=this._canAdjustMonth(t,1,f,p)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+t.id+"', +"+l+", 'M');\" title=\""+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+b+"</span></a>":n?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+b+"</span></a>",y=this._get(t,"currentText"),w=this._get(t,"gotoCurrent")&&t.currentDay?c:e;y=a?this.formatDate(y,w,this._getFormatConfig(t)):y;var k=t.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(t,"closeText")+"</button>",x=s?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?k:"")+(this._isInRange(t,w)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+t.id+"');\">"+y+"</button>":"")+(i?"":k)+"</div>":"",C=parseInt(this._get(t,"firstDay"),10);C=isNaN(C)?0:C;for(var D=this._get(t,"showWeek"),I=this._get(t,"dayNames"),M=(this._get(t,"dayNamesShort"),this._get(t,"dayNamesMin")),P=this._get(t,"monthNames"),S=this._get(t,"monthNamesShort"),z=this._get(t,"beforeShowDay"),T=this._get(t,"showOtherMonths"),A=this._get(t,"selectOtherMonths"),H=(this._get(t,"calculateWeek")||this.iso8601Week,this._getDefaultDate(t)),O="",N=0;N<o[0];N++){var W="";this.maxRows=4;for(var E=0;E<o[1];E++){var R=this._daylightSavingAdjust(new Date(f,p,t.selectedDay)),F=" ui-corner-all",Y="";if(h){if(Y+='<div class="ui-datepicker-group',o[1]>1)switch(E){case 0:Y+=" ui-datepicker-group-first",F=" ui-corner-"+(i?"right":"left");break;case o[1]-1:Y+=" ui-datepicker-group-last",F=" ui-corner-"+(i?"left":"right");break;default:Y+=" ui-datepicker-group-middle",F=""}Y+='">'}Y+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+F+'">'+(/all|left/.test(F)&&0==N?i?_:v:"")+(/all|right/.test(F)&&0==N?i?v:_:"")+this._generateMonthYearHeader(t,p,f,u,d,N>0||E>0,P,S)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var L=D?'<th class="ui-datepicker-week-col">'+this._get(t,"weekHeader")+"</th>":"",j=0;7>j;j++){var q=(j+C)%7;L+="<th"+((j+C+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+I[q]+'">'+M[q]+"</span></th>"}Y+=L+"</tr></thead><tbody>";var B=this._getDaysInMonth(f,p);f==t.selectedYear&&p==t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,B));var K=(this._getFirstDayOfMonth(f,p)-C+7)%7,Q=Math.ceil((K+B)/7),V=h&&this.maxRows>Q?this.maxRows:Q;this.maxRows=V;for(var U=this._daylightSavingAdjust(new Date(f,p,1-K)),X=0;V>X;X++){Y+="<tr>";for(var Z=D?'<td class="ui-datepicker-week-col">'+this._get(t,"calculateWeek")(U)+"</td>":"",j=0;7>j;j++){var G=z?z.apply(t.input?t.input[0]:null,[U]):[!0,""],J=U.getMonth()!=p,te=J&&!A||!G[0]||u&&u>U||d&&U>d;Z+='<td class="'+((j+C+6)%7>=5?" ui-datepicker-week-end":"")+(J?" ui-datepicker-other-month":"")+(U.getTime()==R.getTime()&&p==t.selectedMonth&&t._keyEvent||H.getTime()==U.getTime()&&H.getTime()==R.getTime()?" "+this._dayOverClass:"")+(te?" "+this._unselectableClass+" ui-state-disabled":"")+(J&&!T?"":" "+G[1]+(U.getTime()==c.getTime()?" "+this._currentClass:"")+(U.getTime()==e.getTime()?" ui-datepicker-today":""))+'"'+(J&&!T||!G[2]?"":' title="'+G[2]+'"')+(te?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+t.id+"',"+U.getMonth()+","+U.getFullYear()+', this);return false;"')+">"+(J&&!T?"&#xa0;":te?'<span class="ui-state-default">'+U.getDate()+"</span>":'<a class="ui-state-default'+(U.getTime()==e.getTime()?" ui-state-highlight":"")+(U.getTime()==c.getTime()?" ui-state-active":"")+(J?" ui-priority-secondary":"")+'" href="#">'+U.getDate()+"</a>")+"</td>",U.setDate(U.getDate()+1),U=this._daylightSavingAdjust(U)}Y+=Z+"</tr>"}p++,p>11&&(p=0,f++),Y+="</tbody></table>"+(h?"</div>"+(o[0]>0&&E==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),W+=Y}O+=W}return O+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!t.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),t._keyEvent=!1,O},_generateMonthYearHeader:function(t,e,i,s,n,a,o,r){var l=this._get(t,"changeMonth"),h=this._get(t,"changeYear"),c=this._get(t,"showMonthAfterYear"),u='<div class="ui-datepicker-title">',d="";if(a||!l)d+='<span class="ui-datepicker-month">'+o[e]+"</span>";else{var p=s&&s.getFullYear()==i,f=n&&n.getFullYear()==i;d+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+t.id+"', this, 'M');\" >";for(var g=0;12>g;g++)(!p||g>=s.getMonth())&&(!f||g<=n.getMonth())&&(d+='<option value="'+g+'"'+(g==e?' selected="selected"':"")+">"+r[g]+"</option>");d+="</select>"}if(c||(u+=d+(!a&&l&&h?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",a||!h)u+='<span class="ui-datepicker-year">'+i+"</span>";else{var m=this._get(t,"yearRange").split(":"),v=(new Date).getFullYear(),b=function(t){var e=t.match(/c[+-].*/)?i+parseInt(t.substring(1),10):t.match(/[+-].*/)?v+parseInt(t,10):parseInt(t,10);return isNaN(e)?v:e},_=b(m[0]),y=Math.max(_,b(m[1]||""));for(_=s?Math.max(_,s.getFullYear()):_,y=n?Math.min(y,n.getFullYear()):y,t.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+t.id+"', this, 'Y');\" >";y>=_;_++)t.yearshtml+='<option value="'+_+'"'+(_==i?' selected="selected"':"")+">"+_+"</option>";t.yearshtml+="</select>",u+=t.yearshtml,t.yearshtml=null}return u+=this._get(t,"yearSuffix"),c&&(u+=(!a&&l&&h?"":"&#xa0;")+d),u+="</div>",u},_adjustInstDate:function(t,e,i){var s=t.drawYear+("Y"==i?e:0),n=t.drawMonth+("M"==i?e:0),a=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"==i?e:0),o=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,a)));t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),("M"==i||"Y"==i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&i>e?i:e;return n=s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),a=this._daylightSavingAdjust(new Date(i,s+(0>e?e:n[0]*n[1]),1));return 0>e&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(t,a)},_isInRange:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max");return(!i||e.getTime()>=i.getTime())&&(!s||e.getTime()<=s.getTime())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),$.fn.datepicker=function(t){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var e=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!=t&&"getDate"!=t&&"widget"!=t?"option"==t&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this[0]].concat(e)):this.each(function(){"string"==typeof t?$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this].concat(e)):$.datepicker._attachDatepicker(this,t)}):$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this[0]].concat(e))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.17",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(t,e){t.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),t.Widget.prototype.destroy.apply(this,arguments)},value:function(t){return t===e?this._value():(this._setOption("value",t),this)},_setOption:function(e,i){"value"===e&&(this.options.value=i,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),t.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var t=this.options.value;return"number"!=typeof t&&(t=0),Math.min(this.options.max,Math.max(this.min,t))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var t=this.value(),e=this._percentage();this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),this.valueDiv.toggle(t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(e.toFixed(0)+"%"),this.element.attr("aria-valuenow",t)}}),t.extend(t.ui.progressbar,{version:"1.8.17"})}(jQuery),jQuery.effects||function(t,e){function i(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects[e]?!1:!0}function s(e,i,s,n){return"object"==typeof e&&(n=i,s=null,i=e,e=i.effect),t.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i=i||{},s=s||i.duration,s=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,n=n||i.complete,[e,i,s,n]}function n(t,e){var i,s={_:0};for(i in e)t[i]!=e[i]&&(s[i]=e[i]);return s}function a(e){var i,s;for(i in e)s=e[i],(null==s||t.isFunction(s)||i in u||/scrollbar/.test(i)||!/color/i.test(i)&&isNaN(parseFloat(s)))&&delete e[i];return e}function o(){var t,e,i=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,s={};if(i&&i.length&&i[0]&&i[i[0]])for(var n=i.length;n--;)t=i[n],"string"==typeof i[t]&&(e=t.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()}),s[e]=i[t]);else for(t in i)"string"==typeof i[t]&&(s[t]=i[t]);return s}function r(e,i){var s;do{if(s=t.curCSS(e,i),""!=s&&"transparent"!=s||t.nodeName(e,"body"))break;i="backgroundColor"}while(e=e.parentNode);return l(s)}function l(e){var i;return e&&e.constructor==Array&&3==e.length?e:(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))?[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)]:(i=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))?[2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3])]:(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:(i=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))?[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]:(i=/rgba\(0, 0, 0, 0\)/.exec(e))?h.transparent:h[t.trim(e).toLowerCase()]}t.effects={},t.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(e,i){t.fx.step[i]=function(t){t.colorInit||(t.start=r(t.elem,i),t.end=l(t.end),t.colorInit=!0),t.elem.style[i]="rgb("+Math.max(Math.min(parseInt(t.pos*(t.end[0]-t.start[0])+t.start[0],10),255),0)+","+Math.max(Math.min(parseInt(t.pos*(t.end[1]-t.start[1])+t.start[1],10),255),0)+","+Math.max(Math.min(parseInt(t.pos*(t.end[2]-t.start[2])+t.start[2],10),255),0)+")"}});var h={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},c=["add","remove","toggle"],u={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.effects.animateClass=function(e,i,s,r){return t.isFunction(s)&&(r=s,s=null),this.queue(function(){var l,h=t(this),u=h.attr("style")||" ",d=a(o.call(this)),p=h.attr("class");t.each(c,function(t,i){e[i]&&h[i+"Class"](e[i])}),l=a(o.call(this)),h.attr("class",p),h.animate(n(d,l),{queue:!1,duration:i,easing:s,complete:function(){t.each(c,function(t,i){e[i]&&h[i+"Class"](e[i])}),"object"==typeof h.attr("style")?(h.attr("style").cssText="",h.attr("style").cssText=u):h.attr("style",u),r&&r.apply(this,arguments),t.dequeue(this)}})})},t.fn.extend({_addClass:t.fn.addClass,addClass:function(e,i,s,n){return i?t.effects.animateClass.apply(this,[{add:e},i,s,n]):this._addClass(e)},_removeClass:t.fn.removeClass,removeClass:function(e,i,s,n){return i?t.effects.animateClass.apply(this,[{remove:e},i,s,n]):this._removeClass(e)},_toggleClass:t.fn.toggleClass,toggleClass:function(i,s,n,a,o){return"boolean"==typeof s||s===e?n?t.effects.animateClass.apply(this,[s?{add:i}:{remove:i},n,a,o]):this._toggleClass(i,s):t.effects.animateClass.apply(this,[{toggle:i},s,n,a])},switchClass:function(e,i,s,n,a){return t.effects.animateClass.apply(this,[{add:i,remove:e},s,n,a])}}),t.extend(t.effects,{version:"1.8.17",save:function(t,e){for(var i=0;i<e.length;i++)null!==e[i]&&t.data("ec.storage."+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i=0;i<e.length;i++)null!==e[i]&&t.css(e[i],t.data("ec.storage."+e[i]))},setMode:function(t,e){return"toggle"==e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n=document.activeElement;return e.wrap(s),(e[0]===n||t.contains(e[0],n))&&t(n).focus(),s=e.parent(),"static"==e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),s.css(i).show()},removeWrapper:function(e){var i,s=document.activeElement;return e.parent().is(".ui-effects-wrapper")?(i=e.parent().replaceWith(e),(e[0]===s||t.contains(e[0],s))&&t(s).focus(),i):e},setTransition:function(e,i,s,n){return n=n||{},t.each(i,function(t,i){unit=e.cssUnit(i),unit[0]>0&&(n[i]=unit[0]*s+unit[1])}),n}}),t.fn.extend({effect:function(e){var i=s.apply(this,arguments),n={options:i[1],duration:i[2],callback:i[3]},a=n.options.mode,o=t.effects[e];return t.fx.off||!o?a?this[a](n.duration,n.callback):this.each(function(){n.callback&&n.callback.call(this)}):o.call(this,n)},_show:t.fn.show,show:function(t){if(i(t))return this._show.apply(this,arguments);var e=s.apply(this,arguments);return e[1].mode="show",this.effect.apply(this,e)},_hide:t.fn.hide,hide:function(t){if(i(t))return this._hide.apply(this,arguments);var e=s.apply(this,arguments);return e[1].mode="hide",this.effect.apply(this,e)},__toggle:t.fn.toggle,toggle:function(e){if(i(e)||"boolean"==typeof e||t.isFunction(e))return this.__toggle.apply(this,arguments);var n=s.apply(this,arguments);return n[1].mode="toggle",this.effect.apply(this,n)},cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(s=[parseFloat(i),e])}),s}}),t.easing.jswing=t.easing.swing,t.extend(t.easing,{def:"easeOutQuad",swing:function(e,i,s,n,a){return t.easing[t.easing.def](e,i,s,n,a)},easeInQuad:function(t,e,i,s,n){return s*(e/=n)*e+i},easeOutQuad:function(t,e,i,s,n){return-s*(e/=n)*(e-2)+i},easeInOutQuad:function(t,e,i,s,n){return(e/=n/2)<1?s/2*e*e+i:-s/2*(--e*(e-2)-1)+i},easeInCubic:function(t,e,i,s,n){return s*(e/=n)*e*e+i},easeOutCubic:function(t,e,i,s,n){return s*((e=e/n-1)*e*e+1)+i},easeInOutCubic:function(t,e,i,s,n){return(e/=n/2)<1?s/2*e*e*e+i:s/2*((e-=2)*e*e+2)+i},easeInQuart:function(t,e,i,s,n){return s*(e/=n)*e*e*e+i},easeOutQuart:function(t,e,i,s,n){return-s*((e=e/n-1)*e*e*e-1)+i},easeInOutQuart:function(t,e,i,s,n){return(e/=n/2)<1?s/2*e*e*e*e+i:-s/2*((e-=2)*e*e*e-2)+i},easeInQuint:function(t,e,i,s,n){return s*(e/=n)*e*e*e*e+i},easeOutQuint:function(t,e,i,s,n){return s*((e=e/n-1)*e*e*e*e+1)+i},easeInOutQuint:function(t,e,i,s,n){return(e/=n/2)<1?s/2*e*e*e*e*e+i:s/2*((e-=2)*e*e*e*e+2)+i},easeInSine:function(t,e,i,s,n){return-s*Math.cos(e/n*(Math.PI/2))+s+i},easeOutSine:function(t,e,i,s,n){return s*Math.sin(e/n*(Math.PI/2))+i},easeInOutSine:function(t,e,i,s,n){return-s/2*(Math.cos(Math.PI*e/n)-1)+i},easeInExpo:function(t,e,i,s,n){return 0==e?i:s*Math.pow(2,10*(e/n-1))+i},easeOutExpo:function(t,e,i,s,n){return e==n?i+s:s*(-Math.pow(2,-10*e/n)+1)+i},easeInOutExpo:function(t,e,i,s,n){return 0==e?i:e==n?i+s:(e/=n/2)<1?s/2*Math.pow(2,10*(e-1))+i:s/2*(-Math.pow(2,-10*--e)+2)+i},easeInCirc:function(t,e,i,s,n){return-s*(Math.sqrt(1-(e/=n)*e)-1)+i},easeOutCirc:function(t,e,i,s,n){return s*Math.sqrt(1-(e=e/n-1)*e)+i},easeInOutCirc:function(t,e,i,s,n){return(e/=n/2)<1?-s/2*(Math.sqrt(1-e*e)-1)+i:s/2*(Math.sqrt(1-(e-=2)*e)+1)+i},easeInElastic:function(t,e,i,s,n){var a=1.70158,o=0,r=s;if(0==e)return i;if(1==(e/=n))return i+s;if(o||(o=.3*n),r<Math.abs(s)){r=s;var a=o/4}else var a=o/(2*Math.PI)*Math.asin(s/r);return-(r*Math.pow(2,10*(e-=1))*Math.sin(2*(e*n-a)*Math.PI/o))+i},easeOutElastic:function(t,e,i,s,n){var a=1.70158,o=0,r=s;if(0==e)return i;if(1==(e/=n))return i+s;if(o||(o=.3*n),r<Math.abs(s)){r=s;var a=o/4}else var a=o/(2*Math.PI)*Math.asin(s/r);return r*Math.pow(2,-10*e)*Math.sin(2*(e*n-a)*Math.PI/o)+s+i},easeInOutElastic:function(t,e,i,s,n){var a=1.70158,o=0,r=s;if(0==e)return i;if(2==(e/=n/2))return i+s;if(o||(o=.3*n*1.5),r<Math.abs(s)){r=s;var a=o/4}else var a=o/(2*Math.PI)*Math.asin(s/r);return 1>e?-.5*r*Math.pow(2,10*(e-=1))*Math.sin(2*(e*n-a)*Math.PI/o)+i:r*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*n-a)*Math.PI/o)*.5+s+i},easeInBack:function(t,i,s,n,a,o){return o==e&&(o=1.70158),n*(i/=a)*i*((o+1)*i-o)+s},easeOutBack:function(t,i,s,n,a,o){return o==e&&(o=1.70158),n*((i=i/a-1)*i*((o+1)*i+o)+1)+s},easeInOutBack:function(t,i,s,n,a,o){return o==e&&(o=1.70158),(i/=a/2)<1?n/2*i*i*(((o*=1.525)+1)*i-o)+s:n/2*((i-=2)*i*(((o*=1.525)+1)*i+o)+2)+s},easeInBounce:function(e,i,s,n,a){return n-t.easing.easeOutBounce(e,a-i,0,n,a)+s},easeOutBounce:function(t,e,i,s,n){return(e/=n)<1/2.75?7.5625*s*e*e+i:2/2.75>e?s*(7.5625*(e-=1.5/2.75)*e+.75)+i:2.5/2.75>e?s*(7.5625*(e-=2.25/2.75)*e+.9375)+i:s*(7.5625*(e-=2.625/2.75)*e+.984375)+i},easeInOutBounce:function(e,i,s,n,a){return a/2>i?.5*t.easing.easeInBounce(e,2*i,0,n,a)+s:.5*t.easing.easeOutBounce(e,2*i-a,0,n,a)+.5*n+s}})}(jQuery),function(t){t.effects.blind=function(e){return this.queue(function(){var i=t(this),s=["position","top","bottom","left","right"],n=t.effects.setMode(i,e.options.mode||"hide"),a=e.options.direction||"vertical";t.effects.save(i,s),i.show();var o=t.effects.createWrapper(i).css({overflow:"hidden"}),r="vertical"==a?"height":"width",l="vertical"==a?o.height():o.width();"show"==n&&o.css(r,0);var h={};h[r]="show"==n?l:0,o.animate(h,e.duration,e.options.easing,function(){"hide"==n&&i.hide(),t.effects.restore(i,s),t.effects.removeWrapper(i),e.callback&&e.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),function(t){t.effects.bounce=function(e){return this.queue(function(){var i=t(this),s=["position","top","bottom","left","right"],n=t.effects.setMode(i,e.options.mode||"effect"),a=e.options.direction||"up",o=e.options.distance||20,r=e.options.times||5,l=e.duration||250;/show|hide/.test(n)&&s.push("opacity"),t.effects.save(i,s),i.show(),t.effects.createWrapper(i);var h="up"==a||"down"==a?"top":"left",c="up"==a||"left"==a?"pos":"neg",o=e.options.distance||("top"==h?i.outerHeight({margin:!0})/3:i.outerWidth({margin:!0})/3);if("show"==n&&i.css("opacity",0).css(h,"pos"==c?-o:o),"hide"==n&&(o/=2*r),"hide"!=n&&r--,"show"==n){var u={opacity:1};u[h]=("pos"==c?"+=":"-=")+o,i.animate(u,l/2,e.options.easing),o/=2,r--}for(var d=0;r>d;d++){var p={},f={};p[h]=("pos"==c?"-=":"+=")+o,f[h]=("pos"==c?"+=":"-=")+o,i.animate(p,l/2,e.options.easing).animate(f,l/2,e.options.easing),o="hide"==n?2*o:o/2}if("hide"==n){var u={opacity:0};u[h]=("pos"==c?"-=":"+=")+o,i.animate(u,l/2,e.options.easing,function(){i.hide(),t.effects.restore(i,s),t.effects.removeWrapper(i),e.callback&&e.callback.apply(this,arguments)})}else{var p={},f={};p[h]=("pos"==c?"-=":"+=")+o,f[h]=("pos"==c?"+=":"-=")+o,i.animate(p,l/2,e.options.easing).animate(f,l/2,e.options.easing,function(){t.effects.restore(i,s),t.effects.removeWrapper(i),e.callback&&e.callback.apply(this,arguments)})}i.queue("fx",function(){i.dequeue()}),i.dequeue()})}}(jQuery),function(t){t.effects.clip=function(e){return this.queue(function(){var i=t(this),s=["position","top","bottom","left","right","height","width"],n=t.effects.setMode(i,e.options.mode||"hide"),a=e.options.direction||"vertical";t.effects.save(i,s),i.show();var o=t.effects.createWrapper(i).css({overflow:"hidden"}),r="IMG"==i[0].tagName?o:i,l={size:"vertical"==a?"height":"width",position:"vertical"==a?"top":"left"},h="vertical"==a?r.height():r.width();"show"==n&&(r.css(l.size,0),r.css(l.position,h/2));var c={};c[l.size]="show"==n?h:0,c[l.position]="show"==n?0:h/2,r.animate(c,{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){"hide"==n&&i.hide(),t.effects.restore(i,s),t.effects.removeWrapper(i),e.callback&&e.callback.apply(i[0],arguments),i.dequeue()}})})}}(jQuery),function(t){t.effects.drop=function(e){return this.queue(function(){var i=t(this),s=["position","top","bottom","left","right","opacity"],n=t.effects.setMode(i,e.options.mode||"hide"),a=e.options.direction||"left";t.effects.save(i,s),i.show(),t.effects.createWrapper(i);var o="up"==a||"down"==a?"top":"left",r="up"==a||"left"==a?"pos":"neg",l=e.options.distance||("top"==o?i.outerHeight({margin:!0})/2:i.outerWidth({margin:!0})/2);"show"==n&&i.css("opacity",0).css(o,"pos"==r?-l:l);var h={opacity:"show"==n?1:0};h[o]=("show"==n?"pos"==r?"+=":"-=":"pos"==r?"-=":"+=")+l,i.animate(h,{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){"hide"==n&&i.hide(),t.effects.restore(i,s),t.effects.removeWrapper(i),e.callback&&e.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(t){t.effects.explode=function(e){return this.queue(function(){var i=e.options.pieces?Math.round(Math.sqrt(e.options.pieces)):3,s=e.options.pieces?Math.round(Math.sqrt(e.options.pieces)):3;e.options.mode="toggle"==e.options.mode?t(this).is(":visible")?"hide":"show":e.options.mode;var n=t(this).show().css("visibility","hidden"),a=n.offset();a.top-=parseInt(n.css("marginTop"),10)||0,a.left-=parseInt(n.css("marginLeft"),10)||0;for(var o=n.outerWidth(!0),r=n.outerHeight(!0),l=0;i>l;l++)for(var h=0;s>h;h++)n.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-h*(o/s),top:-l*(r/i)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:o/s,height:r/i,left:a.left+h*(o/s)+("show"==e.options.mode?(h-Math.floor(s/2))*(o/s):0),top:a.top+l*(r/i)+("show"==e.options.mode?(l-Math.floor(i/2))*(r/i):0),opacity:"show"==e.options.mode?0:1}).animate({left:a.left+h*(o/s)+("show"==e.options.mode?0:(h-Math.floor(s/2))*(o/s)),top:a.top+l*(r/i)+("show"==e.options.mode?0:(l-Math.floor(i/2))*(r/i)),opacity:"show"==e.options.mode?1:0},e.duration||500);
setTimeout(function(){"show"==e.options.mode?n.css({visibility:"visible"}):n.css({visibility:"visible"}).hide(),e.callback&&e.callback.apply(n[0]),n.dequeue(),t("div.ui-effects-explode").remove()},e.duration||500)})}}(jQuery),function(t){t.effects.fade=function(e){return this.queue(function(){var i=t(this),s=t.effects.setMode(i,e.options.mode||"hide");i.animate({opacity:s},{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){e.callback&&e.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(t){t.effects.fold=function(e){return this.queue(function(){var i=t(this),s=["position","top","bottom","left","right"],n=t.effects.setMode(i,e.options.mode||"hide"),a=e.options.size||15,o=!!e.options.horizFirst,r=e.duration?e.duration/2:t.fx.speeds._default/2;t.effects.save(i,s),i.show();var l=t.effects.createWrapper(i).css({overflow:"hidden"}),h="show"==n!=o,c=h?["width","height"]:["height","width"],u=h?[l.width(),l.height()]:[l.height(),l.width()],d=/([0-9]+)%/.exec(a);d&&(a=parseInt(d[1],10)/100*u["hide"==n?0:1]),"show"==n&&l.css(o?{height:0,width:a}:{height:a,width:0});var p={},f={};p[c[0]]="show"==n?u[0]:a,f[c[1]]="show"==n?u[1]:0,l.animate(p,r,e.options.easing).animate(f,r,e.options.easing,function(){"hide"==n&&i.hide(),t.effects.restore(i,s),t.effects.removeWrapper(i),e.callback&&e.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),function(t){t.effects.highlight=function(e){return this.queue(function(){var i=t(this),s=["backgroundImage","backgroundColor","opacity"],n=t.effects.setMode(i,e.options.mode||"show"),a={backgroundColor:i.css("backgroundColor")};"hide"==n&&(a.opacity=0),t.effects.save(i,s),i.show().css({backgroundImage:"none",backgroundColor:e.options.color||"#ffff99"}).animate(a,{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){"hide"==n&&i.hide(),t.effects.restore(i,s),"show"==n&&!t.support.opacity&&this.style.removeAttribute("filter"),e.callback&&e.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(t){t.effects.pulsate=function(e){return this.queue(function(){var i=t(this),s=t.effects.setMode(i,e.options.mode||"show");times=2*(e.options.times||5)-1,duration=e.duration?e.duration/2:t.fx.speeds._default/2,isVisible=i.is(":visible"),animateTo=0,isVisible||(i.css("opacity",0).show(),animateTo=1),("hide"==s&&isVisible||"show"==s&&!isVisible)&&times--;for(var n=0;times>n;n++)i.animate({opacity:animateTo},duration,e.options.easing),animateTo=(animateTo+1)%2;i.animate({opacity:animateTo},duration,e.options.easing,function(){0==animateTo&&i.hide(),e.callback&&e.callback.apply(this,arguments)}),i.queue("fx",function(){i.dequeue()}).dequeue()})}}(jQuery),function(t){t.effects.puff=function(e){return this.queue(function(){var i=t(this),s=t.effects.setMode(i,e.options.mode||"hide"),n=parseInt(e.options.percent,10)||150,a=n/100,o={height:i.height(),width:i.width()};t.extend(e.options,{fade:!0,mode:s,percent:"hide"==s?n:100,from:"hide"==s?o:{height:o.height*a,width:o.width*a}}),i.effect("scale",e.options,e.duration,e.callback),i.dequeue()})},t.effects.scale=function(e){return this.queue(function(){var i=t(this),s=t.extend(!0,{},e.options),n=t.effects.setMode(i,e.options.mode||"effect"),a=parseInt(e.options.percent,10)||(0==parseInt(e.options.percent,10)?0:"hide"==n?0:100),o=e.options.direction||"both",r=e.options.origin;"effect"!=n&&(s.origin=r||["middle","center"],s.restore=!0);var l={height:i.height(),width:i.width()};i.from=e.options.from||("show"==n?{height:0,width:0}:l);var h={y:"horizontal"!=o?a/100:1,x:"vertical"!=o?a/100:1};i.to={height:l.height*h.y,width:l.width*h.x},e.options.fade&&("show"==n&&(i.from.opacity=0,i.to.opacity=1),"hide"==n&&(i.from.opacity=1,i.to.opacity=0)),s.from=i.from,s.to=i.to,s.mode=n,i.effect("size",s,e.duration,e.callback),i.dequeue()})},t.effects.size=function(e){return this.queue(function(){var i=t(this),s=["position","top","bottom","left","right","width","height","overflow","opacity"],n=["position","top","bottom","left","right","overflow","opacity"],a=["width","height","overflow"],o=["fontSize"],r=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],l=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],h=t.effects.setMode(i,e.options.mode||"effect"),c=e.options.restore||!1,u=e.options.scale||"both",d=e.options.origin,p={height:i.height(),width:i.width()};if(i.from=e.options.from||p,i.to=e.options.to||p,d){var f=t.effects.getBaseline(d,p);i.from.top=(p.height-i.from.height)*f.y,i.from.left=(p.width-i.from.width)*f.x,i.to.top=(p.height-i.to.height)*f.y,i.to.left=(p.width-i.to.width)*f.x}var g={from:{y:i.from.height/p.height,x:i.from.width/p.width},to:{y:i.to.height/p.height,x:i.to.width/p.width}};("box"==u||"both"==u)&&(g.from.y!=g.to.y&&(s=s.concat(r),i.from=t.effects.setTransition(i,r,g.from.y,i.from),i.to=t.effects.setTransition(i,r,g.to.y,i.to)),g.from.x!=g.to.x&&(s=s.concat(l),i.from=t.effects.setTransition(i,l,g.from.x,i.from),i.to=t.effects.setTransition(i,l,g.to.x,i.to))),("content"==u||"both"==u)&&g.from.y!=g.to.y&&(s=s.concat(o),i.from=t.effects.setTransition(i,o,g.from.y,i.from),i.to=t.effects.setTransition(i,o,g.to.y,i.to)),t.effects.save(i,c?s:n),i.show(),t.effects.createWrapper(i),i.css("overflow","hidden").css(i.from),("content"==u||"both"==u)&&(r=r.concat(["marginTop","marginBottom"]).concat(o),l=l.concat(["marginLeft","marginRight"]),a=s.concat(r).concat(l),i.find("*[width]").each(function(){child=t(this),c&&t.effects.save(child,a);var i={height:child.height(),width:child.width()};child.from={height:i.height*g.from.y,width:i.width*g.from.x},child.to={height:i.height*g.to.y,width:i.width*g.to.x},g.from.y!=g.to.y&&(child.from=t.effects.setTransition(child,r,g.from.y,child.from),child.to=t.effects.setTransition(child,r,g.to.y,child.to)),g.from.x!=g.to.x&&(child.from=t.effects.setTransition(child,l,g.from.x,child.from),child.to=t.effects.setTransition(child,l,g.to.x,child.to)),child.css(child.from),child.animate(child.to,e.duration,e.options.easing,function(){c&&t.effects.restore(child,a)})})),i.animate(i.to,{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){0===i.to.opacity&&i.css("opacity",i.from.opacity),"hide"==h&&i.hide(),t.effects.restore(i,c?s:n),t.effects.removeWrapper(i),e.callback&&e.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(t){t.effects.shake=function(e){return this.queue(function(){var i=t(this),s=["position","top","bottom","left","right"],n=(t.effects.setMode(i,e.options.mode||"effect"),e.options.direction||"left"),a=e.options.distance||20,o=e.options.times||3,r=e.duration||e.options.duration||140;t.effects.save(i,s),i.show(),t.effects.createWrapper(i);var l="up"==n||"down"==n?"top":"left",h="up"==n||"left"==n?"pos":"neg",c={},u={},d={};c[l]=("pos"==h?"-=":"+=")+a,u[l]=("pos"==h?"+=":"-=")+2*a,d[l]=("pos"==h?"-=":"+=")+2*a,i.animate(c,r,e.options.easing);for(var p=1;o>p;p++)i.animate(u,r,e.options.easing).animate(d,r,e.options.easing);i.animate(u,r,e.options.easing).animate(c,r/2,e.options.easing,function(){t.effects.restore(i,s),t.effects.removeWrapper(i),e.callback&&e.callback.apply(this,arguments)}),i.queue("fx",function(){i.dequeue()}),i.dequeue()})}}(jQuery),function(t){t.effects.slide=function(e){return this.queue(function(){var i=t(this),s=["position","top","bottom","left","right"],n=t.effects.setMode(i,e.options.mode||"show"),a=e.options.direction||"left";t.effects.save(i,s),i.show(),t.effects.createWrapper(i).css({overflow:"hidden"});var o="up"==a||"down"==a?"top":"left",r="up"==a||"left"==a?"pos":"neg",l=e.options.distance||("top"==o?i.outerHeight({margin:!0}):i.outerWidth({margin:!0}));"show"==n&&i.css(o,"pos"==r?isNaN(l)?"-"+l:-l:l);var h={};h[o]=("show"==n?"pos"==r?"+=":"-=":"pos"==r?"-=":"+=")+l,i.animate(h,{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){"hide"==n&&i.hide(),t.effects.restore(i,s),t.effects.removeWrapper(i),e.callback&&e.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(t){t.effects.transfer=function(e){return this.queue(function(){var i=t(this),s=t(e.options.to),n=s.offset(),a={top:n.top,left:n.left,height:s.innerHeight(),width:s.innerWidth()},o=i.offset(),r=t('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(e.options.className).css({top:o.top,left:o.left,height:i.innerHeight(),width:i.innerWidth(),position:"absolute"}).animate(a,e.duration,e.options.easing,function(){r.remove(),e.callback&&e.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery);
var swfobject=function(){function e(){if(!G){try{var e=M.getElementsByTagName("body")[0].appendChild(h("span"));e.parentNode.removeChild(e)}catch(t){return}G=!0;for(var n=R.length,a=0;n>a;a++)R[a]()}}function t(e){G?e():R[R.length]=e}function n(e){if(typeof x.addEventListener!=L)x.addEventListener("load",e,!1);else if(typeof M.addEventListener!=L)M.addEventListener("load",e,!1);else if(typeof x.attachEvent!=L)m(x,"onload",e);else if("function"==typeof x.onload){var t=x.onload;x.onload=function(){t(),e()}}else x.onload=e}function a(){P?i():r()}function i(){var e=M.getElementsByTagName("body")[0],t=h(k);t.setAttribute("type",O);var n=e.appendChild(t);if(n){var a=0;!function(){if(typeof n.GetVariable!=L){var i=n.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),X.pv=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}else if(10>a)return a++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,r()}()}else r()}function r(){var e=D.length;if(e>0)for(var t=0;e>t;t++){var n=D[t].id,a=D[t].callbackFn,i={success:!1,id:n};if(X.pv[0]>0){var r=y(n);if(r)if(!g(D[t].swfVersion)||X.wk&&X.wk<312)if(D[t].expressInstall&&s()){var f={};f.data=D[t].expressInstall,f.width=r.getAttribute("width")||"0",f.height=r.getAttribute("height")||"0",r.getAttribute("class")&&(f.styleclass=r.getAttribute("class")),r.getAttribute("align")&&(f.align=r.getAttribute("align"));for(var d={},u=r.getElementsByTagName("param"),p=u.length,v=0;p>v;v++)"movie"!=u[v].getAttribute("name").toLowerCase()&&(d[u[v].getAttribute("name")]=u[v].getAttribute("value"));l(f,d,n,a)}else c(r),a&&a(i);else b(n,!0),a&&(i.success=!0,i.ref=o(n),a(i))}else if(b(n,!0),a){var h=o(n);h&&typeof h.SetVariable!=L&&(i.success=!0,i.ref=h),a(i)}}}function o(e){var t=null,n=y(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=L)t=n;else{var a=n.getElementsByTagName(k)[0];a&&(t=a)}return t}function s(){return!J&&g("6.0.65")&&(X.win||X.mac)&&!(X.wk&&X.wk<312)}function l(e,t,n,a){J=!0,A=a||null,N={success:!1,id:n};var i=y(n);if(i){"OBJECT"==i.nodeName?(E=f(i),S=null):(E=i,S=n),e.id=F,(typeof e.width==L||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==L||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),M.title=M.title.slice(0,47)+" - Flash Player Installation";var r=X.ie&&X.win?"ActiveX":"PlugIn",o="MMredirectURL="+x.location.toString().replace(/&/g,"%26")+"&MMplayerType="+r+"&MMdoctitle="+M.title;if(typeof t.flashvars!=L?t.flashvars+="&"+o:t.flashvars=o,X.ie&&X.win&&4!=i.readyState){var s=h("div");n+="SWFObjectNew",s.setAttribute("id",n),i.parentNode.insertBefore(s,i),i.style.display="none",function(){4==i.readyState?i.parentNode.removeChild(i):setTimeout(arguments.callee,10)}()}d(e,t,n)}}function c(e){if(X.ie&&X.win&&4!=e.readyState){var t=h("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(f(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(f(e),e)}function f(e){var t=h("div");if(X.win&&X.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(k)[0];if(n){var a=n.childNodes;if(a)for(var i=a.length,r=0;i>r;r++)1==a[r].nodeType&&"PARAM"==a[r].nodeName||8==a[r].nodeType||t.appendChild(a[r].cloneNode(!0))}}return t}function d(e,t,n){var a,i=y(n);if(X.wk&&X.wk<312)return a;if(i)if(typeof e.id==L&&(e.id=n),X.ie&&X.win){var r="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?t.movie=e[o]:"styleclass"==o.toLowerCase()?r+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(r+=" "+o+'="'+e[o]+'"'));var s="";for(var l in t)t[l]!=Object.prototype[l]&&(s+='<param name="'+l+'" value="'+t[l]+'" />');i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+r+">"+s+"</object>",W[W.length]=e.id,a=y(e.id)}else{var c=h(k);c.setAttribute("type",O);for(var f in e)e[f]!=Object.prototype[f]&&("styleclass"==f.toLowerCase()?c.setAttribute("class",e[f]):"classid"!=f.toLowerCase()&&c.setAttribute(f,e[f]));for(var d in t)t[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&u(c,d,t[d]);i.parentNode.replaceChild(c,i),a=c}return a}function u(e,t,n){var a=h("param");a.setAttribute("name",t),a.setAttribute("value",n),e.appendChild(a)}function p(e){var t=y(e);t&&"OBJECT"==t.nodeName&&(X.ie&&X.win?(t.style.display="none",function(){4==t.readyState?v(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function v(e){var t=y(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function y(e){var t=null;try{t=M.getElementById(e)}catch(n){}return t}function h(e){return M.createElement(e)}function m(e,t,n){e.attachEvent(t,n),H[H.length]=[e,t,n]}function g(e){var t=X.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function w(e,t,n,a){if(!X.ie||!X.mac){var i=M.getElementsByTagName("head")[0];if(i){var r=n&&"string"==typeof n?n:"screen";if(a&&(T=null,I=null),!T||I!=r){var o=h("style");o.setAttribute("type","text/css"),o.setAttribute("media",r),T=i.appendChild(o),X.ie&&X.win&&typeof M.styleSheets!=L&&M.styleSheets.length>0&&(T=M.styleSheets[M.styleSheets.length-1]),I=r}X.ie&&X.win?T&&typeof T.addRule==k&&T.addRule(e,t):T&&typeof M.createTextNode!=L&&T.appendChild(M.createTextNode(e+" {"+t+"}"))}}}function b(e,t){if(U){var n=t?"visible":"hidden";G&&y(e)?y(e).style.visibility=n:w("#"+e,"visibility:"+n)}}function C(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=L?encodeURIComponent(e):e}{var E,S,A,N,T,I,L="undefined",k="object",j="Shockwave Flash",B="ShockwaveFlash.ShockwaveFlash",O="application/x-shockwave-flash",F="SWFObjectExprInst",$="onreadystatechange",x=window,M=document,V=navigator,P=!1,R=[a],D=[],W=[],H=[],G=!1,J=!1,U=!0,X=function(){var e=typeof M.getElementById!=L&&typeof M.getElementsByTagName!=L&&typeof M.createElement!=L,t=V.userAgent.toLowerCase(),n=V.platform.toLowerCase(),a=/win/.test(n?n:t),i=/mac/.test(n?n:t),r=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,o=!1,s=[0,0,0],l=null;if(typeof V.plugins!=L&&typeof V.plugins[j]==k)l=V.plugins[j].description,!l||typeof V.mimeTypes!=L&&V.mimeTypes[O]&&!V.mimeTypes[O].enabledPlugin||(P=!0,o=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof x.ActiveXObject!=L)try{var c=new ActiveXObject(B);c&&(l=c.GetVariable("$version"),l&&(o=!0,l=l.split(" ")[1].split(","),s=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(f){}return{w3:e,pv:s,wk:r,ie:o,win:a,mac:i}}();!function(){X.w3&&((typeof M.readyState!=L&&"complete"==M.readyState||typeof M.readyState==L&&(M.getElementsByTagName("body")[0]||M.body))&&e(),G||(typeof M.addEventListener!=L&&M.addEventListener("DOMContentLoaded",e,!1),X.ie&&X.win&&(M.attachEvent($,function(){"complete"==M.readyState&&(M.detachEvent($,arguments.callee),e())}),x==top&&!function(){if(!G){try{M.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e()}}()),X.wk&&!function(){return G?void 0:/loaded|complete/.test(M.readyState)?void e():void setTimeout(arguments.callee,0)}(),n(e)))}(),function(){X.ie&&X.win&&window.attachEvent("onunload",function(){for(var e=H.length,t=0;e>t;t++)H[t][0].detachEvent(H[t][1],H[t][2]);for(var n=W.length,a=0;n>a;a++)p(W[a]);for(var i in X)X[i]=null;X=null;for(var r in swfobject)swfobject[r]=null;swfobject=null})}()}return{registerObject:function(e,t,n,a){if(X.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=a,D[D.length]=i,b(e,!1)}else a&&a({success:!1,id:e})},getObjectById:function(e){return X.w3?o(e):void 0},embedSWF:function(e,n,a,i,r,o,c,f,u,p){var v={success:!1,id:n};X.w3&&!(X.wk&&X.wk<312)&&e&&n&&a&&i&&r?(b(n,!1),t(function(){a+="",i+="";var t={};if(u&&typeof u===k)for(var y in u)t[y]=u[y];t.data=e,t.width=a,t.height=i;var h={};if(f&&typeof f===k)for(var m in f)h[m]=f[m];if(c&&typeof c===k)for(var w in c)typeof h.flashvars!=L?h.flashvars+="&"+w+"="+c[w]:h.flashvars=w+"="+c[w];if(g(r)){var C=d(t,h,n);t.id==n&&b(n,!0),v.success=!0,v.ref=C}else{if(o&&s())return t.data=o,void l(t,h,n,p);b(n,!0)}p&&p(v)})):p&&p(v)},switchOffAutoHideShow:function(){U=!1},ua:X,getFlashPlayerVersion:function(){return{major:X.pv[0],minor:X.pv[1],release:X.pv[2]}},hasFlashPlayerVersion:g,createSWF:function(e,t,n){return X.w3?d(e,t,n):void 0},showExpressInstall:function(e,t,n,a){X.w3&&s()&&l(e,t,n,a)},removeSWF:function(e){X.w3&&p(e)},createCSS:function(e,t,n,a){X.w3&&w(e,t,n,a)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=M.location.search||M.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return C(t);for(var n=t.split("&"),a=0;a<n.length;a++)if(n[a].substring(0,n[a].indexOf("="))==e)return C(n[a].substring(n[a].indexOf("=")+1))}return""},expressInstallCallback:function(){if(J){var e=y(F);e&&E&&(e.parentNode.replaceChild(E,e),S&&(b(S,!0),X.ie&&X.win&&(E.style.display="block")),A&&A(N)),J=!1}}}}();
!function(e){e.addFlex=function(t,s){if(t.grid)return!1;s=e.extend({height:200,width:"auto",striped:!0,novstripe:!1,minwidth:30,minheight:80,resizable:!0,url:!1,method:"POST",dataType:"xml",errormsg:"Connection Error",usepager:!1,nowrap:!0,page:1,total:1,useRp:!0,rp:15,rpOptions:[10,15,20,25,40],title:!1,pagestat:"Displaying {from} to {to} of {total} items",procmsg:"Processing, please wait ...",query:"",qtype:"",nomsg:"No items",minColToggle:1,showToggleBtn:!0,hideOnSubmit:!0,autoload:!0,blockOpacity:.5,onToggleCol:!1,onChangeSort:!1,onSuccess:!1,onSubmit:!1},s),e(t).show().attr({cellPadding:0,cellSpacing:0,border:0}).removeAttr("width");var n={hset:{},rePosDrag:function(){var t=0-this.hDiv.scrollLeft;this.hDiv.scrollLeft>0&&(t-=Math.floor(s.cgwidth/2)),e(n.cDrag).css({top:n.hDiv.offsetTop+1});var i=this.cdpad;e("div",n.cDrag).hide(),e("thead tr:first th:visible",this.hDiv).each(function(){var a=e("thead tr:first th:visible",n.hDiv).index(this),r=parseInt(e("div",this).width());0==t&&(t-=Math.floor(s.cgwidth/2)),r=r+t+i,e("div:eq("+a+")",n.cDrag).css({left:r+"px"}).show(),t=r})},fixHeight:function(t){t=!1,t||(t=e(n.bDiv).height());var i=e(this.hDiv).height();e("div",this.cDrag).each(function(){e(this).height(t+i)});var a=parseInt(e(n.nDiv).height());a>t?e(n.nDiv).height(t).width(200):e(n.nDiv).height("auto").width("auto"),e(n.block).css({height:t,marginBottom:-1*t});var r=n.bDiv.offsetTop+t;"auto"!=s.height&&s.resizable&&(r=n.vDiv.offsetTop),e(n.rDiv).css({height:r})},dragStart:function(t,i,a){if("colresize"==t){e(n.nDiv).hide(),e(n.nBtn).hide();var r=e("div",this.cDrag).index(a),o=e("th:visible div:eq("+r+")",this.hDiv).width();e(a).addClass("dragging").siblings().hide(),e(a).prev().addClass("dragging").show(),this.colresize={startX:i.pageX,ol:parseInt(a.style.left),ow:o,n:r},e("body").css("cursor","col-resize")}else if("vresize"==t){var l=!1;e("body").css("cursor","row-resize"),a&&(l=!0,e("body").css("cursor","col-resize")),this.vresize={h:s.height,sy:i.pageY,w:s.width,sx:i.pageX,hgo:l}}else"colMove"==t&&(e(n.nDiv).hide(),e(n.nBtn).hide(),this.hset=e(this.hDiv).offset(),this.hset.right=this.hset.left+e("table",this.hDiv).width(),this.hset.bottom=this.hset.top+e("table",this.hDiv).height(),this.dcol=a,this.dcoln=e("th",this.hDiv).index(a),this.colCopy=document.createElement("div"),this.colCopy.className="colCopy",this.colCopy.innerHTML=a.innerHTML,e.browser.msie&&(this.colCopy.className="colCopy ie"),e(this.colCopy).css({position:"absolute","float":"left",display:"none",textAlign:a.align}),e("body").append(this.colCopy),e(this.cDrag).hide());e("body").noSelect()},dragMove:function(t){if(this.colresize){var i=this.colresize.n,n=t.pageX-this.colresize.startX,a=this.colresize.ol+n,r=this.colresize.ow+n;r>s.minwidth&&(e("div:eq("+i+")",this.cDrag).css("left",a),this.colresize.nw=r)}else if(this.vresize){var o=this.vresize,l=t.pageY,n=l-o.sy;if(s.defwidth||(s.defwidth=s.width),"auto"!=s.width&&!s.nohresize&&o.hgo){var d=t.pageX,h=d-o.sx,c=o.w+h;c>s.defwidth&&(this.gDiv.style.width=c+"px",s.width=c)}var p=o.h+n;(p>s.minheight||s.height<s.minheight)&&!o.hgo&&(this.bDiv.style.height=p+"px",s.height=p,this.fixHeight(p)),o=null}else this.colCopy&&(e(this.dcol).addClass("thMove").removeClass("thOver"),t.pageX>this.hset.right||t.pageX<this.hset.left||t.pageY>this.hset.bottom||t.pageY<this.hset.top?e("body").css("cursor","move"):e("body").css("cursor","pointer"),e(this.colCopy).css({top:t.pageY+10,left:t.pageX+20,display:"block"}))},dragEnd:function(){if(this.colresize){var t=this.colresize.n,i=this.colresize.nw;e("th:visible div:eq("+t+")",this.hDiv).css("width",i),e("tr",this.bDiv).each(function(){e("td:visible div:eq("+t+")",this).css("width",i)}),this.hDiv.scrollLeft=this.bDiv.scrollLeft,e("div:eq("+t+")",this.cDrag).siblings().show(),e(".dragging",this.cDrag).removeClass("dragging"),this.rePosDrag(),this.fixHeight(),this.colresize=!1}else this.vresize?this.vresize=!1:this.colCopy&&(e(this.colCopy).remove(),null!=this.dcolt&&(this.dcoln>this.dcolt?e("th:eq("+this.dcolt+")",this.hDiv).before(this.dcol):e("th:eq("+this.dcolt+")",this.hDiv).after(this.dcol),this.switchCol(this.dcoln,this.dcolt),e(this.cdropleft).remove(),e(this.cdropright).remove(),this.rePosDrag()),this.dcol=null,this.hset=null,this.dcoln=null,this.dcolt=null,this.colCopy=null,e(".thMove",this.hDiv).removeClass("thMove"),e(this.cDrag).show());e("body").css("cursor","default"),e("body").noSelect(!1)},toggleCol:function(i,a){var r=e("th[axis='col"+i+"']",this.hDiv)[0],o=e("thead th",n.hDiv).index(r),l=e("input[value="+i+"]",n.nDiv)[0];return null==a&&(a=r.hide),e("input:checked",n.nDiv).length<s.minColToggle&&!a?!1:(a?(r.hide=!1,e(r).show(),l.checked=!0):(r.hide=!0,e(r).hide(),l.checked=!1),e("tbody tr",t).each(function(){a?e("td:eq("+o+")",this).show():e("td:eq("+o+")",this).hide()}),this.rePosDrag(),s.onToggleCol&&s.onToggleCol(i,a),a)},switchCol:function(i,s){e("tbody tr",t).each(function(){i>s?e("td:eq("+s+")",this).before(e("td:eq("+i+")",this)):e("td:eq("+s+")",this).after(e("td:eq("+i+")",this))}),i>s?e("tr:eq("+s+")",this.nDiv).before(e("tr:eq("+i+")",this.nDiv)):e("tr:eq("+s+")",this.nDiv).after(e("tr:eq("+i+")",this.nDiv)),e.browser.msie&&e.browser.version<7&&(e("tr:eq("+s+") input",this.nDiv)[0].checked=!0),this.hDiv.scrollLeft=this.bDiv.scrollLeft},scroll:function(){this.hDiv.scrollLeft=this.bDiv.scrollLeft,this.rePosDrag()},addData:function(a){if(s.preProcess&&(a=s.preProcess(a)),e(".pReload",this.pDiv).removeClass("loading"),this.loading=!1,!a)return e(".pPageStat",this.pDiv).html(s.errormsg),!1;if(s.total="xml"==s.dataType?+e("rows total",a).text():a.total,0==s.total)return e("tr, a, td, div",t).unbind(),e(t).empty(),s.pages=1,s.page=1,this.buildpager(),e(".pPageStat",this.pDiv).html(s.nomsg),!1;s.pages=Math.ceil(s.total/s.rp),s.page="xml"==s.dataType?+e("rows page",a).text():a.page,this.buildpager();var r=document.createElement("tbody");"json"==s.dataType?e.each(a.rows,function(t,i){var a=document.createElement("tr");if(t%2&&s.striped&&(a.className="erow"),i.id&&(a.id="row"+i.id),e("thead tr:first th",n.hDiv).each(function(){var t=document.createElement("td"),n=e(this).attr("axis").substr(3);t.align=this.align,t.innerHTML=i.cell[n],e(a).append(t),t=null,s.colModel[n].name&&e.data(a,s.colModel[n].name,i.cell[n])}),e("thead",this.gDiv).length<1)for(idx=0;idx<cell.length;idx++){var o=document.createElement("td");o.innerHTML=i.cell[idx],e(a).append(o),o=null}e(r).append(a),a=null}):"xml"==s.dataType&&(i=1,e("rows row",a).each(function(){i++;var t=document.createElement("tr");i%2&&s.striped&&(t.className="erow");var a=e(this).attr("id");a&&(t.id="row"+a),a=null;var o=this;e("thead tr:first th",n.hDiv).each(function(){var i=document.createElement("td"),s=e(this).attr("axis").substr(3);i.align=this.align,i.innerHTML=e("cell:eq("+s+")",o).text(),e(t).append(i),i=null}),e("thead",this.gDiv).length<1&&e("cell",this).each(function(){var i=document.createElement("td");i.innerHTML=e(this).text(),e(t).append(i),i=null}),e(r).append(t),t=null,o=null})),e("tr",t).unbind(),e(t).empty(),e(t).append(r),this.addCellProp(),this.addRowProp(),this.fixHeight(e(this.bDiv).height()),this.rePosDrag(),r=null,a=null,i=null,s.onSuccess&&s.onSuccess(),s.hideOnSubmit&&e(n.block).remove(),this.hDiv.scrollLeft=this.bDiv.scrollLeft,e.browser.opera&&e(t).css("visibility","visible")},changeSort:function(t){return this.loading?!0:(e(n.nDiv).hide(),e(n.nBtn).hide(),s.sortname==e(t).attr("abbr")&&(s.sortorder="asc"==s.sortorder?"desc":"asc"),e(t).addClass("sorted").siblings().removeClass("sorted"),e(".sdesc",this.hDiv).removeClass("sdesc"),e(".sasc",this.hDiv).removeClass("sasc"),e("div",t).addClass("s"+s.sortorder),s.sortname=e(t).attr("abbr"),void(s.onChangeSort?s.onChangeSort(s.sortname,s.sortorder):this.populate()))},buildpager:function(){e(".pcontrol input",this.pDiv).val(s.page),e(".pcontrol span",this.pDiv).html(s.pages);var t=(s.page-1)*s.rp+1,i=t+s.rp-1;s.total<i&&(i=s.total);var n=s.pagestat;n=n.replace(/{from}/,t),n=n.replace(/{to}/,i),n=n.replace(/{total}/,s.total),e(".pPageStat",this.pDiv).html(n)},populate:function(i){if(this.loading)return!0;if(s.onSubmit){var a=s.onSubmit();if(!a)return!1}if(this.loading=!0,!s.url)return!1;e(".pPageStat",this.pDiv).html(s.procmsg),e(".pReload",this.pDiv).addClass("loading"),e(n.block).css({top:n.bDiv.offsetTop}),s.hideOnSubmit&&e(this.gDiv).prepend(n.block),e.browser.opera&&e(t).css("visibility","hidden"),s.newp||(s.newp=1),s.page>s.pages&&(s.page=s.pages);var r=[{name:"page",value:s.newp},{name:"rp",value:s.rp},{name:"sortname",value:s.sortname},{name:"sortorder",value:s.sortorder},{name:"query",value:s.query},{name:"qtype",value:s.qtype}];if(s.params)for(var o=0;o<s.params.length;o++)r[r.length]=s.params[o];i&&i.params&&e.each(i.params,function(t,i){"object"==typeof i?e.each(i,function(){r[r.length]={name:t,value:this}}):r[r.length]={name:t,value:i}}),e.ajax({type:s.method,url:s.url,data:r,dataType:s.dataType,success:function(e){n.addData(e)},error:function(e){try{s.onError&&s.onError(e)}catch(t){}}})},doSearch:function(){s.query=e("input[name=q]",n.sDiv).val(),s.qtype=e("select[name=qtype]",n.sDiv).val(),s.newp=1,this.populate()},changePage:function(t){if(this.loading)return!0;switch(t){case"first":s.newp=1;break;case"prev":s.page>1&&(s.newp=parseInt(s.page)-1);break;case"next":s.page<s.pages&&(s.newp=parseInt(s.page)+1);break;case"last":s.newp=s.pages;break;case"input":var i=parseInt(e(".pcontrol input",this.pDiv).val());isNaN(i)&&(i=1),1>i?i=1:i>s.pages&&(i=s.pages),e(".pcontrol input",this.pDiv).val(i),s.newp=i}return s.newp==s.page?!1:void(s.onChangePage?s.onChangePage(s.newp):this.populate())},addCellProp:function(){e("tbody tr td",n.bDiv).each(function(){var t=document.createElement("div"),i=e("td",e(this).parent()).index(this),a=e("th:eq("+i+")",n.hDiv).get(0);null!=a&&(s.sortname==e(a).attr("abbr")&&s.sortname&&(this.className="sorted"),e(t).css({textAlign:a.align,width:e("div:first",a)[0].style.width}),a.hide&&e(this).css("display","none")),0==s.nowrap&&e(t).css("white-space","normal"),""==this.innerHTML&&(this.innerHTML="&nbsp;"),t.innerHTML=this.innerHTML;var r=e(this).parent()[0],o=!1;r.id&&(o=r.id.substr(3)),null!=a&&a.process&&a.process(t,o),e(this).empty().append(t).removeAttr("width")})},getCellDim:function(t){var i=parseInt(e(t).height()),s=parseInt(e(t).parent().height()),n=parseInt(t.style.width),a=parseInt(e(t).parent().width()),r=t.offsetParent.offsetTop,o=t.offsetParent.offsetLeft,l=parseInt(e(t).css("paddingLeft")),d=parseInt(e(t).css("paddingTop"));return{ht:i,wt:n,top:r,left:o,pdl:l,pdt:d,pht:s,pwt:a}},addRowProp:function(){e("tbody tr",n.bDiv).each(function(){e(this).click(function(t){var i=t.target||t.srcElement;return i.href||i.type?!0:(e(this).toggleClass("trSelected"),void(s.singleSelect&&e(this).siblings().removeClass("trSelected")))}).mousedown(function(t){t.shiftKey&&(e(this).toggleClass("trSelected"),n.multisel=!0,this.focus(),e(n.gDiv).noSelect())}).mouseup(function(){n.multisel&&(n.multisel=!1,e(n.gDiv).noSelect(!1))}).hover(function(){n.multisel&&e(this).toggleClass("trSelected")},function(){}),e.browser.msie&&e.browser.version<7&&e(this).hover(function(){e(this).addClass("trOver")},function(){e(this).removeClass("trOver")})})},pager:0};if(s.colModel){for(h=document.createElement("thead"),tr=document.createElement("tr"),i=0;i<s.colModel.length;i++){var a=s.colModel[i],r=document.createElement("th");r.innerHTML=a.display,a.name&&a.sortable&&e(r).attr("abbr",a.name),e(r).attr("axis","col"+i),a.align&&(r.align=a.align),a.width&&e(r).attr("width",a.width),a.hide&&(r.hide=!0),a.process&&(r.process=a.process),e(tr).append(r)}e(h).append(tr),e(t).prepend(h)}if(n.gDiv=document.createElement("div"),n.mDiv=document.createElement("div"),n.hDiv=document.createElement("div"),n.bDiv=document.createElement("div"),n.vDiv=document.createElement("div"),n.rDiv=document.createElement("div"),n.cDrag=document.createElement("div"),n.block=document.createElement("div"),n.nDiv=document.createElement("div"),n.nBtn=document.createElement("div"),n.iDiv=document.createElement("div"),n.tDiv=document.createElement("div"),n.sDiv=document.createElement("div"),s.usepager&&(n.pDiv=document.createElement("div")),n.hTable=document.createElement("table"),n.gDiv.className="flexigrid","auto"!=s.width&&(n.gDiv.style.width=s.width+"px"),e.browser.msie&&e(n.gDiv).addClass("ie"),s.novstripe&&e(n.gDiv).addClass("novstripe"),e(t).before(n.gDiv),e(n.gDiv).append(t),s.buttons){n.tDiv.className="tDiv";var o=document.createElement("div");for(o.className="tDiv2",i=0;i<s.buttons.length;i++){var l=s.buttons[i];if(l.separator)e(o).append("<div class='btnseparator'></div>");else{var d=document.createElement("div");d.className="fbutton",d.innerHTML="<div><span></span>"+l.name+"</div>",l.bclass&&e("span",d).addClass(l.bclass),d.onpress=l.onpress,d.name=l.name,l.title&&(d.title=l.title),l.onpress&&e(d).click(function(){this.onpress(this.name,n.gDiv)}),e(o).append(d),e.browser.msie&&e.browser.version<7&&e(d).hover(function(){e(this).addClass("fbOver")},function(){e(this).removeClass("fbOver")})}}e(n.tDiv).append(o),e(n.tDiv).append("<div style='clear:both'></div>"),e(n.gDiv).prepend(n.tDiv)}n.hDiv.className="hDiv",e(t).before(n.hDiv),n.hTable.cellPadding=0,n.hTable.cellSpacing=0,e(n.hDiv).append('<div class="hDivBox"></div>'),e("div",n.hDiv).append(n.hTable);var h=e("thead:first",t).get(0);if(h&&e(n.hTable).append(h),h=null,!s.colmodel)var c=0;e("thead tr:first th",n.hDiv).each(function(){var t=document.createElement("div");e(this).attr("abbr")&&(e(this).click(function(t){if(!e(this).hasClass("thOver"))return!1;var i=t.target||t.srcElement;return i.href||i.type?!0:void n.changeSort(this)}),e(this).attr("abbr")==s.sortname&&(this.className="sorted",t.className="s"+s.sortorder)),this.hide&&e(this).hide(),s.colmodel||e(this).attr("axis","col"+c++),e(t).css({textAlign:this.align,width:this.width+"px"}),t.innerHTML=this.innerHTML,e(this).empty().append(t).removeAttr("width").mousedown(function(e){n.dragStart("colMove",e,this)}).hover(function(){if(n.colresize||e(this).hasClass("thMove")||n.colCopy||e(this).addClass("thOver"),e(this).attr("abbr")==s.sortname||n.colCopy||n.colresize||!e(this).attr("abbr")){if(e(this).attr("abbr")==s.sortname&&!n.colCopy&&!n.colresize&&e(this).attr("abbr")){var t="";t="asc"==s.sortorder?"desc":"asc",e("div",this).removeClass("s"+s.sortorder).addClass("s"+t)}}else e("div",this).addClass("s"+s.sortorder);if(n.colCopy){var i=e("th",n.hDiv).index(this);if(i==n.dcoln)return!1;e(this).append(i<n.dcoln?n.cdropleft:n.cdropright),n.dcolt=i}else if(!n.colresize){var a=e("th:visible",n.hDiv).index(this),r=parseInt(e("div:eq("+a+")",n.cDrag).css("left")),o=parseInt(e(n.nBtn).width())+parseInt(e(n.nBtn).css("borderLeftWidth"));nl=r-o+Math.floor(s.cgwidth/2),e(n.nDiv).hide(),e(n.nBtn).hide(),e(n.nBtn).css({left:nl,top:n.hDiv.offsetTop}).show();var l=parseInt(e(n.nDiv).width());e(n.nDiv).css({top:n.bDiv.offsetTop}),nl+l>e(n.gDiv).width()?e(n.nDiv).css("left",r-l+1):e(n.nDiv).css("left",nl),e(this).hasClass("sorted")?e(n.nBtn).addClass("srtd"):e(n.nBtn).removeClass("srtd")}},function(){if(e(this).removeClass("thOver"),e(this).attr("abbr")!=s.sortname)e("div",this).removeClass("s"+s.sortorder);else if(e(this).attr("abbr")==s.sortname){var t="";t="asc"==s.sortorder?"desc":"asc",e("div",this).addClass("s"+s.sortorder).removeClass("s"+t)}n.colCopy&&(e(n.cdropleft).remove(),e(n.cdropright).remove(),n.dcolt=null)})}),n.bDiv.className="bDiv",e(t).before(n.bDiv),e(n.bDiv).css({height:"auto"==s.height?"auto":s.height+"px"}).scroll(function(){n.scroll()}).append(t),"auto"==s.height&&e("table",n.bDiv).addClass("autoht"),n.addCellProp(),n.addRowProp();var p=e("thead tr:first th:first",n.hDiv).get(0);if(null!=p){n.cDrag.className="cDrag",n.cdpad=0,n.cdpad+=isNaN(parseInt(e("div",p).css("borderLeftWidth")))?0:parseInt(e("div",p).css("borderLeftWidth")),n.cdpad+=isNaN(parseInt(e("div",p).css("borderRightWidth")))?0:parseInt(e("div",p).css("borderRightWidth")),n.cdpad+=isNaN(parseInt(e("div",p).css("paddingLeft")))?0:parseInt(e("div",p).css("paddingLeft")),n.cdpad+=isNaN(parseInt(e("div",p).css("paddingRight")))?0:parseInt(e("div",p).css("paddingRight")),n.cdpad+=isNaN(parseInt(e(p).css("borderLeftWidth")))?0:parseInt(e(p).css("borderLeftWidth")),n.cdpad+=isNaN(parseInt(e(p).css("borderRightWidth")))?0:parseInt(e(p).css("borderRightWidth")),n.cdpad+=isNaN(parseInt(e(p).css("paddingLeft")))?0:parseInt(e(p).css("paddingLeft")),n.cdpad+=isNaN(parseInt(e(p).css("paddingRight")))?0:parseInt(e(p).css("paddingRight")),e(n.bDiv).before(n.cDrag);var v=e(n.bDiv).height(),g=e(n.hDiv).height();e(n.cDrag).css({top:-g+"px"}),e("thead tr:first th",n.hDiv).each(function(){var t=document.createElement("div");e(n.cDrag).append(t),s.cgwidth||(s.cgwidth=e(t).width()),e(t).css({height:v+g}).mousedown(function(e){n.dragStart("colresize",e,this)}),e.browser.msie&&e.browser.version<7&&(n.fixHeight(e(n.gDiv).height()),e(t).hover(function(){n.fixHeight(),e(this).addClass("dragging")},function(){n.colresize||e(this).removeClass("dragging")}))})}if(s.striped&&e("tbody tr:odd",n.bDiv).addClass("erow"),s.resizable&&"auto"!=s.height&&(n.vDiv.className="vGrip",e(n.vDiv).mousedown(function(e){n.dragStart("vresize",e)}).html("<span></span>"),e(n.bDiv).after(n.vDiv)),s.resizable&&"auto"!=s.width&&!s.nohresize&&(n.rDiv.className="hGrip",e(n.rDiv).mousedown(function(e){n.dragStart("vresize",e,!0)}).html("<span></span>").css("height",e(n.gDiv).height()),e.browser.msie&&e.browser.version<7&&e(n.rDiv).hover(function(){e(this).addClass("hgOver")},function(){e(this).removeClass("hgOver")}),e(n.gDiv).append(n.rDiv)),s.usepager){n.pDiv.className="pDiv",n.pDiv.innerHTML='<div class="pDiv2"></div>',e(n.bDiv).after(n.pDiv);var u=' <div class="pGroup"> <div class="pFirst pButton"><span></span></div><div class="pPrev pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"><span class="pcontrol">Page <input type="text" size="4" value="1" /> of <span> 1 </span></span></div> <div class="btnseparator"></div> <div class="pGroup"> <div class="pNext pButton"><span></span></div><div class="pLast pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"> <div class="pReload pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"><span class="pPageStat"></span></div>';if(e("div",n.pDiv).html(u),e(".pReload",n.pDiv).click(function(){n.populate()}),e(".pFirst",n.pDiv).click(function(){n.changePage("first")}),e(".pPrev",n.pDiv).click(function(){n.changePage("prev")}),e(".pNext",n.pDiv).click(function(){n.changePage("next")}),e(".pLast",n.pDiv).click(function(){n.changePage("last")}),e(".pcontrol input",n.pDiv).keydown(function(e){13==e.keyCode&&n.changePage("input")}),e.browser.msie&&e.browser.version<7&&e(".pButton",n.pDiv).hover(function(){e(this).addClass("pBtnOver")},function(){e(this).removeClass("pBtnOver")}),s.useRp){for(var f="",m=0;m<s.rpOptions.length;m++)sel=s.rp==s.rpOptions[m]?'selected="selected"':"",f+="<option value='"+s.rpOptions[m]+"' "+sel+" >"+s.rpOptions[m]+"&nbsp;&nbsp;</option>";e(".pDiv2",n.pDiv).prepend("<div class='pGroup'><select name='rp'>"+f+"</select></div> <div class='btnseparator'></div>"),e("select",n.pDiv).change(function(){s.onRpChange?s.onRpChange(+this.value):(s.newp=1,s.rp=+this.value,n.populate())})}if(s.searchitems){e(".pDiv2",n.pDiv).prepend("<div class='pGroup'> <div class='pSearch pButton'><span></span></div> </div>  <div class='btnseparator'></div>"),e(".pSearch",n.pDiv).click(function(){e(n.sDiv).slideToggle("fast",function(){e(".sDiv:visible input:first",n.gDiv).trigger("focus")})}),n.sDiv.className="sDiv",sitems=s.searchitems;for(var D="",b=0;b<sitems.length;b++)""==s.qtype&&1==sitems[b].isdefault?(s.qtype=sitems[b].name,sel='selected="selected"'):sel="",D+="<option value='"+sitems[b].name+"' "+sel+" >"+sitems[b].display+"&nbsp;&nbsp;</option>";""==s.qtype&&(s.qtype=sitems[0].name),e(n.sDiv).append("<div class='sDiv2'>Quick Search <input type='text' size='30' name='q' class='qsbox' /> <select name='qtype'>"+D+"</select> <input type='button' value='Clear' /></div>"),e("input[name=q]",n.sDiv).keydown(function(e){13==e.keyCode&&n.doSearch()}),e("input[value=Clear]",n.sDiv).click(function(){e("input[name=q]",n.sDiv).val(""),s.query="",n.doSearch()}),e(n.bDiv).after(n.sDiv)}}e(n.pDiv,n.sDiv).append("<div style='clear:both'></div>"),s.title&&(n.mDiv.className="mDiv",n.mDiv.innerHTML='<div class="ftitle">'+s.title+"</div>",e(n.gDiv).prepend(n.mDiv),s.showTableToggleBtn&&(e(n.mDiv).append('<div class="ptogtitle" title="Minimize/Maximize Table"><span></span></div>'),e("div.ptogtitle",n.mDiv).click(function(){e(n.gDiv).toggleClass("hideBody"),e(this).toggleClass("vsble")}))),n.cdropleft=document.createElement("span"),n.cdropleft.className="cdropleft",n.cdropright=document.createElement("span"),n.cdropright.className="cdropright",n.block.className="gBlock";var w=e(n.bDiv).height(),y=n.bDiv.offsetTop;if(e(n.block).css({width:n.bDiv.style.width,height:w,background:"white",position:"relative",marginBottom:-1*w,zIndex:1,top:y,left:"0px"}),e(n.block).fadeTo(0,s.blockOpacity),e("th",n.hDiv).length){n.nDiv.className="nDiv",n.nDiv.innerHTML="<table cellpadding='0' cellspacing='0'><tbody></tbody></table>",e(n.nDiv).css({marginBottom:-1*w,display:"none",top:y}).noSelect();var C=0;e("th div",n.hDiv).each(function(){var t=e("th[axis='col"+C+"']",n.hDiv)[0],i='checked="checked"';"none"==t.style.display&&(i=""),e("tbody",n.nDiv).append('<tr><td class="ndcol1"><input type="checkbox" '+i+' class="togCol" value="'+C+'" /></td><td class="ndcol2">'+this.innerHTML+"</td></tr>"),C++}),e.browser.msie&&e.browser.version<7&&e("tr",n.nDiv).hover(function(){e(this).addClass("ndcolover")},function(){e(this).removeClass("ndcolover")}),e("td.ndcol2",n.nDiv).click(function(){return e("input:checked",n.nDiv).length<=s.minColToggle&&e(this).prev().find("input")[0].checked?!1:n.toggleCol(e(this).prev().find("input").val())}),e("input.togCol",n.nDiv).click(function(){return e("input:checked",n.nDiv).length<s.minColToggle&&0==this.checked?!1:void e(this).parent().next().trigger("click")}),e(n.gDiv).prepend(n.nDiv),e(n.nBtn).addClass("nBtn").html("<div></div>").attr("title","Hide/Show Columns").click(function(){return e(n.nDiv).toggle(),!0}),s.showToggleBtn&&e(n.gDiv).prepend(n.nBtn)}return e(n.iDiv).addClass("iDiv").css({display:"none"}),e(n.bDiv).append(n.iDiv),e(n.bDiv).hover(function(){e(n.nDiv).hide(),e(n.nBtn).hide()},function(){n.multisel&&(n.multisel=!1)}),e(n.gDiv).hover(function(){},function(){e(n.nDiv).hide(),e(n.nBtn).hide()}),e(document).mousemove(function(e){n.dragMove(e)}).mouseup(function(){n.dragEnd()}).hover(function(){},function(){n.dragEnd()}),e.browser.msie&&e.browser.version<7&&(e(".hDiv,.bDiv,.mDiv,.pDiv,.vGrip,.tDiv, .sDiv",n.gDiv).css({width:"100%"}),e(n.gDiv).addClass("ie6"),"auto"!=s.width&&e(n.gDiv).addClass("ie6fullwidthbug")),n.rePosDrag(),n.fixHeight(),t.p=s,t.grid=n,s.url&&s.autoload&&n.populate(),t};var t=!1;e(document).ready(function(){t=!0}),e.fn.flexigrid=function(i){return this.each(function(){if(t)e.addFlex(this,i);else{e(this).hide();var s=this;e(document).ready(function(){e.addFlex(s,i)})}})},e.fn.flexReload=function(e){return this.each(function(){this.grid&&this.p.url&&this.grid.populate(e)})},e.fn.flexOptions=function(t){return this.each(function(){this.grid&&e.extend(this.p,t)})},e.fn.flexToggleCol=function(e,t){return this.each(function(){this.grid&&this.grid.toggleCol(e,t)})},e.fn.flexAddData=function(e){return this.each(function(){this.grid&&this.grid.addData(e)})},e.fn.noSelect=function(t){return prevent=null==t?!0:t,this.each(prevent?function(){e.browser.msie||e.browser.safari?e(this).bind("selectstart",function(){return!1}):e.browser.mozilla?(e(this).css("MozUserSelect","none"),e("body").trigger("focus")):e.browser.opera?e(this).bind("mousedown",function(){return!1}):e(this).attr("unselectable","on")}:function(){e.browser.msie||e.browser.safari?e(this).unbind("selectstart"):e.browser.mozilla?e(this).css("MozUserSelect","inherit"):e.browser.opera?e(this).unbind("mousedown"):e(this).removeAttr("unselectable","on")})}}(jQuery);
window.CodeMirror=function(){"use strict";function e(i,o){if(!(this instanceof e))return new e(i,o);this.options=o=o||{};for(var s in li)!o.hasOwnProperty(s)&&li.hasOwnProperty(s)&&(o[s]=li[s]);f(o);var u=this.display=t(i);u.wrapper.CodeMirror=this,a(this),o.autofocus&&!Xn&&et(this),this.view=r(new zr([new Er([xr("",null,X(u))])])),this.nextOpId=0,n(this),l(this),o.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),this.setValue(o.value||""),Dn&&setTimeout(hn(Q,this,!0),20),this.view.history=Gr(),rt(this);var c;try{c=document.activeElement==u.input}catch(h){}c||o.autofocus&&!Xn?setTimeout(hn(wt,this),20):yt(this),j(this,function(){for(var e in oi)oi.propertyIsEnumerable(e)&&oi[e](this,o[e],si);for(var t=0;t<fi.length;++t)fi[t](this)})()}function t(e){var t={},r=t.input=vn("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none;");En?r.style.width="1000px":r.setAttribute("wrap","off"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","off"),t.inputDiv=vn("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),t.scrollbarH=vn("div",[vn("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),t.scrollbarV=vn("div",[vn("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),t.scrollbarFiller=vn("div",null,"CodeMirror-scrollbar-filler"),t.lineDiv=vn("div"),t.selectionDiv=vn("div",null,null,"position: relative; z-index: 1"),t.cursor=vn("div"," ","CodeMirror-cursor"),t.otherCursor=vn("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),t.measure=vn("div",null,"CodeMirror-measure"),t.lineSpace=vn("div",[t.measure,t.selectionDiv,t.lineDiv,t.cursor,t.otherCursor],null,"position: relative; outline: none"),t.mover=vn("div",[vn("div",[t.lineSpace],"CodeMirror-lines")],null,"position: relative"),t.sizer=vn("div",[t.mover],"CodeMirror-sizer"),t.heightForcer=vn("div"," ",null,"position: absolute; height: "+mi+"px"),t.gutters=vn("div",null,"CodeMirror-gutters"),t.lineGutter=null;var n=vn("div",[t.sizer,t.heightForcer,t.gutters],null,"position: relative; min-height: 100%");return t.scroller=vn("div",[n],"CodeMirror-scroll"),t.scroller.setAttribute("tabIndex","-1"),t.wrapper=vn("div",[t.inputDiv,t.scrollbarH,t.scrollbarV,t.scrollbarFiller,t.scroller],"CodeMirror"),On&&(t.gutters.style.zIndex=-1,t.scroller.style.paddingRight=0),e.appendChild?e.appendChild(t.wrapper):e(t.wrapper),Gn&&(r.style.width="0px"),En||(t.scroller.draggable=!0),Bn?(t.inputDiv.style.height="1px",t.inputDiv.style.position="absolute"):On&&(t.scrollbarH.style.minWidth=t.scrollbarV.style.minWidth="18px"),t.viewOffset=t.showingFrom=t.showingTo=t.lastSizeC=0,t.lineNumWidth=t.lineNumInnerWidth=t.lineNumChars=null,t.prevInput="",t.alignWidgets=!1,t.pollingFast=!1,t.poll=new on,t.draggingText=!1,t.cachedCharWidth=t.cachedTextHeight=null,t.measureLineCache=[],t.measureLineCachePos=0,t.inaccurateSelection=!1,t.pasteIncoming=!1,t.wheelDX=t.wheelDY=t.wheelStartX=t.wheelStartY=null,t}function r(e){var t={line:0,ch:0};return{doc:e,frontier:0,highlight:new on,sel:{from:t,to:t,head:t,anchor:t,shift:!1,extend:!1},scrollTop:0,scrollLeft:0,overwrite:!1,focused:!1,maxLine:Ir(e,0),maxLineLength:0,maxLineChanged:!1,suppressEdits:!1,goalColumn:null,cantEdit:!1,keyMaps:[],overlays:[],modeGen:0}}function n(t){var r=t.view.doc;t.view.mode=e.getMode(t.options,t.options.mode),r.iter(0,r.size,function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),t.view.frontier=0,A(t,100),t.view.modeGen++,t.curOp&&Z(t,0,r.size)}function i(e){var t=e.view.doc,r=X(e.display);if(e.options.lineWrapping){e.display.wrapper.className+=" CodeMirror-wrap";var n=e.display.scroller.clientWidth/Y(e.display)-3;t.iter(0,t.size,function(e){if(0!=e.height){var t=Math.ceil(e.text.length/n)||1;1!=t&&Fr(e,t*r)}}),e.display.sizer.style.minWidth=""}else e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-wrap",""),c(e.view),t.iter(0,t.size,function(e){0!=e.height&&Fr(e,r)});Z(e,0,t.size),R(e),setTimeout(function(){h(e.display,e.view.doc.height)},100)}function o(e){var t=di[e.options.keyMap].style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(t?" cm-keymap-"+t:"")}function l(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),R(e)}function s(e){a(e),w(e,!0)}function a(e){var t=e.display.gutters,r=e.options.gutters;gn(t);for(var n=0;n<r.length;++n){var i=r[n],o=t.appendChild(vn("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none"}function u(e,t){if(0==t.height)return 0;for(var r,n=t.text.length,i=t;r=ar(i);){var o=r.find();i=Ir(e,o.from.line),n+=o.from.ch-o.to.ch}for(i=t;r=ur(i);){var o=r.find();n-=i.text.length-o.from.ch,i=Ir(e,o.to.line),n+=i.text.length-o.to.ch}return n}function c(e){e.maxLine=Ir(e.doc,0),e.maxLineLength=u(e.doc,e.maxLine),e.maxLineChanged=!0,e.doc.iter(1,e.doc.size,function(t){var r=u(e.doc,t);r>e.maxLineLength&&(e.maxLineLength=r,e.maxLine=t)})}function f(e){for(var t=!1,r=0;r<e.gutters.length;++r)"CodeMirror-linenumbers"==e.gutters[r]&&(e.lineNumbers?t=!0:e.gutters.splice(r--,1));!t&&e.lineNumbers&&e.gutters.push("CodeMirror-linenumbers")}function h(e,t){var r=t+2*H(e);e.sizer.style.minHeight=e.heightForcer.style.top=r+"px";var n=Math.max(r,e.scroller.scrollHeight),i=e.scroller.scrollWidth>e.scroller.clientWidth,o=n>e.scroller.clientHeight;o?(e.scrollbarV.style.display="block",e.scrollbarV.style.bottom=i?yn(e.measure)+"px":"0",e.scrollbarV.firstChild.style.height=n-e.scroller.clientHeight+e.scrollbarV.clientHeight+"px"):e.scrollbarV.style.display="",i?(e.scrollbarH.style.display="block",e.scrollbarH.style.right=o?yn(e.measure)+"px":"0",e.scrollbarH.firstChild.style.width=e.scroller.scrollWidth-e.scroller.clientWidth+e.scrollbarH.clientWidth+"px"):e.scrollbarH.style.display="",i&&o?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=yn(e.measure)+"px"):e.scrollbarFiller.style.display="",Pn&&0===yn(e.measure)&&(e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=Vn?"18px":"12px")}function d(e,t,r){var n=e.scroller.scrollTop,i=e.wrapper.clientHeight;"number"==typeof r?n=r:r&&(n=r.top,i=r.bottom-r.top),n=Math.floor(n-H(e));var o=Math.ceil(n+i);return{from:Pr(t,n),to:Pr(t,o)}}function p(e){var t=e.display;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=m(t)-t.scroller.scrollLeft+e.view.scrollLeft,n=t.gutters.offsetWidth,i=r+"px",o=t.lineDiv.firstChild;o;o=o.nextSibling)if(o.alignable)for(var l=0,s=o.alignable;l<s.length;++l)s[l].style.left=i;e.options.fixedGutter&&(t.gutters.style.left=r+n+"px")}}function v(e){if(!e.options.lineNumbers)return!1;var t=e.view.doc,r=g(e.options,t.size-1),n=e.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(vn("div",[vn("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,l=i.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-l),n.lineNumWidth=n.lineNumInnerWidth+l,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",!0}return!1}function g(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function m(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function w(e,t,r){var n=e.display.showingFrom,i=e.display.showingTo,o=y(e,t,r);return o&&(rn(e,e,"update",e),(e.display.showingFrom!=n||e.display.showingTo!=i)&&rn(e,e,"viewportChange",e,e.display.showingFrom,e.display.showingTo)),k(e),h(e.display,e.view.doc.height),o}function y(e,t,r){var n=e.display,i=e.view.doc;if(!n.wrapper.clientWidth)return void(n.showingFrom=n.showingTo=n.viewOffset=0);var o=d(n,i,r);if(!(t!==!0&&0==t.length&&o.from>n.showingFrom&&o.to<n.showingTo)){t&&v(e)&&(t=!0);var l=n.sizer.style.marginLeft=n.gutters.offsetWidth+"px";if(n.scrollbarH.style.left=e.options.fixedGutter?l:"0",t!==!0&&Qn)for(var s=0;s<t.length;++s)for(var a,u=t[s];a=ar(Ir(i,u.from));){var c=a.find().from.line;u.diff&&(u.diff-=u.from-c),u.from=c}var f=t===!0?0:1/0;if(e.options.lineNumbers&&t&&t!==!0)for(var s=0;s<t.length;++s)if(t[s].diff){f=t[s].from;break}var c=Math.max(o.from-e.options.viewportMargin,0),h=Math.min(i.size,o.to+e.options.viewportMargin);if(n.showingFrom<c&&c-n.showingFrom<20&&(c=n.showingFrom),n.showingTo>h&&n.showingTo-h<20&&(h=Math.min(i.size,n.showingTo)),Qn)for(c=Rr(cr(i,Ir(i,c)));h<i.size&&fr(Ir(i,h));)++h;for(var p=t===!0?[]:b([{from:n.showingFrom,to:n.showingTo}],t),g=0,s=0;s<p.length;++s){var m=p[s];m.from<c&&(m.from=c),m.to>h&&(m.to=h),m.from>=m.to?p.splice(s--,1):g+=m.to-m.from}if(g!=h-c||c!=n.showingFrom||h!=n.showingTo){p.sort(function(e,t){return e.from-t.from});var w=document.activeElement;.7*(h-c)>g&&(n.lineDiv.style.display="none"),C(e,c,h,p,f),n.lineDiv.style.display="",document.activeElement!=w&&w.offsetHeight&&w.focus();var x=c!=n.showingFrom||h!=n.showingTo||n.lastSizeC!=n.wrapper.clientHeight;x&&(n.lastSizeC=n.wrapper.clientHeight),n.showingFrom=c,n.showingTo=h,A(e,100);for(var L,S=n.lineDiv.offsetTop,k=n.lineDiv.firstChild;k;k=k.nextSibling)if(k.lineObj){if(On){var M=k.offsetTop+k.offsetHeight;L=M-S,S=M}else{var T=k.getBoundingClientRect();L=T.bottom-T.top}var N=k.lineObj.height-L;if(2>L&&(L=X(n)),N>.001||-.001>N){Fr(k.lineObj,L);var W=k.lineObj.widgets;if(W)for(var s=0;s<W.length;++s)W[s].height=W[s].node.offsetHeight}}return n.viewOffset=Vr(e,Ir(i,c)),n.mover.style.top=n.viewOffset+"px",d(n,i,r).to>=h&&y(e,[],r),!0}}}function b(e,t){for(var r=0,n=t.length||0;n>r;++r){for(var i=t[r],o=[],l=i.diff||0,s=0,a=e.length;a>s;++s){var u=e[s];i.to<=u.from&&i.diff?o.push({from:u.from+l,to:u.to+l}):i.to<=u.from||i.from>=u.to?o.push(u):(i.from>u.from&&o.push({from:u.from,to:i.from}),i.to<u.to&&o.push({from:i.to+l,to:u.to+l}))}e=o}return e}function x(e){for(var t=e.display,r={},n={},i=t.gutters.firstChild,o=0;i;i=i.nextSibling,++o)r[e.options.gutters[o]]=i.offsetLeft,n[e.options.gutters[o]]=i.offsetWidth;return{fixedPos:m(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function C(e,t,r,n,i){function o(t){var r=t.nextSibling;return En&&Yn&&e.display.currentWheelTarget==t?(t.style.display="none",t.lineObj=null):t.parentNode.removeChild(t),r}var l=x(e),s=e.display,a=e.options.lineNumbers;n.length||En&&e.display.currentWheelTarget||gn(s.lineDiv);var u=s.lineDiv,c=u.firstChild,f=n.shift(),h=t;for(e.view.doc.iter(t,r,function(t){if(f&&f.to==h&&(f=n.shift()),fr(t)){if(0!=t.height&&Fr(t,0),t.widgets&&c.previousSibling)for(var r=0;r<t.widgets.length;++r)if(t.widgets[r].showIfHidden){var s=c.previousSibling;if("pre"==s.nodeType){var d=vn("div",null,null,"position: relative");s.parentNode.replaceChild(d,s),d.appendChild(s),s=d}s.appendChild(S(t.widgets[r],s,l))}}else if(f&&f.from<=h&&f.to>h){for(;c.lineObj!=t;)c=o(c);a&&h>=i&&c.lineNumber&&wn(c.lineNumber,g(e.options,h)),c=c.nextSibling}else{var p=L(e,t,h,l);u.insertBefore(p,c),p.lineObj=t}++h});c;)c=o(c)}function L(e,t,r,n){var i=Ar(e,t),o=t.gutterMarkers,l=e.display;if(!(e.options.lineNumbers||o||t.bgClass||t.wrapClass||t.widgets&&t.widgets.length))return i;var s=vn("div",null,t.wrapClass,"position: relative");if(e.options.lineNumbers||o){var a=s.appendChild(vn("div",null,null,"position: absolute; left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px"));if(e.options.fixedGutter&&(s.alignable=[a]),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(s.lineNumber=a.appendChild(vn("div",g(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+l.lineNumInnerWidth+"px"))),o)for(var u=0;u<e.options.gutters.length;++u){var c=e.options.gutters[u],f=o.hasOwnProperty(c)&&o[c];f&&a.appendChild(vn("div",[f],"CodeMirror-gutter-elt","left: "+n.gutterLeft[c]+"px; width: "+n.gutterWidth[c]+"px"))}}if(t.bgClass&&s.appendChild(vn("div"," ",t.bgClass+" CodeMirror-linebackground")),s.appendChild(i),t.widgets)for(var h=0,d=t.widgets;h<d.length;++h){var p=d[h],v=S(p,s,n);p.above?s.insertBefore(v,e.options.lineNumbers&&0!=t.height?a:i):s.appendChild(v)}return On&&(s.style.zIndex=2),s}function S(e,t,r){var n=vn("div",[e.node],"CodeMirror-linewidget");if(n.widget=e,e.noHScroll){(t.alignable||(t.alignable=[])).push(n);var i=r.wrapperWidth;n.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,n.style.paddingLeft=r.gutterTotalWidth+"px"),n.style.width=i+"px"}return e.coverGutter&&(n.style.zIndex=5,n.style.position="relative",e.noHScroll||(n.style.marginLeft=-r.gutterTotalWidth+"px")),n}function k(e){var t=e.display,r=Mt(e.view.sel.from,e.view.sel.to);r||e.options.showCursorWhenSelecting?M(e):t.cursor.style.display=t.otherCursor.style.display="none",r?t.selectionDiv.style.display="none":T(e);var n=V(e,e.view.sel.head,"div"),i=t.wrapper.getBoundingClientRect(),o=t.lineDiv.getBoundingClientRect();t.inputDiv.style.top=Math.max(0,Math.min(t.wrapper.clientHeight-10,n.top+o.top-i.top))+"px",t.inputDiv.style.left=Math.max(0,Math.min(t.wrapper.clientWidth-10,n.left+o.left-i.left))+"px"}function M(e){var t=e.display,r=V(e,e.view.sel.head,"div");t.cursor.style.left=r.left+"px",t.cursor.style.top=r.top+"px",t.cursor.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",t.cursor.style.display="",r.other?(t.otherCursor.style.display="",t.otherCursor.style.left=r.other.left+"px",t.otherCursor.style.top=r.other.top+"px",t.otherCursor.style.height=.85*(r.other.bottom-r.other.top)+"px"):t.otherCursor.style.display="none"}function T(e){function t(e,t,r,n){0>t&&(t=0),l.appendChild(vn("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==r?s-e:r)+"px; height: "+(n-t)+"px"))}function r(r,n,o,l){function u(t){return P(e,{line:r,ch:t},"div",c)}var c=Ir(i,r),f=c.text.length,h=l?1/0:-1/0;return xn(Kr(c),n||0,null==o?f:o,function(e,r,i){var c=u("rtl"==i?r-1:e),d=u("rtl"==i?e:r-1),p=c.left,v=d.right;d.top-c.top>3&&(t(p,c.top,null,c.bottom),p=a,c.bottom<d.top&&t(p,c.bottom,null,d.top)),null==o&&r==f&&(v=s),null==n&&0==e&&(p=a),h=l?Math.min(d.top,h):Math.max(d.bottom,h),a+1>p&&(p=a),t(p,d.top,v-p,d.bottom)}),h}var n=e.display,i=e.view.doc,o=e.view.sel,l=document.createDocumentFragment(),s=n.lineSpace.offsetWidth,a=E(e.display);if(o.from.line==o.to.line)r(o.from.line,o.from.ch,o.to.ch);else{for(var u,c,f=Ir(i,o.from.line),h=f,d=[o.from.line,o.from.ch];u=ur(h);){var p=u.find();if(d.push(p.from.ch,p.to.line,p.to.ch),p.to.line==o.to.line){d.push(o.to.ch),c=!0;break}h=Ir(i,p.to.line)}if(c)for(var v=0;v<d.length;v+=3)r(d[v],d[v+1],d[v+2]);else{var g,m,w=Ir(i,o.to.line);g=o.from.ch?r(o.from.line,o.from.ch,null,!1):Vr(e,f)-n.viewOffset,m=o.to.ch?r(o.to.line,ar(w)?null:0,o.to.ch,!0):Vr(e,w)-n.viewOffset,m>g&&t(a,g,null,m)}}mn(n.selectionDiv,l),n.selectionDiv.style.display=""}function N(e){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursor.style.visibility=t.otherCursor.style.visibility="",t.blinker=setInterval(function(){t.cursor.offsetHeight&&(t.cursor.style.visibility=t.otherCursor.style.visibility=(r=!r)?"":"hidden")},e.options.cursorBlinkRate)}function A(e,t){e.view.mode.startState&&e.view.frontier<e.display.showingTo&&e.view.highlight.set(t,hn(W,e))}function W(e){var t=e.view,r=t.doc;if(!(t.frontier>=e.display.showingTo)){var n,i=+new Date+e.options.workTime,o=Ut(t.mode,O(e,t.frontier)),l=[];r.iter(t.frontier,Math.min(r.size,e.display.showingTo+500),function(r){if(t.frontier>=e.display.showingFrom){var s=r.styles;r.styles=kr(e,r,o);for(var a=!s||s.length!=r.styles.length,u=0;!a&&u<s.length;++u)a=s[u]!=r.styles[u];a&&(n&&n.end==t.frontier?n.end++:l.push(n={start:t.frontier,end:t.frontier+1})),r.stateAfter=Ut(t.mode,o)}else Tr(e,r,o),r.stateAfter=t.frontier%5==0?Ut(t.mode,o):null;return++t.frontier,+new Date>i?(A(e,e.options.workDelay),!0):void 0}),l.length&&j(e,function(){for(var e=0;e<l.length;++e)Z(this,l[e].start,l[e].end)})()}}function D(e,t){for(var r,n,i=e.view.doc,o=t,l=t-100;o>l;--o){if(0==o)return 0;var s=Ir(i,o-1);if(s.stateAfter)return o;var a=ln(s.text,null,e.options.tabSize);(null==n||r>a)&&(n=o-1,r=a)}return n}function O(e,t){var r=e.view;if(!r.mode.startState)return!0;var n=D(e,t),i=n&&Ir(r.doc,n-1).stateAfter;return i=i?Ut(r.mode,i):_t(r.mode),r.doc.iter(n,t,function(o){Tr(e,o,i);var l=n==t-1||n%5==0||n>=r.showingFrom&&n<r.showingTo;o.stateAfter=l?Ut(r.mode,i):null,++n}),i}function H(e){return e.lineSpace.offsetTop}function E(e){var t=mn(e.measure,vn("pre")).appendChild(vn("span","x"));return t.offsetLeft}function z(e,t,r,n){var i=-1;n=n||I(e,t);for(var o=r;;o+=i){var l=n[o];if(l)break;0>i&&0==o&&(i=1)}return{left:r>o?l.right:l.left,right:o>r?l.left:l.right,top:l.top,bottom:l.bottom}}function I(e,t){for(var r=e.display,n=e.display.measureLineCache,i=0;i<n.length;++i){var o=n[i];if(o.text==t.text&&o.markedSpans==t.markedSpans&&r.scroller.clientWidth==o.width)return o.measure}var l=F(e,t),o={text:t.text,width:r.scroller.clientWidth,markedSpans:t.markedSpans,measure:l};return 16==n.length?n[++r.measureLineCachePos%16]=o:n.push(o),l}function F(e,t){var r=e.display,n=fn(t.text.length),i=Ar(e,t,n);if(Dn&&!On&&!e.options.lineWrapping&&i.childNodes.length>100){for(var o=document.createDocumentFragment(),l=10,s=i.childNodes.length,a=0,u=Math.ceil(s/l);u>a;++a){for(var c=vn("div",null,null,"display: inline-block"),f=0;l>f&&s;++f)c.appendChild(i.firstChild),--s;o.appendChild(c)}i.appendChild(o)}mn(r.measure,i);for(var h,d=r.lineDiv.getBoundingClientRect(),p=[],v=fn(t.text.length),g=i.offsetHeight,a=0;a<n.length;++a)if(h=n[a]){for(var m=h.getBoundingClientRect(),w=Math.max(0,m.top-d.top),y=Math.min(m.bottom-d.top,g),f=0;f<p.length;f+=2){var b=p[f],x=p[f+1];if(!(b>y||w>x)&&(w>=b&&x>=y||b>=w&&y>=x||Math.min(y,x)-Math.max(w,b)>=y-w>>1)){p[f]=Math.min(w,b),p[f+1]=Math.max(y,x);break}}f==p.length&&p.push(w,y),v[a]={left:m.left-d.left,right:m.right-d.left,top:f}}for(var h,a=0;a<v.length;++a)if(h=v[a]){var C=h.top;h.top=p[C],h.bottom=p[C+1]}return v}function R(e){e.display.measureLineCache.length=e.display.measureLineCachePos=0,e.display.cachedCharWidth=e.display.cachedTextHeight=null,e.view.maxLineChanged=!0}function B(e,t,r,n){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var o=yr(t.widgets[i]);r.top+=o,r.bottom+=o}if("line"==n)return r;n||(n="local");var l=Vr(e,t);if("local"!=n&&(l-=e.display.viewOffset),"page"==n){var s=e.display.lineSpace.getBoundingClientRect();l+=s.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop);var a=s.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft);r.left+=a,r.right+=a}return r.top+=l,r.bottom+=l,r}function P(e,t,r,n){return n||(n=Ir(e.view.doc,t.line)),B(e,n,z(e,n,t.ch),r)}function V(e,t,r,n,i){function o(t,o){var l=z(e,n,t,i);return o?l.left=l.right:l.right=l.left,B(e,n,l,r)}n=n||Ir(e.view.doc,t.line),i||(i=I(e,n));var l=Kr(n),s=t.ch;if(!l)return o(s);for(var a,u,c=l[0].level,f=0;f<l.length;++f){var h,d,p=l[f],v=p.level%2;if(p.from<s&&p.to>s)return o(s,v);var g=v?p.to:p.from,m=v?p.from:p.to;if(g==s)d=f&&p.level<(h=l[f-1]).level?o(h.level%2?h.from:h.to-1,!0):o(v&&p.from!=p.to?s-1:s),v==c?a=d:u=d;else if(m==s){var h=f<l.length-1&&l[f+1];if(!v&&h&&h.from==h.to)continue;d=h&&p.level<h.level?o(h.level%2?h.to-1:h.from):o(v?s:s-1,!0),v==c?a=d:u=d}}return c&&!s&&(u=o(l[0].to-1)),a?(u&&(a.other=u),a):u}function K(e,t,r){var n=e.view.doc;if(r+=e.display.viewOffset,0>r)return{line:0,ch:0,outside:!0};var i=Pr(n,r);if(i>=n.size)return{line:n.size-1,ch:Ir(n,n.size-1).text.length};for(0>t&&(t=0);;){var o=Ir(n,i),l=G(e,o,i,t,r),s=ur(o),a=s&&s.find();if(!(s&&l.ch>=a.from.ch))return l;i=a.to.line}}function G(e,t,r,n,i){function o(n){var i=V(e,{line:r,ch:n},"line",t,u);return s=!0,l>i.bottom?Math.max(0,i.left-a):l<i.top?i.left+a:(s=!1,i.left)}var l=i-Vr(e,t),s=!1,a=e.display.wrapper.clientWidth,u=I(e,t),c=Kr(t),f=t.text.length,h=Sn(t),d=kn(t),p=E(e.display),v=o(d);if(n>v)return{line:r,ch:d,outside:s};for(;;){if(c?d==h||d==Nn(t,h,1):1>=d-h){for(var g=v-n>n-p,m=g?h:d;xi.test(t.text.charAt(m));)++m;return{line:r,ch:m,after:g,outside:s}}var w=Math.ceil(f/2),y=h+w;if(c){y=h;for(var b=0;w>b;++b)y=Nn(t,y,1)}var x=o(y);x>n?(d=y,v=x,s&&(v+=1e3),f-=w):(h=y,p=x,f=w)}}function X(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==jn){jn=vn("pre");for(var t=0;49>t;++t)jn.appendChild(document.createTextNode("x")),jn.appendChild(vn("br"));jn.appendChild(document.createTextNode("x"))}mn(e.measure,jn);var r=jn.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),gn(e.measure),r||1}function Y(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=vn("span","x"),r=vn("pre",[t]);mn(e.measure,r);var n=t.offsetWidth;return n>2&&(e.cachedCharWidth=n),n||10}function U(e){e.curOp?++e.curOp.depth:e.curOp={depth:1,changes:[],delayedCallbacks:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,updateMaxLine:!1,id:++e.nextOpId}}function _(e){var t=e.curOp;if(!--t.depth){e.curOp=null;var r=e.view,n=e.display;if(t.updateMaxLine&&c(r),r.maxLineChanged&&!e.options.lineWrapping){var i=z(e,r.maxLine,r.maxLine.text.length).right;n.sizer.style.minWidth=i+3+mi+"px",r.maxLineChanged=!1;var o=Math.max(0,n.sizer.offsetLeft+n.sizer.offsetWidth-n.scroller.clientWidth);o<r.scrollLeft&&ct(e,Math.min(n.scroller.scrollLeft,o),!0)}var l,s;if(t.selectionChanged){var a=V(e,r.sel.head);l=Bt(e,a.left,a.top,a.left,a.bottom)}(t.changes.length||l&&null!=l.scrollTop)&&(s=w(e,t.changes,l&&l.scrollTop)),!s&&t.selectionChanged&&k(e),l&&It(e),t.selectionChanged&&N(e),r.focused&&t.updateInput&&Q(e,t.userSelChange),t.textChanged&&tn(e,"change",e,t.textChanged),t.selectionChanged&&tn(e,"cursorActivity",e);for(var u=0;u<t.delayedCallbacks.length;++u)t.delayedCallbacks[u](e)}}function j(e,t){return function(){var r=e||this;U(r);try{var n=t.apply(r,arguments)}finally{_(r)}return n}}function Z(e,t,r,n){e.curOp.changes.push({from:t,to:r,diff:n})}function $(e){e.view.pollingFast||e.display.poll.set(e.options.pollInterval,function(){J(e),e.view.focused&&$(e)})}function q(e){function t(){var n=J(e);n||r?(e.display.pollingFast=!1,$(e)):(r=!0,e.display.poll.set(60,t))}var r=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function J(e){var t=e.display.input,r=e.display.prevInput,n=e.view,i=n.sel;if(!n.focused||Ti(t)||tt(e))return!1;var o=t.value;if(o==r&&Mt(i.from,i.to))return!1;U(e),n.sel.shift=!1;for(var l=0,s=Math.min(r.length,o.length);s>l&&r[l]==o[l];)++l;var a=i.from,u=i.to;l<r.length?a={line:a.line,ch:a.ch-(r.length-l)}:n.overwrite&&Mt(a,u)&&!e.display.pasteIncoming&&(u={line:u.line,ch:Math.min(Ir(e.view.doc,u.line).text.length,u.ch+(o.length-l))});var c=e.curOp.updateInput;return xt(e,a,u,Mi(o.slice(l)),"end",e.display.pasteIncoming?"paste":"input",{from:a,to:u}),e.curOp.updateInput=c,o.length>1e3?t.value=e.display.prevInput="":e.display.prevInput=o,_(e),e.display.pasteIncoming=!1,!0}function Q(e,t){var r,n,i=e.view;Mt(i.sel.from,i.sel.to)?t&&(e.display.prevInput=e.display.input.value=""):(e.display.prevInput="",r=Ni&&(i.sel.to.line-i.sel.from.line>100||(n=e.getSelection()).length>1e3),e.display.input.value=r?"-":n||e.getSelection(),i.focused&&un(e.display.input)),e.display.inaccurateSelection=r}function et(e){"nocursor"==e.options.readOnly||!Dn&&document.activeElement==e.display.input||e.display.input.focus()}function tt(e){return e.options.readOnly||e.view.cantEdit}function rt(e){function t(){e.view.focused&&setTimeout(hn(et,e),0)}function r(){o.cachedCharWidth=o.cachedTextHeight=null,R(e),w(e,!0)}function n(t){e.options.onDragEvent&&e.options.onDragEvent(e,Ur(t))||Zr(t)}function i(){o.inaccurateSelection&&(o.prevInput="",o.inaccurateSelection=!1,o.input.value=e.getSelection(),un(o.input))}var o=e.display;Qr(o.scroller,"mousedown",j(e,ot)),Qr(o.scroller,"dblclick",j(e,_r)),Qr(o.lineSpace,"selectstart",function(e){nt(o,e)||_r(e)}),Wn||Qr(o.scroller,"contextmenu",function(t){bt(e,t)}),Qr(o.scroller,"scroll",function(){ut(e,o.scroller.scrollTop),ct(e,o.scroller.scrollLeft,!0),tn(e,"scroll",e)}),Qr(o.scrollbarV,"scroll",function(){ut(e,o.scrollbarV.scrollTop)}),Qr(o.scrollbarH,"scroll",function(){ct(e,o.scrollbarH.scrollLeft)}),Qr(o.scroller,"mousewheel",function(t){ft(e,t)}),Qr(o.scroller,"DOMMouseScroll",function(t){ft(e,t)}),Qr(o.scrollbarH,"mousedown",t),Qr(o.scrollbarV,"mousedown",t),Qr(o.wrapper,"scroll",function(){o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),window.registered||(window.registered=0),++window.registered,Qr(window,"resize",r),setTimeout(function l(){for(var e=o.wrapper.parentNode;e&&e!=document.body;e=e.parentNode);e?setTimeout(l,5e3):(--window.registered,en(window,"resize",r))},5e3),Qr(o.input,"keyup",j(e,function(t){e.options.onKeyEvent&&e.options.onKeyEvent(e,Ur(t))||16==Jr(t,"keyCode")&&(e.view.sel.shift=!1)})),Qr(o.input,"input",hn(q,e)),Qr(o.input,"keydown",j(e,gt)),Qr(o.input,"keypress",j(e,mt)),Qr(o.input,"focus",hn(wt,e)),Qr(o.input,"blur",hn(yt,e)),e.options.dragDrop&&(Qr(o.scroller,"dragstart",function(t){at(e,t)}),Qr(o.scroller,"dragenter",n),Qr(o.scroller,"dragover",n),Qr(o.scroller,"drop",j(e,lt))),Qr(o.scroller,"paste",function(t){nt(o,t)||(et(e),q(e))}),Qr(o.input,"paste",function(){o.pasteIncoming=!0,q(e)}),Qr(o.input,"cut",i),Qr(o.input,"copy",i),Bn&&Qr(o.sizer,"mouseup",function(){document.activeElement==o.input&&o.input.blur(),et(e)})}function nt(e,t){for(var r=$r(t);r!=e.wrapper;r=r.parentNode){if(!r)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(r.className)||r.parentNode==e.sizer&&r!=e.mover)return!0}}function it(e,t,r){var n=e.display;if(!r){var i=$r(t);if(i==n.scrollbarH||i==n.scrollbarH.firstChild||i==n.scrollbarV||i==n.scrollbarV.firstChild||i==n.scrollbarFiller)return null}var o,l,s=n.lineSpace.getBoundingClientRect();try{o=t.clientX,l=t.clientY}catch(t){return null}return K(e,o-s.left,l-s.top)}function ot(e){function t(e){if("single"==f)return void Ot(i,Wt(a,u),e);if(g=Wt(a,g),m=Wt(a,m),"double"==f){var t=Gt(Ir(a,e.line).text,e);Tt(e,g)?Ot(i,t.from,m):Ot(i,g,t.to)}else"triple"==f&&(Tt(e,g)?Ot(i,m,Wt(a,{line:e.line,ch:0})):Ot(i,g,Wt(a,{line:e.line+1,ch:0})))}function r(e){var n=++y,s=it(i,e,!0);if(s)if(Mt(s,p)){var u=e.clientY<w.top?-20:e.clientY>w.bottom?20:0;u&&setTimeout(j(i,function(){y==n&&(o.scroller.scrollTop+=u,r(e))}),50)}else{l.focused||wt(i),p=s,t(s);var c=d(o,a);(s.line>=c.to||s.line<c.from)&&setTimeout(j(i,function(){y==n&&r(e)}),150)}}function n(e){y=1/0;var r=it(i,e);r&&t(r),_r(e),et(i),en(document,"mousemove",b),en(document,"mouseup",x)}var i=this,o=i.display,l=i.view,s=l.sel,a=l.doc;if(s.shift=Jr(e,"shiftKey"),nt(o,e))return void(En||(o.scroller.draggable=!1,setTimeout(function(){o.scroller.draggable=!0},100)));if(!st(i,e)){var u=it(i,e);switch(qr(e)){case 3:return void(Wn&&bt.call(i,i,e));case 2:return u&&Ot(i,u),setTimeout(hn(et,i),20),void _r(e)}if(!u)return void($r(e)==o.scroller&&_r(e));l.focused||wt(i);var c=+new Date,f="single";if($n&&$n.time>c-400&&Mt($n.pos,u))f="triple",_r(e),setTimeout(hn(et,i),20),Xt(i,u.line);else if(Zn&&Zn.time>c-400&&Mt(Zn.pos,u)){f="double",$n={time:c,pos:u},_r(e);var h=Gt(Ir(a,u.line).text,u);Ot(i,h.from,h.to)}else Zn={time:c,pos:u};var p=u;if(i.options.dragDrop&&Ci&&!tt(i)&&!Mt(s.from,s.to)&&!Tt(u,s.from)&&!Tt(s.to,u)&&"single"==f){var v=j(i,function(t){En&&(o.scroller.draggable=!1),l.draggingText=!1,en(document,"mouseup",v),en(o.scroller,"drop",v),Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10&&(_r(t),Ot(i,u),et(i))});return En&&(o.scroller.draggable=!0),l.draggingText=v,o.scroller.dragDrop&&o.scroller.dragDrop(),Qr(document,"mouseup",v),void Qr(o.scroller,"drop",v)}_r(e),"single"==f&&Ot(i,Wt(a,u));var g=s.from,m=s.to,w=o.wrapper.getBoundingClientRect(),y=0,b=j(i,function(e){Dn||qr(e)?r(e):n(e)}),x=j(i,n);Qr(document,"mousemove",b),Qr(document,"mouseup",x)}}function lt(e){var t=this;if(!(nt(t.display,e)||t.options.onDragEvent&&t.options.onDragEvent(t,Ur(e)))){_r(e);var r=it(t,e,!0),n=e.dataTransfer.files;if(r&&!tt(t))if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,o=Array(i),l=0,s=function(e,n){var s=new FileReader;s.onload=function(){o[n]=s.result,++l==i&&(r=Wt(t.view.doc,r),j(t,function(){var e=kt(t,o.join(""),r,r,"paste");Ht(t,r,e)})())},s.readAsText(e)},a=0;i>a;++a)s(n[a],a);else{if(t.view.draggingText&&!Tt(r,t.view.sel.from)&&!Tt(t.view.sel.to,r))return t.view.draggingText(e),void setTimeout(hn(et,t),20);try{var o=e.dataTransfer.getData("Text");if(o){var u=t.view.sel.from,c=t.view.sel.to;Ht(t,r,r),t.view.draggingText&&kt(t,"",u,c,"paste"),t.replaceSelection(o,null,"paste"),et(t),wt(t)}}catch(e){}}}}function st(e,t){var r=e.display;try{var n=t.clientX,i=t.clientY}catch(t){return!1}if(n>=Math.floor(r.gutters.getBoundingClientRect().right))return!1;if(_r(t),!nn(e,"gutterClick"))return!0;var o=r.lineDiv.getBoundingClientRect();if(i>o.bottom)return!0;i-=o.top-r.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var s=r.gutters.childNodes[l];if(s&&s.getBoundingClientRect().right>=n){var a=Pr(e.view.doc,i),u=e.options.gutters[l];rn(e,e,"gutterClick",e,a,u,t);break}}return!0}function at(e,t){if(!nt(e.display,t)){var r=e.getSelection();if(t.dataTransfer.setData("Text",r),t.dataTransfer.setDragImage&&!Rn){var n=vn("img",null,null,"position: fixed; left: 0; top: 0;");Fn&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),Fn&&n.parentNode.removeChild(n)}}}function ut(e,t){Math.abs(e.view.scrollTop-t)<2||(e.view.scrollTop=t,Wn||w(e,[],t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),Wn&&w(e,[]))}function ct(e,t,r){(r?t==e.view.scrollLeft:Math.abs(e.view.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.view.scrollLeft=t,p(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function ft(e,t){var r=t.wheelDeltaX,n=t.wheelDeltaY;if(null==r&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(r=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),n&&Yn&&En)for(var i=t.target;i!=l;i=i.parentNode)if(i.lineObj){e.display.currentWheelTarget=i;break}var o=e.display,l=o.scroller;if(r&&!Wn&&!Fn&&null!=ti)return n&&ut(e,Math.max(0,Math.min(l.scrollTop+n*ti,l.scrollHeight-l.clientHeight))),ct(e,Math.max(0,Math.min(l.scrollLeft+r*ti,l.scrollWidth-l.clientWidth))),_r(t),void(o.wheelStartX=null);if(n&&null!=ti){var s=n*ti,a=e.view.scrollTop,u=a+o.wrapper.clientHeight;0>s?a=Math.max(0,a+s-50):u=Math.min(e.view.doc.height,u+s+50),w(e,[],{top:a,bottom:u})}20>ei&&(null==o.wheelStartX?(o.wheelStartX=l.scrollLeft,o.wheelStartY=l.scrollTop,o.wheelDX=r,o.wheelDY=n,setTimeout(function(){if(null!=o.wheelStartX){var e=l.scrollLeft-o.wheelStartX,t=l.scrollTop-o.wheelStartY,r=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,r&&(ti=(ti*ei+r)/(ei+1),++ei)}},200)):(o.wheelDX+=r,o.wheelDY+=n))}function ht(e,t,r){if("string"==typeof t&&(t=hi[t],!t))return!1;e.display.pollingFast&&J(e)&&(e.display.pollingFast=!1);var n=e.view,i=n.sel.shift;try{tt(e)&&(n.suppressEdits=!0),r&&(n.sel.shift=!1),t(e)}catch(o){if(o!=wi)throw o;return!1}finally{n.sel.shift=i,n.suppressEdits=!1}return!0}function dt(e){var t=e.view.keyMaps.slice(0);return t.push(e.options.keyMap),e.options.extraKeys&&t.unshift(e.options.extraKeys),t}function pt(e,t){function r(){s=!0}var n=jt(e.options.keyMap),i=n.auto;clearTimeout(ri),i&&!$t(t)&&(ri=setTimeout(function(){jt(e.options.keyMap)==n&&(e.options.keyMap=i.call?i.call(null,e):i)},50));var o=Ai[Jr(t,"keyCode")],l=!1;if(null==o||t.altGraphKey)return!1;Jr(t,"altKey")&&(o="Alt-"+o),Jr(t,qn?"metaKey":"ctrlKey")&&(o="Ctrl-"+o),Jr(t,qn?"ctrlKey":"metaKey")&&(o="Cmd-"+o);var s=!1,a=dt(e);return l=Jr(t,"shiftKey")?Zt("Shift-"+o,a,function(t){return ht(e,t,!0)
},r)||Zt(o,a,function(t){return"string"==typeof t&&/^go[A-Z]/.test(t)?ht(e,t):void 0},r):Zt(o,a,function(t){return ht(e,t)},r),s&&(l=!1),l&&(_r(t),N(e),Hn&&(t.oldKeyCode=t.keyCode,t.keyCode=0)),l}function vt(e,t,r){var n=Zt("'"+r+"'",dt(e),function(t){return ht(e,t,!0)});return n&&(_r(t),N(e)),n}function gt(e){var t=this;if(t.view.focused||wt(t),Dn&&27==e.keyCode&&(e.returnValue=!1),!t.options.onKeyEvent||!t.options.onKeyEvent(t,Ur(e))){var r=Jr(e,"keyCode");t.view.sel.shift=16==r||Jr(e,"shiftKey");var n=pt(t,e);Fn&&(ii=n?r:null,n||88!=r||Ni||!Jr(e,Yn?"metaKey":"ctrlKey")||t.replaceSelection(""))}}function mt(e){var t=this;if(!t.options.onKeyEvent||!t.options.onKeyEvent(t,Ur(e))){var r=Jr(e,"keyCode"),n=Jr(e,"charCode");if(Fn&&r==ii)return ii=null,void _r(e);if(!(Fn&&(!e.which||e.which<10)||Bn)||!pt(t,e)){var i=String.fromCharCode(null==n?r:n);this.options.electricChars&&this.view.mode.electricChars&&this.options.smartIndent&&!tt(this)&&this.view.mode.electricChars.indexOf(i)>-1&&setTimeout(j(t,function(){Pt(t,t.view.sel.to.line,"smart")}),75),vt(t,e,i)||q(t)}}}function wt(e){"nocursor"!=e.options.readOnly&&(e.view.focused||(tn(e,"focus",e),e.view.focused=!0,-1==e.display.scroller.className.search(/\bCodeMirror-focused\b/)&&(e.display.scroller.className+=" CodeMirror-focused"),Q(e,!0)),$(e),N(e))}function yt(e){e.view.focused&&(tn(e,"blur",e),e.view.focused=!1,e.display.scroller.className=e.display.scroller.className.replace(" CodeMirror-focused","")),clearInterval(e.display.blinker),setTimeout(function(){e.view.focused||(e.view.sel.shift=!1)},150)}function bt(e,t){function r(){if(n.inputDiv.style.position="relative",n.input.style.cssText=s,Hn&&(n.scrollbarV.scrollTop=n.scroller.scrollTop=l),$(e),null!=n.input.selectionStart){clearTimeout(ni);var t=n.input.value=" "+(Mt(i.from,i.to)?"":n.input.value),r=0;n.prevInput=" ",n.input.selectionStart=1,n.input.selectionEnd=t.length,ni=setTimeout(function o(){" "==n.prevInput&&0==n.input.selectionStart?j(e,hi.selectAll)(e):r++<10?ni=setTimeout(o,500):Q(e)},200)}}var n=e.display;if(!nt(n,t)){var i=e.view.sel,o=it(e,t),l=n.scroller.scrollTop;if(o&&!Fn){(Mt(i.from,i.to)||Tt(o,i.from)||!Tt(o,i.to))&&j(e,Ht)(e,o,o);var s=n.input.style.cssText;n.inputDiv.style.position="absolute",n.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",et(e),Q(e,!0),Mt(i.from,i.to)&&(n.input.value=n.prevInput=" "),Wn?(Zr(t),Qr(window,"mouseup",function a(){en(window,"mouseup",a),setTimeout(r,20)})):setTimeout(r,50)}}}function xt(e,t,r,n,i,o){var l=Jn&&lr(e.view.doc,t,r);if(!l)return Ct(e,t,r,n,i,o);for(var s=l.length-1;s>=1;--s)Ct(e,l[s].from,l[s].to,[""],o);return l.length?Ct(e,l[0].from,l[0].to,n,i,o):void 0}function Ct(e,t,r,n,i,o){if(!e.view.suppressEdits){var l=e.view,s=l.doc,a=[];s.iter(t.line,r.line+1,function(e){a.push(vr(e.text,e.markedSpans))});var u=l.sel.from,c=l.sel.to,f=or(pr(a[0]),pr(an(a)),t.ch,r.ch,n),h=St(e,t,r,f,i,o);return l.history&&Xr(e,t.line,n.length,a,o,u,c,l.sel.from,l.sel.to),h}}function Lt(e,t){var r=e.view.doc,n=e.view.history,i=("undo"==t?n.done:n.undone).pop();if(i){for(var o={events:[],fromBefore:i.fromAfter,toBefore:i.toAfter,fromAfter:i.fromBefore,toAfter:i.toBefore},l=i.events.length-1;l>=0;l-=1){n.dirtyCounter+="undo"==t?-1:1;var s=i.events[l],a=[],u=s.start+s.added;r.iter(s.start,u,function(e){a.push(vr(e.text,e.markedSpans))}),o.events.push({start:s.start,added:s.old.length,old:a});var c=l?null:{from:i.fromBefore,to:i.toBefore};St(e,{line:s.start,ch:0},{line:u-1,ch:Ir(r,u-1).text.length},s.old,c,t)}("undo"==t?n.undone:n.done).push(o)}}function St(e,t,r,n,i,o){var l=e.view,s=l.doc,a=e.display;if(!l.suppressEdits){var c=r.line-t.line,f=Ir(s,t.line),h=Ir(s,r.line),d=!1,p=t.line;e.options.lineWrapping||(p=Rr(cr(s,f)),s.iter(p,r.line+1,function(e){return e==l.maxLine?(d=!0,!0):void 0}));var v=an(n),g=X(a);if(0==t.ch&&0==r.ch&&""==dr(v)){for(var m=[],w=0,y=n.length-1;y>w;++w)m.push(xr(dr(n[w]),pr(n[w]),g));Cr(e,h,h.text,pr(v)),c&&s.remove(t.line,c,e),m.length&&s.insert(t.line,m)}else if(f==h)if(1==n.length)Cr(e,f,f.text.slice(0,t.ch)+dr(n[0])+f.text.slice(r.ch),pr(n[0]));else{for(var m=[],w=1,y=n.length-1;y>w;++w)m.push(xr(dr(n[w]),pr(n[w]),g));m.push(xr(dr(v)+f.text.slice(r.ch),pr(v),g)),Cr(e,f,f.text.slice(0,t.ch)+dr(n[0]),pr(n[0])),s.insert(t.line+1,m)}else if(1==n.length)Cr(e,f,f.text.slice(0,t.ch)+dr(n[0])+h.text.slice(r.ch),pr(n[0])),s.remove(t.line+1,c,e);else{var m=[];Cr(e,f,f.text.slice(0,t.ch)+dr(n[0]),pr(n[0])),Cr(e,h,dr(v)+h.text.slice(r.ch),pr(v));for(var w=1,y=n.length-1;y>w;++w)m.push(xr(dr(n[w]),pr(n[w]),g));c>1&&s.remove(t.line+1,c-1,e),s.insert(t.line+1,m)}if(e.options.lineWrapping){var b=Math.max(5,a.scroller.clientWidth/Y(a)-3);s.iter(t.line,t.line+n.length,function(e){if(0!=e.height){var t=(Math.ceil(e.text.length/b)||1)*g;t!=e.height&&Fr(e,t)}})}else s.iter(p,t.line+n.length,function(e){var t=u(s,e);t>l.maxLineLength&&(l.maxLine=e,l.maxLineLength=t,l.maxLineChanged=!0,d=!1)}),d&&(e.curOp.updateMaxLine=!0);l.frontier=Math.min(l.frontier,t.line),A(e,400);var x=n.length-c-1;if(Z(e,t.line,r.line+1,x),nn(e,"change")){for(var w=0;w<n.length;++w)"string"!=typeof n[w]&&(n[w]=n[w].text);var C={from:t,to:r,text:n,origin:o};if(e.curOp.textChanged){for(var L=e.curOp.textChanged;L.next;L=L.next);L.next=C}else e.curOp.textChanged=C}var S,k,M={line:t.line+n.length-1,ch:dr(v).length+(1==n.length?t.ch:0)};if(i&&"string"!=typeof i)i.from?(S=i.from,k=i.to):S=k=i;else if("end"==i)S=k=M;else if("start"==i)S=k=t;else if("around"==i)S=t,k=M;else{var T=function(e){if(Tt(e,t))return e;if(!Tt(r,e))return M;var n=e.line+x,i=e.ch;return e.line==r.line&&(i+=dr(v).length-(r.ch-(r.line==t.line?t.ch:0))),{line:n,ch:i}};S=T(l.sel.from),k=T(l.sel.to)}return Ht(e,S,k,null,!0),M}}function kt(e,t,r,n,i){if(n||(n=r),Tt(n,r)){var o=n;n=r,r=o}return xt(e,r,n,Mi(t),null,i)}function Mt(e,t){return e.line==t.line&&e.ch==t.ch}function Tt(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function Nt(e){return{line:e.line,ch:e.ch}}function At(e,t){return Math.max(0,Math.min(t,e.size-1))}function Wt(e,t){if(t.line<0)return{line:0,ch:0};if(t.line>=e.size)return{line:e.size-1,ch:Ir(e,e.size-1).text.length};var r=t.ch,n=Ir(e,t.line).text.length;return null==r||r>n?{line:t.line,ch:n}:0>r?{line:t.line,ch:0}:t}function Dt(e,t){return t>=0&&t<e.size}function Ot(e,t,r,n){var i=e.view.sel;if(i.shift||i.extend){var o=i.anchor;if(r){var l=Tt(t,o);l!=Tt(r,o)?(o=t,t=r):l!=Tt(t,r)&&(t=r)}Ht(e,o,t,n)}else Ht(e,t,r||t,n);e.curOp.userSelChange=!0}function Ht(e,t,r,n,i){e.view.goalColumn=null;var o=e.view.sel;if((i||!Mt(t,o.anchor))&&(t=zt(e,t,n,"push"!=i)),(i||!Mt(r,o.head))&&(r=zt(e,r,n,"push"!=i)),!Mt(o.anchor,t)||!Mt(o.head,r)){o.anchor=t,o.head=r;var l=Tt(r,t);o.from=l?r:t,o.to=l?t:r,e.curOp.updateInput=!0,e.curOp.selectionChanged=!0}}function Et(e){Ht(e,e.view.sel.from,e.view.sel.to,null,"push")}function zt(e,t,r,n){var i=e.view.doc,o=!1,l=t,s=r||1;e.view.cantEdit=!1;e:for(;;){var a,u=Ir(i,l.line);if(u.markedSpans){for(var c=0;c<u.markedSpans.length;++c){var f=u.markedSpans[c],h=f.marker;if((null==f.from||(h.inclusiveLeft?f.from<=l.ch:f.from<l.ch))&&(null==f.to||(h.inclusiveRight?f.to>=l.ch:f.to>l.ch))){if(n&&h.clearOnEnter){(a||(a=[])).push(h);continue}if(!h.atomic)continue;var d=h.find()[0>s?"from":"to"];if(Mt(d,l)&&(d.ch+=s,d.ch<0?d=d.line?Wt(i,{line:d.line-1}):null:d.ch>u.text.length&&(d=d.line<i.size-1?{line:d.line+1,ch:0}:null),!d)){if(o)return n?(e.view.cantEdit=!0,{line:0,ch:0}):zt(e,t,r,!0);o=!0,d=t,s=-s}l=d;continue e}}if(a)for(var c=0;c<a.length;++c)a[c].clear()}return l}}function It(e){var t=e.view,r=Ft(e,t.sel.head);if(t.focused){var n=e.display,i=n.sizer.getBoundingClientRect(),o=null;if(r.top+i.top<0?o=!0:r.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),null!=o&&!Kn){var l="none"==n.cursor.style.display;l&&(n.cursor.style.display="",n.cursor.style.left=r.left+"px",n.cursor.style.top=r.top-n.viewOffset+"px"),n.cursor.scrollIntoView(o),l&&(n.cursor.style.display="none")}}}function Ft(e,t){for(;;){var r=!1,n=V(e,t),i=Bt(e,n.left,n.top,n.left,n.bottom),o=e.view.scrollTop,l=e.view.scrollLeft;if(null!=i.scrollTop&&(ut(e,i.scrollTop),Math.abs(e.view.scrollTop-o)>1&&(r=!0)),null!=i.scrollLeft&&(ct(e,i.scrollLeft),Math.abs(e.view.scrollLeft-l)>1&&(r=!0)),!r)return n}}function Rt(e,t,r,n,i){var o=Bt(e,t,r,n,i);null!=o.scrollTop&&ut(e,o.scrollTop),null!=o.scrollLeft&&ct(e,o.scrollLeft)}function Bt(e,t,r,n,i){var o=e.display,l=H(o);r+=l,i+=l;var s=o.scroller.clientHeight-mi,a=o.scroller.scrollTop,u={},c=e.view.doc.height+2*l,f=l+10>r,h=i+l>c-10;a>r?u.scrollTop=f?0:Math.max(0,r):i>a+s&&(u.scrollTop=(h?c:i)-s);var d=o.scroller.clientWidth-mi,p=o.scroller.scrollLeft;t+=o.gutters.offsetWidth,n+=o.gutters.offsetWidth;var v=o.gutters.offsetWidth,g=v+10>t;return p+v>t||g?(g&&(t=0),u.scrollLeft=Math.max(0,t-10-v)):n>d+p-3&&(u.scrollLeft=n+10-d),u}function Pt(e,t,r,n){var i=e.view.doc;if(r||(r="add"),"smart"==r)if(e.view.mode.indent)var o=O(e,t);else r="prev";var l,s=e.options.tabSize,a=Ir(i,t),u=ln(a.text,null,s),c=a.text.match(/^\s*/)[0];if("smart"==r&&(l=e.view.mode.indent(o,a.text.slice(c.length),a.text),l==wi)){if(!n)return;r="prev"}"prev"==r?l=t?ln(Ir(i,t-1).text,null,s):0:"add"==r?l=u+e.options.indentUnit:"subtract"==r&&(l=u-e.options.indentUnit),l=Math.max(0,l);var f="",h=0;if(e.options.indentWithTabs)for(var d=Math.floor(l/s);d;--d)h+=s,f+="	";l>h&&(f+=sn(l-h)),f!=c&&kt(e,f,{line:t,ch:0},{line:t,ch:c.length},"input"),a.stateAfter=null}function Vt(e,t,r){var n=t,i=t,o=e.view.doc;return"number"==typeof t?i=Ir(o,At(o,t)):n=Rr(t),null==n?null:r(i,n)?(Z(e,n,n+1),i):null}function Kt(e,t,r,n){function i(){var e=a+t;return 0>e||e==l.size?!1:(a=e,c=Ir(l,e))}function o(e){var r=(n?Nn:An)(c,u,t,!0);if(null==r){if(e||!i())return!1;u=n?(0>t?kn:Sn)(c):0>t?c.text.length:0}else u=r;return!0}var l=e.view.doc,s=e.view.sel.head,a=s.line,u=s.ch,c=Ir(l,a);if("char"==r)o();else if("column"==r)o(!0);else if("word"==r)for(var f=!1;!(0>t)||o();){if(dn(c.text.charAt(u)))f=!0;else if(f){0>t&&(t=1,o());break}if(t>0&&!o())break}return zt(e,{line:a,ch:u},t,!0)}function Gt(e,t){var r=t.ch,n=t.ch;if(e){t.after===!1||n==e.length?--r:++n;for(var i=e.charAt(r),o=dn(i)?dn:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!dn(e)};r>0&&o(e.charAt(r-1));)--r;for(;n<e.length&&o(e.charAt(n));)++n}return{from:{line:t.line,ch:r},to:{line:t.line,ch:n}}}function Xt(e,t){Ot(e,{line:t,ch:0},Wt(e.view.doc,{line:t+1,ch:0}))}function Yt(t,r,n,i){e.defaults[t]=r,n&&(oi[t]=i?function(e,t,r){r!=si&&n(e,t,r)}:n)}function Ut(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r}function _t(e,t,r){return e.startState?e.startState(t,r):!0}function jt(e){return"string"==typeof e?di[e]:e}function Zt(e,t,r,n){function i(t){t=jt(t);var o=t[e];if(o===!1)return n&&n(),!0;if(null!=o&&r(o))return!0;if(t.nofallthrough)return n&&n(),!0;var l=t.fallthrough;if(null==l)return!1;if("[object Array]"!=Object.prototype.toString.call(l))return i(l);for(var s=0,a=l.length;a>s;++s)if(i(l[s]))return!0;return!1}for(var o=0;o<t.length;++o)if(i(t[o]))return!0}function $t(e){var t=Ai[Jr(e,"keyCode")];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function qt(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function Jt(e,t){this.lines=[],this.type=t,this.cm=e}function Qt(e,t,r,n,i){var o=e.view.doc,l=new Jt(e,i);if("range"==i&&!Tt(t,r))return l;if(n)for(var s in n)n.hasOwnProperty(s)&&(l[s]=n[s]);l.replacedWith&&(l.collapsed=!0,l.replacedWith=vn("span",[l.replacedWith],"CodeMirror-widget")),l.collapsed&&(Qn=!0);var a,u,c=t.line,f=0;if(o.iter(c,r.line+1,function(n){l.collapsed&&!e.options.lineWrapping&&cr(o,n)==e.view.maxLine&&(e.curOp.updateMaxLine=!0);var i={from:null,to:null,marker:l};f+=n.text.length,c==t.line&&(i.from=t.ch,f-=t.ch),c==r.line&&(i.to=r.ch,f-=n.text.length-r.ch),l.collapsed&&(c==r.line&&(u=sr(n,r.ch)),c==t.line?a=sr(n,t.ch):Fr(n,0)),rr(n,i),++c}),l.collapsed&&o.iter(t.line,r.line+1,function(e){fr(e)&&Fr(e,0)}),l.readOnly&&(Jn=!0,(e.view.history.done.length||e.view.history.undone.length)&&e.clearHistory()),l.collapsed){if(a!=u)throw new Error("Inserting collapsed marker overlapping an existing one");l.size=f,l.atomic=!0}return(l.className||l.startStyle||l.endStyle||l.collapsed)&&Z(e,t.line,r.line+1),l.atomic&&Et(e),l}function er(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function tr(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function rr(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.lines.push(e)}function nr(e,t){if(e)for(var r,n=0;n<e.length;++n){var i=e[n],o=i.marker,l=null==i.from||(o.inclusiveLeft?i.from<=t:i.from<t);if(l||"bookmark"==o.type&&i.from==t){var s=null==i.to||(o.inclusiveRight?i.to>=t:i.to>t);(r||(r=[])).push({from:i.from,to:s?null:i.to,marker:o})}}return r}function ir(e,t,r){if(e)for(var n,i=0;i<e.length;++i){var o=e[i],l=o.marker,s=null==o.to||(l.inclusiveRight?o.to>=r:o.to>r);if(s||"bookmark"==l.type&&o.from==r&&o.from!=t){var a=null==o.from||(l.inclusiveLeft?o.from<=r:o.from<r);(n||(n=[])).push({from:a?null:o.from-r,to:null==o.to?null:o.to-r,marker:l})}}return n}function or(e,t,r,n,i){if(!e&&!t)return i;var o=nr(e,r),l=ir(t,r,n),s=1==i.length,a=an(i).length+(s?r:0);if(o)for(var u=0;u<o.length;++u){var c=o[u];if(null==c.to){var f=er(l,c.marker);f?s&&(c.to=null==f.to?null:f.to+a):c.to=r}}if(l)for(var u=0;u<l.length;++u){var c=l[u];if(null!=c.to&&(c.to+=a),null==c.from){var f=er(o,c.marker);f||(c.from=a,s&&(o||(o=[])).push(c))}else c.from+=a,s&&(o||(o=[])).push(c)}var h=[vr(i[0],o)];if(!s){var d,p=i.length-2;if(p>0&&o)for(var u=0;u<o.length;++u)null==o[u].to&&(d||(d=[])).push({from:null,to:null,marker:o[u].marker});for(var u=0;p>u;++u)h.push(vr(i[u+1],d));h.push(vr(an(i),l))}return h}function lr(e,t,r){var n=null;if(e.iter(t.line,r.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&-1!=cn(n,r)||(n||(n=[])).push(r)}}),!n)return null;for(var i=[{from:t,to:r}],o=0;o<n.length;++o)for(var l=n[o].find(),s=0;s<i.length;++s){var a=i[s];if(Tt(l.from,a.to)&&!Tt(l.to,a.from)){var u=[s,1];Tt(a.from,l.from)&&u.push({from:a.from,to:l.from}),Tt(l.to,a.to)&&u.push({from:l.to,to:a.to}),i.splice.apply(i,u),s+=u.length-1}}return i}function sr(e,t){var r,n=Qn&&e.markedSpans;if(n)for(var i,o=0;o<n.length;++o)i=n[o],i.marker.collapsed&&(null==i.from||i.from<t)&&(null==i.to||i.to>t)&&(!r||r.width<i.marker.width)&&(r=i.marker);return r}function ar(e){return sr(e,-1)}function ur(e){return sr(e,e.text.length+1)}function cr(e,t){for(var r;r=ar(t);)t=Ir(e,r.find().from.line);return t}function fr(e){var t=Qn&&e.markedSpans;if(t)for(var r,n=0;n<t.length;++n)if(r=t[n],r.marker.collapsed){if(null==r.from)return!0;if(0==r.from&&r.marker.inclusiveLeft&&hr(e,r))return!0}}function hr(e,t){if(null==t.to){var r=t.marker.find().to,n=Ir(Br(e),r.line);return hr(n,er(n.markedSpans,t.marker))}if(t.marker.inclusiveRight&&t.to==e.text.length)return!0;for(var i,o=0;o<e.markedSpans.length;++o)if(i=e.markedSpans[o],i.marker.collapsed&&i.from==t.to&&(i.marker.inclusiveLeft||t.marker.inclusiveRight)&&hr(e,i))return!0}function dr(e){return"string"==typeof e?e:e.text}function pr(e){if("string"==typeof e)return null;for(var t=e.markedSpans,r=null,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?r||(r=t.slice(0,n)):r&&r.push(t[n]);return r?r.length?r:null:t}function vr(e,t){return t?{text:e,markedSpans:t}:e}function gr(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r){var n=t[r].marker.lines,i=cn(n,e);n.splice(i,1)}e.markedSpans=null}}function mr(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.lines.push(e);e.markedSpans=t}}function wr(e){return function(){U(this.cm);try{var t=e.apply(this,arguments)}finally{_(this.cm)}return t}}function yr(e){return null!=e.height?e.height:(e.node.parentNode&&1==e.node.parentNode.nodeType||mn(e.cm.display.measure,vn("div",[e.node],null,"position: relative")),e.height=e.node.offsetHeight)}function br(e,t,r,n){var i=new pi(e,r,n);return i.noHScroll&&(e.display.alignWidgets=!0),Vt(e,t,function(t){if((t.widgets||(t.widgets=[])).push(i),i.line=t,!fr(t)||i.showIfHidden){var r=Vr(e,t)<e.display.scroller.scrollTop;Fr(t,t.height+yr(i)),r&&setTimeout(function(){e.display.scroller.scrollTop+=i.height})}return!0}),i}function xr(e,t,r){var n={text:e,height:r};return mr(n,t),fr(n)&&(n.height=0),n}function Cr(e,t,r,n){t.text=r,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),gr(t),mr(t,n),fr(t)?t.height=0:t.height||(t.height=X(e.display)),rn(e,t,"change")}function Lr(e){e.parent=null,gr(e)}function Sr(e,t,r,n,i){var o=e.options.flattenSpans,l="",s=null,a=new qt(t,e.options.tabSize);for(""==t&&r.blankLine&&r.blankLine(n);!a.eol();){var u=r.token(a,n);a.pos>5e3&&(o=!1,a.pos=Math.min(t.length,a.start+5e4),u=null);var c=a.current();a.start=a.pos,o&&s==u?l+=c:(l&&i(l,s),l=c,s=u)}l&&i(l,s)}function kr(e,t,r){var n=[e.view.modeGen];Sr(e,t.text,e.view.mode,r,function(e,t){n.push(e,t)});for(var i=0;i<e.view.overlays.length;++i){var o=e.view.overlays[i],l=1;Sr(e,t.text,o.mode,!0,function(e,t){for(var r=l,i=e.length;i;){var s=n[l],a=s.length;i>=a?i-=a:(n.splice(l,1,s.slice(0,i),n[l+1],s.slice(i)),i=0),l+=2}if(t)if(o.opaque)n.splice(r,l-r,e,t),l=r+2;else for(;l>r;r+=2){var s=n[r+1];n[r+1]=s?s+" "+t:t}})}return n}function Mr(e,t){return t.styles&&t.styles[0]==e.view.modeGen||(t.styles=kr(e,t,t.stateAfter=O(e,Rr(t)))),t.styles}function Tr(e,t,r){var n=e.view.mode,i=new qt(t.text,e.options.tabSize);for(""==t.text&&n.blankLine&&n.blankLine(r);!i.eol()&&i.pos<=5e3;)n.token(i,r),i.start=i.pos}function Nr(e){return e?vi[e]||(vi[e]="cm-"+e.replace(/ +/g," cm-")):null}function Ar(e,t,r){for(var n,i,o,l=t,s=!0;n=ar(l);)s=!1,l=Ir(e.view.doc,n.find().from.line),i||(i=l);var a={pre:vn("pre"),col:0,pos:0,display:!r,measure:null,addedOne:!1,cm:e};l.textClass&&(a.pre.className=l.textClass);do{a.measure=l==t&&r,a.pos=0,a.addToken=a.measure?Dr:Wr,r&&o&&l!=t&&!a.addedOne&&(r[0]=a.pre.appendChild(bn(e.display.measure)),a.addedOne=!0);var u=Hr(l,a,Mr(e,l));o=l==i,u&&(l=Ir(e.view.doc,u.to.line),s=!1)}while(u);return r&&!a.addedOne&&(r[0]=a.pre.appendChild(s?vn("span"," "):bn(e.display.measure))),a.pre.firstChild||fr(t)||a.pre.appendChild(document.createTextNode(" ")),a.pre}function Wr(e,t,r,n,i){if(t){if(gi.test(t))for(var o=document.createDocumentFragment(),l=0;;){gi.lastIndex=l;var s=gi.exec(t),a=s?s.index-l:t.length-l;if(a&&(o.appendChild(document.createTextNode(t.slice(l,l+a))),e.col+=a),!s)break;if(l+=a+1,"	"==s[0]){var u=e.cm.options.tabSize,c=u-e.col%u;o.appendChild(vn("span",sn(c),"cm-tab")),e.col+=c}else{var f=vn("span","•","cm-invalidchar");f.title="\\u"+s[0].charCodeAt(0).toString(16),o.appendChild(f),e.col+=1}}else{e.col+=t.length;var o=document.createTextNode(t)}if(r||n||i||e.measure){var h=r||"";return n&&(h+=n),i&&(h+=i),e.pre.appendChild(vn("span",[o],h))}e.pre.appendChild(o)}}function Dr(e,t,r,n,i){for(var o=0;o<t.length;++o)o&&o<t.length&&e.cm.options.lineWrapping&&Li.test(t.slice(o-1,o+1))&&e.pre.appendChild(vn("wbr")),e.measure[e.pos++]=Wr(e,t.charAt(o),r,0==o&&n,o==t.length-1&&i);t.length&&(e.addedOne=!0)}function Or(e,t,r){r&&(e.display||(r=r.cloneNode(!0)),e.pre.appendChild(r),e.measure&&t&&(e.measure[e.pos]=r,e.addedOne=!0)),e.pos+=t}function Hr(e,t,r){var n=e.markedSpans;if(n)for(var i,o,l,s,a,u=e.text,c=u.length,f=0,h=1,d="",p=0;;){if(p==f){o=l=s="",a=null,p=1/0;for(var v=null,g=0;g<n.length;++g){var m=n[g],w=m.marker;m.from<=f&&(null==m.to||m.to>f)?(null!=m.to&&p>m.to&&(p=m.to,l=""),w.className&&(o+=" "+w.className),w.startStyle&&m.from==f&&(s+=" "+w.startStyle),w.endStyle&&m.to==p&&(l+=" "+w.endStyle),w.collapsed&&(!a||a.marker.width<w.width)&&(a=m)):m.from>f&&p>m.from&&(p=m.from),"bookmark"==w.type&&m.from==f&&w.replacedWith&&(v=w.replacedWith)}if(a&&(a.from||0)==f&&(Or(t,(null==a.to?c:a.to)-f,null!=a.from&&a.marker.replacedWith),null==a.to))return a.marker.find();v&&!a&&Or(t,0,v)}if(f>=c)break;for(var y=Math.min(c,p);;){if(d){var b=f+d.length;if(!a){var x=b>y?d.slice(0,y-f):d;t.addToken(t,x,i+o,s,f+x.length==p?l:"")}if(b>=y){d=d.slice(y-f),f=y;break}f=b,s=""}d=r[h++],i=Nr(r[h++])}}else for(var h=1;h<r.length;h+=2)t.addToken(t,r[h],Nr(r[h+1]))}function Er(e){this.lines=e,this.parent=null;for(var t=0,r=e.length,n=0;r>t;++t)e[t].parent=this,n+=e[t].height;this.height=n}function zr(e){this.children=e;for(var t=0,r=0,n=0,i=e.length;i>n;++n){var o=e[n];t+=o.chunkSize(),r+=o.height,o.parent=this}this.size=t,this.height=r,this.parent=null}function Ir(e,t){for(;!e.lines;)for(var r=0;;++r){var n=e.children[r],i=n.chunkSize();if(i>t){e=n;break}t-=i}return e.lines[t]}function Fr(e,t){for(var r=t-e.height,n=e;n;n=n.parent)n.height+=r}function Rr(e){if(null==e.parent)return null;for(var t=e.parent,r=cn(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var i=0;n.children[i]!=t;++i)r+=n.children[i].chunkSize();return r}function Br(e){for(var t=e.parent;t.parent;t=t.parent);return t}function Pr(e,t){var r=0;e:do{for(var n=0,i=e.children.length;i>n;++n){var o=e.children[n],l=o.height;if(l>t){e=o;continue e}t-=l,r+=o.chunkSize()}return r}while(!e.lines);for(var n=0,i=e.lines.length;i>n;++n){var s=e.lines[n],a=s.height;if(a>t)break;t-=a}return r+n}function Vr(e,t){t=cr(e.view.doc,t);for(var r=0,n=t.parent,i=0;i<n.lines.length;++i){var o=n.lines[i];if(o==t)break;r+=o.height}for(var l=n.parent;l;n=l,l=n.parent)for(var i=0;i<l.children.length;++i){var s=l.children[i];if(s==n)break;r+=s.height}return r}function Kr(e){var t=e.order;return null==t&&(t=e.order=Wi(e.text)),t}function Gr(){return{done:[],undone:[],lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function Xr(e,t,r,n,i,o,l,s,a){var u=e.view.history;u.undone.length=0;var c=+new Date,f=an(u.done);if(f&&(u.lastOp==e.curOp.id||u.lastOrigin==i&&("input"==i||"delete"==i)&&u.lastTime>c-600)){var h=an(f.events);if(h.start>t+n.length||h.start+h.added<t)f.events.push({start:t,added:r,old:n});else{for(var d=Math.max(0,h.start-t),p=Math.max(0,t+n.length-(h.start+h.added)),v=d;v>0;--v)h.old.unshift(n[v-1]);for(var v=p;v>0;--v)h.old.push(n[n.length-v]);d&&(h.start=t),h.added+=r-(n.length-d-p)}f.fromAfter=s,f.toAfter=a}else{for(f={events:[{start:t,added:r,old:n}],fromBefore:o,toBefore:l,fromAfter:s,toAfter:a},u.done.push(f);u.done.length>e.options.undoDepth;)u.done.shift();u.dirtyCounter<0?u.dirtyCounter=0/0:u.dirtyCounter++}u.lastTime=c,u.lastOp=e.curOp.id,u.lastOrigin=i}function Yr(){Zr(this)}function Ur(e){return e.stop||(e.stop=Yr),e}function _r(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function jr(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Zr(e){_r(e),jr(e)}function $r(e){return e.target||e.srcElement}function qr(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Yn&&e.ctrlKey&&1==t&&(t=3),t}function Jr(e,t){var r=e.override&&e.override.hasOwnProperty(t);return r?e.override[t]:e[t]}function Qr(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={}),i=n[t]||(n[t]=[]);i.push(r)}}function en(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else{var n=e._handlers&&e._handlers[t];if(!n)return;for(var i=0;i<n.length;++i)if(n[i]==r){n.splice(i,1);break}}}function tn(e,t){var r=e._handlers&&e._handlers[t];if(r)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)}function rn(e,t,r){function n(e){return function(){e.apply(null,o)}}var i=t._handlers&&t._handlers[r];if(i)for(var o=Array.prototype.slice.call(arguments,3),l=e.curOp&&e.curOp.delayedCallbacks,s=0;s<i.length;++s)l?l.push(n(i[s])):i[s].apply(null,o)}function nn(e,t){var r=e._handlers&&e._handlers[t];return r&&r.length>0}function on(){this.id=null}function ln(e,t,r){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var n=0,i=0;t>n;++n)"	"==e.charAt(n)?i+=r-i%r:++i;return i}function sn(e){for(;yi.length<=e;)yi.push(an(yi)+" ");return yi[e]}function an(e){return e[e.length-1]}function un(e){Gn?(e.selectionStart=0,e.selectionEnd=e.value.length):e.select()}function cn(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;n>r;++r)if(e[r]==t)return r;return-1}function fn(e){for(var t=[],r=0;e>r;++r)t.push(void 0);return t}function hn(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function dn(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||bi.test(e))}function pn(e){var t=0;for(var r in e)e.hasOwnProperty(r)&&e[r]&&++t;return!t}function vn(e,t,r,n){var i=document.createElement(e);if(r&&(i.className=r),n&&(i.style.cssText=n),"string"==typeof t)wn(i,t);else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function gn(e){if(Dn)for(;e.firstChild;)e.removeChild(e.firstChild);else e.innerHTML="";return e}function mn(e,t){return gn(e).appendChild(t)}function wn(e,t){Hn?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function yn(e){if(null!=Si)return Si;var t=vn("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return mn(e,t),t.offsetWidth&&(Si=t.offsetHeight-t.clientHeight),Si||0}function bn(e){if(null==ki){var t=vn("span","​");mn(e,vn("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(ki=t.offsetWidth<=1&&t.offsetHeight>2&&!On)}return ki?vn("span","​"):vn("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function xn(e,t,r,n){if(!e)return n(t,r,"ltr");for(var i=0;i<e.length;++i){var o=e[i];(o.from<r&&o.to>t||t==r&&o.to==t)&&n(Math.max(o.from,t),Math.min(o.to,r),1==o.level?"rtl":"ltr")}}function Cn(e){return e.level%2?e.to:e.from}function Ln(e){return e.level%2?e.from:e.to}function Sn(e){var t=Kr(e);return t?Cn(t[0]):0}function kn(e){var t=Kr(e);return t?Ln(an(t)):e.text.length}function Mn(e,t){var r=Ir(e.view.doc,t),n=cr(e.view.doc,r);n!=r&&(t=Rr(n));var i=Kr(n),o=i?i[0].level%2?kn(n):Sn(n):0;return{line:t,ch:o}}function Tn(e,t){for(var r,n;r=ur(n=Ir(e.view.doc,t));)t=r.find().to.line;var i=Kr(n),o=i?i[0].level%2?Sn(n):kn(n):n.text.length;return{line:t,ch:o}}function Nn(e,t,r,n){var i=Kr(e);if(!i)return An(e,t,r,n);for(var o=n?function(t,r){do t+=r;while(t>0&&xi.test(e.text.charAt(t)));return t}:function(e,t){return e+t},l=i[0].level,s=0;s<i.length;++s){var a=i[s],u=a.level%2==l;if(a.from<t&&a.to>t||u&&(a.from==t||a.to==t))break}for(var c=o(t,a.level%2?-r:r);null!=c;)if(a.level%2==l){if(!(c<a.from||c>a.to))break;a=i[s+=r],c=a&&(r>0==a.level%2?o(a.to,-1):o(a.from,1))}else if(c==Cn(a))a=i[--s],c=a&&Ln(a);else{if(c!=Ln(a))break;a=i[++s],c=a&&Cn(a)}return 0>c||c>e.text.length?null:c}function An(e,t,r,n){var i=t+r;if(n)for(;i>0&&xi.test(e.text.charAt(i));)i+=r;return 0>i||i>e.text.length?null:i}var Wn=/gecko\/\d/i.test(navigator.userAgent),Dn=/MSIE \d/.test(navigator.userAgent),On=Dn&&(null==document.documentMode||document.documentMode<8),Hn=Dn&&(null==document.documentMode||document.documentMode<9),En=/WebKit\//.test(navigator.userAgent),zn=En&&/Qt\/\d+\.\d+/.test(navigator.userAgent),In=/Chrome\//.test(navigator.userAgent),Fn=/Opera\//.test(navigator.userAgent),Rn=/Apple Computer/.test(navigator.vendor),Bn=/KHTML\//.test(navigator.userAgent),Pn=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),Vn=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Kn=/PhantomJS/.test(navigator.userAgent),Gn=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Xn=Gn||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Yn=Gn||/Mac/.test(navigator.platform),Un=/windows/i.test(navigator.platform),_n=Fn&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);_n&&(_n=Number(_n[1]));var jn,Zn,$n,qn=Yn&&(zn||Fn&&(null==_n||12.11>_n)),Jn=!1,Qn=!1,ei=0,ti=null;Dn?ti=-.53:Wn?ti=15:In?ti=-.7:Rn&&(ti=-1/3);var ri,ni,ii=null;e.prototype={getValue:function(e){var t=[],r=this.view.doc;return r.iter(0,r.size,function(e){t.push(e.text)}),t.join(e||"\n")},setValue:j(null,function(e){var t=this.view.doc,r={line:0,ch:0},n=Ir(t,t.size-1).text.length;Ct(this,r,{line:t.size-1,ch:n},Mi(e),r,r,"setValue")}),getSelection:function(e){return this.getRange(this.view.sel.from,this.view.sel.to,e)},replaceSelection:j(null,function(e,t,r){var n=this.view.sel;xt(this,n.from,n.to,Mi(e),t||"around",r)}),focus:function(){window.focus(),et(this),wt(this),q(this)},setOption:function(e,t){var r=this.options,n=r[e];(r[e]!=t||"mode"==e)&&(r[e]=t,oi.hasOwnProperty(e)&&j(this,oi[e])(this,t,n))},getOption:function(e){return this.options[e]},getMode:function(){return this.view.mode},addKeyMap:function(e){this.view.keyMaps.push(e)},removeKeyMap:function(e){for(var t=this.view.keyMaps,r=0;r<t.length;++r)if(("string"==typeof e?t[r].name:t[r])==e)return t.splice(r,1),!0},addOverlay:j(null,function(t,r){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");this.view.overlays.push({mode:n,modeSpec:t,opaque:r&&r.opaque}),this.view.modeGen++,Z(this,0,this.view.doc.size)}),removeOverlay:j(null,function(e){for(var t=this.view.overlays,r=0;r<t.length;++r)if(t[r].modeSpec==e)return t.splice(r,1),this.view.modeGen++,void Z(this,0,this.view.doc.size)}),undo:j(null,function(){Lt(this,"undo")}),redo:j(null,function(){Lt(this,"redo")}),indentLine:j(null,function(e,t,r){"string"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Dt(this.view.doc,e)&&Pt(this,e,t,r)}),indentSelection:j(null,function(e){var t=this.view.sel;if(Mt(t.from,t.to))return Pt(this,t.from.line,e);for(var r=t.to.line-(t.to.ch?0:1),n=t.from.line;r>=n;++n)Pt(this,n,e)}),historySize:function(){var e=this.view.history;return{undo:e.done.length,redo:e.undone.length}},clearHistory:function(){this.view.history=Gr()},markClean:function(){this.view.history.dirtyCounter=0,this.view.history.lastOp=this.view.history.lastOrigin=null},isClean:function(){return 0==this.view.history.dirtyCounter},getHistory:function(){function e(e){for(var t,r=0,n=[];r<e.length;++r){var i=e[r];n.push({events:t=[],fromBefore:i.fromBefore,toBefore:i.toBefore,fromAfter:i.fromAfter,toAfter:i.toAfter});for(var o=0,l=i.events;o<l.length;++o){var s=[],a=l[o];t.push({start:a.start,added:a.added,old:s});for(var u=0;u<a.old.length;++u)s.push(dr(a.old[u]))}}return n}var t=this.view.history;return{done:e(t.done),undone:e(t.undone)}},setHistory:function(e){var t=this.view.history=Gr();t.done=e.done,t.undone=e.undone},getTokenAt:function(e){var t=this.view.doc;e=Wt(t,e);for(var r=O(this,e.line),n=this.view.mode,i=Ir(t,e.line),o=new qt(i.text,this.options.tabSize);o.pos<e.ch&&!o.eol();){o.start=o.pos;var l=n.token(o,r)}return{start:o.start,end:o.pos,string:o.current(),className:l||null,type:l||null,state:r}},getStateAfter:function(e){var t=this.view.doc;return e=At(t,null==e?t.size-1:e),O(this,e+1)},cursorCoords:function(e,t){var r,n=this.view.sel;return r=null==e?n.head:"object"==typeof e?Wt(this.view.doc,e):e?n.from:n.to,V(this,r,t||"page")},charCoords:function(e,t){return P(this,Wt(this.view.doc,e),t||"page")},coordsChar:function(e){var t=this.display.lineSpace.getBoundingClientRect();return K(this,e.left-t.left,e.top-t.top)},defaultTextHeight:function(){return X(this.display)},markText:j(null,function(e,t,r){return Qt(this,Wt(this.view.doc,e),Wt(this.view.doc,t),r,"range")}),setBookmark:j(null,function(e,t){return e=Wt(this.view.doc,e),Qt(this,e,e,t?{replacedWith:t}:{},"bookmark")}),findMarksAt:function(e){var t=this.view.doc;e=Wt(t,e);var r=[],n=Ir(t,e.line).markedSpans;if(n)for(var i=0;i<n.length;++i){var o=n[i];(null==o.from||o.from<=e.ch)&&(null==o.to||o.to>=e.ch)&&r.push(o.marker)}return r},setGutterMarker:j(null,function(e,t,r){return Vt(this,e,function(e){var n=e.gutterMarkers||(e.gutterMarkers={});
return n[t]=r,!r&&pn(n)&&(e.gutterMarkers=null),!0})}),clearGutter:j(null,function(e){var t=0,r=this,n=r.view.doc;n.iter(0,n.size,function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,Z(r,t,t+1),pn(n.gutterMarkers)&&(n.gutterMarkers=null)),++t})}),addLineClass:j(null,function(e,t,r){return Vt(this,e,function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass";if(e[n]){if(new RegExp("\\b"+r+"\\b").test(e[n]))return!1;e[n]+=" "+r}else e[n]=r;return!0})}),removeLineClass:j(null,function(e,t,r){return Vt(this,e,function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass",i=e[n];if(!i)return!1;if(null==r)e[n]=null;else{var o=i.replace(new RegExp("^"+r+"\\b\\s*|\\s*\\b"+r+"\\b"),"");if(o==i)return!1;e[n]=o||null}return!0})}),addLineWidget:j(null,function(e,t,r){return br(this,e,t,r)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!Dt(this.view.doc,e))return null;var t=e;if(e=Ir(this.view.doc,e),!e)return null}else{var t=Rr(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(e,t,r,n,i){var o=this.display;e=V(this,Wt(this.view.doc,e));var l=e.top,s=e.left;if(t.style.position="absolute",o.sizer.appendChild(t),"over"==n)l=e.top;else if("near"==n){var a=Math.max(o.wrapper.clientHeight,this.view.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);e.bottom+t.offsetHeight>a&&e.top>t.offsetHeight&&(l=e.top-t.offsetHeight),s+t.offsetWidth>u&&(s=u-t.offsetWidth)}t.style.top=l+H(o)+"px",t.style.left=t.style.right="","right"==i?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),r&&Rt(this,s,l,s+t.offsetWidth,l+t.offsetHeight)},lineCount:function(){return this.view.doc.size},clipPos:function(e){return Wt(this.view.doc,e)},getCursor:function(e){var t,r=this.view.sel;return t=null==e||"head"==e?r.head:"anchor"==e?r.anchor:"end"==e||e===!1?r.to:r.from,Nt(t)},somethingSelected:function(){return!Mt(this.view.sel.from,this.view.sel.to)},setCursor:j(null,function(e,t,r){var n=Wt(this.view.doc,"number"==typeof e?{line:e,ch:t||0}:e);r?Ot(this,n):Ht(this,n,n)}),setSelection:j(null,function(e,t){var r=this.view.doc;Ht(this,Wt(r,e),Wt(r,t||e))}),extendSelection:j(null,function(e,t){var r=this.view.doc;Ot(this,Wt(r,e),t&&Wt(r,t))}),setExtending:function(e){this.view.sel.extend=e},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){var t=this.view.doc;return Dt(t,e)?Ir(t,e):void 0},getLineNumber:function(e){return Rr(e)},setLine:j(null,function(e,t){Dt(this.view.doc,e)&&kt(this,t,{line:e,ch:0},{line:e,ch:Ir(this.view.doc,e).text.length})}),removeLine:j(null,function(e){Dt(this.view.doc,e)&&kt(this,"",{line:e,ch:0},Wt(this.view.doc,{line:e+1,ch:0}))}),replaceRange:j(null,function(e,t,r){var n=this.view.doc;return t=Wt(n,t),r=r?Wt(n,r):t,kt(this,e,t,r)}),getRange:function(e,t,r){var n=this.view.doc;e=Wt(n,e),t=Wt(n,t);var i=e.line,o=t.line;if(i==o)return Ir(n,i).text.slice(e.ch,t.ch);var l=[Ir(n,i).text.slice(e.ch)];return n.iter(i+1,o,function(e){l.push(e.text)}),l.push(Ir(n,o).text.slice(0,t.ch)),l.join(r||"\n")},triggerOnKeyDown:j(null,gt),execCommand:function(e){return hi[e](this)},moveH:j(null,function(e,t){var r=this.view.sel,n=0>e?r.from:r.to;(r.shift||r.extend||Mt(r.from,r.to))&&(n=Kt(this,e,t,this.options.rtlMoveVisually)),Ot(this,n,n,e)}),deleteH:j(null,function(e,t){var r=this.view.sel;Mt(r.from,r.to)?kt(this,"",r.from,Kt(this,e,t,!1),"delete"):kt(this,"",r.from,r.to,"delete"),this.curOp.userSelChange=!0}),moveV:j(null,function(e,t){var r,n=this.view,i=n.doc,o=this.display,l=n.sel.head,s=V(this,l,"div"),a=s.left;if(null!=n.goalColumn&&(a=n.goalColumn),"page"==t){var u=Math.min(o.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);r=s.top+e*u}else"line"==t&&(r=e>0?s.bottom+3:s.top-3);do{var c=K(this,a,r);r+=5*e}while(c.outside&&(0>e?r>0:r<i.height));"page"==t&&(o.scrollbarV.scrollTop+=P(this,c,"div").top-s.top),Ot(this,c,c,e),n.goalColumn=a}),toggleOverwrite:function(){(this.view.overwrite=!this.view.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},posFromIndex:function(e){var t,r=0,n=this.view.doc;return n.iter(0,n.size,function(n){var i=n.text.length+1;return i>e?(t=e,!0):(e-=i,void++r)}),Wt(n,{line:r,ch:t})},indexFromPos:function(e){e=Wt(this.view.doc,e);var t=e.ch;return this.view.doc.iter(0,e.line,function(e){t+=e.text.length+1}),t},scrollTo:function(e,t){null!=e&&(this.display.scrollbarH.scrollLeft=this.display.scroller.scrollLeft=e),null!=t&&(this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=t),w(this,[])},getScrollInfo:function(){var e=this.display.scroller,t=mi;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:function(e){"number"==typeof e&&(e={line:e,ch:0}),e&&null==e.line?Rt(this,e.left,e.top,e.right,e.bottom):(e=e?Wt(this.view.doc,e):this.view.sel.head,Ft(this,e))},setSize:function(e,t){function r(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.refresh()},on:function(e,t){Qr(this,e,t)},off:function(e,t){en(this,e,t)},operation:function(e){return j(this,e)()},refresh:function(){R(this);var e=this.view.scrollTop,t=this.view.scrollLeft;this.display.scroller.scrollHeight>e&&(this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=e),this.display.scroller.scrollWidth>t&&(this.display.scrollbarH.scrollLeft=this.display.scroller.scrollLeft=t),w(this,!0)},getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var oi=e.optionHandlers={},li=e.defaults={},si=e.Init={toString:function(){return"CodeMirror.Init"}};Yt("value","",function(e,t){e.setValue(t)},!0),Yt("mode",null,n,!0),Yt("indentUnit",2,n,!0),Yt("indentWithTabs",!1),Yt("smartIndent",!0),Yt("tabSize",4,function(e){n(e),R(e),w(e,!0)},!0),Yt("electricChars",!0),Yt("rtlMoveVisually",!Un),Yt("theme","default",function(e){l(e),s(e)},!0),Yt("keyMap","default",o),Yt("extraKeys",null),Yt("onKeyEvent",null),Yt("onDragEvent",null),Yt("lineWrapping",!1,i,!0),Yt("gutters",[],function(e){f(e.options),s(e)},!0),Yt("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?m(e.display)+"px":"0",e.refresh()},!0),Yt("lineNumbers",!1,function(e){f(e.options),s(e)},!0),Yt("firstLineNumber",1,s,!0),Yt("lineNumberFormatter",function(e){return e},s,!0),Yt("showCursorWhenSelecting",!1,k,!0),Yt("readOnly",!1,function(e,t){"nocursor"==t?(yt(e),e.display.input.blur()):t||Q(e,!0)}),Yt("dragDrop",!0),Yt("cursorBlinkRate",530),Yt("cursorHeight",1),Yt("workTime",100),Yt("workDelay",100),Yt("flattenSpans",!0),Yt("pollInterval",100),Yt("undoDepth",40),Yt("viewportMargin",10,function(e){e.refresh()},!0),Yt("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),Yt("autofocus",null);var ai=e.modes={},ui=e.mimeModes={};e.defineMode=function(t,r){if(e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2){r.dependencies=[];for(var n=2;n<arguments.length;++n)r.dependencies.push(arguments[n])}ai[t]=r},e.defineMIME=function(e,t){ui[e]=t},e.resolveMode=function(t){if("string"==typeof t&&ui.hasOwnProperty(t))t=ui[t];else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,r){r=e.resolveMode(r);var n=ai[r.name];if(!n)return e.getMode(t,"text/plain");var i=n(t,r);if(ci.hasOwnProperty(r.name)){var o=ci[r.name];for(var l in o)o.hasOwnProperty(l)&&(i.hasOwnProperty(l)&&(i["_"+l]=i[l]),i[l]=o[l])}return i.name=r.name,i},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var ci=e.modeExtensions={};e.extendMode=function(e,t){var r=ci.hasOwnProperty(e)?ci[e]:ci[e]={};for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n])},e.defineExtension=function(t,r){e.prototype[t]=r},e.defineOption=Yt;var fi=[];e.defineInitHook=function(e){fi.push(e)},e.copyState=Ut,e.startState=_t,e.innerMode=function(e,t){for(;e.innerMode;){var r=e.innerMode(t);t=r.state,e=r.mode}return r||{mode:e,state:t}};var hi=e.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(!0),r=e.getCursor(!1),n=!Mt(t,r);n||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,n?r:{line:t.line},"delete"):e.replaceRange("",t,{line:t.line+1,ch:0},"delete")},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t},"delete")},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.extendSelection({line:0,ch:0})},goDocEnd:function(e){e.extendSelection({line:e.lineCount()-1})},goLineStart:function(e){e.extendSelection(Mn(e,e.getCursor().line))},goLineStartSmart:function(e){var t=e.getCursor(),r=Mn(e,t.line),n=e.getLineHandle(r.line),i=Kr(n);if(i&&0!=i[0].level)e.extendSelection(r);else{var o=Math.max(0,n.text.search(/\S/)),l=t.line==r.line&&t.ch<=o&&t.ch;e.extendSelection({line:r.line,ch:l?0:o})}},goLineEnd:function(e){e.extendSelection(Tn(e,e.getCursor().line))},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end","input")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("	","end","input")},transposeChars:function(e){var t=e.getCursor(),r=e.getLine(t.line);t.ch>0&&t.ch<r.length-1&&e.replaceRange(r.charAt(t.ch)+r.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){j(e,function(){e.replaceSelection("\n","end","input"),e.indentLine(e.getCursor().line,null,!0)})()},toggleOverwrite:function(e){e.toggleOverwrite()}},di=e.keyMap={};di.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},di.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordBefore","Ctrl-Delete":"delWordAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},di.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordBefore","Ctrl-Alt-Backspace":"delWordAfter","Alt-Delete":"delWordAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},di["default"]=Yn?di.macDefault:di.pcDefault,di.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.isModifierKey=$t,e.fromTextArea=function(t,r){function n(){t.value=a.getValue()}if(r||(r={}),r.value=t.value,!r.tabindex&&t.tabindex&&(r.tabindex=t.tabindex),null==r.autofocus){var i=document.body;try{i=document.activeElement}catch(o){}r.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form){Qr(t.form,"submit",n);var l=t.form,s=l.submit;try{l.submit=function u(){n(),l.submit=s,l.submit(),l.submit=u}}catch(o){}}t.style.display="none";var a=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},r);return a.save=n,a.getTextArea=function(){return t},a.toTextArea=function(){n(),t.parentNode.removeChild(a.getWrapperElement()),t.style.display="",t.form&&(en(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=s))},a},qt.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var r=t==e;else var r=t&&(e.test?e.test(t):e(t));return r?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return ln(this.string,this.start,this.tabSize)},indentation:function(){return ln(this.string,null,this.tabSize)},match:function(e,t,r){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&t!==!1&&(this.pos+=n[0].length),n)}var i=function(e){return r?e.toLowerCase():e};return i(this.string).indexOf(i(e),this.pos)==this.pos?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=qt,e.TextMarker=Jt,Jt.prototype.clear=function(){if(!this.explicitlyCleared){U(this.cm);for(var e=this.cm.view,t=null,r=null,n=0;n<this.lines.length;++n){var i=this.lines[n],o=er(i.markedSpans,this);null!=o.to&&(r=Rr(i)),i.markedSpans=tr(i.markedSpans,o),null!=o.from?t=Rr(i):this.collapsed&&!fr(i)&&Fr(i,X(this.cm.display))}if(this.collapsed&&!this.cm.options.lineWrapping)for(var n=0;n<this.lines.length;++n){var l=cr(e.doc,this.lines[n]),s=u(e.doc,l);s>e.maxLineLength&&(e.maxLine=l,e.maxLineLength=s,e.maxLineChanged=!0)}null!=t&&Z(this.cm,t,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.collapsed&&this.cm.view.cantEdit&&(this.cm.view.cantEdit=!1,Et(this.cm)),_(this.cm),rn(this.cm,this,"clear")}},Jt.prototype.find=function(){for(var e,t,r=0;r<this.lines.length;++r){var n=this.lines[r],i=er(n.markedSpans,this);if(null!=i.from||null!=i.to){var o=Rr(n);null!=i.from&&(e={line:o,ch:i.from}),null!=i.to&&(t={line:o,ch:i.to})}}return"bookmark"==this.type?e:e&&{from:e,to:t}},Jt.prototype.getOptions=function(e){var t=this.replacedWith;return{className:this.className,inclusiveLeft:this.inclusiveLeft,inclusiveRight:this.inclusiveRight,atomic:this.atomic,collapsed:this.collapsed,clearOnEnter:this.clearOnEnter,replacedWith:e?t&&t.cloneNode(!0):t,readOnly:this.readOnly,startStyle:this.startStyle,endStyle:this.endStyle}};var pi=e.LineWidget=function(e,t,r){for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.cm=e,this.node=t};pi.prototype.clear=wr(function(){var e=this.line.widgets,t=Rr(this.line);if(null!=t&&e){for(var r=0;r<e.length;++r)e[r]==this&&e.splice(r--,1);Fr(this.line,Math.max(0,this.line.height-yr(this))),Z(this.cm,t,t+1)}}),pi.prototype.changed=wr(function(){var e=this.height;this.height=null;var t=yr(this)-e;if(t){Fr(this.line,this.line.height+t);var r=Rr(this.line);Z(this.cm,r,r+1)}});var vi={},gi=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g;Er.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,r){for(var n=e,i=e+t;i>n;++n){var o=this.lines[n];this.height-=o.height,Lr(o),rn(r,o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0,i=t.length;i>n;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;n>e;++e)if(r(this.lines[e]))return!0}},zr.prototype={chunkSize:function(){return this.size},remove:function(e,t,r){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(o>e){var l=Math.min(t,o-e),s=i.height;if(i.remove(e,l,r),this.height-=s-i.height,o==l&&(this.children.splice(n--,1),i.parent=null),0==(t-=l))break;e=0}else e-=o}if(this.size-t<25){var a=[];this.collapse(a),this.children=[new Er(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0,r=this.children.length;r>t;++t)this.children[t].collapse(e)},insert:function(e,t){for(var r=0,n=0,i=t.length;i>n;++n)r+=t[n].height;this.insertHeight(e,t,r)},insertHeight:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0,i=this.children.length;i>n;++n){var o=this.children[n],l=o.chunkSize();if(l>=e){if(o.insertHeight(e,t,r),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var s=o.lines.splice(o.lines.length-25,25),a=new Er(s);o.height-=a.height,this.children.splice(n+1,0,a),a.parent=this}this.maybeSpill()}break}e-=l}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),r=new zr(t);if(e.parent){e.size-=r.size,e.height-=r.height;var n=cn(e.parent.children,e);e.parent.children.splice(n+1,0,r)}else{var i=new zr(e.children);i.parent=e,e.children=[i,r],e=i}r.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iter:function(e,t,r){this.iterN(e,t-e,r)},iterN:function(e,t,r){for(var n=0,i=this.children.length;i>n;++n){var o=this.children[n],l=o.chunkSize();if(l>e){var s=Math.min(t,l-e);if(o.iterN(e,s,r))return!0;if(0==(t-=s))break;e=0}else e-=l}}},e.e_stop=Zr,e.e_preventDefault=_r,e.e_stopPropagation=jr,e.on=Qr,e.off=en,e.signal=tn;var mi=30,wi=e.Pass={toString:function(){return"CodeMirror.Pass"}};on.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}},e.countColumn=ln;var yi=[""],bi=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,xi=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F]/,Ci=function(){if(Hn)return!1;var e=vn("div");return"draggable"in e||"dragDrop"in e}(),Li=/^$/;Wn?Li=/$'/:Rn?Li=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:In&&(Li=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var Si,ki,Mi=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,r=[],n=e.length;n>=t;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),l=o.indexOf("\r");-1!=l?(r.push(o.slice(0,l)),t+=l+1):(r.push(o),t=i+1)}return r}:function(e){return e.split(/\r\n?|\n/)};e.splitLines=Mi;var Ti=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(r){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},Ni=function(){var e=vn("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Ai={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};e.keyNames=Ai,function(){for(var e=0;10>e;e++)Ai[e+48]=String(e);for(var e=65;90>=e;e++)Ai[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)Ai[e+111]=Ai[e+63235]="F"+e}();var Wi=function(){function e(e){return 255>=e?t.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1791>=e?r.charAt(e-1536):e>=1792&&2220>=e?"r":"L"}var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",r="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,o=/[LRr]/,l=/[Lb1n]/,s=/[1n]/,a="L";return function(t){if(!n.test(t))return!1;for(var r,u=t.length,c=[],f=0;u>f;++f)c.push(r=e(t.charCodeAt(f)));for(var f=0,h=a;u>f;++f){var r=c[f];"m"==r?c[f]=h:h=r}for(var f=0,d=a;u>f;++f){var r=c[f];"1"==r&&"r"==d?c[f]="n":o.test(r)&&(d=r,"r"==r&&(c[f]="R"))}for(var f=1,h=c[0];u-1>f;++f){var r=c[f];"+"==r&&"1"==h&&"1"==c[f+1]?c[f]="1":","!=r||h!=c[f+1]||"1"!=h&&"n"!=h||(c[f]=h),h=r}for(var f=0;u>f;++f){var r=c[f];if(","==r)c[f]="N";else if("%"==r){for(var p=f+1;u>p&&"%"==c[p];++p);for(var v=f&&"!"==c[f-1]||u-1>p&&"1"==c[p]?"1":"N",g=f;p>g;++g)c[g]=v;f=p-1}}for(var f=0,d=a;u>f;++f){var r=c[f];"L"==d&&"1"==r?c[f]="L":o.test(r)&&(d=r)}for(var f=0;u>f;++f)if(i.test(c[f])){for(var p=f+1;u>p&&i.test(c[p]);++p);for(var m="L"==(f?c[f-1]:a),w="L"==(u-1>p?c[p]:a),v=m||w?"L":"R",g=f;p>g;++g)c[g]=v;f=p-1}for(var y,b=[],f=0;u>f;)if(l.test(c[f])){var x=f;for(++f;u>f&&l.test(c[f]);++f);b.push({from:x,to:f,level:0})}else{var C=f,L=b.length;for(++f;u>f&&"L"!=c[f];++f);for(var g=C;f>g;)if(s.test(c[g])){g>C&&b.splice(L,0,{from:C,to:g,level:1});var S=g;for(++g;f>g&&s.test(c[g]);++g);b.splice(L,0,{from:S,to:g,level:2}),C=g}else++g;f>C&&b.splice(L,0,{from:C,to:f,level:1})}return 1==b[0].level&&(y=t.match(/^\s+/))&&(b[0].from=y[0].length,b.unshift({from:0,to:y[0].length,level:0})),1==an(b).level&&(y=t.match(/\s+$/))&&(an(b).to-=y[0].length,b.push({from:u-y[0].length,to:u,level:0})),b[0].level!=an(b).level&&b.push({from:u,to:u,level:b[0].level}),b}}();return e.version="3.02",e}();
CodeMirror.defineMode("xml",function(t,e){function n(t,e){function n(n){return e.tokenize=n,n(t,e)}var o=t.next();if("<"==o){if(t.eat("!"))return t.eat("[")?t.match("CDATA[")?n(a("atom","]]>")):null:t.match("--")?n(a("comment","-->")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),n(i(1))):null;if(t.eat("?"))return t.eatWhile(/[\w\._\-]/),e.tokenize=a("meta","?>"),"meta";var l=t.eat("/");b="";for(var u;u=t.eat(/[^\s\u00a0=<>\"\'\/?]/);)b+=u;return b?(w=l?"closeTag":"openTag",e.tokenize=r,"tag"):"error"}if("&"==o){var d;return d=t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"),d?"atom":"error"}return t.eatWhile(/[^&<]/),null}function r(t,e){var r=t.next();return">"==r||"/"==r&&t.eat(">")?(e.tokenize=n,w=">"==r?"endTag":"selfcloseTag","tag"):"="==r?(w="equals",null):/[\'\"]/.test(r)?(e.tokenize=o(r),e.tokenize(t,e)):(t.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function o(t){return function(e,n){for(;!e.eol();)if(e.next()==t){n.tokenize=r;break}return"string"}}function a(t,e){return function(r,o){for(;!r.eol();){if(r.match(e)){o.tokenize=n;break}r.next()}return t}}function i(t){return function(e,r){for(var o;null!=(o=e.next());){if("<"==o)return r.tokenize=i(t+1),r.tokenize(e,r);if(">"==o){if(1==t){r.tokenize=n;break}return r.tokenize=i(t-1),r.tokenize(e,r)}}return"meta"}}function l(){for(var t=arguments.length-1;t>=0;t--)C.cc.push(arguments[t])}function u(){return l.apply(null,arguments),!0}function d(t,e){var n=M.doNotIndent.hasOwnProperty(t)||C.context&&C.context.noIndent;C.context={prev:C.context,tagName:t,indent:C.indented,startOfLine:e,noIndent:n}}function c(){C.context&&(C.context=C.context.prev)}function f(t){if("openTag"==t)return C.tagName=b,u(p,s(C.startOfLine));if("closeTag"==t){var e=!1;return C.context?C.context.tagName!=b&&(M.implicitlyClosed.hasOwnProperty(C.context.tagName.toLowerCase())&&c(),e=!C.context||C.context.tagName!=b):e=!0,e&&(v="error"),u(m(e))}return u()}function s(t){return function(e){var n=C.tagName;return C.tagName=null,"selfcloseTag"==e||"endTag"==e&&M.autoSelfClosers.hasOwnProperty(n.toLowerCase())?(g(n.toLowerCase()),u()):"endTag"==e?(g(n.toLowerCase()),d(n,t),u()):u()}}function m(t){return function(e){return t&&(v="error"),"endTag"==e?(c(),u()):(v="error",u(arguments.callee))}}function g(t){for(var e;;){if(!C.context)return;if(e=C.context.tagName.toLowerCase(),!M.contextGrabbers.hasOwnProperty(e)||!M.contextGrabbers[e].hasOwnProperty(t))return;c()}}function p(t){return"word"==t?(v="attribute",u(h,p)):"endTag"==t||"selfcloseTag"==t?l():(v="error",u(p))}function h(t){return"equals"==t?u(x,p):(M.allowMissing?"word"==t&&(v="attribute"):v="error","endTag"==t||"selfcloseTag"==t?l():u())}function x(t){return"string"==t?u(k):"word"==t&&M.allowUnquoted?(v="string",u()):(v="error","endTag"==t||"selfCloseTag"==t?l():u())}function k(t){return"string"==t?u(k):l()}var b,w,C,v,T=t.indentUnit,M=e.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},y=e.alignCDATA;return{startState:function(){return{tokenize:n,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(t,e){if(t.sol()&&(e.startOfLine=!0,e.indented=t.indentation()),t.eatSpace())return null;v=w=b=null;var n=e.tokenize(t,e);if(e.type=w,(n||w)&&"comment"!=n)for(C=e;;){var r=e.cc.pop()||f;if(r(w||n))break}return e.startOfLine=!1,v||n},indent:function(t,e,o){var a=t.context;if(t.tokenize!=r&&t.tokenize!=n||a&&a.noIndent)return o?o.match(/^(\s*)/)[0].length:0;if(y&&/<!\[CDATA\[/.test(e))return 0;for(a&&/^<\//.test(e)&&(a=a.prev);a&&!a.startOfLine;)a=a.prev;return a?a.indent+T:0},electricChars:"/",configuration:e.htmlMode?"html":"xml"}}),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0});
CodeMirror.defineMode("javascript",function(e,t){function r(e,t,r){return t.tokenize=r,r(e,t)}function n(e,t){for(var r,n=!1;null!=(r=e.next());){if(r==t&&!n)return!1;n=!n&&"\\"==r}return n}function a(e,t,r){return U=e,_=r,t}function i(e,t){var i=e.next();if('"'==i||"'"==i)return r(e,t,o(i));if(/[\[\]{}\(\),;\:\.]/.test(i))return a(i);if("0"==i&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),a("number","number");if(/\d/.test(i)||"-"==i&&e.eat(/\d/))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),a("number","number");if("/"==i)return e.eat("*")?r(e,t,c):e.eat("/")?(e.skipToEnd(),a("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(n(e,"/"),e.eatWhile(/[gimy]/),a("regexp","string-2")):(e.eatWhile(G),a("operator",null,e.current()));if("#"==i)return e.skipToEnd(),a("error","error");if(G.test(i))return e.eatWhile(G),a("operator",null,e.current());e.eatWhile(/[\w\$_]/);var l=e.current(),u=F.propertyIsEnumerable(l)&&F[l];return u&&"."!=t.lastType?a(u.type,u.style,l):a("variable","variable",l)}function o(e){return function(t,r){return n(t,e)||(r.tokenize=i),a("string","string")}}function c(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=i;break}n="*"==r}return a("comment","comment")}function l(e,t,r,n,a,i){this.indented=e,this.column=t,this.type=r,this.prev=a,this.info=i,null!=n&&(this.align=n)}function u(e,t){for(var r=e.localVars;r;r=r.next)if(r.name==t)return!0}function s(e,t,r,n,a){var i=e.cc;for(J.state=e,J.stream=a,J.marked=null,J.cc=i,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var o=i.length?i.pop():B?k:h;if(o(r,n)){for(;i.length&&i[i.length-1].lex;)i.pop()();return J.marked?J.marked:"variable"==r&&u(e,n)?"variable-2":t}}}function f(){for(var e=arguments.length-1;e>=0;e--)J.cc.push(arguments[e])}function p(){return f.apply(null,arguments),!0}function d(e){function t(t){for(var r=t;r;r=r.next)if(r.name==e)return!0;return!1}var r=J.state;if(r.context){if(J.marked="def",t(r.localVars))return;r.localVars={name:e,next:r.localVars}}else{if(t(r.globalVars))return;r.globalVars={name:e,next:r.globalVars}}}function v(){J.state.context={prev:J.state.context,vars:J.state.localVars},J.state.localVars=K}function m(){J.state.localVars=J.state.context.vars,J.state.context=J.state.context.prev}function y(e,t){var r=function(){var r=J.state;r.lexical=new l(r.indented,J.stream.column(),e,null,r.lexical,t)};return r.lex=!0,r}function x(){var e=J.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function b(e){return function(t){return t==e?p():";"==e?f():p(arguments.callee)}}function h(e){return"var"==e?p(y("vardef"),z,b(";"),x):"keyword a"==e?p(y("form"),k,h,x):"keyword b"==e?p(y("form"),h,x):"{"==e?p(y("}"),E,x):";"==e?p():"function"==e?p($):"for"==e?p(y("form"),b("("),y(")"),W,b(")"),x,h,x):"variable"==e?p(y("stat"),w):"switch"==e?p(y("form"),k,y("}","switch"),b("{"),E,x,x):"case"==e?p(k,b(":")):"default"==e?p(b(":")):"catch"==e?p(y("form"),v,b("("),A,b(")"),h,x,m):f(y("stat"),k,b(";"),x)}function k(e){return H.hasOwnProperty(e)?p(M):"function"==e?p($):"keyword c"==e?p(g):"("==e?p(y(")"),g,b(")"),x,M):"operator"==e?p(k):"["==e?p(y("]"),T(k,"]"),x,M):"{"==e?p(y("}"),T(j,"}"),x,M):p()}function g(e){return e.match(/[;\}\)\],]/)?f():f(k)}function M(e,t){if("operator"==e&&/\+\+|--/.test(t))return p(M);if("operator"==e&&"?"==t)return p(k,b(":"),k);if(";"!=e)return"("==e?p(y(")"),T(k,")"),x,M):"."==e?p(V,M):"["==e?p(y("]"),k,b("]"),x,M):void 0}function w(e){return":"==e?p(x,h):f(M,b(";"),x)}function V(e){return"variable"==e?(J.marked="property",p()):void 0}function j(e){return"variable"==e&&(J.marked="property"),H.hasOwnProperty(e)?p(b(":"),k):void 0}function T(e,t){function r(n){return","==n?p(e,r):n==t?p():p(b(t))}return function(n){return n==t?p():f(e,r)}}function E(e){return"}"==e?p():f(h,E)}function C(e){return":"==e?p(I):f()}function I(e){return"variable"==e?(J.marked="variable-3",p()):f()}function z(e,t){return"variable"==e?(d(t),D?p(C,P):p(P)):f()}function P(e,t){return"="==t?p(k,P):","==e?p(z):void 0}function W(e){return"var"==e?p(z,b(";"),N):p(";"==e?N:"variable"==e?O:N)}function O(e,t){return"in"==t?p(k):p(M,N)}function N(e,t){return";"==e?p(S):"in"==t?p(k):p(k,b(";"),S)}function S(e){")"!=e&&p(k)}function $(e,t){return"variable"==e?(d(t),p($)):"("==e?p(y(")"),v,T(A,")"),x,h,m):void 0}function A(e,t){return"variable"==e?(d(t),D?p(C):p()):void 0}var U,_,q=e.indentUnit,B=t.json,D=t.typescript,F=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),n=e("keyword c"),a=e("operator"),i={type:"atom",style:"atom"},o={"if":t,"while":t,"with":t,"else":r,"do":r,"try":r,"finally":r,"return":n,"break":n,"continue":n,"new":n,"delete":n,"throw":n,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":a,"typeof":a,"instanceof":a,"true":i,"false":i,"null":i,undefined:i,NaN:i,Infinity:i};if(D){var c={type:"variable",style:"variable-3"},l={"interface":e("interface"),"class":e("class"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),"super":e("super"),string:c,number:c,bool:c,any:c};for(var u in l)o[u]=l[u]}return o}(),G=/[+\-*&%=<>!?|]/,H={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},J={state:null,column:null,marked:null,cc:null},K={name:"this",next:{name:"arguments"}};return x.lex=!0,{startState:function(e){return{tokenize:i,lastType:null,cc:[],lexical:new l((e||0)-q,0,"block",!1),localVars:t.localVars,globalVars:t.globalVars,context:t.localVars&&{vars:t.localVars},indented:0}},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==U?r:(t.lastType=U,s(t,r,U,_,e))},indent:function(e,t){if(e.tokenize==c)return CodeMirror.Pass;if(e.tokenize!=i)return 0;var r=t&&t.charAt(0),n=e.lexical;"stat"==n.type&&"}"==r&&(n=n.prev);var a=n.type,o=r==a;return"vardef"==a?n.indented+("operator"==e.lastType||","==e.lastType?4:0):"form"==a&&"{"==r?n.indented:"form"==a?n.indented+q:"stat"==a?n.indented+("operator"==e.lastType||","==e.lastType?q:0):"switch"!=n.info||o?n.align?n.column+(o?0:1):n.indented+(o?0:q):n.indented+(/^(?:case|default)\b/.test(t)?q:2*q)},electricChars:":{}",jsonMode:B}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0});
CodeMirror.defineMode("css",function(e){function t(e){for(var t={},i=0;i<e.length;++i)t[e[i]]=!0;return t}function i(e,t){return s=t,e}function r(e,t){var r=e.next();if("@"==r)return e.eatWhile(/[\w\\\-]/),i("def",e.current());if("/"==r&&e.eat("*"))return t.tokenize=a,a(e,t);if("<"==r&&e.eat("!"))return t.tokenize=o,o(e,t);if("="==r)i(null,"compare");else{if(("~"==r||"|"==r)&&e.eat("="))return i(null,"compare");if('"'==r||"'"==r)return t.tokenize=n(r),t.tokenize(e,t);if("#"==r)return e.eatWhile(/[\w\\\-]/),i("atom","hash");if("!"==r)return e.match(/^\s*\w*/),i("keyword","important");if(/\d/.test(r))return e.eatWhile(/[\w.%]/),i("number","unit");if("-"!==r)return/[,+>*\/]/.test(r)?i(null,"select-op"):"."==r&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?i("qualifier","qualifier"):":"==r?i("operator",r):/[;{}\[\]\(\)]/.test(r)?i(null,r):"u"==r&&e.match("rl(")?(e.backUp(1),t.tokenize=l,i("property","variable")):(e.eatWhile(/[\w\\\-]/),i("property","variable"));if(/\d/.test(e.peek()))return e.eatWhile(/[\w.%]/),i("number","unit");if(e.match(/^[^-]+-/))return i("meta","meta")}}function a(e,t){for(var a,o=!1;null!=(a=e.next());){if(o&&"/"==a){t.tokenize=r;break}o="*"==a}return i("comment","comment")}function o(e,t){for(var a,o=0;null!=(a=e.next());){if(o>=2&&">"==a){t.tokenize=r;break}o="-"==a?o+1:0}return i("comment","comment")}function n(e,t){return function(a,o){for(var n,l=!1;null!=(n=a.next())&&(n!=e||l);)l=!l&&"\\"==n;return l||(t&&a.backUp(1),o.tokenize=r),i("string","string")}}function l(e,t){return e.next(),t.tokenize=e.match(/\s*[\"\']/,!1)?r:n(")",!0),i(null,"(")}var s,d=e.indentUnit,c=t(["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"]),u=t(["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"]),p=t(["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid-cell","grid-column","grid-column-align","grid-column-sizing","grid-column-span","grid-columns","grid-flow","grid-row","grid-row-align","grid-row-sizing","grid-row-span","grid-rows","grid-template","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-shadow","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"]),m=t(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua"]),h=t(["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","navy","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","overlay","overline","padding","padding-box","painted","paused","persian","plus-darker","plus-lighter","pointer","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","white","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small","yellow"]);return{startState:function(e){return{tokenize:r,baseIndent:e||0,stack:[]}},token:function(e,t){if(t.tokenize==r&&e.eatSpace())return null;var i=t.tokenize(e,t),a=t.stack[t.stack.length-1];return"property"==i?"propertyValue"==a?i=h[e.current()]?"string-2":m[e.current()]?"keyword":"variable-2":"rule"==a?p[e.current()]||(i+=" error"):a&&"@media{"!=a?"@media"==a?i=c[e.current()]?"attribute":/^(only|not)$/i.test(e.current())?"keyword":"and"==e.current().toLowerCase()?"error":u[e.current()]?"error":"attribute error":"@mediaType"==a?i=c[e.current()]?"attribute":"and"==e.current().toLowerCase()?"operator":/^(only|not)$/i.test(e.current())?"error":u[e.current()]?"error":"error":"@mediaType("==a?p[e.current()]||(c[e.current()]?i="error":"and"==e.current().toLowerCase()?i="operator":/^(only|not)$/i.test(e.current())?i="error":i+=" error"):i="error":i="tag":"atom"==i?a&&"@media{"!=a?"propertyValue"==a?/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e.current())||(i+=" error"):i="error":i="builtin":"@media"==a&&"{"==s&&(i="error"),"{"==s?"@media"==a||"@mediaType"==a?(t.stack.pop(),t.stack[t.stack.length-1]="@media{"):t.stack.push("rule"):"}"==s?(t.stack.pop(),"propertyValue"==a&&t.stack.pop()):"@media"==s?t.stack.push("@media"):"@media"==a&&/\b(keyword|attribute)\b/.test(i)?t.stack.push("@mediaType"):"@mediaType"==a&&","==e.current()?t.stack.pop():"@mediaType"==a&&"("==s?t.stack.push("@mediaType("):"@mediaType("==a&&")"==s?t.stack.pop():"rule"==a&&":"==s?t.stack.push("propertyValue"):"propertyValue"==a&&";"==s&&t.stack.pop(),i},indent:function(e,t){var i=e.stack.length;return/^\}/.test(t)&&(i-="propertyValue"==e.stack[e.stack.length-1]?2:1),e.baseIndent+i*d},electricChars:"}"}}),CodeMirror.defineMIME("text/css","css");
!function(e){var t,n=/^\s*|\s*$/g,o="$1"==="B".replace(/A(.)|B/,"$1"),i={majorVersion:"3",minorVersion:"5.8",releaseDate:"2012-11-20",_init:function(){function t(e){return e.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(e.src)?(/_(src|dev)\.js/g.test(e.src)&&(d.suffix="_src"),-1!=(a=e.src.indexOf("?"))&&(d.query=e.src.substring(a+1)),d.baseURL=e.src.substring(0,e.src.lastIndexOf("/")),r&&-1==d.baseURL.indexOf("://")&&0!==d.baseURL.indexOf("/")&&(d.baseURL=r+d.baseURL),d.baseURL):null}var n,o,i,r,a,s,d=this,c=document,l=navigator,u=l.userAgent;if(d.isOpera=e.opera&&opera.buildNumber,d.isWebKit=/WebKit/.test(u),d.isIE=!d.isWebKit&&!d.isOpera&&/MSIE/gi.test(u)&&/Explorer/gi.test(l.appName),d.isIE6=d.isIE&&/MSIE [56]/.test(u),d.isIE7=d.isIE&&/MSIE [7]/.test(u),d.isIE8=d.isIE&&/MSIE [8]/.test(u),d.isIE9=d.isIE&&/MSIE [9]/.test(u),d.isGecko=!d.isWebKit&&/Gecko/.test(u),d.isMac=-1!=u.indexOf("Mac"),d.isAir=/adobeair/i.test(u),d.isIDevice=/(iPad|iPhone)/.test(u),d.isIOS5=d.isIDevice&&u.match(/AppleWebKit\/(\d*)/)[1]>=534,e.tinyMCEPreInit)return d.suffix=tinyMCEPreInit.suffix,d.baseURL=tinyMCEPreInit.base,void(d.query=tinyMCEPreInit.query);for(d.suffix="",o=c.getElementsByTagName("base"),n=0;n<o.length;n++)s=o[n].href,s&&(/^https?:\/\/[^\/]+$/.test(s)&&(s+="/"),r=s?s.match(/.*\//)[0]:"");for(o=c.getElementsByTagName("script"),n=0;n<o.length;n++)if(t(o[n]))return;if(i=c.getElementsByTagName("head")[0])for(o=i.getElementsByTagName("script"),n=0;n<o.length;n++)if(t(o[n]))return},is:function(e,n){return n?"array"==n&&i.isArray(e)?!0:typeof e==n:e!==t},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},makeMap:function(e,t,n){var o;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},o=e.length;o--;)n[e[o]]={};return n},each:function(e,n,o){var i,r;if(!e)return 0;if(o=o||e,e.length!==t){for(i=0,r=e.length;r>i;i++)if(n.call(o,e[i],i,e)===!1)return 0}else for(i in e)if(e.hasOwnProperty(i)&&n.call(o,e[i],i,e)===!1)return 0;return 1},trim:function(e){return(e?""+e:"").replace(n,"")},create:function(e,t,n){var o,i,r,a,s,d=this,c=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),r=e[3].match(/(^|\.)(\w+)$/i)[2],i=d.createNS(e[3].replace(/\.\w+$/,""),n),!i[r]){if("static"==e[2])return i[r]=t,void(this.onCreate&&this.onCreate(e[2],e[3],i[r]));t[r]||(t[r]=function(){},c=1),i[r]=t[r],d.extend(i[r].prototype,t),e[5]&&(o=d.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=i[r],i[r]=c?function(){return o[a].apply(this,arguments)}:function(){return this.parent=o[a],s.apply(this,arguments)},i[r].prototype[r]=i[r],d.each(o,function(e,t){i[r].prototype[t]=o[t]}),d.each(t,function(e,t){o[t]?i[r].prototype[t]=function(){return this.parent=o[t],e.apply(this,arguments)}:t!=r&&(i[r].prototype[t]=e)})),d.each(t["static"],function(e,t){i[r][t]=e}),this.onCreate&&this.onCreate(e[2],e[3],i[r].prototype)}},walk:function(e,t,n,o){o=o||this,e&&(n&&(e=e[n]),i.each(e,function(e,r){return t.call(o,e,r,n)===!1?!1:void i.walk(e,t,n,o)}))},createNS:function(t,n){var o,i;for(n=n||e,t=t.split("."),o=0;o<t.length;o++)i=t[o],n[i]||(n[i]={}),n=n[i];return n},resolve:function(t,n){var o,i;for(n=n||e,t=t.split("."),o=0,i=t.length;i>o&&(n=n[t[o]],n);o++);return n},addUnload:function(t,n){function o(){function t(){n.detachEvent("onstop",t),i&&i(),n=0}var n=document;"interactive"==n.readyState&&(n&&n.attachEvent("onstop",t),e.setTimeout(function(){n&&n.detachEvent("onstop",t)},0))}var i,r=this;return i=function(){var t,n,a=r.unloads;if(a){for(n in a)t=a[n],t&&t.func&&t.func.call(t.scope,1);e.detachEvent?(e.detachEvent("onbeforeunload",o),e.detachEvent("onunload",i)):e.removeEventListener&&e.removeEventListener("unload",i,!1),r.unloads=t=a=w=i=0,e.CollectGarbage&&CollectGarbage()}},t={func:t,scope:n||this},r.unloads?r.unloads.push(t):(e.attachEvent?(e.attachEvent("onunload",i),e.attachEvent("onbeforeunload",o)):e.addEventListener&&e.addEventListener("unload",i,!1),r.unloads=[t]),t},removeUnload:function(e){var t=this.unloads,n=null;return i.each(t,function(o,i){return o&&o.func==e?(t.splice(i,1),n=e,!1):void 0}),n},explode:function(e,t){return!e||i.is(e,"array")?e:i.map(e.split(t||","),i.trim)},_addVer:function(e){var t;return this.query?(t=(-1==e.indexOf("?")?"?":"&")+this.query,-1==e.indexOf("#")?e+t:e.replace("#",t+"#")):e},_replace:function(e,n,i){return o?i.replace(e,function(){var e,o=n,i=arguments;for(e=0;e<i.length-2;e++)o=i[e]===t?o.replace(new RegExp("\\$"+e,"g"),""):o.replace(new RegExp("\\$"+e,"g"),i[e]);return o}):i.replace(e,n)}};i._init(),e.tinymce=e.tinyMCE=i}(window),function(e,t){var n,o=(t.is,/^(href|src|style)$/i);if(!e&&window.console)return console.log("Load jQuery first!");t.$=e,t.adapter={patchEditor:function(t){function i(e,t){var n=this;return t&&n.removeAttr("data-mce-style"),s.css.apply(n,arguments)}function r(e,i){var r=this;return o.test(e)?i!==n?(r.each(function(n,o){t.dom.setAttrib(o,e,i)}),r):r.attr("data-mce-"+e):s.attr.apply(r,arguments)}function a(e){return e.css!==i&&(e.css=i,e.attr=r,e.tinymce=t,e.pushStack=function(){return a(s.pushStack.apply(this,arguments))}),e}var s=e.fn;t.$=function(n,o){var i=t.getDoc();return a(e(n||i,i||o))}}},t.extend=e.extend,t.extend(t,{map:e.map,grep:function(t,n){return e.grep(t,n||function(){return 1})},inArray:function(t,n){return e.inArray(n,t||[])}});var i={"tinymce.dom.DOMUtils":{select:function(t,n){var o=this;return e.find(t,o.get(n)||o.get(o.settings.root_element)||o.doc,[])},is:function(t,n){return e(this.get(t)).is(n)}}};t.onCreate=function(e,n,o){t.extend(o,i[n])}}(window.jQuery,tinymce),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,inDispatch:!1,Dispatcher:function(e){this.scope=e||this,this.listeners=[]},add:function(e,t){return this.listeners.push({cb:e,scope:t||this.scope}),e},addToTop:function(e,t){var n=this,o={cb:e,scope:t||n.scope};return n.inDispatch?n.listeners=[o].concat(n.listeners):n.listeners.unshift(o),e},remove:function(e){var t=this.listeners,n=null;return tinymce.each(t,function(o,i){return e==o.cb?(n=o,t.splice(i,1),!1):void 0}),n},dispatch:function(){var e,t,n,o=this,i=arguments,r=o.listeners;for(o.inDispatch=!0,t=0;t<r.length&&(n=r[t],e=n.cb.apply(n.scope,i.length>0?i:[n.scope]),e!==!1);t++);return o.inDispatch=!1,e}}),function(){var e=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(t,n){var o,i,r=this;return t=tinymce.trim(t),n=r.settings=n||{},/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)?void(r.source=t):(0===t.indexOf("/")&&0!==t.indexOf("//")&&(t=(n.base_uri?n.base_uri.protocol||"http":"http")+"://mce_host"+t),/^[\w\-]*:?\/\//.test(t)||(i=n.base_uri?n.base_uri.path:new tinymce.util.URI(location.href).directory,t=(n.base_uri&&n.base_uri.protocol||"http")+"://mce_host"+r.toAbsPath(i,t)),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),e(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(e,n){var o=t[n];o&&(o=o.replace(/\(mce_at\)/g,"@@")),r[e]=o}),o=n.base_uri,void(o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||"mce_host"!==r.host||(r.port=o.port),r.host&&"mce_host"!==r.host||(r.host=o.host),r.source="")))},setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t,n=this;if("./"===e)return e;if(e=new tinymce.util.URI(e,{base_uri:n}),"mce_host"!=e.host&&n.host!=e.host&&e.host||n.port!=e.port||n.protocol!=e.protocol)return e.getURI();var o=n.getURI(),i=e.getURI();return o==i||"/"==o.charAt(o.length-1)&&o.substr(0,o.length-1)==i?o:(t=n.toRelPath(n.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return e=new tinymce.util.URI(e,{base_uri:this}),e.getURI(this.host==e.host&&this.protocol==e.protocol?t:0)},toRelPath:function(e,t){var n,o,i,r=0,a="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(o=0,i=e.length;i>o;o++)if(o>=n.length||e[o]!=n[o]){r=o+1;break}if(e.length<n.length)for(o=0,i=n.length;i>o;o++)if(o>=e.length||e[o]!=n[o]){r=o+1;break}if(1===r)return t;for(o=0,i=e.length-(r-1);i>o;o++)a+="../";for(o=r-1,i=n.length;i>o;o++)a+=o!=r-1?"/"+n[o]:n[o];return a},toAbsPath:function(t,n){var o,i,r,a=0,s=[];for(i=/\/$/.test(n)?"/":"",t=t.split("/"),n=n.split("/"),e(t,function(e){e&&s.push(e)}),t=s,o=n.length-1,s=[];o>=0;o--)0!==n[o].length&&"."!==n[o]&&(".."!==n[o]?a>0?a--:s.push(n[o]):a++);return o=t.length-a,r=0>=o?s.reverse().join("/"):t.slice(0,o).join("/")+"/"+s.reverse().join("/"),0!==r.indexOf("/")&&(r="/"+r),i&&r.lastIndexOf("/")!==r.length-1&&(r+=i),r},getURI:function(e){var t,n=this;return(!n.source||e)&&(t="",e||(n.protocol&&(t+=n.protocol+"://"),n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}})}(),function(){var e=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(t){var n,o=this.get(t);return o&&e(o.split("&"),function(e){e=e.split("="),n=n||{},n[unescape(e[0])]=unescape(e[1])}),n},setHash:function(t,n,o,i,r,a){var s="";e(n,function(e,t){s+=(s?"&":"")+escape(t)+"="+escape(e)}),this.set(t,s,o,i,r,a)},get:function(e){var t,n,o=document.cookie,i=e+"=";if(o){if(n=o.indexOf("; "+i),-1==n){if(n=o.indexOf(i),0!==n)return null}else n+=2;return t=o.indexOf(";",n),-1==t&&(t=o.length),unescape(o.substring(n+i.length,t))}},set:function(e,t,n,o,i,r){document.cookie=e+"="+escape(t)+(n?"; expires="+n.toGMTString():"")+(o?"; path="+escape(o):"")+(i?"; domain="+i:"")+(r?"; secure":"")},remove:function(e,t,n){var o=new Date;o.setTime(o.getTime()-1e3),this.set(e,"",o,t,n)}})}(),function(){function serialize(e,t){var n,o,i,r;if(t=t||'"',null==e)return"null";if(i=typeof e,"string"==i)return o="\bb	t\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,i){return'"'===t&&"'"===e?e:(n=o.indexOf(i),n+1?"\\"+o.charAt(n+1):(e=i.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+t;if("object"==i){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(n=0,o="[";n<e.length;n++)o+=(n>0?",":"")+serialize(e[n],t);return o+"]"}o="{";for(r in e)e.hasOwnProperty(r)&&(o+="function"!=typeof e[r]?(o.length>1?","+t:t)+r+t+":"+serialize(e[r],t):"");return o+"}"}return""+e}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(e){function t(){!e.async||4==o.readyState||a++>1e4?(e.success&&1e4>a&&200==o.status?e.success.call(e.success_scope,""+o.responseText,o,e):e.error&&e.error.call(e.error_scope,a>1e4?"TIMED_OUT":"GENERAL",o,e),o=null):r.setTimeout(t,10)}function n(e){o=0;try{o=new ActiveXObject(e)}catch(t){}return o}var o,i,r=window,a=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",o=r.XMLHttpRequest?new XMLHttpRequest:n("Microsoft.XMLHTTP")||n("Msxml2.XMLHTTP")){if(o.overrideMimeType&&o.overrideMimeType(e.content_type),o.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&o.setRequestHeader("Content-Type",e.content_type),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send(e.data),!e.async)return t();i=r.setTimeout(t,10)}}}),function(){var e=tinymce.extend,t=tinymce.util.JSON,n=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(t){this.settings=e({},t),this.count=0},send:function(o){var i=o.error,r=o.success;o=e(this.settings,o),o.success=function(e,n){e=t.parse(e),"undefined"==typeof e&&(e={error:"JSON Parse error."}),e.error?i.call(o.error_scope||o.scope,e.error,n):r.call(o.success_scope||o.scope,e.result)},o.error=function(e,t){i&&i.call(o.error_scope||o.scope,e,t)},o.data=t.serialize({id:o.id||"c"+this.count++,method:o.method,params:o.params}),o.content_type="application/json",n.send(o)},"static":{sendRPC:function(e){return(new tinymce.util.JSONRequest).send(e)}}})}(),function(e){e.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(t){return e.isMac?t.metaKey:t.ctrlKey&&!t.altKey}}}(tinymce),tinymce.util.Quirks=function(e){function t(t,n){try{e.getDoc().execCommand(t,!1,n)}catch(o){}}function n(){var t=e.getDoc().documentMode;return t?t:6}function o(e){return e.isDefaultPrevented()}function i(){function t(t){var n,o,i,r;if(n=M.getRng(),o=B.getParent(n.startContainer,B.isBlock),t&&(o=B.getNext(o,B.isBlock)),o){for(i=o.firstChild;i&&3==i.nodeType&&0===i.nodeValue.length;)i=i.nextSibling;i&&"SPAN"===i.nodeName&&(r=i.cloneNode(!1))}I(B.select("span",o),function(e){e.setAttribute("data-mce-mark","1")}),e.getDoc().execCommand(t?"ForwardDelete":"Delete",!1,null),o=B.getParent(n.startContainer,B.isBlock),I(B.select("span",o),function(e){var t=M.getBookmark();r?B.replace(r.cloneNode(!1),e,!0):e.getAttribute("data-mce-mark")?e.removeAttribute("data-mce-mark"):B.remove(e,!0),M.moveToBookmark(t)})}e.onKeyDown.add(function(e,n){var i;i=n.keyCode==A,o(n)||!i&&n.keyCode!=T||N.modifierPressed(n)||(n.preventDefault(),t(i))}),e.addCommand("Delete",function(){t()})}function r(){function t(e){var t=B.create("body"),n=e.cloneContents();return t.appendChild(n),M.serializer.serialize(t,{format:"html"})}function n(n){var o=t(n),i=B.createRng();i.selectNode(e.getBody());var r=t(i);return o===r}e.onKeyDown.add(function(e,t){var i,r=t.keyCode;if(!o(t)&&(r==A||r==T)){if(i=e.selection.isCollapsed(),i&&!B.isEmpty(e.getBody()))return;if(tinymce.isIE&&!i)return;if(!i&&!n(e.selection.getRng()))return;e.setContent(""),e.selection.setCursorLocation(e.getBody(),0),e.nodeChanged()}})}function a(){e.onKeyDown.add(function(e,t){!o(t)&&65==t.keyCode&&N.metaKeyPressed(t)&&(t.preventDefault(),e.execCommand("SelectAll"))})}function s(){e.settings.content_editable||(B.bind(e.getDoc(),"focusin",function(){M.setRng(M.getRng())}),B.bind(e.getDoc(),"mousedown",function(t){t.target==e.getDoc().documentElement&&(e.getWin().focus(),M.setRng(M.getRng()))}))}function d(){e.onKeyDown.add(function(e,t){if(!o(t)&&t.keyCode===T&&M.isCollapsed()&&0===M.getRng(!0).startOffset){var n=M.getNode(),i=n.previousSibling;i&&i.nodeName&&"hr"===i.nodeName.toLowerCase()&&(B.remove(i),tinymce.dom.Event.cancel(t))}})}function c(){Range.prototype.getClientRects||e.onMouseDown.add(function(e,t){if(!o(t)&&"HTML"===t.target.nodeName){var n=e.getBody();n.blur(),setTimeout(function(){n.focus()},0)}})}function l(){e.onClick.add(function(e,t){t=t.target,/^(IMG|HR)$/.test(t.nodeName)&&M.getSel().setBaseAndExtent(t,0,t,1),"A"==t.nodeName&&B.hasClass(t,"mceItemAnchor")&&M.select(t),e.nodeChanged()})}function u(){function t(){var t=B.getAttribs(M.getStart().cloneNode(!1));return function(){var n=M.getStart();n!==e.getBody()&&(B.setAttrib(n,"style",null),I(t,function(e){n.setAttributeNode(e.cloneNode(!0))}))}}function n(){return!M.isCollapsed()&&B.getParent(M.getStart(),B.isBlock)!=B.getParent(M.getEnd(),B.isBlock)}function i(e,t){return t.preventDefault(),!1}e.onKeyPress.add(function(e,i){var r;return o(i)||8!=i.keyCode&&46!=i.keyCode||!n()?void 0:(r=t(),e.getDoc().execCommand("delete",!1,null),r(),i.preventDefault(),!1)}),B.bind(e.getDoc(),"cut",function(r){var a;!o(r)&&n()&&(a=t(),e.onKeyUp.addToTop(i),setTimeout(function(){a(),e.onKeyUp.remove(i)},0))})}function f(){var t,n;B.bind(e.getDoc(),"selectionchange",function(){n&&(clearTimeout(n),n=0),n=window.setTimeout(function(){var n=M.getRng();t&&tinymce.dom.RangeUtils.compareRanges(n,t)||(e.nodeChanged(),t=n)},50)})}function p(){document.body.setAttribute("role","application")}function m(){e.onKeyDown.add(function(e,t){if(!o(t)&&t.keyCode===T&&M.isCollapsed()&&0===M.getRng(!0).startOffset){var n=M.getNode().previousSibling;if(n&&n.nodeName&&"table"===n.nodeName.toLowerCase())return tinymce.dom.Event.cancel(t)}})}function h(){n()>7||(t("RespectVisibilityInDesign",!0),e.contentStyles.push(".mceHideBrInPre pre br {display: none}"),B.addClass(e.getBody(),"mceHideBrInPre"),L.addNodeFilter("pre",function(e){for(var t,n,o,i,r=e.length;r--;)for(t=e[r].getAll("br"),n=t.length;n--;)o=t[n],i=o.prev,i&&3===i.type&&"\n"!=i.value.charAt(i.value-1)?i.value+="\n":o.parent.insert(new tinymce.html.Node("#text",3),o,!0).value="\n"}),D.addNodeFilter("pre",function(e){for(var t,n,o,i,r=e.length;r--;)for(t=e[r].getAll("br"),n=t.length;n--;)o=t[n],i=o.prev,i&&3==i.type&&(i.value=i.value.replace(/\r?\n$/,""))}))}function g(){B.bind(e.getBody(),"mouseup",function(){var e,t=M.getNode();"IMG"==t.nodeName&&((e=B.getStyle(t,"width"))&&(B.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),B.setStyle(t,"width","")),(e=B.getStyle(t,"height"))&&(B.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),B.setStyle(t,"height","")))})}function v(){e.onKeyDown.add(function(e,t){var n,i,r,a,s,d,c;n=t.keyCode==A,o(t)||!n&&t.keyCode!=T||N.modifierPressed(t)||(i=M.getRng(),r=i.startContainer,a=i.startOffset,c=i.collapsed,3==r.nodeType&&r.nodeValue.length>0&&(0===a&&!c||c&&a===(n?0:1))&&(nonEmptyElements=e.schema.getNonEmptyElements(),t.preventDefault(),s=B.create("br",{id:"__tmp"}),r.parentNode.insertBefore(s,r),e.getDoc().execCommand(n?"ForwardDelete":"Delete",!1,null),r=M.getRng().startContainer,d=r.previousSibling,d&&1==d.nodeType&&!B.isBlock(d)&&B.isEmpty(d)&&!nonEmptyElements[d.nodeName.toLowerCase()]&&B.remove(d),B.remove("__tmp")))})}function y(){e.onKeyDown.add(function(e,t){var n,i,r,a,s;if(!o(t)&&t.keyCode==N.BACKSPACE&&(n=M.getRng(),i=n.startContainer,r=n.startOffset,a=B.getRoot(),s=i,n.collapsed&&0===r)){for(;s&&s.parentNode&&s.parentNode.firstChild==s&&s.parentNode!=a;)s=s.parentNode;"BLOCKQUOTE"===s.tagName&&(e.formatter.toggle("blockquote",null,s),n=B.createRng(),n.setStart(i,0),n.setEnd(i,0),M.setRng(n))}})}function b(){function n(){e._refreshContentEditable(),t("StyleWithCSS",!1),t("enableInlineTableEditing",!1),R.object_resizing||t("enableObjectResizing",!1)}R.readonly||(e.onBeforeExecCommand.add(n),e.onMouseDown.add(n))}function C(){function t(){I(B.select("a"),function(e){var t=e.parentNode,n=B.getRoot();if(t.lastChild===e){for(;t&&!B.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}B.add(t,"br",{"data-mce-bogus":1})}})}e.onExecCommand.add(function(e,n){"CreateLink"===n&&t(e)}),e.onSetContent.add(M.onSetContent.add(t))}function _(){R.forced_root_block&&e.onInit.add(function(){t("DefaultParagraphSeparator",R.forced_root_block)})}function x(){function t(t,n){t&&n.initial||e.execCommand("mceRepaint")}e.onUndo.add(t),e.onRedo.add(t),e.onSetContent.add(t)}function k(){e.onKeyDown.add(function(e,t){var n;o(t)||t.keyCode!=T||(n=e.getDoc().selection.createRange(),n&&n.item&&(t.preventDefault(),e.undoManager.beforeChange(),B.remove(n.item(0)),e.undoManager.add()))})}function S(){var t;n()>=10&&(t="",I("p div h1 h2 h3 h4 h5 h6".split(" "),function(e,n){t+=(n>0?",":"")+e+":empty"}),e.contentStyles.push(t+"{padding-right: 1px !important}"))}function E(){function n(e){var t,n;t=e.screenX-f,n=e.screenY-p,y=t*u[2]+m,b=n*u[3]+h,y=5>y?5:y,b=5>b?5:b,(N.modifierPressed(e)||"IMG"==c.nodeName&&u[2]*u[3]!==0)&&(y=Math.round(b/g),b=Math.round(y*g)),B.setStyles(l,{width:y,height:b}),u[2]<0&&l.clientWidth<=y&&B.setStyle(l,"left",s+(m-y)),u[3]<0&&l.clientHeight<=b&&B.setStyle(l,"top",d+(h-b))}function o(){function t(t,n){n&&(c.style[t]||!e.schema.isValid(c.nodeName.toLowerCase(),t)?B.setStyle(c,t,n):B.setAttrib(c,t,n))}t("width",y),t("height",b),B.unbind(_,"mousemove",n),B.unbind(_,"mouseup",o),C!=_&&(B.unbind(C,"mousemove",n),B.unbind(C,"mouseup",o)),B.remove(l),i(c)}function i(e){var t,i,a;r(),t=B.getPos(e),s=t.x,d=t.y,i=e.offsetWidth,a=e.offsetHeight,c!=e&&(c=e,y=b=0),I(v,function(e,t){var r;r=B.get("mceResizeHandle"+t),r?B.show(r):(r=B.add(_.documentElement,"div",{id:"mceResizeHandle"+t,"class":"mceResizeHandle",style:"cursor:"+t+"-resize; margin:0; padding:0"}),B.bind(r,"mousedown",function(t){t.preventDefault(),o(),f=t.screenX,p=t.screenY,m=c.clientWidth,h=c.clientHeight,g=h/m,u=e,l=c.cloneNode(!0),B.addClass(l,"mceClonedResizable"),B.setStyles(l,{left:s,top:d,margin:0}),_.documentElement.appendChild(l),B.bind(_,"mousemove",n),B.bind(_,"mouseup",o),C!=_&&(B.bind(C,"mousemove",n),B.bind(C,"mouseup",o))})),B.setStyles(r,{left:i*e[0]+s-r.offsetWidth/2,top:a*e[1]+d-r.offsetHeight/2})}),tinymce.isOpera||"IMG"!=c.nodeName||c.setAttribute("data-mce-selected","1")}function r(){c&&c.removeAttribute("data-mce-selected");for(var e in v)B.hide("mceResizeHandle"+e)}function a(){var e=B.getParent(M.getNode(),"table,img");I(B.select("img[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),e?i(e):r()}var s,d,c,l,u,f,p,m,h,g,v,y,b,C=document,_=e.getDoc();R.object_resizing&&R.webkit_fake_resize!==!1&&(t("enableObjectResizing",!1),v={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},e.contentStyles.push(".mceResizeHandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}.mceResizeHandle:hover {background: #000}img[data-mce-selected] {outline: 1px solid black}img.mceClonedResizable, table.mceClonedResizable {position: absolute;outline: 1px dashed black;opacity: .5;z-index: 10000}"),e.onNodeChange.add(a),B.bind(_,"selectionchange",a),e.serializer.addAttributeFilter("data-mce-selected",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}))}function w(){n()<9&&(L.addNodeFilter("noscript",function(e){for(var t,n,o=e.length;o--;)t=e[o],n=t.firstChild,n&&t.attr("data-mce-innertext",n.value)}),D.addNodeFilter("noscript",function(e){for(var t,n,o,i=e.length;i--;)t=e[i],n=e[i].firstChild,n?n.value=tinymce.html.Entities.decode(n.value):(o=t.attributes.map["data-mce-innertext"],o&&(t.attr("data-mce-innertext",null),n=new tinymce.html.Node("#text",3),n.value=o,n.raw=!0,t.append(n)))}))}var N=tinymce.VK,T=N.BACKSPACE,A=N.DELETE,B=e.dom,M=e.selection,R=e.settings,L=e.parser,D=e.serializer,I=tinymce.each;m(),y(),r(),tinymce.isWebKit&&(v(),i(),s(),l(),_(),tinymce.isIDevice?f():(E(),a())),tinymce.isIE&&(d(),p(),h(),g(),k(),S(),w()),tinymce.isGecko&&(d(),c(),u(),b(),C(),x()),tinymce.isOpera&&E()},function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,o,r,a={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)o=String.fromCharCode(parseInt(e[n],t)),i[o]||(r="&"+e[n+1]+";",a[o]=r,a[r]=o);return a}}var o,i,r,a=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,s=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=/[<>&\"\']/g,c=/&(#x|#)?([\w]+);/g,l={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};i={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},r={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},o=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),e.html=e.html||{},e.html.Entities={encodeRaw:function(e,t){return e.replace(t?a:s,function(e){return i[e]||e})},encodeAllRaw:function(e){return(""+e).replace(d,function(e){return i[e]||e})},encodeNumeric:function(e,t){return e.replace(t?a:s,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":i[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||o,e.replace(t?a:s,function(e){return i[e]||n[e]||e})},getEncodeFunc:function(t,r){function d(e,t){return e.replace(t?a:s,function(e){return i[e]||r[e]||"&#"+e.charCodeAt(0)+";"||e})}function c(e,t){return l.encodeNamed(e,t,r)}var l=e.html.Entities;return r=n(r)||o,t=e.makeMap(t.replace(/\+/g,",")),t.named&&t.numeric?d:t.named?r?c:l.encodeNamed:t.numeric?l.encodeNumeric:l.encodeRaw},decode:function(e){return e.replace(c,function(e,n,i){return n?(i=parseInt(i,2===n.length?16:10),i>65535?(i-=65536,String.fromCharCode(55296+(i>>10),56320+(1023&i))):l[i]||String.fromCharCode(i)):r[e]||o[e]||t(e)})}}}(tinymce),tinymce.html.Styles=function(e,t){function n(e,t,n,o){function i(e){return e=parseInt(e).toString(16),e.length>1?e:"0"+e}return"#"+i(t)+i(n)+i(o)}var o,i,r,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,d=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,l={};for(e=e||{},r="\\\" \\' \\; \\: ; : ﻿".split(" "),i=0;i<r.length;i++)l[r[i]]="﻿"+i,l["﻿"+i]=r[i];return{toHex:function(e){return e.replace(a,n)},parse:function(t){function o(e,t){var n,o,i,r;n=y[e+"-top"+t],n&&(o=y[e+"-right"+t],n==o&&(i=y[e+"-bottom"+t],o==i&&(r=y[e+"-left"+t],i==r&&(y[e+t]=r,delete y[e+"-top"+t],delete y[e+"-right"+t],delete y[e+"-bottom"+t],delete y[e+"-left"+t]))))}function i(e){var t,n=y[e];if(n&&!(n.indexOf(" ")<0)){for(n=n.split(" "),t=n.length;t--;)if(n[t]!==n[0])return!1;return y[e]=n[0],!0}}function r(e,t,n,o){i(t)&&i(n)&&i(o)&&(y[e]=y[t]+" "+y[n]+" "+y[o],delete y[t],delete y[n],delete y[o])}function u(e){return v=!0,l[e]}function f(e,t){return v&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return l[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function p(e,t,n,o,i,r){return(i=i||r)?(i=f(i),"'"+i.replace(/\'/g,"\\'")+"'"):(t=f(t||n||o),b&&(t=b.call(C,t,"style")),"url('"+t.replace(/\'/g,"\\'")+"')")}var m,h,g,v,y={},b=e.url_converter,C=e.url_converter_scope||this;if(t){for(t=t.replace(/\\[\"\';:\uFEFF]/g,u).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,u)});m=d.exec(t);)h=m[1].replace(c,"").toLowerCase(),g=m[2].replace(c,""),h&&g.length>0&&("font-weight"===h&&"700"===g?g="bold":("color"===h||"background-color"===h)&&(g=g.toLowerCase()),g=g.replace(a,n),g=g.replace(s,p),y[h]=v?f(g,!0):g),d.lastIndex=m.index+m[0].length;o("border",""),o("border","-width"),o("border","-color"),o("border","-style"),o("padding",""),o("margin",""),r("border","border-width","border-style","border-color"),"medium none"===y.border&&delete y.border}return y},serialize:function(e,n){function i(n){var i,r,a,d;if(i=t.styles[n])for(r=0,a=i.length;a>r;r++)n=i[r],d=e[n],d!==o&&d.length>0&&(s+=(s.length>0?" ":"")+n+": "+d+";")}var r,a,s="";if(n&&t&&t.styles)i("*"),i(n);else for(r in e)a=e[r],a!==o&&a.length>0&&(s+=(s.length>0?" ":"")+r+": "+a+";");return s}}},function(e){function t(e,t){return e.split(t||",")}function n(e,n){function o(t){return t.replace(/[A-Z]+/g,function(t){return o(e[t])})}var i,r={};for(i in e)e.hasOwnProperty(i)&&(e[i]=o(e[i]));return o(n).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(e,n,o,i){o=t(o,"|"),r[n]={attributes:a(o),attributesOrder:o,children:a(i,"|",{"#comment":{}})}}),r}function o(){var e=r.html5;return e||(e=r.html5=n({A:"id|accesskey|class|dir|draggable|item|hidden|itemprop|role|spellcheck|style|subject|title|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"#|a|abbr|area|audio|b|bdo|br|button|canvas|cite|code|command|datalist|del|dfn|em|embed|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|meta|meter|noscript|object|output|progress|q|ruby|samp|script|select|small|span|strong|sub|sup|svg|textarea|time|var|video|wbr",C:"#|a|abbr|area|address|article|aside|audio|b|bdo|blockquote|br|button|canvas|cite|code|command|datalist|del|details|dfn|dialog|div|dl|em|embed|fieldset|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|menu|meta|meter|nav|noscript|ol|object|output|p|pre|progress|q|ruby|samp|script|section|select|small|span|strong|style|sub|sup|svg|table|textarea|time|ul|var|video"},"html[A|manifest][body|head]head[A][base|command|link|meta|noscript|script|style|title]title[A][#]base[A|href|target][]link[A|href|rel|media|type|sizes][]meta[A|http-equiv|name|content|charset][]style[A|type|media|scoped][#]script[A|charset|type|src|defer|async][#]noscript[A][C]body[A][C]section[A][C]nav[A][C]article[A][C]aside[A][C]h1[A][B]h2[A][B]h3[A][B]h4[A][B]h5[A][B]h6[A][B]hgroup[A][h1|h2|h3|h4|h5|h6]header[A][C]footer[A][C]address[A][C]p[A][B]br[A][]pre[A][B]dialog[A][dd|dt]blockquote[A|cite][C]ol[A|start|reversed][li]ul[A][li]li[A|value][C]dl[A][dd|dt]dt[A][B]dd[A][C]a[A|href|target|ping|rel|media|type][B]em[A][B]strong[A][B]small[A][B]cite[A][B]q[A|cite][B]dfn[A][B]abbr[A][B]code[A][B]var[A][B]samp[A][B]kbd[A][B]sub[A][B]sup[A][B]i[A][B]b[A][B]mark[A][B]progress[A|value|max][B]meter[A|value|min|max|low|high|optimum][B]time[A|datetime][B]ruby[A][B|rt|rp]rt[A][B]rp[A][B]bdo[A][B]span[A][B]ins[A|cite|datetime][B]del[A|cite|datetime][B]figure[A][C|legend|figcaption]figcaption[A][C]img[A|alt|src|height|width|usemap|ismap][]iframe[A|name|src|height|width|sandbox|seamless][]embed[A|src|height|width|type][]object[A|data|type|height|width|usemap|name|form|classid][param]param[A|name|value][]details[A|open][C|legend]command[A|type|label|icon|disabled|checked|radiogroup][]menu[A|type|label][C|li]legend[A][C|B]div[A][C]source[A|src|type|media][]audio[A|src|autobuffer|autoplay|loop|controls][source]video[A|src|autobuffer|autoplay|loop|controls|width|height|poster][source]hr[A][]form[A|accept-charset|action|autocomplete|enctype|method|name|novalidate|target][C]fieldset[A|disabled|form|name][C|legend]label[A|form|for][B]input[A|type|accept|alt|autocomplete|autofocus|checked|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|height|list|max|maxlength|min|multiple|pattern|placeholder|readonly|required|size|src|step|width|files|value|name][]button[A|autofocus|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|name|value|type][B]select[A|autofocus|disabled|form|multiple|name|size][option|optgroup]datalist[A][B|option]optgroup[A|disabled|label][option]option[A|disabled|selected|label|value][]textarea[A|autofocus|disabled|form|maxlength|name|placeholder|readonly|required|rows|cols|wrap][]keygen[A|autofocus|challenge|disabled|form|keytype|name][]output[A|for|form|name][B]canvas[A|width|height][]map[A|name][B|C]area[A|shape|coords|href|alt|target|media|rel|ping|type][]mathml[A][]svg[A][]table[A|border][caption|colgroup|thead|tfoot|tbody|tr]caption[A][C]colgroup[A|span][col]col[A|span][]thead[A][tr]tfoot[A][tr]tbody[A][tr]tr[A][th|td]th[A|headers|rowspan|colspan|scope][B]td[A|headers|rowspan|colspan][C]wbr[A][]")),e
}function i(){var e=r.html4;return e||(e=r.html4=n({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]")),e}var r={},a=e.makeMap,s=e.each;e.html.Schema=function(n){function d(t,o,i){var s=n[t];return s?s=a(s,",",a(s.toUpperCase()," ")):(s=r[t],s||(s=a(o," ",a(o.toUpperCase()," ")),s=e.extend(s,i),r[t]=s)),s}function c(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function l(n){var o,i,r,s,d,l,u,f,p,m,h,g,v,y,b,C,_,x,k,E=/^([#+\-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,N=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,T=/[*?+]/;if(n)for(n=t(n),S["@"]&&(C=S["@"].attributes,_=S["@"].attributesOrder),o=0,i=n.length;i>o;o++)if(d=E.exec(n[o])){if(y=d[1],p=d[2],b=d[3],f=d[4],g={},v=[],l={attributes:g,attributesOrder:v},"#"===y&&(l.paddEmpty=!0),"-"===y&&(l.removeEmpty=!0),C){for(x in C)g[x]=C[x];v.push.apply(v,_)}if(f)for(f=t(f,"|"),r=0,s=f.length;s>r;r++)if(d=N.exec(f[r])){if(u={},h=d[1],m=d[2].replace(/::/g,":"),y=d[3],k=d[4],"!"===h&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(m),u.required=!0),"-"===h){delete g[m],v.splice(e.inArray(v,m),1);continue}y&&("="===y&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:m,value:k}),u.defaultValue=k),":"===y&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:m,value:k}),u.forcedValue=k),"<"===y&&(u.validValues=a(k,"?"))),T.test(m)?(l.attributePatterns=l.attributePatterns||[],u.pattern=c(m),l.attributePatterns.push(u)):(g[m]||v.push(m),g[m]=u)}C||"@"!=p||(C=g,_=v),b&&(l.outputName=p,S[b]=l),T.test(p)?(l.pattern=c(p),w.push(l)):S[p]=l}}function u(e){S={},w=[],l(e),s(g,function(e,t){E[t]=e.children})}function f(e){var n=/^(~)?(.+)$/;e&&s(t(e),function(e){var t=n.exec(e),o="~"===t[1],i=o?"span":"div",r=t[2];E[r]=E[i],N[r]=i,o||(_[r.toUpperCase()]={},_[r]={}),S[r]||(S[r]=S[i]),s(E,function(e){e[i]&&(e[r]=e[i])})})}function p(e){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&s(t(e),function(e){var o,i,r=n.exec(e);r&&(i=r[1],o=i?E[r[2]]:E[r[2]]={"#comment":{}},o=E[r[2]],s(t(r[3],"|"),function(e){"-"===i?delete o[e]:o[e]={}}))})}function m(e){var t,n=S[e];if(n)return n;for(t=w.length;t--;)if(n=w[t],n.pattern.test(e))return n}var h,g,v,y,b,C,_,x,k=this,S={},E={},w=[],N={};n=n||{},g="html5"==n.schema?o():i(),n.verify_html===!1&&(n.valid_elements="*[*]"),n.valid_styles&&(h={},s(n.valid_styles,function(t,n){h[n]=e.explode(t)})),v=d("whitespace_elements","pre script noscript style textarea"),y=d("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),b=d("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr"),C=d("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),x=d("non_empty_elements","td th iframe video audio object",b),textBlockElementsMap=d("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),_=d("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex samp option datalist select optgroup",textBlockElementsMap),n.valid_elements?u(n.valid_elements):(s(g,function(e,t){S[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},E[t]=e.children}),"html5"!=n.schema&&s(t("strong/b,em/i"),function(e){e=t(e,"/"),S[e[1]].outputName=e[0]}),S.img.attributesDefault=[{name:"alt",value:""}],s(t("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr,strong,em,b,i"),function(e){S[e]&&(S[e].removeEmpty=!0)}),s(t("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(e){S[e].paddEmpty=!0})),f(n.custom_elements),p(n.valid_children),l(n.extended_valid_elements),p("+ol[ul|ol],+ul[ul|ol]"),n.invalid_elements&&e.each(e.explode(n.invalid_elements),function(e){S[e]&&delete S[e]}),m("span")||l("span[!data-mce-type|*]"),k.children=E,k.styles=h,k.getBoolAttrs=function(){return C},k.getBlockElements=function(){return _},k.getTextBlockElements=function(){return textBlockElementsMap},k.getShortEndedElements=function(){return b},k.getSelfClosingElements=function(){return y},k.getNonEmptyElements=function(){return x},k.getWhiteSpaceElements=function(){return v},k.isValidChild=function(e,t){var n=E[e];return!(!n||!n[t])},k.isValid=function(e,t){var n,o,i=m(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns)for(o=n.length;o--;)if(n[o].pattern.test(e))return!0}return!1},k.getElementRule=m,k.getCustomElements=function(){return N},k.addValidElements=l,k.setValidElements=u,k.addCustomElements=f,k.addValidChildren=p,k.elements=S}}(tinymce),function(e){e.html.SaxParser=function(t,n){var o=this,i=function(){};t=t||{},o.schema=n=n||new e.html.Schema,t.fix_self_closing!==!1&&(t.fix_self_closing=!0),e.each("comment cdata text start end pi doctype".split(" "),function(e){e&&(o[e]=t[e]||i)}),o.parse=function(o){function i(e){var t,n;for(t=H.length;t--&&H[t].name!==e;);if(t>=0){for(n=H.length-1;n>=t;n--)e=H[n],e.valid&&P.end(e.name);H.length=t}}function r(e,t,n,o,i){var r,a;if(t=t.toLowerCase(),n=t in g?t:U(n||o||i||""),y&&!p&&0!==t.indexOf("data-")){if(r=S[t],!r&&E){for(a=E.length;a--&&(r=E[a],!r.pattern.test(t)););-1===a&&(r=null)}if(!r)return;if(r.validValues&&!(n in r.validValues))return}c.map[t]=n,c.push({name:t,value:n})}var a,s,d,c,l,u,f,p,m,h,g,v,y,b,C,_,x,k,S,E,w,N,T,A,B,M,R,L,D,I,P=this,O=0,H=[],F=0,U=e.html.Entities.decode;for(B=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),M=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,R={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},h=n.getShortEndedElements(),A=t.self_closing_elements||n.getSelfClosingElements(),g=n.getBoolAttrs(),y=t.validate,m=t.remove_internals,D=t.fix_self_closing,I=e.isIE,k=/^:/;a=B.exec(o);){if(O<a.index&&P.text(U(o.substr(O,a.index-O))),s=a[6])s=s.toLowerCase(),I&&k.test(s)&&(s=s.substr(1)),i(s);else if(s=a[7]){if(s=s.toLowerCase(),I&&k.test(s)&&(s=s.substr(1)),v=s in h,D&&A[s]&&H.length>0&&H[H.length-1].name===s&&i(s),!y||(b=n.getElementRule(s))){if(C=!0,y&&(S=b.attributes,E=b.attributePatterns),(x=a[8])?(p=-1!==x.indexOf("data-mce-type"),p&&m&&(C=!1),c=[],c.map={},x.replace(M,r)):(c=[],c.map={}),y&&!p){if(w=b.attributesRequired,N=b.attributesDefault,T=b.attributesForced)for(l=T.length;l--;)_=T[l],f=_.name,L=_.value,"{$uid}"===L&&(L="mce_"+F++),c.map[f]=L,c.push({name:f,value:L});if(N)for(l=N.length;l--;)_=N[l],f=_.name,f in c.map||(L=_.value,"{$uid}"===L&&(L="mce_"+F++),c.map[f]=L,c.push({name:f,value:L}));if(w){for(l=w.length;l--&&!(w[l]in c.map););-1===l&&(C=!1)}c.map["data-mce-bogus"]&&(C=!1)}C&&P.start(s,c,v)}else C=!1;if(d=R[s]){d.lastIndex=O=a.index+a[0].length,(a=d.exec(o))?(C&&(u=o.substr(O,a.index-O)),O=a.index+a[0].length):(u=o.substr(O),O=o.length),C&&u.length>0&&P.text(u,!0),C&&P.end(s),B.lastIndex=O;continue}v||(x&&x.indexOf("/")==x.length-1?C&&P.end(s):H.push({name:s,valid:C}))}else(s=a[1])?P.comment(s):(s=a[2])?P.cdata(s):(s=a[3])?P.doctype(s):(s=a[4])&&P.pi(s,a[5]);O=a.index+a[0].length}for(O<o.length&&P.text(U(o.substr(O))),l=H.length-1;l>=0;l--)s=H[l],s.valid&&P.end(s.name)}}}(tinymce),function(e){function t(e,t,n){var o,i,r=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[r])return e[r];if(e!==t){if(o=e[a])return o;for(i=e.parent;i&&i!==t;i=i.parent)if(o=i[a])return o}}function n(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var o=/^[ \t\r\n]*$/,i={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};e.extend(n.prototype,{replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n,o,i,r=this;if("string"!=typeof e){for(o in e)r.attr(o,e[o]);return r}if(n=r.attributes){if(t!==i){if(null===t){if(e in n.map)for(delete n.map[e],o=n.length;o--;)if(n[o].name===e)return n=n.splice(o,1),r;return r}if(e in n.map){for(o=n.length;o--;)if(n[o].name===e){n[o].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,r}return n.map[e]}},clone:function(){var e,t,o,i,r,a=this,s=new n(a.name,a.type);if(o=a.attributes){for(r=[],r.map={},e=0,t=o.length;t>e;e++)i=o[e],"id"!==i.name&&(r[r.length]={name:i.name,value:i.value},r.map[i.name]=i.value);s.attributes=r}return s.value=a.value,s.shortEnded=a.shortEnded,s},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},remove:function(){var e=this,t=e.parent,n=e.next,o=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):o.next=n,t.lastChild===e?(t.lastChild=o,o&&(o.next=null)):n.prev=o,e.parent=e.next=e.prev=null),e},append:function(e){var t,n=this;return e.parent&&e.remove(),t=n.lastChild,t?(t.next=e,e.prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},insert:function(e,t,n){var o;return e.parent&&e.remove(),o=t.parent||this,n?(t===o.firstChild?o.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===o.lastChild?o.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=o,e},getAll:function(e){var n,o=this,i=[];for(n=o.firstChild;n;n=t(n,o))n.name===e&&i.push(n);return i},empty:function(){var e,n,o,i=this;if(i.firstChild){for(e=[],o=i.firstChild;o;o=t(o,i))e.push(o);for(n=e.length;n--;)o=e[n],o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}return i.firstChild=i.lastChild=null,i},isEmpty:function(e){var n,i,r=this,a=r.firstChild;if(a)do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(e[a.name])return!1;for(n=a.attributes.length;n--;)if(i=a.attributes[n].name,"name"===i||0===i.indexOf("data-mce-"))return!1}if(8===a.type)return!1;if(3===a.type&&!o.test(a.value))return!1}while(a=t(a,r));return!0},walk:function(e){return t(this,null,e)}}),e.extend(n,{create:function(e,t){var o,r;if(o=new n(e,i[e]||1),t)for(r in t)o.attr(r,t[r]);return o}}),e.html.Node=n}(tinymce),function(e){var t=e.html.Node;e.html.DomParser=function(n,o){function i(n){var i,a,s,d,c,l,u,f,p,m,h,g,v,y;for(h=e.makeMap("tr,td,th,tbody,thead,tfoot,table"),m=o.getNonEmptyElements(),g=o.getTextBlockElements(),i=0;i<n.length;i++)if(a=n[i],a.parent&&!a.fixed)if(g[a.name]&&"li"==a.parent.name){for(v=a.next;v&&g[v.name];)v.name="li",v.fixed=!0,a.parent.insert(v,a.parent),v=v.next;a.unwrap(a)}else{for(d=[a],s=a.parent;s&&!o.isValidChild(s.name,a.name)&&!h[s.name];s=s.parent)d.push(s);if(s&&d.length>1){for(d.reverse(),c=l=r.filterNode(d[0].clone()),p=0;p<d.length-1;p++){for(o.isValidChild(l.name,d[p].name)?(u=r.filterNode(d[p].clone()),l.append(u)):u=l,f=d[p].firstChild;f&&f!=d[p+1];)y=f.next,u.append(f),f=y;l=u}c.isEmpty(m)?s.insert(a,d[0],!0):(s.insert(c,d[0],!0),s.insert(a,c)),s=d[0],(s.isEmpty(m)||s.firstChild===s.lastChild&&"br"===s.firstChild.name)&&s.empty().remove()}else if(a.parent){if("li"===a.name){if(v=a.prev,v&&("ul"===v.name||"ul"===v.name)){v.append(a);continue}if(v=a.next,v&&("ul"===v.name||"ul"===v.name)){v.insert(a,v.firstChild,!0);continue}a.wrap(r.filterNode(new t("ul",1)));continue}o.isValidChild(a.parent.name,"div")&&o.isValidChild("div",a.name)?a.wrap(r.filterNode(new t("div",1))):"style"===a.name||"script"===a.name?a.empty().remove():a.unwrap()}}}var r=this,a={},s=[],d={},c={};n=n||{},n.validate="validate"in n?n.validate:!0,n.root_name=n.root_name||"body",r.schema=o=o||new e.html.Schema,r.filterNode=function(e){var t,n,o;n in a&&(o=d[n],o?o.push(e):d[n]=[e]),t=s.length;for(;t--;)n=s[t].name,n in e.attributes.map&&(o=c[n],o?o.push(e):c[n]=[e]);return e},r.addNodeFilter=function(t,n){e.each(e.explode(t),function(e){var t=a[e];t||(a[e]=t=[]),t.push(n)})},r.addAttributeFilter=function(t,n){e.each(e.explode(t),function(e){var t;for(t=0;t<s.length;t++)if(s[t].name===e)return void s[t].callbacks.push(n);s.push({name:e,callbacks:[n]})})},r.parse=function(r,l){function u(){for(var e,t,n=g.firstChild;n;)e=n.next,3==n.type||1==n.type&&"p"!==n.name&&!w[n.name]&&!n.attr("data-mce-type")?t?t.append(n):(t=f(I,1),g.insert(t,n),t.append(n)):t=null,n=e}function f(e,n){var o,i=new t(e,n);return e in a&&(o=d[e],o?o.push(i):d[e]=[i]),i}function p(e){var t,n,o;for(t=e.prev;t&&3===t.type;)n=t.value.replace(A,""),n.length>0?(t.value=n,t=t.prev):(o=t.prev,t.remove(),t=o)}function m(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var h,g,v,y,b,C,_,x,k,S,E,w,N,T,A,B,M,R,L,D,I,P=[];if(l=l||{},d={},c={},w=e.extend(e.makeMap("script,style,head,html,body,title,meta,param"),o.getBlockElements()),D=o.getNonEmptyElements(),L=o.children,E=n.validate,I="forced_root_block"in l?l.forced_root_block:n.forced_root_block,R=o.getWhiteSpaceElements(),N=/^[ \t\r\n]+/,A=/[ \t\r\n]+$/,B=/[ \t\r\n]+/g,M=/^[ \t\r\n]+$/,h=new e.html.SaxParser({validate:E,self_closing_elements:m(o.getSelfClosingElements()),cdata:function(e){v.append(f("#cdata",4)).value=e},text:function(e,t){var n;T||(e=e.replace(B," "),v.lastChild&&w[v.lastChild.name]&&(e=e.replace(N,""))),0!==e.length&&(n=f("#text",3),n.raw=!!t,v.append(n).value=e)},comment:function(e){v.append(f("#comment",8)).value=e},pi:function(e,t){v.append(f(e,7)).value=t,p(v)},doctype:function(e){var t;t=v.append(f("#doctype",10)),t.value=e,p(v)},start:function(e,t,n){var i,r,a,d,l;if(a=E?o.getElementRule(e):{}){for(i=f(a.outputName||e,1),i.attributes=t,i.shortEnded=n,v.append(i),l=L[v.name],l&&L[i.name]&&!l[i.name]&&P.push(i),r=s.length;r--;)d=s[r].name,d in t.map&&(k=c[d],k?k.push(i):c[d]=[i]);w[e]&&p(i),n||(v=i),!T&&R[e]&&(T=!0)}},end:function(e){var n,i,r,a,s;if(i=E?o.getElementRule(e):{}){if(w[e]&&!T){if(n=v.firstChild,n&&3===n.type)for(r=n.value.replace(N,""),r.length>0?(n.value=r,n=n.next):(a=n.next,n.remove(),n=a);n&&3===n.type;)r=n.value,a=n.next,(0===r.length||M.test(r))&&(n.remove(),n=a),n=a;if(n=v.lastChild,n&&3===n.type)for(r=n.value.replace(A,""),r.length>0?(n.value=r,n=n.prev):(a=n.prev,n.remove(),n=a);n&&3===n.type;)r=n.value,a=n.prev,(0===r.length||M.test(r))&&(n.remove(),n=a),n=a}if(T&&R[e]&&(T=!1),(i.removeEmpty||i.paddEmpty)&&v.isEmpty(D))if(i.paddEmpty)v.empty().append(new t("#text","3")).value=" ";else if(!v.attributes.map.name&&!v.attributes.map.id)return s=v.parent,v.empty().remove(),void(v=s);v=v.parent}}},o),g=v=new t(l.context||n.root_name,11),h.parse(r),E&&P.length&&(l.context?l.invalid=!0:i(P)),I&&"body"==g.name&&u(),!l.invalid){for(S in d){for(k=a[S],y=d[S],_=y.length;_--;)y[_].parent||y.splice(_,1);for(b=0,C=k.length;C>b;b++)k[b](y,S,l)}for(b=0,C=s.length;C>b;b++)if(k=s[b],k.name in c){for(y=c[k.name],_=y.length;_--;)y[_].parent||y.splice(_,1);for(_=0,x=k.callbacks.length;x>_;_++)k.callbacks[_](y,k.name,l)}}return g},n.remove_trailing_brs&&r.addNodeFilter("br",function(t){var n,i,r,a,s,d,c=t.length,l=e.extend({},o.getBlockElements()),u=o.getNonEmptyElements();for(l.body=1,n=0;c>n;n++)if(i=t[n],r=i.parent,l[i.parent.name]&&i===r.lastChild){for(s=i.prev;s;){if(d=s.name,"span"!==d||"bookmark"!==s.attr("data-mce-type")){if("br"!==d)break;if("br"===d){i=null;break}}s=s.prev}i&&(i.remove(),r.isEmpty(u)&&(elementRule=o.getElementRule(r.name),elementRule&&(elementRule.removeEmpty?r.remove():elementRule.paddEmpty&&(r.empty().append(new e.html.Node("#text",3)).value=" "))))}else{for(a=i;r.firstChild===a&&r.lastChild===a&&(a=r,!l[r.name]);)r=r.parent;a===r&&(textNode=new e.html.Node("#text",3),textNode.value=" ",i.replace(textNode))}}),n.allow_html_in_named_anchor||r.addAttributeFilter("id,name",function(e){for(var t,n,o,i,r=e.length;r--;)if(i=e[r],"a"===i.name&&i.firstChild&&!i.attr("href")){o=i.parent,t=i.lastChild;do n=t.prev,o.insert(t,i),t=n;while(t)}})}}(tinymce),tinymce.html.Writer=function(e){var t,n,o,i,r,a=[];return e=e||{},t=e.indent,n=tinymce.makeMap(e.indent_before||""),o=tinymce.makeMap(e.indent_after||""),i=tinymce.html.Entities.getEncodeFunc(e.entity_encoding||"raw",e.entities),r="html"==e.element_format,{start:function(e,s,d){var c,l,u,f;if(t&&n[e]&&a.length>0&&(f=a[a.length-1],f.length>0&&"\n"!==f&&a.push("\n")),a.push("<",e),s)for(c=0,l=s.length;l>c;c++)u=s[c],a.push(" ",u.name,'="',i(u.value,!0),'"');a[a.length]=!d||r?">":" />",d&&t&&o[e]&&a.length>0&&(f=a[a.length-1],f.length>0&&"\n"!==f&&a.push("\n"))},end:function(e){var n;a.push("</",e,">"),t&&o[e]&&a.length>0&&(n=a[a.length-1],n.length>0&&"\n"!==n&&a.push("\n"))},text:function(e,t){e.length>0&&(a[a.length]=t?e:i(e))},cdata:function(e){a.push("<![CDATA[",e,"]]>")},comment:function(e){a.push("<!--",e,"-->")},pi:function(e,n){n?a.push("<?",e," ",n,"?>"):a.push("<?",e,"?>"),t&&a.push("\n")},doctype:function(e){a.push("<!DOCTYPE",e,">",t?"\n":"")},reset:function(){a.length=0},getContent:function(){return a.join("").replace(/\n$/,"")}}},function(e){e.html.Serializer=function(t,n){var o=this,i=new e.html.Writer(t);t=t||{},t.validate="validate"in t?t.validate:!0,o.schema=n=n||new e.html.Schema,o.writer=i,o.serialize=function(e){function o(e){var t,s,d,c,l,u,f,p,m,h=r[e.type];if(h)h(e);else{if(t=e.name,s=e.shortEnded,d=e.attributes,a&&d&&d.length>1){for(u=[],u.map={},m=n.getElementRule(e.name),f=0,p=m.attributesOrder.length;p>f;f++)c=m.attributesOrder[f],c in d.map&&(l=d.map[c],u.map[c]=l,u.push({name:c,value:l}));for(f=0,p=d.length;p>f;f++)c=d[f].name,c in u.map||(l=d.map[c],u.map[c]=l,u.push({name:c,value:l}));d=u}if(i.start(e.name,d,s),!s){if(e=e.firstChild)do o(e);while(e=e.next);i.end(t)}}}var r,a;return a=t.validate,r={3:function(e){i.text(e.value,e.raw)},8:function(e){i.comment(e.value)},7:function(e){i.pi(e.name,e.value)},10:function(e){i.doctype(e.value)},4:function(e){i.cdata(e.value)},11:function(e){if(e=e.firstChild)do o(e);while(e=e.next)}},i.reset(),1!=e.type||t.inner?r[11](e):o(e),i.getContent()}}}(tinymce),tinymce.dom={},function(e,t){function n(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function o(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function i(e,t){function n(){return!1}function o(){return!0}var i,r=t||{};for(i in e)"layerX"!==i&&"layerY"!==i&&(r[i]=e[i]);return r.target||(r.target=r.srcElement||document),r.preventDefault=function(){r.isDefaultPrevented=o,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},r.stopPropagation=function(){r.isPropagationStopped=o,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=o,r.stopPropagation()},r.isDefaultPrevented||(r.isDefaultPrevented=n,r.isPropagationStopped=n,r.isImmediatePropagationStopped=n),r}function r(e,t,i){function r(){i.domLoaded||(i.domLoaded=!0,t(d))}var a=e.document,d={type:"ready"};return"complete"==a.readyState?void r():(s?n(e,"DOMContentLoaded",r):(n(a,"readystatechange",function(){"complete"===a.readyState&&(o(a,"readystatechange",arguments.callee),r())}),a.documentElement.doScroll&&e===e.top&&!function(){try{a.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}r()}()),void n(e,"load",r))}function a(e){function a(e,t){var n,o,i,r;if(n=p[t][e.type])for(o=0,i=n.length;i>o;o++)if(r=n[o],r&&r.func.call(r.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}var d,c,l,u,f=this,p={};l="onmouseenter"in document.documentElement,c="onfocusin"in document.documentElement,u={mouseenter:"mouseover",mouseleave:"mouseout"},d=1,f.domLoaded=!1,f.events=p,f.bind=function(o,m,h,g){function v(e){a(i(e||E.event),y)}var y,b,C,_,x,k,S,E=window;if(o&&3!==o.nodeType&&8!==o.nodeType){for(o[t]?(y=o[t],p[y]||(p[y]={})):(y=d++,o[t]=y,p[y]={}),g=g||o,m=m.split(" "),C=m.length;C--;)_=m[C],k=v,x=S=!1,"DOMContentLoaded"===_&&(_="ready"),!f.domLoaded&&"complete"!=o.readyState||"ready"!==_?(l||(x=u[_],x&&(k=function(e){var t,n;if(t=e.currentTarget,n=e.relatedTarget,n&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||(e=i(e||E.event),e.type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,a(e,y))})),c||"focusin"!==_&&"focusout"!==_||(S=!0,x="focusin"===_?"focus":"blur",k=function(e){e=i(e||E.event),e.type="focus"===e.type?"focusin":"focusout",a(e,y)}),b=p[y][_],b?b.push({func:h,scope:g}):(p[y][_]=b=[{func:h,scope:g}],b.fakeName=x,b.capture=S,b.nativeHandler=k,s||(b.proxyHandler=e(y)),"ready"===_?r(o,k,f):n(o,x||_,s?k:b.proxyHandler,S))):(f.domLoaded=!0,h.call(g,i({type:_})));return o=b=0,h}},f.unbind=function(e,n,i){var r,a,d,c,l,u;if(!e||3===e.nodeType||8===e.nodeType)return f;if(r=e[t]){if(u=p[r],n){for(n=n.split(" "),d=n.length;d--;)if(l=n[d],a=u[l]){if(i)for(c=a.length;c--;)a[c].func===i&&a.splice(c,1);i&&0!==a.length||(delete u[l],o(e,a.fakeName||l,s?a.nativeHandler:a.proxyHandler,a.capture))}}else{for(l in u)a=u[l],o(e,a.fakeName||l,s?a.nativeHandler:a.proxyHandler,a.capture);u={}}for(l in u)return f;delete p[r];try{delete e[t]}catch(m){e[t]=null}}return f},f.fire=function(e,n,o){var r,s;if(!e||3===e.nodeType||8===e.nodeType)return f;s=i(null,o),s.type=n;do r=e[t],r&&a(s,r),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow;while(e&&!s.isPropagationStopped());return f},f.clean=function(e){var n,o,i=f.unbind;if(!e||3===e.nodeType||8===e.nodeType)return f;if(e[t]&&i(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(i(e),o=e.getElementsByTagName("*"),n=o.length;n--;)e=o[n],e[t]&&i(e);return f},f.callNativeHandler=function(e,t){p&&p[e][t.type].nativeHandler(t)},f.destory=function(){p={}},f.add=function(e,t,n,o){"string"==typeof e&&(e=document.getElementById(e));{if(!(e&&e instanceof Array))return"init"===t&&(t="ready"),f.bind(e,t instanceof Array?t.join(" "):t,n,o);for(var i=e.length;i--;)f.add(e[i],t,n,o)}},f.remove=function(e,t,n,o){if(!e)return f;if("string"==typeof e&&(e=document.getElementById(e)),e instanceof Array){for(var i=e.length;i--;)f.remove(e[i],t,n,o);return f}return f.unbind(e,t instanceof Array?t.join(" "):t,n)},f.clear=function(e){return"string"==typeof e&&(e=document.getElementById(e)),f.clean(e)},f.cancel=function(e){return e&&(f.prevent(e),f.stop(e)),!1},f.prevent=function(e){return e.preventDefault||(e=i(e)),e.preventDefault(),!1},f.stop=function(e){return e.stopPropagation||(e=i(e)),e.stopPropagation(),!1}}var s=!!document.addEventListener;e.EventUtils=a,e.Event=new a(function(e){return function(t){tinymce.dom.Event.callNativeHandler(e,t)}}),e.Event.bind(window,"ready",function(){}),e=0}(tinymce.dom,"data-mce-expando"),tinymce.dom.TreeWalker=function(e,t){function n(e,n,o,i){var r,a;if(e){if(!i&&e[n])return e[n];if(e!=t){if(r=e[o])return r;for(a=e.parentNode;a&&a!=t;a=a.parentNode)if(r=a[o])return r}}}var o=e;this.current=function(){return o},this.next=function(e){return o=n(o,"firstChild","nextSibling",e)},this.prev=function(e){return o=n(o,"lastChild","previousSibling",e)}},function(e){var t=e.each,n=e.is,o=e.isWebKit,i=e.isIE,r=e.html.Entities,a=/^[ \t\r\n]*$/;e.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(t,n){var o,i=this;if(i.doc=t,i.win=window,i.files={},i.cssFlicker=!1,i.counter=0,i.stdMode=!e.isIE||t.documentMode>=8,i.boxModel=!e.isIE||"CSS1Compat"==t.compatMode||i.stdMode,i.hasOuterHTML="outerHTML"in t.createElement("a"),i.settings=n=e.extend({keep_values:!1,hex_colors:1},n),i.schema=n.schema,i.styles=new e.html.Styles({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),e.isIE6)try{t.execCommand("BackgroundImageCache",!1,!0)}catch(r){i.cssFlicker=!0}i.fixDoc(t),i.events=n.ownEvents?new e.dom.EventUtils(n.proxy):e.dom.Event,e.addUnload(i.destroy,i),o=n.schema?n.schema.getBlockElements():{},i.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!o[e.nodeName]):!!o[e]}},fixDoc:function(e){var t,n=this.settings;if(i&&n.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(t in n.schema.getCustomElements())e.createElement(t)}},clone:function(e,n){var o,r,a=this;return!i||1!==e.nodeType||n?e.cloneNode(n):(r=a.doc,n?o.firstChild:(o=r.createElement(e.nodeName),t(a.getAttribs(e),function(t){a.setAttrib(o,t.nodeName,a.getAttrib(e,t.nodeName))}),o))},getRoot:function(){var e=this,t=e.settings;return t&&e.get(t.root_element)||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,o=this;return e=o.get(e),t=o.getPos(e),n=o.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,o=this;return e=o.get(e),t=o.getStyle(e,"width"),n=o.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,t,o,i){var r,a=this,s=a.settings,d=[];for(e=a.get(e),i=void 0===i,s.strict_root&&(o=o||a.getRoot()),n(t,"string")&&(r=t,t="*"===t?function(e){return 1==e.nodeType}:function(e){return a.is(e,r)});e&&e!=o&&e.nodeType&&9!==e.nodeType;){if(!t||t(e)){if(!i)return e;d.push(e)}e=e.parentNode}return i?d:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},add:function(e,t,o,i,r){var a=this;return this.run(e,function(e){var s;return s=n(t,"string")?a.doc.createElement(t):t,a.setAttribs(s,o),i&&(i.nodeType?s.appendChild(i):a.setHTML(s,i)),r?s:e.appendChild(s)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var o,i="",r=this;i+="<"+e;for(o in t)t.hasOwnProperty(o)&&(i+=" "+o+'="'+r.encode(t[o])+'"');return"undefined"!=typeof n?i+">"+n+"</"+e+">":i+" />"},remove:function(t,n){return this.run(t,function(t){var o,i=t.parentNode;if(!i)return null;if(n)for(;o=t.firstChild;)!e.isIE||3!==o.nodeType||o.nodeValue?i.insertBefore(o,t):t.removeChild(o);return i.removeChild(t)})},setStyle:function(t,n,o){var r=this;return r.run(t,function(a){var s;switch(s=a.style,n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),r.pixelStyles.test(n)&&(e.is(o,"number")||/^[\-0-9\.]+$/.test(o))&&(o+="px"),n){case"opacity":i&&(s.filter=""===o?"":"alpha(opacity="+100*o+")",t.currentStyle&&t.currentStyle.hasLayout||(s.display="inline-block")),s[n]=s["-moz-opacity"]=s["-khtml-opacity"]=o||"";break;case"float":i?s.styleFloat=o:s.cssFloat=o;break;default:s[n]=o||""}r.settings.update_styles&&r.setAttrib(a,"data-mce-style")})},getStyle:function(e,t,n){if(e=this.get(e)){if(this.doc.defaultView&&n){t=t.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(t)}catch(o){return null}}return t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==t&&(t=i?"styleFloat":"cssFloat"),e.currentStyle&&n?e.currentStyle[t]:e.style?e.style[t]:void 0}},setStyles:function(e,n){var o,i=this,r=i.settings;o=r.update_styles,r.update_styles=0,t(n,function(t,n){i.setStyle(e,n,t)}),r.update_styles=o,r.update_styles&&i.setAttrib(e,r.cssText)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,o,i){var r=this;if(e&&o)return r.settings.strict&&(o=o.toLowerCase()),this.run(e,function(e){var a=r.settings,s=e.getAttribute(o);if(null!==i)switch(o){case"style":if(!n(i,"string"))return void t(i,function(t,n){r.setStyle(e,n,t)});a.keep_values&&(i&&!r._isRes(i)?e.setAttribute("data-mce-style",i,2):e.removeAttribute("data-mce-style",2)),e.style.cssText=i;break;case"class":e.className=i||"";break;case"src":case"href":a.keep_values&&(a.url_converter&&(i=a.url_converter.call(a.url_converter_scope||r,i,o,e)),r.setAttrib(e,"data-mce-"+o,i,2));break;case"shape":e.setAttribute("data-mce-style",i)}if(n(i)&&null!==i&&0!==i.length?e.setAttribute(o,""+i,2):e.removeAttribute(o,2),tinyMCE.activeEditor&&s!=i){var d=tinyMCE.activeEditor;d.onSetAttrib.dispatch(d,e,o,i)
}})},setAttribs:function(e,n){var o=this;return this.run(e,function(e){t(n,function(t,n){o.setAttrib(e,n,t)})})},getAttrib:function(t,r,a){var s,d,c=this;if(t=c.get(t),!t||1!==t.nodeType)return a===d?!1:a;if(n(a)||(a=""),/^(src|href|style|coords|shape)$/.test(r)&&(s=t.getAttribute("data-mce-"+r)))return s;if(i&&c.props[r]&&(s=t[c.props[r]],s=s&&s.nodeValue?s.nodeValue:s),s||(s=t.getAttribute(r,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(r))return t[c.props[r]]===!0&&""===s?r:s?r:"";if("FORM"===t.nodeName&&t.getAttributeNode(r))return t.getAttributeNode(r).nodeValue;if("style"===r&&(s=s||t.style.cssText,s&&(s=c.serializeStyle(c.parseStyle(s),t.nodeName),c.settings.keep_values&&!c._isRes(s)&&t.setAttribute("data-mce-style",s))),o&&"class"===r&&s&&(s=s.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),i)switch(r){case"rowspan":case"colspan":1===s&&(s="");break;case"size":("+0"===s||20===s||0===s)&&(s="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===s&&(s="");break;case"hspace":-1===s&&(s="");break;case"maxlength":case"tabindex":(32768===s||2147483647===s||"32768"===s)&&(s="");break;case"multiple":case"compact":case"noshade":case"nowrap":return 65535===s?r:a;case"shape":s=s.toLowerCase();break;default:0===r.indexOf("on")&&s&&(s=e._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+s))}return s!==d&&null!==s&&""!==s?""+s:a},getPos:function(e,t){var n,o,i=this,r=0,a=0,s=i.doc;if(e=i.get(e),t=t||s.body,e){if(e.getBoundingClientRect)return e=e.getBoundingClientRect(),n=i.boxModel?s.documentElement:s.body,r=e.left+(s.documentElement.scrollLeft||s.body.scrollLeft)-n.clientTop,a=e.top+(s.documentElement.scrollTop||s.body.scrollTop)-n.clientLeft,{x:r,y:a};for(o=e;o&&o!=t&&o.nodeType;)r+=o.offsetLeft||0,a+=o.offsetTop||0,o=o.offsetParent;for(o=e.parentNode;o&&o!=t&&o.nodeType;)r-=o.scrollLeft||0,a-=o.scrollTop||0,o=o.parentNode}return{x:r,y:a}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t,n=this.doc;styleElm=n.getElementById("mceDefaultStyles"),styleElm||(styleElm=n.createElement("style"),styleElm.id="mceDefaultStyles",styleElm.type="text/css",t=n.getElementsByTagName("head")[0],t.firstChild?t.insertBefore(styleElm,t.firstChild):t.appendChild(styleElm)),styleElm.styleSheet?styleElm.styleSheet.cssText+=e:styleElm.appendChild(n.createTextNode(e))},loadCSS:function(n){var o,r=this,a=r.doc;n||(n=""),o=a.getElementsByTagName("head")[0],t(n.split(","),function(t){var n;r.files[t]||(r.files[t]=!0,n=r.create("link",{rel:"stylesheet",href:e._addVer(t)}),i&&a.documentMode&&a.recalc&&(n.onload=function(){a.recalc&&a.recalc(),n.onload=null}),o.appendChild(n))})},addClass:function(e,t){return this.run(e,function(e){var n;return t?this.hasClass(e,t)?e.className:(n=this.removeClass(e,t),e.className=(""!=n?n+" ":"")+t):0})},removeClass:function(t,n){var o,i=this;return i.run(t,function(t){var r;return i.hasClass(t,n)?(o||(o=new RegExp("(^|\\s+)"+n+"(\\s+|$)","g")),r=t.className.replace(o," "),r=e.trim(" "!=r?r:""),t.className=r,r||(t.removeAttribute("class"),t.removeAttribute("className")),r):t.className})},hasClass:function(e,t){return e=this.get(e),e&&t?-1!==(" "+e.className+" ").indexOf(" "+t+" "):!1},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return e=this.get(e),!e||"none"==e.style.display||"none"==this.getStyle(e,"display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(n,o){var r=this;return r.run(n,function(n){if(i){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br />"+o,n.removeChild(n.firstChild)}catch(a){var s=r.create("div");s.innerHTML="<br />"+o,t(e.grep(s.childNodes),function(e,t){t&&n.canHaveHTML&&n.appendChild(e)})}}else n.innerHTML=o;return o})},getOuterHTML:function(e){var t,n=this;return(e=n.get(e))?1===e.nodeType&&n.hasOuterHTML?e.outerHTML:(t=(e.ownerDocument||n.doc).createElement("body"),t.appendChild(e.cloneNode(!0)),t.innerHTML):null},setOuterHTML:function(e,t,n){function o(e,t,n){var o,i;for(i=n.createElement("body"),i.innerHTML=t,o=i.lastChild;o;)r.insertAfter(o.cloneNode(!0),e),o=o.previousSibling;r.remove(e)}var r=this;return this.run(e,function(e){if(e=r.get(e),1==e.nodeType)if(n=n||e.ownerDocument||r.doc,i)try{i&&1==e.nodeType?e.outerHTML=t:o(e,t,n)}catch(a){o(e,t,n)}else o(e,t,n)})},decode:r.decode,encode:r.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,o;return n=t.parentNode,o=t.nextSibling,o?n.insertBefore(e,o):n.appendChild(e),e})},replace:function(o,i,r){var a=this;return n(i,"array")&&(o=o.cloneNode(!0)),a.run(i,function(n){return r&&t(e.grep(n.childNodes),function(e){o.appendChild(e)}),n.parentNode.replaceChild(o,n)})},rename:function(e,n){var o,i=this;return e.nodeName!=n.toUpperCase()&&(o=i.create(n),t(i.getAttribs(e),function(t){i.setAttrib(o,t.nodeName,i.getAttrib(e,t.nodeName))}),i.replace(o,e,1)),o||e},findCommonAncestor:function(e,t){for(var n,o=e;o;){for(n=t;n&&o!=n;)n=n.parentNode;if(o==n)break;o=o.parentNode}return!o&&e.ownerDocument?e.ownerDocument.documentElement:o},toHex:function(e){function t(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}var n=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(e);return n?e="#"+t(n[1])+t(n[2])+t(n[3]):e},getClasses:function(){function n(i){t(i.imports,function(e){n(e)}),t(i.cssRules||i.rules,function(i){switch(i.type||1){case 1:i.selectorText&&t(i.selectorText.split(","),function(t){t=t.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(t)&&/\.[\w\-]+$/.test(t)&&(o=t,t=e._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",t),(!s||(t=s(t,o)))&&(a[t]||(r.push({"class":t}),a[t]=1)))});break;case 3:n(i.styleSheet)}})}var o,i=this,r=[],a={},s=i.settings.class_filter;if(i.classes)return i.classes;try{t(i.doc.styleSheets,n)}catch(d){}return r.length>0&&(i.classes=r),r},run:function(e,n,o){var i,r=this;return r.doc&&"string"==typeof e&&(e=r.get(e)),e?(o=o||this,e.nodeType||!e.length&&0!==e.length?n.call(o,e):(i=[],t(e,function(e,t){e&&("string"==typeof e&&(e=r.doc.getElementById(e)),i.push(n.call(o,e,t)))}),i)):!1},getAttribs:function(e){var t;return e=this.get(e),e?i?(t=[],"OBJECT"==e.nodeName?e.attributes:("OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"}),e.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t)):e.attributes:[]},isEmpty:function(t,n){var o,i,r,s,d,c=this,l=0;if(t=t.firstChild){s=new e.dom.TreeWalker(t,t.parentNode),n=n||c.schema?c.schema.getNonEmptyElements():null;do{if(r=t.nodeType,1===r){if(t.getAttribute("data-mce-bogus"))continue;if(d=t.nodeName.toLowerCase(),n&&n[d]){if("br"===d){l++;continue}return!1}for(i=c.getAttribs(t),o=t.attributes.length;o--;)if(d=t.attributes[o].nodeName,"name"===d||"data-mce-bookmark"===d)return!1}if(8==r)return!1;if(3===r&&!a.test(t.nodeValue))return!1}while(t=s.next())}return 1>=l},destroy:function(t){var n=this;n.win=n.doc=n.root=n.events=n.frag=null,t||e.removeUnload(n.destroy)},createRng:function(){var t=this.doc;return t.createRange?t.createRange():new e.dom.Range(this)},nodeIndex:function(e,t){var n,o,i,r=0;if(e)for(n=e.nodeType,e=e.previousSibling,o=e;e;e=e.previousSibling)i=e.nodeType,(!t||3!=i||i!=n&&e.nodeValue.length)&&(r++,n=i);return r},split:function(t,n,o){function i(t){function n(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var o,r=t.childNodes,a=t.nodeType;if(1!=a||"bookmark"!=t.getAttribute("data-mce-type")){for(o=r.length-1;o>=0;o--)i(r[o]);if(9!=a){if(3==a&&t.nodeValue.length>0){var s=e.trim(t.nodeValue).length;if(!d.isBlock(t.parentNode)||s>0||0===s&&n(t))return}else if(1==a&&(r=t.childNodes,1==r.length&&r[0]&&1==r[0].nodeType&&"bookmark"==r[0].getAttribute("data-mce-type")&&t.parentNode.insertBefore(r[0],t),r.length||/^(br|hr|input|img)$/i.test(t.nodeName)))return;d.remove(t)}return t}}var r,a,s,d=this,c=d.createRng();return t&&n?(c.setStart(t.parentNode,d.nodeIndex(t)),c.setEnd(n.parentNode,d.nodeIndex(n)),r=c.extractContents(),c=d.createRng(),c.setStart(n.parentNode,d.nodeIndex(n)+1),c.setEnd(t.parentNode,d.nodeIndex(t)+1),a=c.extractContents(),s=t.parentNode,s.insertBefore(i(r),t),o?s.replaceChild(o,n):s.insertBefore(n,t),s.insertBefore(i(a),t),d.remove(t),o||n):void 0},bind:function(e,t,n,o){return this.events.add(e,t,n,o||this)},unbind:function(e,t,n){return this.events.remove(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return 1!=e.nodeType?null:(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null)},_findSib:function(e,t,o){var i=this,r=t;if(e)for(n(r,"string")&&(r=function(e){return i.is(e,t)}),e=e[o];e;e=e[o])if(r(e))return e;return null},_isRes:function(e){return/^(top|left|bottom|right|width|height)/i.test(e)||/;\s*(top|left|bottom|right|width|height)/i.test(e)}}),e.DOM=new e.dom.DOMUtils(document,{process_html:0})}(tinymce),function(e){function t(e){function n(){return D.createDocumentFragment()}function o(e,t){x(H,e,t)}function i(e,t){x(F,e,t)}function r(e){o(e.parentNode,j(e))}function a(e){o(e.parentNode,j(e)+1)}function s(e){i(e.parentNode,j(e))}function d(e){i(e.parentNode,j(e)+1)}function c(e){e?(L[z]=L[V],L[q]=L[U]):(L[V]=L[z],L[U]=L[q]),L.collapsed=H}function l(e){r(e),d(e)}function u(e){o(e,0),i(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function f(e,t){var n=L[V],o=L[U],i=L[z],r=L[q],a=t.startContainer,s=t.startOffset,d=t.endContainer,c=t.endOffset;return 0===e?_(n,o,a,s):1===e?_(i,r,a,s):2===e?_(i,r,d,c):3===e?_(n,o,d,c):void 0}function p(){k(O)}function m(){return k(I)}function h(){return k(P)}function g(t){var n,o,i=this[V],r=this[U];3!==i.nodeType&&4!==i.nodeType||!i.nodeValue?(i.childNodes.length>0&&(o=i.childNodes[r]),o?i.insertBefore(t,o):i.appendChild(t)):r?r>=i.nodeValue.length?e.insertAfter(t,i):(n=i.splitText(r),i.parentNode.insertBefore(t,n)):i.parentNode.insertBefore(t,i)}function v(e){var t=L.extractContents();L.insertNode(e),e.appendChild(t),L.selectNode(e)}function y(){return K(new t(e),{startContainer:L[V],startOffset:L[U],endContainer:L[z],endOffset:L[q],collapsed:L.collapsed,commonAncestorContainer:L.commonAncestorContainer})}function b(e,t){var n;if(3==e.nodeType)return e;if(0>t)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n?n:e}function C(){return L[V]==L[z]&&L[U]==L[q]}function _(t,n,o,i){var r,a,s,d,c,l;if(t==o)return n==i?0:i>n?-1:1;for(r=o;r&&r.parentNode!=t;)r=r.parentNode;if(r){for(a=0,s=t.firstChild;s!=r&&n>a;)a++,s=s.nextSibling;return a>=n?-1:1}for(r=t;r&&r.parentNode!=o;)r=r.parentNode;if(r){for(a=0,s=o.firstChild;s!=r&&i>a;)a++,s=s.nextSibling;return i>a?-1:1}for(d=e.findCommonAncestor(t,o),c=t;c&&c.parentNode!=d;)c=c.parentNode;for(c||(c=d),l=o;l&&l.parentNode!=d;)l=l.parentNode;if(l||(l=d),c==l)return 0;for(s=d.firstChild;s;){if(s==c)return-1;if(s==l)return 1;s=s.nextSibling}}function x(t,n,o){var i,r;for(t?(L[V]=n,L[U]=o):(L[z]=n,L[q]=o),i=L[z];i.parentNode;)i=i.parentNode;for(r=L[V];r.parentNode;)r=r.parentNode;r==i?_(L[V],L[U],L[z],L[q])>0&&L.collapse(t):L.collapse(t),L.collapsed=C(),L.commonAncestorContainer=e.findCommonAncestor(L[V],L[z])}function k(e){var t,n,o,i,r,a,s,d=0,c=0;if(L[V]==L[z])return S(e);for(t=L[z],n=t.parentNode;n;t=n,n=n.parentNode){if(n==L[V])return E(t,e);++d}for(t=L[V],n=t.parentNode;n;t=n,n=n.parentNode){if(n==L[z])return w(t,e);++c}for(o=c-d,i=L[V];o>0;)i=i.parentNode,o--;for(r=L[z];0>o;)r=r.parentNode,o++;for(a=i.parentNode,s=r.parentNode;a!=s;a=a.parentNode,s=s.parentNode)i=a,r=s;return N(i,r,e)}function S(e){var t,o,i,r,a,s,d,c,l;if(e!=O&&(t=n()),L[U]==L[q])return t;if(3==L[V].nodeType){if(o=L[V].nodeValue,i=o.substring(L[U],L[q]),e!=P&&(r=L[V],c=L[U],l=L[q]-L[U],0===c&&l>=r.nodeValue.length-1?r.parentNode.removeChild(r):r.deleteData(c,l),L.collapse(H)),e==O)return;return i.length>0&&t.appendChild(D.createTextNode(i)),t}for(r=b(L[V],L[U]),a=L[q]-L[U];r&&a>0;)s=r.nextSibling,d=M(r,e),t&&t.appendChild(d),--a,r=s;return e!=P&&L.collapse(H),t}function E(e,t){var o,i,r,a,s,d;if(t!=O&&(o=n()),i=T(e,t),o&&o.appendChild(i),r=j(e),a=r-L[U],0>=a)return t!=P&&(L.setEndBefore(e),L.collapse(F)),o;for(i=e.previousSibling;a>0;)s=i.previousSibling,d=M(i,t),o&&o.insertBefore(d,o.firstChild),--a,i=s;return t!=P&&(L.setEndBefore(e),L.collapse(F)),o}function w(e,t){var o,i,r,a,s,d;for(t!=O&&(o=n()),r=A(e,t),o&&o.appendChild(r),i=j(e),++i,a=L[q]-i,r=e.nextSibling;r&&a>0;)s=r.nextSibling,d=M(r,t),o&&o.appendChild(d),--a,r=s;return t!=P&&(L.setStartAfter(e),L.collapse(H)),o}function N(e,t,o){var i,r,a,s,d,c,l,u;for(o!=O&&(r=n()),i=A(e,o),r&&r.appendChild(i),a=e.parentNode,s=j(e),d=j(t),++s,c=d-s,l=e.nextSibling;c>0;)u=l.nextSibling,i=M(l,o),r&&r.appendChild(i),l=u,--c;return i=T(t,o),r&&r.appendChild(i),o!=P&&(L.setStartAfter(e),L.collapse(H)),r}function T(e,t){var n,o,i,r,a,s=b(L[z],L[q]-1),d=s!=L[z];if(s==e)return B(s,d,F,t);for(n=s.parentNode,o=B(n,F,F,t);n;){for(;s;)i=s.previousSibling,r=B(s,d,F,t),t!=O&&o.insertBefore(r,o.firstChild),d=H,s=i;if(n==e)return o;s=n.previousSibling,n=n.parentNode,a=B(n,F,F,t),t!=O&&a.appendChild(o),o=a}}function A(e,t){var n,o,i,r,a,s=b(L[V],L[U]),d=s!=L[V];if(s==e)return B(s,d,H,t);for(n=s.parentNode,o=B(n,F,H,t);n;){for(;s;)i=s.nextSibling,r=B(s,d,H,t),t!=O&&o.appendChild(r),d=H,s=i;if(n==e)return o;s=n.nextSibling,n=n.parentNode,a=B(n,F,H,t),t!=O&&a.appendChild(o),o=a}}function B(t,n,o,i){var r,a,s,d,c;if(n)return M(t,i);if(3==t.nodeType){if(r=t.nodeValue,o?(d=L[U],a=r.substring(d),s=r.substring(0,d)):(d=L[q],a=r.substring(0,d),s=r.substring(d)),i!=P&&(t.nodeValue=s),i==O)return;return c=e.clone(t,F),c.nodeValue=a,c}if(i!=O)return e.clone(t,F)}function M(t,n){return n!=O?n==P?e.clone(t,H):t:void t.parentNode.removeChild(t)}function R(){return e.create("body",null,h()).outerText}var L=this,D=e.doc,I=0,P=1,O=2,H=!0,F=!1,U="startOffset",V="startContainer",z="endContainer",q="endOffset",K=tinymce.extend,j=e.nodeIndex;return K(L,{startContainer:D,startOffset:0,endContainer:D,endOffset:0,collapsed:H,commonAncestorContainer:D,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:o,setEnd:i,setStartBefore:r,setStartAfter:a,setEndBefore:s,setEndAfter:d,collapse:c,selectNode:l,selectNodeContents:u,compareBoundaryPoints:f,deleteContents:p,extractContents:m,cloneContents:h,insertNode:g,surroundContents:v,cloneRange:y,toStringIE:R}),L}e.Range=t,t.prototype.toString=function(){return this.toStringIE()}}(tinymce.dom),function(){function e(e){function t(t,n){var o,i,r,a,s,d,c,l,u=0,f=-1;if(o=t.duplicate(),o.collapse(n),l=o.parentElement(),l.ownerDocument===e.dom.doc){for(;"false"===l.contentEditable;)l=l.parentNode;if(!l.hasChildNodes())return{node:l,inside:1};for(a=l.children,i=a.length-1;i>=u;)if(c=Math.floor((u+i)/2),s=a[c],o.moveToElementText(s),f=o.compareEndPoints(n?"StartToStart":"EndToEnd",t),f>0)i=c-1;else{if(!(0>f))return{node:s};u=c+1}if(0>f)for(s?o.collapse(!1):(o.moveToElementText(l),o.collapse(!0),s=l,r=!0),d=0;0!==o.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==o.move("character",1)&&l==o.parentElement();)d++;else for(o.collapse(!0),d=0;0!==o.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==o.move("character",-1)&&l==o.parentElement();)d++;return{node:s,position:f,offset:d,inside:r}}}function n(){function n(e){var n,o,i,r,a,s=t(l,e),d=0;if(n=s.node,o=s.offset,s.inside&&!n.hasChildNodes())return void u[e?"setStart":"setEnd"](n,0);if(o===r)return void u[e?"setStartBefore":"setEndAfter"](n);if(s.position<0){if(i=s.inside?n.firstChild:n.nextSibling,!i)return void u[e?"setStartAfter":"setEndAfter"](n);if(!o)return void(3==i.nodeType?u[e?"setStart":"setEnd"](i,0):u[e?"setStartBefore":"setEndBefore"](i));for(;i;){if(a=i.nodeValue,d+=a.length,d>=o){n=i,d-=o,d=a.length-d;break}i=i.nextSibling}}else{if(i=n.previousSibling,!i)return u[e?"setStartBefore":"setEndBefore"](n);if(!o)return void(3==n.nodeType?u[e?"setStart":"setEnd"](i,n.nodeValue.length):u[e?"setStartAfter":"setEndAfter"](i));for(;i;){if(d+=i.nodeValue.length,d>=o){n=i,d-=o;break}i=i.previousSibling}}u[e?"setStart":"setEnd"](n,d)}var r,a,s,d,c,l=e.getRng(),u=i.createRng();if(r=l.item?l.item(0):l.parentElement(),r.ownerDocument!=i.doc)return u;if(a=e.isCollapsed(),l.item)return u.setStart(r.parentNode,i.nodeIndex(r)),u.setEnd(u.startContainer,u.startOffset+1),u;try{n(!0),a||n()}catch(f){if(-2147024809!=f.number)throw f;c=o.getBookmark(2),s=l.duplicate(),s.collapse(!0),r=s.parentElement(),a||(s=l.duplicate(),s.collapse(!1),d=s.parentElement(),d.innerHTML=d.innerHTML),r.innerHTML=r.innerHTML,o.moveToBookmark(c),l=e.getRng(),n(!0),a||n()}return u}var o=this,i=e.dom,r=!1;this.getBookmark=function(n){function o(e){var t,n,o,r,a=[];for(t=e.parentNode,n=i.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(o=t.children,r=o.length;r--;)if(e===o[r]){a.push(r);break}e=t,t=t.parentNode}return a}function r(e){var n;return n=t(a,e),n?{position:n.position,offset:n.offset,indexes:o(n.node),inside:n.inside}:void 0}var a=e.getRng(),s={};return 2===n&&(a.item?s.start={ctrl:!0,indexes:o(a.item(0))}:(s.start=r(!0),e.isCollapsed()||(s.end=r()))),s},this.moveToBookmark=function(e){function t(e){var t,n,o,r;for(t=i.getRoot(),n=e.length-1;n>=0;n--)r=t.children,o=e[n],o<=r.length-1&&(t=r[o]);return t}function n(n){var i,a,s,d=e[n?"start":"end"];d&&(i=d.position>0,a=r.createTextRange(),a.moveToElementText(t(d.indexes)),offset=d.offset,offset!==s?(a.collapse(d.inside||i),a.moveStart("character",i?-offset:offset)):a.collapse(n),o.setEndPoint(n?"StartToStart":"EndToStart",a),n&&o.collapse(!0))}var o,r=i.doc.body;e.start&&(e.start.ctrl?(o=r.createControlRange(),o.addElement(t(e.start.indexes)),o.select()):(o=r.createTextRange(),n(!0),n(),o.select()))},this.addRange=function(t){function n(e){var t,n,a,u,f;a=i.create("a"),t=e?s:c,n=e?d:l,u=o.duplicate(),(t==m||t==m.documentElement)&&(t=h,n=0),3==t.nodeType?(t.parentNode.insertBefore(a,t),u.moveToElementText(a),u.moveStart("character",n),i.remove(a),o.setEndPoint(e?"StartToStart":"EndToEnd",u)):(f=t.childNodes,f.length?(n>=f.length?i.insertAfter(a,f[f.length-1]):t.insertBefore(a,f[n]),u.moveToElementText(a)):t.canHaveHTML&&(t.innerHTML="<span>﻿</span>",a=t.firstChild,u.moveToElementText(a),u.collapse(r)),o.setEndPoint(e?"StartToStart":"EndToEnd",u),i.remove(a))}var o,a,s,d,c,l,u,f,p,m=e.dom.doc,h=m.body;if(s=t.startContainer,d=t.startOffset,c=t.endContainer,l=t.endOffset,o=h.createTextRange(),s==c&&1==s.nodeType){if(d==l&&!s.hasChildNodes()){if(s.canHaveHTML)return u=s.previousSibling,u&&!u.hasChildNodes()&&i.isBlock(u)?u.innerHTML="﻿":u=null,s.innerHTML="<span>﻿</span><span>﻿</span>",o.moveToElementText(s.lastChild),o.select(),i.doc.selection.clear(),s.innerHTML="",void(u&&(u.innerHTML=""));d=i.nodeIndex(s),s=s.parentNode}if(d==l-1)try{if(p=s.childNodes[d],a=h.createControlRange(),a.addElement(p),a.select(),f=e.getRng(),f.item&&p===f.item(0))return}catch(g){}}n(!0),n(),o.select()},this.getRangeAt=n}tinymce.dom.TridentSelection=e}(),function(e){e.dom.Element=function(t,n){var o,i,r=this;r.settings=n=n||{},r.id=t,r.dom=o=n.dom||e.DOM,e.isIE||(i=o.get(r.id)),e.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(e){r[e]=function(){var n,i=[t];for(n=0;n<arguments.length;n++)i.push(arguments[n]);return i=o[e].apply(o,i),r.update(e),i}}),e.extend(r,{on:function(t,n,o){return e.dom.Event.add(r.id,t,n,o)},getXY:function(){return{x:parseInt(r.getStyle("left")),y:parseInt(r.getStyle("top"))}},getSize:function(){var e=o.get(r.id);return{w:parseInt(r.getStyle("width")||e.clientWidth),h:parseInt(r.getStyle("height")||e.clientHeight)}},moveTo:function(e,t){r.setStyles({left:e,top:t})},moveBy:function(e,t){var n=r.getXY();r.moveTo(n.x+e,n.y+t)},resizeTo:function(e,t){r.setStyles({width:e,height:t})},resizeBy:function(e,t){var n=r.getSize();r.resizeTo(n.w+e,n.h+t)},update:function(t){var i;if(e.isIE6&&n.blocker){if(t=t||"",0===t.indexOf("get")||0===t.indexOf("has")||0===t.indexOf("is"))return;if("remove"==t)return void o.remove(r.blocker);r.blocker?i=o.get(r.blocker):(r.blocker=o.uniqueId(),i=o.add(n.container||o.getRoot(),"iframe",{id:r.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),o.setStyle(i,"opacity",0)),o.setStyles(i,{left:r.getStyle("left",1),top:r.getStyle("top",1),width:r.getStyle("width",1),height:r.getStyle("height",1),display:r.getStyle("display",1),zIndex:parseInt(r.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(e){var t=e.is,n=e.isIE,o=e.each,i=e.dom.TreeWalker;e.create("tinymce.dom.Selection",{Selection:function(t,n,i,r){var a=this;a.dom=t,a.win=n,a.serializer=i,a.editor=r,o(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(t){a[t]=new e.util.Dispatcher(a)}),a.win.getSelection||(a.tridentSel=new e.dom.TridentSelection(a)),e.isIE&&t.boxModel&&this._fixIESelection(),e.addUnload(a.destroy,a)},setCursorLocation:function(e,t){var n=this,o=n.dom.createRng();o.setStart(e,t),o.setEnd(e,t),n.setRng(o),n.collapse(!1)},getContent:function(e){var n,o,i,r=this,a=r.getRng(),s=r.dom.create("body"),d=r.getSel();return e=e||{},n=o="",e.get=!0,e.format=e.format||"html",e.forced_root_block="",r.onBeforeGetContent.dispatch(r,e),"text"==e.format?r.isCollapsed()?"":a.text||(d.toString?d.toString():""):(a.cloneContents?(i=a.cloneContents(),i&&s.appendChild(i)):t(a.item)||t(a.htmlText)?(s.innerHTML="<br>"+(a.item?a.item(0).outerHTML:a.htmlText),s.removeChild(s.firstChild)):s.innerHTML=a.toString(),/^\s/.test(s.innerHTML)&&(n=" "),/\s+$/.test(s.innerHTML)&&(o=" "),e.getInner=!0,e.content=r.isCollapsed()?"":n+r.serializer.serialize(s,e)+o,r.onGetContent.dispatch(r,e),e.content)},setContent:function(e,t){var n,o,i,r=this,a=r.getRng(),s=r.win.document;if(t=t||{format:"html"},t.set=!0,e=t.content=e,t.no_events||r.onBeforeSetContent.dispatch(r,t),e=t.content,a.insertNode){e+='<span id="__caret">_</span>',a.startContainer==s&&a.endContainer==s?s.body.innerHTML=e:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=e:a.createContextualFragment?a.insertNode(a.createContextualFragment(e)):(o=s.createDocumentFragment(),i=s.createElement("div"),o.appendChild(i),i.outerHTML=e,a.insertNode(o))),n=r.dom.get("__caret"),a=s.createRange(),a.setStartBefore(n),a.setEndBefore(n),r.setRng(a),r.dom.remove("__caret");try{r.setRng(a)}catch(d){}}else a.item&&(s.execCommand("Delete",!1,null),a=r.getRng()),/^\s+/.test(e)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+e),r.dom.remove("__mce_tmp")):a.pasteHTML(e);t.no_events||r.onSetContent.dispatch(r,t)},getStart:function(){var e,t,n,o,i=this,r=i.getRng();if(r.duplicate||r.item){if(r.item)return r.item(0);for(n=r.duplicate(),n.collapse(1),e=n.parentElement(),e.ownerDocument!==i.dom.doc&&(e=i.dom.getRoot()),t=o=r.parentElement();o=o.parentNode;)if(o==e){e=t;break}return e}return e=r.startContainer,1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[Math.min(e.childNodes.length-1,r.startOffset)]),e&&3==e.nodeType?e.parentNode:e},getEnd:function(){var e,t,n=this,o=n.getRng();return o.duplicate||o.item?o.item?o.item(0):(o=o.duplicate(),o.collapse(0),e=o.parentElement(),e.ownerDocument!==n.dom.doc&&(e=n.dom.getRoot()),e&&"BODY"==e.nodeName?e.lastChild||e:e):(e=o.endContainer,t=o.endOffset,1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[t>0?t-1:t]),e&&3==e.nodeType?e.parentNode:e)},getBookmark:function(e,t){function n(e,t){var n=0;return o(m.select(e),function(e,o){e==t&&(n=o)}),n}function i(e){function t(t){var n,o,i,r=t?"start":"end";n=e[r+"Container"],o=e[r+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(i=n.childNodes,n=i[Math.min(t?o:o-1,i.length-1)],n&&(o=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,o)))}return t(!0),t(),e}function r(){function e(e,n){var i,r,a=e[n?"startContainer":"endContainer"],s=e[n?"startOffset":"endOffset"],d=[],c=0;if(3==a.nodeType){if(t)for(i=a.previousSibling;i&&3==i.nodeType;i=i.previousSibling)s+=i.nodeValue.length;d.push(s)}else r=a.childNodes,s>=r.length&&r.length&&(c=1,s=Math.max(0,r.length-1)),d.push(p.dom.nodeIndex(r[s],t)+c);for(;a&&a!=o;a=a.parentNode)d.push(p.dom.nodeIndex(a,t));return d}var n=p.getRng(!0),o=m.getRoot(),i={};return i.start=e(n,!0),p.isCollapsed()||(i.end=e(n)),i}var a,s,d,c,l,u,f,p=this,m=p.dom,h="﻿";if(2==e)return p.tridentSel?p.tridentSel.getBookmark(e):r();if(e)return{rng:p.getRng()};if(a=p.getRng(),d=m.uniqueId(),c=tinyMCE.activeEditor.selection.isCollapsed(),f="overflow:hidden;line-height:0px",a.duplicate||a.item){if(a.item)return u=a.item(0),l=u.nodeName,{name:l,index:n(l,u)};s=a.duplicate();try{a.collapse(),a.pasteHTML('<span data-mce-type="bookmark" id="'+d+'_start" style="'+f+'">'+h+"</span>"),c||(s.collapse(!1),a.moveToElementText(s.parentElement()),0===a.compareEndPoints("StartToEnd",s)&&s.move("character",-1),s.pasteHTML('<span data-mce-type="bookmark" id="'+d+'_end" style="'+f+'">'+h+"</span>"))}catch(g){return null}}else{if(u=p.getNode(),l=u.nodeName,"IMG"==l)return{name:l,index:n(l,u)};s=i(a.cloneRange()),c||(s.collapse(!1),s.insertNode(m.create("span",{"data-mce-type":"bookmark",id:d+"_end",style:f},h))),a=i(a),a.collapse(!0),a.insertNode(m.create("span",{"data-mce-type":"bookmark",id:d+"_start",style:f},h))}return p.moveToBookmark({id:d,keep:1}),{id:d}},moveToBookmark:function(t){function i(e){var n,o,i,r,a=t[e?"start":"end"];if(a){for(i=a[0],o=d,n=a.length-1;n>=1;n--){if(r=o.childNodes,a[n]>r.length-1)return;o=r[a[n]]}3===o.nodeType&&(i=Math.min(a[0],o.nodeValue.length)),1===o.nodeType&&(i=Math.min(a[0],o.childNodes.length)),e?s.setStart(o,i):s.setEnd(o,i)}return!0}function r(n){var i,r,a,s,d=m.get(t.id+"_"+n),p=t.keep;if(d&&(i=d.parentNode,"start"==n?(p?(i=d.firstChild,r=1):r=m.nodeIndex(d),c=l=i,u=f=r):(p?(i=d.firstChild,r=1):r=m.nodeIndex(d),l=i,f=r),!p)){for(s=d.previousSibling,a=d.nextSibling,o(e.grep(d.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});d=m.get(t.id+"_"+n);)m.remove(d,1);s&&a&&s.nodeType==a.nodeType&&3==s.nodeType&&!e.isOpera&&(r=s.nodeValue.length,s.appendData(a.nodeValue),m.remove(a),"start"==n?(c=l=s,u=f=r):(l=s,f=r))}}function a(e){return!m.isBlock(e)||e.innerHTML||n||(e.innerHTML='<br data-mce-bogus="1" />'),e}var s,d,c,l,u,f,p=this,m=p.dom;if(t)if(t.start){if(s=m.createRng(),d=m.getRoot(),p.tridentSel)return p.tridentSel.moveToBookmark(t);i(!0)&&i()&&p.setRng(s)}else t.id?(r("start"),r("end"),c&&(s=m.createRng(),s.setStart(a(c),u),s.setEnd(a(l),f),p.setRng(s))):t.name?p.select(m.select(t.name)[t.index]):t.rng&&p.setRng(t.rng)},select:function(t,n){function o(t,n){var o=new i(t,t);do{if(3==t.nodeType&&0!==e.trim(t.nodeValue).length)return void(n?d.setStart(t,0):d.setEnd(t,t.nodeValue.length));if("BR"==t.nodeName)return void(n?d.setStartBefore(t):d.setEndBefore(t))}while(t=n?o.next():o.prev())}var r,a=this,s=a.dom,d=s.createRng();return t&&(r=s.nodeIndex(t),d.setStart(t.parentNode,r),d.setEnd(t.parentNode,r+1),n&&(o(t,1),o(t)),a.setRng(d)),t},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!t||t.item?!1:t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed},collapse:function(e){var t,n=this,o=n.getRng();o.item&&(t=o.item(0),o=n.win.document.body.createTextRange(),o.moveToElementText(t)),o.collapse(!!e),n.setRng(o)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(t){var n,o,i,r=this,a=r.win.document;if(t&&r.tridentSel)return r.tridentSel.getRangeAt(0);try{(n=r.getSel())&&(o=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():a.createRange())}catch(s){}return e.isIE&&o&&o.setStart&&a.selection.createRange().item&&(i=a.selection.createRange().item(0),o=a.createRange(),o.setStartBefore(i),o.setEndAfter(i)),o||(o=a.createRange?a.createRange():a.body.createTextRange()),o.setStart&&9===o.startContainer.nodeType&&o.collapsed&&(i=r.dom.getRoot(),o.setStart(i,0),o.setEnd(i,0)),r.selectedRange&&r.explicitRange&&(0===o.compareBoundaryPoints(o.START_TO_START,r.selectedRange)&&0===o.compareBoundaryPoints(o.END_TO_END,r.selectedRange)?o=r.explicitRange:(r.selectedRange=null,r.explicitRange=null)),o},setRng:function(e,t){var n,o=this;if(o.tridentSel){if(e.cloneRange)try{return void o.tridentSel.addRange(e)}catch(i){}try{e.select()}catch(i){}}else if(n=o.getSel()){o.explicitRange=e;try{n.removeAllRanges()}catch(i){}n.addRange(e),t===!1&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),o.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t,n=this,o=n.getRng(),i=(n.getSel(),o.startContainer),r=o.endContainer;return o?o.setStart?(t=o.commonAncestorContainer,!o.collapsed&&(o.startContainer==o.endContainer&&o.endOffset-o.startOffset<2&&o.startContainer.hasChildNodes()&&(t=o.startContainer.childNodes[o.startOffset]),3===i.nodeType&&3===r.nodeType&&(i=i.length===o.startOffset?e(i.nextSibling,!0):i.parentNode,r=0===o.endOffset?e(r.previousSibling,!1):r.parentNode,i&&i===r))?i:t&&3==t.nodeType?t.parentNode:t):o.item?o.item(0):o.parentElement():n.dom.getRoot()},getSelectedBlocks:function(e,t){var n,o,r,a=this,s=a.dom,d=[];if(n=s.getParent(e||a.getStart(),s.isBlock),o=s.getParent(t||a.getEnd(),s.isBlock),n&&d.push(n),n&&o&&n!=o){r=n;for(var c=new i(n,s.getRoot());(r=c.next())&&r!=o;)s.isBlock(r)&&d.push(r)}return o&&n!=o&&d.push(o),d},isForward:function(){var e,t,n=this.dom,o=this.getSel();return o&&null!=o.anchorNode&&null!=o.focusNode?(e=n.createRng(),e.setStart(o.anchorNode,o.anchorOffset),e.collapse(!0),t=n.createRng(),t.setStart(o.focusNode,o.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0):!0},normalize:function(){function t(e){function t(e,t){for(var n=new i(e,m.getParent(e.parentNode,m.isBlock)||h);e=n[t?"prev":"next"]();)if("BR"===e.nodeName)return!0}function s(e,t){var n,a;for(t=t||d,n=new i(t,m.getParent(t.parentNode,m.isBlock)||h);u=n[e?"prev":"next"]();){if(3===u.nodeType&&u.nodeValue.length>0)return d=u,c=e?u.nodeValue.length:0,void(o=!0);if(m.isBlock(u)||f[u.nodeName.toLowerCase()])return;a=u}r&&a&&(d=a,o=!0,c=0)}var d,c,l,u,f,p,m=a.dom,h=m.getRoot();if(d=n[(e?"start":"end")+"Container"],c=n[(e?"start":"end")+"Offset"],f=m.schema.getNonEmptyElements(),9===d.nodeType&&(d=m.getRoot(),c=0),d===h){if(e&&(u=d.childNodes[c>0?c-1:0],u&&(p=u.nodeName.toLowerCase(),f[u.nodeName]||"TABLE"==u.nodeName)))return;if(d.hasChildNodes()&&(d=d.childNodes[Math.min(!e&&c>0?c-1:c,d.childNodes.length-1)],c=0,d.hasChildNodes()&&!/TABLE/.test(d.nodeName))){u=d,l=new i(d,h);do{if(3===u.nodeType&&u.nodeValue.length>0){c=e?0:u.nodeValue.length,d=u,o=!0;break}if(f[u.nodeName.toLowerCase()]){c=m.nodeIndex(u),d=u.parentNode,"IMG"!=u.nodeName||e||c++,o=!0;break}}while(u=e?l.next():l.prev())}}r&&(3===d.nodeType&&0===c&&s(!0),1===d.nodeType&&(u=d.childNodes[c],!u||"BR"!==u.nodeName||t(u)||t(u,!0)||s(!0,d.childNodes[c]))),e&&!r&&3===d.nodeType&&c===d.nodeValue.length&&s(!1),o&&n["set"+(e?"Start":"End")](d,c)}var n,o,r,a=this;e.isIE||(n=a.getRng(),r=n.collapsed,t(!0),r||t(),o&&(r&&n.collapse(!0),a.setRng(n,a.isForward())))},selectorChanged:function(e,t){var n,i=this;return i.selectorChangedData||(i.selectorChangedData={},n={},i.editor.onNodeChange.addToTop(function(e,t,r){var a=i.dom,s=a.getParents(r,null,a.getRoot()),d={};o(i.selectorChangedData,function(e,t){o(s,function(i){return a.is(i,t)?(n[t]||(o(e,function(e){e(!0,{node:i,selector:t,parents:s})}),n[t]=e),d[t]=e,!1):void 0})}),o(n,function(e,t){d[t]||(delete n[t],o(e,function(e){e(!1,{node:r,selector:t,parents:s})
}))})})),i.selectorChangedData[e]||(i.selectorChangedData[e]=[]),i.selectorChangedData[e].push(t),i},scrollIntoView:function(e){var t,n,o=this,i=o.dom;n=i.getViewPort(o.editor.getWin()),t=i.getPos(e).y,(t<n.y||t+25>n.y+n.h)&&o.editor.getWin().scrollTo(0,t<n.y?t:t-n.h+25)},destroy:function(t){var n=this;n.win=null,t||e.removeUnload(n.destroy)},_fixIESelection:function(){function e(e,t){var n=d.createTextRange();try{n.moveToPoint(e,t)}catch(o){n=null}return n}function t(t){var o;t.button?(o=e(t.x,t.y),o&&(o.compareEndPoints("StartToStart",i)>0?o.setEndPoint("StartToStart",i):o.setEndPoint("EndToEnd",i),o.select())):n()}function n(){var e=s.selection.createRange();i&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&i.select(),a.unbind(s,"mouseup",n),a.unbind(s,"mousemove",t),i=o=0}var o,i,r,a=this.dom,s=a.doc,d=s.body;s.documentElement.unselectable=!0,a.bind(s,["mousedown","contextmenu"],function(d){if("HTML"===d.target.nodeName){if(o&&n(),r=s.documentElement,r.scrollHeight>r.clientHeight)return;o=1,i=e(d.x,d.y),i&&(a.bind(s,"mouseup",n),a.bind(s,"mousemove",t),a.win.focus(),i.select())}})}})}(tinymce),function(e){e.dom.Serializer=function(t,n,o){var i,r,a,s=e.isIE,d=e.each;return t.apply_source_formatting||(t.indent=!1),n=n||e.DOM,o=o||new e.html.Schema(t),t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs="remove_trailing_brs"in t?t.remove_trailing_brs:!0,i=new e.util.Dispatcher(self),r=new e.util.Dispatcher(self),a=new e.html.DomParser(t,o),a.addAttributeFilter("src,href,style",function(e,o){for(var i,r,a,s=e.length,d="data-mce-"+o,c=t.url_converter,l=t.url_converter_scope;s--;)i=e[s],r=i.attributes.map[d],r!==a?(i.attr(o,r.length>0?r:null),i.attr(d,null)):(r=i.attributes.map[o],"style"===o?r=n.serializeStyle(n.parseStyle(r),i.name):c&&(r=c.call(l,r,o,i.name)),i.attr(o,r.length>0?r:null))}),a.addAttributeFilter("class",function(e){for(var t,n,o=e.length;o--;)t=e[o],n=t.attr("class").replace(/(?:^|\s)mce(Item\w+|Selected)(?!\S)/g,""),t.attr("class",n.length>0?n:null)}),a.addAttributeFilter("data-mce-type",function(e,t,n){for(var o,i=e.length;i--;)o=e[i],"bookmark"!==o.attributes.map["data-mce-type"]||n.cleanup||o.remove()}),a.addAttributeFilter("data-mce-expando",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),a.addNodeFilter("noscript",function(t){for(var n,o=t.length;o--;)n=t[o].firstChild,n&&(n.value=e.html.Entities.decode(n.value))}),a.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var o,i,r=e.length;r--;)o=e[r],i=o.firstChild?o.firstChild.value:"","script"===t?(o.attr("type",(o.attr("type")||"text/javascript").replace(/^mce\-/,"")),i.length>0&&(o.firstChild.value="// <![CDATA[\n"+n(i)+"\n// ]]>")):i.length>0&&(o.firstChild.value="<!--\n"+n(i)+"\n-->")}),a.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)t=e[n],0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),a.addNodeFilter("xml:namespace,input",function(e,t){for(var n,o=e.length;o--;)n=e[o],7===n.type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),t.fix_list_elements&&a.addNodeFilter("ul,ol",function(e){for(var t,n,o=e.length;o--;)t=e[o],n=t.parent,("ul"===n.name||"ol"===n.name)&&t.prev&&"li"===t.prev.name&&t.prev.append(t)}),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:o,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,onPreProcess:i,onPostProcess:r,serialize:function(c,l){var u,f,p,m,h;return s&&n.select("script,style,select,map").length>0?(h=c.innerHTML,c=c.cloneNode(!1),n.setHTML(c,h)):c=c.cloneNode(!0),u=c.ownerDocument.implementation,u.createHTMLDocument&&(f=u.createHTMLDocument(""),d("BODY"==c.nodeName?c.childNodes:[c],function(e){f.body.appendChild(f.importNode(e,!0))}),c="BODY"!=c.nodeName?f.body.firstChild:f.body,p=n.doc,n.doc=f),l=l||{},l.format=l.format||"html",l.no_events||(l.node=c,i.dispatch(self,l)),m=new e.html.Serializer(t,o),l.content=m.serialize(a.parse(e.trim(l.getInner?c.innerHTML:n.getOuterHTML(c)),l)),l.cleanup||(l.content=l.content.replace(/\uFEFF/g,"")),l.no_events||r.dispatch(self,l),p&&(n.doc=p),l.node=null,l.content},addRules:function(e){o.addValidElements(e)},setRules:function(e){o.setValidElements(e)}}}}(tinymce),function(e){e.dom.ScriptLoader=function(){function t(t,n){function o(){c.remove(d),r&&(r.onreadystatechange=r.onload=r=null),n()}function i(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+t)}var r,a,s,d,c=e.DOM;return d=c.uniqueId(),e.isIE6&&(a=new e.util.URI(t),s=location,a.host==s.hostname&&a.port==s.port&&a.protocol+":"==s.protocol&&"file"!=a.protocol.toLowerCase())?void e.util.XHR.send({url:e._addVer(a.getURI()),success:function(e){var t=c.create("script",{type:"text/javascript"});t.text=e,document.getElementsByTagName("head")[0].appendChild(t),c.remove(t),o()},error:i}):(r=document.createElement("script"),r.id=d,r.type="text/javascript",r.src=e._addVer(t),e.isIE||(r.onload=o),r.onerror=i,e.isOpera||(r.onreadystatechange=function(){var e=r.readyState;("complete"==e||"loaded"==e)&&o()}),void(document.getElementsByTagName("head")[0]||document.body).appendChild(r))}var n,o=0,i=1,r=2,a={},s=[],d={},c=[],l=0;this.isDone=function(e){return a[e]==r},this.markDone=function(e){a[e]=r},this.add=this.load=function(e,t,i){var r=a[e];r==n&&(s.push(e),a[e]=o),t&&(d[e]||(d[e]=[]),d[e].push({func:t,scope:i||this}))},this.loadQueue=function(e,t){this.loadScripts(s,e,t)},this.loadScripts=function(o,s,u){function f(t){e.each(d[t],function(e){e.func.call(e.scope)}),d[t]=n}var p;c.push({func:s,scope:u||this}),(p=function(){var n=e.grep(o);o.length=0,e.each(n,function(e){return a[e]==r?void f(e):void(a[e]!=i&&(a[e]=i,l++,t(e,function(){a[e]=r,l--,f(e),p()})))}),l||(e.each(c,function(e){e.func.call(e.scope)}),c.length=0)})()}},e.ScriptLoader=new e.dom.ScriptLoader}(tinymce),function(e){e.dom.RangeUtils=function(t){this.walk=function(n,o){function i(e){var t;return t=e[0],3===t.nodeType&&t===h&&g>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===y&&e.length>0&&t===v&&3===t.nodeType&&e.splice(e.length-1,1),e}function r(e,t,n){for(var o=[];e&&e!=n;e=e[t])o.push(e);return o}function a(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function s(e,t,n){var a=n?"nextSibling":"previousSibling";for(u=e,f=u.parentNode;u&&u!=t;u=f)f=u.parentNode,p=r(u==e?u:u[a],a),p.length&&(n||p.reverse(),o(i(p)))}var d,c,l,u,f,p,m,h=n.startContainer,g=n.startOffset,v=n.endContainer,y=n.endOffset;if(m=t.select("td.mceSelected,th.mceSelected"),m.length>0)return void e.each(m,function(e){o([e])});if(1==h.nodeType&&h.hasChildNodes()&&(h=h.childNodes[g]),1==v.nodeType&&v.hasChildNodes()&&(v=v.childNodes[Math.min(y-1,v.childNodes.length-1)]),h==v)return o(i([h]));for(d=t.findCommonAncestor(h,v),u=h;u;u=u.parentNode){if(u===v)return s(h,d,!0);if(u===d)break}for(u=v;u;u=u.parentNode){if(u===h)return s(v,d);if(u===d)break}c=a(h,d)||h,l=a(v,d)||v,s(h,c,!0),p=r(c==h?c:c.nextSibling,"nextSibling",l==v?l.nextSibling:l),p.length&&o(i(p)),s(v,l)},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,o=e.startOffset,i=e.endContainer,r=e.endOffset;return n==i&&3==n.nodeType?o>0&&o<n.nodeValue.length&&(i=t(n,o),n=i.previousSibling,r>o?(r-=o,n=i=t(i,r).previousSibling,r=i.nodeValue.length,o=0):r=0):(3==n.nodeType&&o>0&&o<n.nodeValue.length&&(n=t(n,o),o=0),3==i.nodeType&&r>0&&r<i.nodeValue.length&&(i=t(i,r).previousSibling,r=i.nodeValue.length)),{startContainer:n,startOffset:o,endContainer:i,endOffset:r}}},e.dom.RangeUtils.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1}}(tinymce),function(e){var t=e.dom.Event,n=e.each;e.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(o,i){var r,a,s,d,c,l=this,u=o.root,f=o.items,p=o.enableUpDown,m=o.enableLeftRight||!o.enableUpDown,h=o.excludeFromTabOrder;i=i||e.DOM,r=function(e){c=e.target.id},a=function(e){i.setAttrib(e.target.id,"tabindex","-1")},d=function(){var e=i.get(c);i.setAttrib(e,"tabindex","0"),e.focus()},l.focus=function(){i.get(c).focus()},l.destroy=function(){n(f,function(e){var t=i.get(e.id);i.unbind(t,"focus",r),i.unbind(t,"blur",a)});var e=i.get(u);i.unbind(e,"focus",d),i.unbind(e,"keydown",s),f=i=u=l.focus=r=a=s=d=null,l.destroy=function(){}},l.moveFocus=function(e,r){{var a,s=-1;l.controls}c&&(n(f,function(e,t){return e.id===c?(s=t,!1):void 0}),s+=e,0>s?s=f.length-1:s>=f.length&&(s=0),a=f[s],i.setAttrib(c,"tabindex","-1"),i.setAttrib(a.id,"tabindex","0"),i.get(a.id).focus(),o.actOnFocus&&o.onAction(a.id),r&&t.cancel(r))},s=function(e){var n=37,i=39,r=38,a=40,s=27,d=14,u=13,f=32;switch(e.keyCode){case n:m&&l.moveFocus(-1);break;case i:m&&l.moveFocus(1);break;case r:p&&l.moveFocus(-1);break;case a:p&&l.moveFocus(1);break;case s:o.onCancel&&(o.onCancel(),t.cancel(e));break;case d:case u:case f:o.onAction&&(o.onAction(c),t.cancel(e))}},n(f,function(e,t){var n,o;e.id||(e.id=i.uniqueId("_mce_item_")),o=i.get(e.id),h?(i.bind(o,"blur",a),n="-1"):n=0===t?"0":"-1",o.setAttribute("tabindex",n),i.bind(o,"focus",r)}),f[0]&&(c=f[0].id),i.setAttrib(u,"tabindex","-1");var g=i.get(u);i.bind(g,"focus",d),i.bind(g,"keydown",s)}})}(tinymce),function(e){var t=e.DOM,n=e.is;e.create("tinymce.ui.Control",{Control:function(t,n,o){this.id=t,this.settings=n=n||{},this.rendered=!1,this.onRender=new e.util.Dispatcher(this),this.classPrefix="",this.scope=n.scope||this,this.disabled=0,this.active=0,this.editor=o},setAriaProperty:function(e,n){var o=t.get(this.id+"_aria")||t.get(this.id);o&&t.setAttrib(o,"aria-"+e,!!n)},focus:function(){t.get(this.id).focus()},setDisabled:function(e){e!=this.disabled&&(this.setAriaProperty("disabled",e),this.setState("Disabled",e),this.setState("Enabled",!e),this.disabled=e)},isDisabled:function(){return this.disabled},setActive:function(e){e!=this.active&&(this.setState("Active",e),this.active=e,this.setAriaProperty("pressed",e))},isActive:function(){return this.active},setState:function(e,n){var o=t.get(this.id);e=this.classPrefix+e,n?t.addClass(o,e):t.removeClass(o,e)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(e){t.setHTML(e,this.renderHTML())},postRender:function(){var e,t=this;n(t.disabled)&&(e=t.disabled,t.disabled=-1,t.setDisabled(e)),n(t.active)&&(e=t.active,t.active=-1,t.setActive(e))},remove:function(){t.remove(this.id),this.destroy()},destroy:function(){e.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(e,t,n){this.parent(e,t,n),this.controls=[],this.lookup={}},add:function(e){return this.lookup[e.id]=e,this.controls.push(e),e},get:function(e){return this.lookup[e]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(e,t){this.parent(e,t),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(e){{var t=e.is;e.DOM,e.each,e.walk}e.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(e,t){this.parent(e,t),this.classPrefix="mceMenuItem"},setSelected:function(e){this.setState("Selected",e),this.setAriaProperty("checked",!!e),this.selected=e},isSelected:function(){return this.selected},postRender:function(){var e=this;e.parent(),t(e.selected)&&e.setSelected(e.selected)}})}(tinymce),function(e){var t=(e.is,e.DOM),n=(e.each,e.walk);e.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(t,n){var o=this;o.parent(t,n),o.items={},o.collapsed=!1,o.menuCount=0,o.onAddItem=new e.util.Dispatcher(this)},expand:function(e){var t=this;e&&n(t,function(e){e.expand&&e.expand()},"items",t),t.collapsed=!1},collapse:function(e){var t=this;e&&n(t,function(e){e.collapse&&e.collapse()},"items",t),t.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(n){return n.settings||(n=new e.ui.MenuItem(n.id||t.uniqueId(),n)),this.onAddItem.dispatch(this,n),this.items[n.id]=n},addSeparator:function(){return this.add({separator:!0})},addMenu:function(e){return e.collapse||(e=this.createMenu(e)),this.menuCount++,this.add(e)},hasMenus:function(){return 0!==this.menuCount},remove:function(e){delete this.items[e.id]},removeAll:function(){var e=this;n(e,function(e){e.removeAll?e.removeAll():e.remove(),e.destroy()},"items",e),e.items={}},createMenu:function(n){var o=new e.ui.Menu(n.id||t.uniqueId(),n);return o.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),o}})}(tinymce),function(e){var t=e.is,n=e.DOM,o=e.each,i=e.dom.Event,r=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(o,i){i=i||{},i.container=i.container||n.doc.body,i.offset_x=i.offset_x||0,i.offset_y=i.offset_y||0,i.vp_offset_x=i.vp_offset_x||0,i.vp_offset_y=i.vp_offset_y||0,t(i.icons)&&!i.icons&&(i["class"]+=" mceNoIcons"),this.parent(o,i),this.onShowMenu=new e.util.Dispatcher(this),this.onHideMenu=new e.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(t){var o,i=this,r=i.settings;return t.container=t.container||r.container,t.parent=i,t.constrain=t.constrain||r.constrain,t["class"]=t["class"]||r["class"],t.vp_offset_x=t.vp_offset_x||r.vp_offset_x,t.vp_offset_y=t.vp_offset_y||r.vp_offset_y,t.keyboard_focus=r.keyboard_focus,o=new e.ui.DropMenu(t.id||n.uniqueId(),t),o.onAddItem.add(i.onAddItem.dispatch,i.onAddItem),o},focus:function(){var e=this;e.keyboardNav&&e.keyboardNav.focus()},update:function(){var e,t,o=this,i=o.settings,r=n.get("menu_"+o.id+"_tbl"),a=n.get("menu_"+o.id+"_co");e=i.max_width?Math.min(r.offsetWidth,i.max_width):r.offsetWidth,t=i.max_height?Math.min(r.offsetHeight,i.max_height):r.offsetHeight,o.element.setStyles(n.boxModel?{width:e,height:t}:{width:e+2,height:t+2}),i.max_width&&n.setStyle(a,"width",e),i.max_height&&(n.setStyle(a,"height",t),r.clientHeight<i.max_height&&n.setStyle(a,"overflow","hidden"))},showMenu:function(t,a,s){var d,c,l,u,f,p,m=this,h=m.settings,g=n.getViewPort(),v=2,y=m.classPrefix;m.collapse(1),m.isMenuVisible||(m.rendered?d=n.get("menu_"+m.id):(d=n.add(m.settings.container,m.renderNode()),o(m.items,function(e){e.postRender()}),m.element=new r("menu_"+m.id,{blocker:1,container:h.container})),e.isOpera||n.setStyles(d,{left:-65535,top:-65535}),n.show(d),m.update(),t+=h.offset_x||0,a+=h.offset_y||0,g.w-=4,g.h-=4,h.constrain&&(c=d.clientWidth-v,l=d.clientHeight-v,u=g.x+g.w,f=g.y+g.h,t+h.vp_offset_x+c>u&&(t=s?s-c:Math.max(0,u-h.vp_offset_x-c)),a+h.vp_offset_y+l>f&&(a=Math.max(0,f-h.vp_offset_y-l))),n.setStyles(d,{left:t,top:a}),m.element.update(),m.isMenuVisible=1,m.mouseClickFunc=i.add(d,"click",function(e){var t;if(e=e.target,e&&(e=n.getParent(e,"tr"))&&!n.hasClass(e,y+"ItemSub")){if(t=m.items[e.id],t.isDisabled())return;for(p=m;p;)p.hideMenu&&p.hideMenu(),p=p.settings.parent;return t.settings.onclick&&t.settings.onclick(e),!1}}),m.hasMenus()&&(m.mouseOverFunc=i.add(d,"mouseover",function(e){var t,o;if(e=e.target,e&&(e=n.getParent(e,"tr"))){if(t=m.items[e.id],m.lastMenu&&m.lastMenu.collapse(1),t.isDisabled())return;e&&n.hasClass(e,y+"ItemSub")&&(o=n.getRect(e),t.showMenu(o.x+o.w-v,o.y-v,o.x),m.lastMenu=t,n.addClass(n.get(t.id).firstChild,y+"ItemActive"))}})),i.add(d,"keydown",m._keyHandler,m),m.onShowMenu.dispatch(m),h.keyboard_focus&&m._setupKeyboardNav())},hideMenu:function(e){var t,o=this,r=n.get("menu_"+o.id);o.isMenuVisible&&(o.keyboardNav&&o.keyboardNav.destroy(),i.remove(r,"mouseover",o.mouseOverFunc),i.remove(r,"click",o.mouseClickFunc),i.remove(r,"keydown",o._keyHandler),n.hide(r),o.isMenuVisible=0,e||o.collapse(1),o.element&&o.element.hide(),(t=n.get(o.id))&&n.removeClass(t.firstChild,o.classPrefix+"ItemActive"),o.onHideMenu.dispatch(o))},add:function(e){var t,o=this;return e=o.parent(e),o.isRendered&&(t=n.get("menu_"+o.id))&&o._add(n.select("tbody",t)[0],e),e},collapse:function(e){this.parent(e),this.hideMenu(1)},remove:function(e){return n.remove(e.id),this.destroy(),this.parent(e)},destroy:function(){var e=this,t=n.get("menu_"+e.id);e.keyboardNav&&e.keyboardNav.destroy(),i.remove(t,"mouseover",e.mouseOverFunc),i.remove(n.select("a",t),"focus",e.mouseOverFunc),i.remove(t,"click",e.mouseClickFunc),i.remove(t,"keydown",e._keyHandler),e.element&&e.element.remove(),n.remove(t)},renderNode:function(){var e,t,i,a,s=this,d=s.settings;return a=n.create("div",{role:"listbox",id:"menu_"+s.id,"class":d["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),s.settings.parent&&n.setAttrib(a,"aria-parent","menu_"+s.settings.parent.id),i=n.add(a,"div",{role:"presentation",id:"menu_"+s.id+"_co","class":s.classPrefix+(d["class"]?" "+d["class"]:"")}),s.element=new r("menu_"+s.id,{blocker:1,container:d.container}),d.menu_line&&n.add(i,"span",{"class":s.classPrefix+"Line"}),e=n.add(i,"table",{role:"presentation",id:"menu_"+s.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),t=n.add(e,"tbody"),o(s.items,function(e){s._add(t,e)}),s.rendered=!0,a},_setupKeyboardNav:function(){var t,o,i=this;t=n.get("menu_"+i.id),o=n.select("a[role=option]","menu_"+i.id),o.splice(0,0,t),i.keyboardNav=new e.ui.KeyboardNavigation({root:"menu_"+i.id,items:o,onCancel:function(){i.hideMenu()},enableUpDown:!0}),t.focus()},_keyHandler:function(e){var t=this;switch(e.keyCode){case 37:t.settings.parent&&(t.hideMenu(),t.settings.parent.focus(),i.cancel(e));break;case 39:t.mouseOverFunc&&t.mouseOverFunc(e)}},_add:function(e,t){var o,i,r,a,s,d=t.settings,c=this.classPrefix;return d.separator?(r=n.add(e,"tr",{id:t.id,"class":c+"ItemSeparator"}),n.add(r,"td",{"class":c+"ItemSeparator"}),void((o=r.previousSibling)&&n.addClass(o,"mceLast"))):(o=r=n.add(e,"tr",{id:t.id,"class":c+"Item "+c+"ItemEnabled"}),o=a=n.add(o,d.titleItem?"th":"td"),o=i=n.add(o,"a",{id:t.id+"_aria",role:d.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),d.parent&&(n.setAttrib(i,"aria-haspopup","true"),n.setAttrib(i,"aria-owns","menu_"+t.id)),n.addClass(a,d["class"]),s=n.add(o,"span",{"class":"mceIcon"+(d.icon?" mce_"+d.icon:"")}),d.icon_src&&n.add(s,"img",{src:d.icon_src}),o=n.add(o,d.element||"span",{"class":"mceText",title:t.settings.title},t.settings.title),t.settings.style&&("function"==typeof t.settings.style&&(t.settings.style=t.settings.style()),n.setAttrib(o,"style",t.settings.style)),1==e.childNodes.length&&n.addClass(r,"mceFirst"),(o=r.previousSibling)&&n.hasClass(o,c+"ItemSeparator")&&n.addClass(r,"mceFirst"),t.collapse&&n.addClass(r,c+"ItemSub"),(o=r.previousSibling)&&n.removeClass(o,"mceLast"),void n.addClass(r,"mceLast"))}})}(tinymce),function(e){var t=e.DOM;e.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,t,n){this.parent(e,t,n),this.classPrefix="mceButton"},renderHTML:function(){var e,n,o=this.classPrefix,i=this.settings;return n=t.encode(i.label||""),e='<a role="button" id="'+this.id+'" href="javascript:;" class="'+o+" "+o+"Enabled "+i["class"]+(n?" "+o+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+t.encode(i.title)+'">',e+=!i.image||this.editor&&this.editor.forcedHighContrastMode?'<span class="mceIcon '+i["class"]+'"></span>'+(n?'<span class="'+o+'Label">'+n+"</span>":""):'<span class="mceIcon '+i["class"]+'"><img class="mceIcon" src="'+i.image+'" alt="'+t.encode(i.title)+'" /></span>'+(n?'<span class="'+o+'Label">'+n+"</span>":""),e+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+i.title+"</span>",e+="</a>"},postRender:function(){var t,n=this,o=n.settings;e.isIE&&n.editor&&e.dom.Event.add(n.id,"mousedown",function(){var e=n.editor.selection.getNode().nodeName;t="IMG"===e?n.editor.selection.getBookmark():null}),e.dom.Event.add(n.id,"click",function(i){return n.isDisabled()?void 0:(e.isIE&&n.editor&&null!==t&&n.editor.selection.moveToBookmark(t),o.onclick.call(o.scope,i))}),e.dom.Event.add(n.id,"keyup",function(t){return n.isDisabled()||t.keyCode!=e.VK.SPACEBAR?void 0:o.onclick.call(o.scope,t)})}})}(tinymce),function(e){var t,n=e.DOM,o=e.dom.Event,i=e.each,r=e.util.Dispatcher;e.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(t,n,o){var i=this;i.parent(t,n,o),i.items=[],i.onChange=new r(i),i.onPostRender=new r(i),i.onAdd=new r(i),i.onRenderMenu=new e.util.Dispatcher(this),i.classPrefix="mceListBox",i.marked={}},select:function(e){var n,o,r=this;return r.marked={},e==t?r.selectByIndex(-1):(o=e&&"function"==typeof e?e:function(t){return t==e},void(e!=r.selectedValue&&(i(r.items,function(e,t){return o(e.value)?(n=1,r.selectByIndex(t),!1):void 0}),n||r.selectByIndex(-1))))},selectByIndex:function(e){var t,o,i,r=this;r.marked={},e!=r.selectedIndex&&(t=n.get(r.id+"_text"),i=n.get(r.id+"_voiceDesc"),o=r.items[e],o?(r.selectedValue=o.value,r.selectedIndex=e,n.setHTML(t,n.encode(o.title)),n.setHTML(i,r.settings.title+" - "+o.title),n.removeClass(t,"mceTitle"),n.setAttrib(r.id,"aria-valuenow",o.title)):(n.setHTML(t,n.encode(r.settings.title)),n.setHTML(i,n.encode(r.settings.title)),n.addClass(t,"mceTitle"),r.selectedValue=r.selectedIndex=null,n.setAttrib(r.id,"aria-valuenow",r.settings.title)),t=0)},mark:function(e){this.marked[e]=!0},add:function(t,n,o){var i=this;o=o||{},o=e.extend(o,{title:t,value:n}),i.items.push(o),i.onAdd.dispatch(i,o)},getLength:function(){return this.items.length},renderHTML:function(){var e="",t=this,o=t.settings,i=t.classPrefix;return e='<span role="listbox" aria-haspopup="true" aria-labelledby="'+t.id+'_voiceDesc" aria-describedby="'+t.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+t.id+'" cellpadding="0" cellspacing="0" class="'+i+" "+i+"Enabled"+(o["class"]?" "+o["class"]:"")+'"><tbody><tr>',e+="<td>"+n.createHTML("span",{id:t.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},t.settings.title),e+=n.createHTML("a",{id:t.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},n.encode(t.settings.title))+"</td>",e+="<td>"+n.createHTML("a",{id:t.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>",e+="</tr></tbody></table></span>"},showMenu:function(){var t,r,a=this,s=n.get(this.id);if(!a.isDisabled()&&0!==a.items.length){if(a.menu&&a.menu.isMenuVisible)return a.hideMenu();a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0),t=n.getPos(s),r=a.menu,r.settings.offset_x=t.x,r.settings.offset_y=t.y,r.settings.keyboard_focus=!e.isOpera,i(a.items,function(e){r.items[e.id]&&r.items[e.id].setSelected(0)}),i(a.items,function(e){r.items[e.id]&&a.marked[e.value]&&r.items[e.id].setSelected(1),e.value===a.selectedValue&&r.items[e.id].setSelected(1)}),r.showMenu(0,s.clientHeight),o.add(n.doc,"mousedown",a.hideMenu,a),n.addClass(a.id,a.classPrefix+"Selected")}},hideMenu:function(e){var t=this;if(t.menu&&t.menu.isMenuVisible){if(n.removeClass(t.id,t.classPrefix+"Selected"),e&&"mousedown"==e.type&&(e.target.id==t.id+"_text"||e.target.id==t.id+"_open"))return;e&&n.getParent(e.target,".mceMenu")||(n.removeClass(t.id,t.classPrefix+"Selected"),o.remove(n.doc,"mousedown",t.hideMenu,t),t.menu.hideMenu())}},renderMenu:function(){var e,o=this;e=o.settings.control_manager.createDropMenu(o.id+"_menu",{menu_line:1,"class":o.classPrefix+"Menu mceNoIcons",max_width:250,max_height:150}),e.onHideMenu.add(function(){o.hideMenu(),o.focus()}),e.add({title:o.settings.title,"class":"mceMenuItemTitle",onclick:function(){o.settings.onselect("")!==!1&&o.select("")}}),i(o.items,function(i){i.value===t?e.add({title:i.title,role:"option","class":"mceMenuItemTitle",onclick:function(){o.settings.onselect("")!==!1&&o.select("")}}):(i.id=n.uniqueId(),i.role="option",i.onclick=function(){o.settings.onselect(i.value)!==!1&&o.select(i.value)},e.add(i))}),o.onRenderMenu.dispatch(o,e),o.menu=e},postRender:function(){var t=this,i=t.classPrefix;o.add(t.id,"click",t.showMenu,t),o.add(t.id,"keydown",function(e){32==e.keyCode&&(t.showMenu(e),o.cancel(e))}),o.add(t.id,"focus",function(){t._focused||(t.keyDownHandler=o.add(t.id,"keydown",function(e){40==e.keyCode&&(t.showMenu(),o.cancel(e))}),t.keyPressHandler=o.add(t.id,"keypress",function(e){var n;13==e.keyCode&&(n=t.selectedValue,t.selectedValue=null,o.cancel(e),t.settings.onselect(n))})),t._focused=1}),o.add(t.id,"blur",function(){o.remove(t.id,"keydown",t.keyDownHandler),o.remove(t.id,"keypress",t.keyPressHandler),t._focused=0}),(e.isIE6||!n.boxModel)&&(o.add(t.id,"mouseover",function(){n.hasClass(t.id,i+"Disabled")||n.addClass(t.id,i+"Hover")}),o.add(t.id,"mouseout",function(){n.hasClass(t.id,i+"Disabled")||n.removeClass(t.id,i+"Hover")})),t.onPostRender.dispatch(t,n.get(t.id))},destroy:function(){this.parent(),o.clear(this.id+"_text"),o.clear(this.id+"_open")}})}(tinymce),function(e){{var t,n=e.DOM,o=e.dom.Event,i=e.each;e.util.Dispatcher}e.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(e,t){this.parent(e,t),this.classPrefix="mceNativeListBox"},setDisabled:function(e){n.get(this.id).disabled=e,this.setAriaProperty("disabled",e)},isDisabled:function(){return n.get(this.id).disabled},select:function(e){var n,o,r=this;return e==t?r.selectByIndex(-1):(o=e&&"function"==typeof e?e:function(t){return t==e},void(e!=r.selectedValue&&(i(r.items,function(e,t){return o(e.value)?(n=1,r.selectByIndex(t),!1):void 0}),n||r.selectByIndex(-1))))},selectByIndex:function(e){n.get(this.id).selectedIndex=e+1,this.selectedValue=this.items[e]?this.items[e].value:null},add:function(e,t,o){var i,r=this;o=o||{},o.value=t,r.isRendered()&&n.add(n.get(this.id),"option",o,e),i={title:e,value:t,attribs:o},r.items.push(i),r.onAdd.dispatch(r,i)},getLength:function(){return this.items.length},renderHTML:function(){var e,t=this;return e=n.createHTML("option",{value:""},"-- "+t.settings.title+" --"),i(t.items,function(t){e+=n.createHTML("option",{value:t.value},t.title)}),e=n.createHTML("select",{id:t.id,"class":"mceNativeListBox","aria-labelledby":t.id+"_aria"},e),e+=n.createHTML("span",{id:t.id+"_aria",style:"display: none"},t.settings.title)},postRender:function(){function t(e){var t=r.items[e.target.selectedIndex-1];t&&(t=t.value)&&(r.onChange.dispatch(r,t),r.settings.onselect&&r.settings.onselect(t))}var i,r=this,a=!0;r.rendered=!0,o.add(r.id,"change",t),o.add(r.id,"keydown",function(n){var s;return o.remove(r.id,"change",i),a=!1,s=o.add(r.id,"blur",function(){a||(a=!0,o.add(r.id,"change",t),o.remove(r.id,"blur",s))}),!e.isWebKit||37!=n.keyCode&&39!=n.keyCode?13==n.keyCode||32==n.keyCode?(t(n),o.cancel(n)):void 0:o.prevent(n)}),r.onPostRender.dispatch(r,n.get(r.id))}})}(tinymce),function(e){{var t=e.DOM,n=e.dom.Event;e.each}e.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(n,o,i){this.parent(n,o,i),this.onRenderMenu=new e.util.Dispatcher(this),o.menu_container=o.menu_container||t.doc.body},showMenu:function(){var e,o,i,r=this,a=t.get(r.id);if(!r.isDisabled()){if(r.isMenuRendered||(r.renderMenu(),r.isMenuRendered=!0),r.isMenuVisible)return r.hideMenu();e=t.getPos(r.settings.menu_container),o=t.getPos(a),i=r.menu,i.settings.offset_x=o.x,i.settings.offset_y=o.y,i.settings.vp_offset_x=o.x,i.settings.vp_offset_y=o.y,i.settings.keyboard_focus=r._focused,i.showMenu(0,a.firstChild.clientHeight),n.add(t.doc,"mousedown",r.hideMenu,r),r.setState("Selected",1),r.isMenuVisible=1}},renderMenu:function(){var e,t=this;e=t.settings.control_manager.createDropMenu(t.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:t.settings.icons}),e.onHideMenu.add(function(){t.hideMenu(),t.focus()}),t.onRenderMenu.dispatch(t,e),t.menu=e},hideMenu:function(e){var o=this;e&&"mousedown"==e.type&&t.getParent(e.target,function(e){return e.id===o.id||e.id===o.id+"_open"})||(e&&t.getParent(e.target,".mceMenu")||(o.setState("Selected",0),n.remove(t.doc,"mousedown",o.hideMenu,o),o.menu&&o.menu.hideMenu()),o.isMenuVisible=0)},postRender:function(){var e=this,t=e.settings;n.add(e.id,"click",function(){e.isDisabled()||(t.onclick&&t.onclick(e.value),e.showMenu())})}})}(tinymce),function(e){{var t=e.DOM,n=e.dom.Event;e.each}e.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(e,t,n){this.parent(e,t,n),this.classPrefix="mceSplitButton"},renderHTML:function(){var e,n,o=this,i=o.settings;return e="<tbody><tr>",n=i.image?t.createHTML("img ",{src:i.image,role:"presentation","class":"mceAction "+i["class"]}):t.createHTML("span",{"class":"mceAction "+i["class"]},""),n+=t.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:o.id+"_voice",style:"display:none;"},i.title),e+="<td >"+t.createHTML("a",{role:"button",id:o.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+i["class"],onclick:"return false;",onmousedown:"return false;",title:i.title},n)+"</td>",n=t.createHTML("span",{"class":"mceOpen "+i["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),e+="<td >"+t.createHTML("a",{role:"button",id:o.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+i["class"],onclick:"return false;",onmousedown:"return false;",title:i.title},n)+"</td>",e+="</tr></tbody>",e=t.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+i["class"],cellpadding:"0",cellspacing:"0",title:i.title},e),t.createHTML("div",{id:o.id,role:"button",tabindex:"0","aria-labelledby":o.id+"_voice","aria-haspopup":"true"},e)},postRender:function(){var o,i=this,r=i.settings;r.onclick&&(o=function(e){i.isDisabled()||(r.onclick(i.value),n.cancel(e))},n.add(i.id+"_action","click",o),n.add(i.id,["click","keydown"],function(e){var t=40;32!==e.keyCode&&13!==e.keyCode&&14!==e.keyCode||e.altKey||e.ctrlKey||e.metaKey?("click"===e.type||e.keyCode===t)&&(i.showMenu(),n.cancel(e)):(o(),n.cancel(e))})),n.add(i.id+"_open","click",function(e){i.showMenu(),n.cancel(e)}),n.add([i.id,i.id+"_open"],"focus",function(){i._focused=1}),n.add([i.id,i.id+"_open"],"blur",function(){i._focused=0}),(e.isIE6||!t.boxModel)&&(n.add(i.id,"mouseover",function(){t.hasClass(i.id,"mceSplitButtonDisabled")||t.addClass(i.id,"mceSplitButtonHover")}),n.add(i.id,"mouseout",function(){t.hasClass(i.id,"mceSplitButtonDisabled")||t.removeClass(i.id,"mceSplitButtonHover")}))},destroy:function(){this.parent(),n.clear(this.id+"_action"),n.clear(this.id+"_open"),n.clear(this.id)}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,o=e.is,i=e.each;e.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(t,n,o){var i=this;i.parent(t,n,o),i.settings=n=e.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},i.settings),i.onShowMenu=new e.util.Dispatcher(i),i.onHideMenu=new e.util.Dispatcher(i),i.value=n.default_color},showMenu:function(){var o,i,r=this;if(!r.isDisabled()){if(r.isMenuRendered||(r.renderMenu(),r.isMenuRendered=!0),r.isMenuVisible)return r.hideMenu();o=t.get(r.id),t.show(r.id+"_menu"),t.addClass(o,"mceSplitButtonSelected"),i=t.getPos(o),t.setStyles(r.id+"_menu",{left:i.x,top:i.y+o.firstChild.clientHeight,zIndex:2e5}),o=0,n.add(t.doc,"mousedown",r.hideMenu,r),r.onShowMenu.dispatch(r),r._focused&&(r._keyHandler=n.add(r.id+"_menu","keydown",function(e){27==e.keyCode&&r.hideMenu()
}),t.select("a",r.id+"_menu")[0].focus()),r.keyboardNav=new e.ui.KeyboardNavigation({root:r.id+"_menu",items:t.select("a",r.id+"_menu"),onCancel:function(){r.hideMenu(),r.focus()}}),r.keyboardNav.focus(),r.isMenuVisible=1}},hideMenu:function(e){var o=this;if(o.isMenuVisible){if(e&&"mousedown"==e.type&&t.getParent(e.target,function(e){return e.id===o.id+"_open"}))return;e&&t.getParent(e.target,".mceSplitButtonMenu")||(t.removeClass(o.id,"mceSplitButtonSelected"),n.remove(t.doc,"mousedown",o.hideMenu,o),n.remove(o.id+"_menu","keydown",o._keyHandler),t.hide(o.id+"_menu")),o.isMenuVisible=0,o.onHideMenu.dispatch(),o.keyboardNav.destroy()}},renderMenu:function(){var r,a,s,d,c,l,u=this,f=0,p=u.settings;return c=t.add(p.menu_container,"div",{role:"listbox",id:u.id+"_menu","class":p.menu_class+" "+p["class"],style:"position:absolute;left:0;top:-1000px;"}),r=t.add(c,"div",{"class":p["class"]+" mceSplitButtonMenu"}),t.add(r,"span",{"class":"mceMenuLine"}),a=t.add(r,"table",{role:"presentation","class":"mceColorSplitMenu"}),s=t.add(a,"tbody"),f=0,i(o(p.colors,"array")?p.colors:p.colors.split(","),function(n){n=n.replace(/^#/,""),f--||(d=t.add(s,"tr"),f=p.grid_width-1),a=t.add(d,"td");var o={href:"javascript:;",style:{backgroundColor:"#"+n},title:u.editor.getLang("colors."+n,n),"data-mce-color":"#"+n};e.isIE||(o.role="option"),a=t.add(a,"a",o),u.editor.forcedHighContrastMode&&(a=t.add(a,"canvas",{width:16,height:16,"aria-hidden":"true"}),a.getContext&&(l=a.getContext("2d"))?(l.fillStyle="#"+n,l.fillRect(0,0,16,16)):t.remove(a))}),p.more_colors_func&&(a=t.add(s,"tr"),a=t.add(a,"td",{colspan:p.grid_width,"class":"mceMoreColors"}),a=t.add(a,"a",{role:"option",id:u.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},p.more_colors_title),n.add(a,"click",function(e){return p.more_colors_func.call(p.more_colors_scope||this),n.cancel(e)})),t.addClass(r,"mceColorSplitMenu"),n.add(u.id+"_menu","mousedown",function(e){return n.cancel(e)}),n.add(u.id+"_menu","click",function(e){var n;return e=t.getParent(e.target,"a",s),e&&"a"==e.nodeName.toLowerCase()&&(n=e.getAttribute("data-mce-color"))&&u.setColor(n),!1}),c},setColor:function(e){this.displayColor(e),this.hideMenu(),this.settings.onselect(e)},displayColor:function(e){var n=this;t.setStyle(n.id+"_preview","backgroundColor",e),n.value=e},postRender:function(){var e=this,n=e.id;e.parent(),t.add(n+"_action","div",{id:n+"_preview","class":"mceColorPreview"}),t.setStyle(e.id+"_preview","backgroundColor",e.value)},destroy:function(){var e=this;e.parent(),n.clear(e.id+"_menu"),n.clear(e.id+"_more"),t.remove(e.id+"_menu"),e.keyboardNav&&e.keyboardNav.destroy()}})}(tinymce),function(e){var t=e.DOM,n=e.each,o=e.dom.Event;e.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var n=this,o=[],i=n.controls,r=e.each,a=n.settings;return o.push('<div id="'+n.id+'" role="group" aria-labelledby="'+n.id+'_voice">'),o.push("<span role='application'>"),o.push('<span id="'+n.id+'_voice" class="mceVoiceLabel" style="display:none;">'+t.encode(a.name)+"</span>"),r(i,function(e){o.push(e.renderHTML())}),o.push("</span>"),o.push("</div>"),o.join("")},focus:function(){var e=this;t.get(e.id).focus()},postRender:function(){var o=this,i=[];n(o.controls,function(e){n(e.controls,function(e){e.id&&i.push(e)})}),o.keyNav=new e.ui.KeyboardNavigation({root:o.id,items:i,onCancel:function(){e.isWebKit&&t.get(o.editor.id+"_ifr").focus(),o.editor.focus()},excludeFromTabOrder:!o.settings.tab_focus_toolbar})},destroy:function(){var e=this;e.parent(),e.keyNav.destroy(),o.clear(e.id)}})}(tinymce),function(e){{var t=e.DOM;e.each}e.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var e,n,o,i,r,a,s=this,d="",c=s.settings;for(a=s.controls,o=0;o<a.length;o++)n=a[o],i=a[o-1],r=a[o+1],0===o&&(e="mceToolbarStart",n.Button?e+=" mceToolbarStartButton":n.SplitButton?e+=" mceToolbarStartSplitButton":n.ListBox&&(e+=" mceToolbarStartListBox"),d+=t.createHTML("td",{"class":e},t.createHTML("span",null,"<!-- IE -->"))),i&&n.ListBox&&(i.Button||i.SplitButton)&&(d+=t.createHTML("td",{"class":"mceToolbarEnd"},t.createHTML("span",null,"<!-- IE -->"))),d+=t.stdMode?'<td style="position: relative">'+n.renderHTML()+"</td>":"<td>"+n.renderHTML()+"</td>",r&&n.ListBox&&(r.Button||r.SplitButton)&&(d+=t.createHTML("td",{"class":"mceToolbarStart"},t.createHTML("span",null,"<!-- IE -->")));return e="mceToolbarEnd",n.Button?e+=" mceToolbarEndButton":n.SplitButton?e+=" mceToolbarEndSplitButton":n.ListBox&&(e+=" mceToolbarEndListBox"),d+=t.createHTML("td",{"class":e},t.createHTML("span",null,"<!-- IE -->")),t.createHTML("table",{id:s.id,"class":"mceToolbar"+(c["class"]?" "+c["class"]:""),cellpadding:"0",cellspacing:"0",align:s.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+d+"</tr></tbody>")}})}(tinymce),function(e){{var t=e.util.Dispatcher;e.each}e.create("tinymce.AddOnManager",{AddOnManager:function(){var e=this;e.items=[],e.urls={},e.lookup={},e.onAdd=new t(e)},get:function(e){return this.lookup[e]?this.lookup[e].instance:void 0},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t){var n=e.settings;n&&n.language&&n.language_load!==!1&&e.ScriptLoader.add(this.urls[t]+"/langs/"+n.language+".js")},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},this.onAdd.dispatch(this,e,t),t},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var o=this.urls[t];e.each(n,function(t){e.ScriptLoader.add(o+"/"+t)})},load:function(t,n,o,i){function r(){var r=a.dependencies(t);e.each(r,function(e){var t=a.createUrl(n,e);a.load(t.resource,t,void 0,void 0)}),o&&o.call(i?i:e.ScriptLoader)}var a=this,s=n;a.urls[t]||("object"==typeof n&&(s=n.prefix+n.resource+n.suffix),0!==s.indexOf("/")&&-1==s.indexOf("://")&&(s=e.baseURL+"/"+s),a.urls[t]=s.substring(0,s.lastIndexOf("/")),a.lookup[t]?r():e.ScriptLoader.add(s,r,i))}}),e.PluginManager=new e.AddOnManager,e.ThemeManager=new e.AddOnManager}(tinymce),function(e){var t,n=e.each,o=e.extend,i=e.DOM,r=e.dom.Event,a=(e.ThemeManager,e.PluginManager,e.explode),s=e.util.Dispatcher,d=0;e.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e.documentBaseURL)||(e.documentBaseURL+="/"),e.baseURL=new e.util.URI(e.documentBaseURL).toAbsolute(e.baseURL),e.baseURI=new e.util.URI(e.baseURL),e.onBeforeUnload=new s(e),r.add(window,"beforeunload",function(t){e.onBeforeUnload.dispatch(e,t)}),e.onAddEditor=new s(e),e.onRemoveEditor=new s(e),e.EditorManager=o(e,{editors:[],i18n:{},activeEditor:null,init:function(t){function o(e){var t=e.id;return t||(t=e.name,t=t&&!i.get(t)?e.name:i.uniqueId(),e.setAttribute("id",t)),t}function s(t,n,o){var i=t[n];if(i)return e.is(i,"string")&&(o=i.replace(/\.\w+$/,""),o=o?e.resolve(o):0,i=e.resolve(i)),i.apply(o||this,Array.prototype.slice.call(arguments,2))}function c(e,t){return t.constructor===RegExp?t.test(e.className):i.hasClass(e,t)}var l,u=this,f=(e.ScriptLoader,[]);u.settings=t,r.bind(window,"ready",function(){var r,u;switch(s(t,"onpageload"),t.mode){case"exact":r=t.elements||"",r.length>0&&n(a(r),function(o){i.get(o)?(l=new e.Editor(o,t),f.push(l),l.render(1)):n(document.forms,function(r){n(r.elements,function(n){n.name===o&&(o="mce_editor_"+d++,i.setAttrib(n,"id",o),l=new e.Editor(o,t),f.push(l),l.render(1))})})});break;case"textareas":case"specific_textareas":n(i.select("textarea"),function(n){t.editor_deselector&&c(n,t.editor_deselector)||(!t.editor_selector||c(n,t.editor_selector))&&(l=new e.Editor(o(n),t),f.push(l),l.render(1))});break;default:t.types?n(t.types,function(r){n(i.select(r.selector),function(n){var i=new e.Editor(o(n),e.extend({},t,r));f.push(i),i.render(1)})}):t.selector&&n(i.select(t.selector),function(n){var i=new e.Editor(o(n),t);f.push(i),i.render(1)})}t.oninit&&(r=u=0,n(f,function(e){u++,e.initialized?r++:e.onInit.add(function(){r++,r==u&&s(t,"oninit")}),r==u&&s(t,"oninit")}))})},get:function(e){return e===t?this.editors:this.editors.hasOwnProperty(e)?this.editors[e]:t},getInstanceById:function(e){return this.get(e)},add:function(t){var n=this,o=n.editors;return o[t.id]=t,o.push(t),n._setActive(t),n.onAddEditor.dispatch(n,t),e.adapter&&e.adapter.patchEditor(t),t},remove:function(e){var t,n=this,o=n.editors;if(!o[e.id])return null;for(delete o[e.id],t=0;t<o.length;t++)if(o[t]==e){o.splice(t,1);break}return n.activeEditor==e&&n._setActive(o[0]),e.destroy(),n.onRemoveEditor.dispatch(n,e),e},execCommand:function(t,n,o){function i(){s.destroy(),r.detachEvent("onunload",i),r=r.tinyMCE=r.tinymce=null}var r,a=this,s=a.get(o);switch(t){case"mceFocus":return s.focus(),!0;case"mceAddEditor":case"mceAddControl":return a.get(o)||new e.Editor(o,a.settings).render(),!0;case"mceAddFrameControl":return r=o.window,r.tinyMCE=tinyMCE,r.tinymce=e,e.DOM.doc=r.document,e.DOM.win=r,s=new e.Editor(o.element_id,o),s.render(),e.isIE&&r.attachEvent("onunload",i),o.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return s&&s.remove(),!0;case"mceToggleEditor":return s?(s.isHidden()?s.show():s.hide(),!0):(a.execCommand("mceAddControl",0,o),!0)}return a.activeEditor?a.activeEditor.execCommand(t,n,o):!1},execInstanceCommand:function(e,t,n,o){var i=this.get(e);return i?i.execCommand(t,n,o):!1},triggerSave:function(){n(this.editors,function(e){e.save()})},addI18n:function(t,o){var i=this.i18n;e.is(t,"string")?n(o,function(e,n){i[t+"."+n]=e}):n(t,function(e,t){n(e,function(e,o){n(e,function(e,n){"common"===o?i[t+"."+n]=e:i[t+"."+o+"."+n]=e})})})},_setActive:function(e){this.selectedInstance=this.activeEditor=e}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,o=e.extend,i=e.each,r=e.isGecko,a=e.isIE,s=(e.isWebKit,e.is),d=e.ThemeManager,c=e.PluginManager,l=e.explode;e.create("tinymce.Editor",{Editor:function(t,n){var i=this,r=!0;i.settings=n=o({id:t,language:"en",theme:"advanced",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:e.documentBaseURL,add_form_submit_trigger:r,submit_patch:r,add_unload_trigger:r,convert_urls:r,relative_urls:r,remove_script_host:r,table_inline_editing:!1,object_resizing:r,accessibility_focus:r,doctype:e.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual:r,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:r,directionality:"ltr",forced_root_block:"p",hidden_input:r,padd_empty_editor:r,render_ui:r,indentation:"30px",fix_table_elements:r,inline_styles:r,convert_fonts_to_spans:r,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:r,entity_encoding:"named",url_converter:i.convertURL,url_converter_scope:i,ie7_compat:r},n),i.id=i.editorId=t,i.isNotDirty=!1,i.plugins={},i.documentBaseURI=new e.util.URI(n.document_base_url||e.documentBaseURL,{base_uri:tinyMCE.baseURI}),i.baseURI=e.baseURI,i.contentCSS=[],i.contentStyles=[],i.setupEvents(),i.execCommands={},i.queryStateCommands={},i.queryValueCommands={},i.execCallback("setup",i)},render:function(){function o(){a.language&&a.language_load!==!1&&u.add(e.baseURL+"/langs/"+a.language+".js"),a.theme&&"function"!=typeof a.theme&&"-"!=a.theme.charAt(0)&&!d.urls[a.theme]&&d.load(a.theme,"themes/"+a.theme+"/editor_template"+e.suffix+".js"),i(l(a.plugins),function(t){if(t&&!c.urls[t])if("-"==t.charAt(0)){t=t.substr(1,t.length);var n=c.dependencies(t);i(n,function(t){var n={prefix:"plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"};t=c.createUrl(n,t),c.load(t.resource,t)})}else{if("safari"==t)return;c.load(t,{prefix:"plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"})}}),u.loadQueue(function(){r.removed||r.init()})}var r=this,a=r.settings,s=r.id,u=e.ScriptLoader;return n.domLoaded?(tinyMCE.settings=a,void(r.getElement()&&(!e.isIDevice||e.isIOS5)&&(!/TEXTAREA|INPUT/i.test(r.getElement().nodeName)&&a.hidden_input&&t.getParent(s,"form")&&t.insertAfter(t.create("input",{type:"hidden",name:s}),s),a.content_editable||(r.orgVisibility=r.getElement().style.visibility,r.getElement().style.visibility="hidden"),e.WindowManager&&(r.windowManager=new e.WindowManager(r)),"xml"==a.encoding&&r.onGetContent.add(function(e,n){n.save&&(n.content=t.encode(n.content))}),a.add_form_submit_trigger&&r.onSubmit.addToTop(function(){r.initialized&&(r.save(),r.isNotDirty=1)}),a.add_unload_trigger&&(r._beforeUnload=tinyMCE.onBeforeUnload.add(function(){!r.initialized||r.destroyed||r.isHidden()||r.save({format:"raw",no_events:!0})})),e.addUnload(r.destroy,r),a.submit_patch&&r.onBeforeRenderUI.add(function(){var t=r.getElement().form;t&&(t._mceOldSubmit||(t.submit.nodeType||t.submit.length||(r.formElement=t,t._mceOldSubmit=t.submit,t.submit=function(){return e.triggerSave(),r.isNotDirty=1,r.formElement._mceOldSubmit(r.formElement)}),t=null))}),o()))):void n.add(window,"ready",function(){r.render()})},init:function(){function n(t){var o,r=c.get(t),a=c.urls[t]||e.documentBaseURL.replace(/\/$/,"");r&&-1===e.inArray(_,t)&&(i(c.dependencies(t),function(e){n(e)}),o=new r(y,a),y.plugins[t]=o,o.init&&(o.init(y,a),_.push(t)))}var o,r,s,u,f,p,m,h,g,v,y=this,b=y.settings,C=y.getElement(),_=[];if(e.add(y),b.aria_label=b.aria_label||t.getAttrib(C,"aria-label",y.getLang("aria.rich_text_area")),b.theme&&("function"!=typeof b.theme?(b.theme=b.theme.replace(/-/,""),f=d.get(b.theme),y.theme=new f,y.theme.init&&y.theme.init(y,d.urls[b.theme]||e.documentBaseURL.replace(/\/$/,""))):y.theme=b.theme),i(l(b.plugins.replace(/\-/g,"")),n),b.popup_css!==!1&&(b.popup_css=b.popup_css?y.documentBaseURI.toAbsolute(b.popup_css):y.baseURI.toAbsolute("themes/"+b.theme+"/skins/"+b.skin+"/dialog.css")),b.popup_css_add&&(b.popup_css+=","+y.documentBaseURI.toAbsolute(b.popup_css_add)),y.controlManager=new e.ControlManager(y),y.onBeforeRenderUI.dispatch(y,y.controlManager),b.render_ui&&y.theme&&(y.orgDisplay=C.style.display,"function"!=typeof b.theme?(r=b.width||C.style.width||C.offsetWidth,s=b.height||C.style.height||C.offsetHeight,u=b.min_height||100,g=/^[0-9\.]+(|px)$/i,g.test(""+r)&&(r=Math.max(parseInt(r,10)+(f.deltaWidth||0),100)),g.test(""+s)&&(s=Math.max(parseInt(s,10)+(f.deltaHeight||0),u)),f=y.theme.renderUI({targetNode:C,width:r,height:s,deltaWidth:b.delta_width,deltaHeight:b.delta_height}),t.setStyles(f.sizeContainer||f.editorContainer,{width:r,height:s}),s=(f.iframeHeight||s)+("number"==typeof s?f.deltaHeight||0:""),u>s&&(s=u)):(f=b.theme(y,C),f.editorContainer.nodeType&&(f.editorContainer=f.editorContainer.id=f.editorContainer.id||y.id+"_parent"),f.iframeContainer.nodeType&&(f.iframeContainer=f.iframeContainer.id=f.iframeContainer.id||y.id+"_iframecontainer"),s=f.iframeHeight||C.offsetHeight,a&&y.onInit.add(function(e){e.dom.bind(e.getBody(),"beforedeactivate keydown",function(){e.lastIERng=e.selection.getRng()})})),y.editorContainer=f.editorContainer),b.content_css&&i(l(b.content_css),function(e){y.contentCSS.push(y.documentBaseURI.toAbsolute(e))}),b.content_style&&y.contentStyles.push(b.content_style),b.content_editable)return C=o=f=null,y.initContentBody();for(document.domain&&location.hostname!=document.domain&&(e.relaxedDomain=document.domain),y.iframeHTML=b.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',b.document_base_url!=e.documentBaseURL&&(y.iframeHTML+='<base href="'+y.documentBaseURI.getURI()+'" />'),e.isIE8&&(y.iframeHTML+=b.ie7_compat?'<meta http-equiv="X-UA-Compatible" content="IE=7" />':'<meta http-equiv="X-UA-Compatible" content="IE=edge" />'),y.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',v=0;v<y.contentCSS.length;v++)y.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+y.contentCSS[v]+'" />';y.contentCSS=[],m=b.body_id||"tinymce",-1!=m.indexOf("=")&&(m=y.getParam("body_id","","hash"),m=m[y.id]||m),h=b.body_class||"",-1!=h.indexOf("=")&&(h=y.getParam("body_class","","hash"),h=h[y.id]||""),y.iframeHTML+='</head><body id="'+m+'" class="mceContentBody '+h+'" onload="window.parent.tinyMCE.get(\''+y.id+"').onLoad.dispatch();\"><br></body></html>",e.relaxedDomain&&(a||e.isOpera&&parseFloat(opera.version())<11)&&(p='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+y.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()'),o=t.add(f.iframeContainer,"iframe",{id:y.id+"_ifr",src:p||'javascript:""',frameBorder:"0",allowTransparency:"true",title:b.aria_label,style:{width:"100%",height:s,display:"block"}}),y.contentAreaContainer=f.iframeContainer,f.editorContainer&&(t.get(f.editorContainer).style.display=y.orgDisplay),C.style.visibility=y.orgVisibility,t.get(y.id).style.display="none",t.setAttrib(y.id,"aria-hidden",!0),e.relaxedDomain&&p||y.initContentBody(),C=o=f=null},initContentBody:function(){var n,o,r=this,s=r.settings,d=t.get(r.id),c=r.getDoc();a&&e.relaxedDomain||s.content_editable||(c.open(),c.write(r.iframeHTML),c.close(),e.relaxedDomain&&(c.domain=e.relaxedDomain)),s.content_editable&&(t.addClass(d,"mceContentBody"),r.contentDocument=c=s.content_document||document,r.contentWindow=s.content_window||window,r.bodyElement=d,s.content_document=s.content_window=null),n=r.getBody(),n.disabled=!0,s.readonly||(n.contentEditable=r.getParam("content_editable_state",!0)),n.disabled=!1,r.schema=new e.html.Schema(s),r.dom=new e.dom.DOMUtils(c,{keep_values:!0,url_converter:r.convertURL,url_converter_scope:r,hex_colors:s.force_hex_style_colors,class_filter:s.class_filter,update_styles:!0,root_element:s.content_editable?r.id:null,schema:r.schema}),r.parser=new e.html.DomParser(s,r.schema),r.parser.addAttributeFilter("src,href,style",function(e,t){for(var n,o,i,a=e.length,s=r.dom;a--;)n=e[a],o=n.attr(t),i="data-mce-"+t,n.attributes.map[i]||("style"===t?n.attr(i,s.serializeStyle(s.parseStyle(o),n.name)):n.attr(i,r.convertURL(o,t,n.name)))}),r.parser.addNodeFilter("script",function(e){for(var t,n=e.length;n--;)t=e[n],t.attr("type","mce-"+(t.attr("type")||"text/javascript"))}),r.parser.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)t=e[n],t.type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),r.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var n,o=t.length,i=r.schema.getNonEmptyElements();o--;)n=t[o],n.isEmpty(i)&&(n.empty().append(new e.html.Node("br",1)).shortEnded=!0)}),r.serializer=new e.dom.Serializer(s,r.dom,r.schema),r.selection=new e.dom.Selection(r.dom,r.getWin(),r.serializer,r),r.formatter=new e.Formatter(r),r.undoManager=new e.UndoManager(r),r.forceBlocks=new e.ForceBlocks(r),r.enterKey=new e.EnterKey(r),r.editorCommands=new e.EditorCommands(r),r.onExecCommand.add(function(e,t){/^(FontName|FontSize)$/.test(t)||r.nodeChanged()}),r.serializer.onPreProcess.add(function(e,t){return r.onPreProcess.dispatch(r,t,e)}),r.serializer.onPostProcess.add(function(e,t){return r.onPostProcess.dispatch(r,t,e)}),r.onPreInit.dispatch(r),s.browser_spellcheck||s.gecko_spellcheck||(c.body.spellcheck=!1),s.readonly||r.bindNativeEvents(),r.controlManager.onPostRender.dispatch(r,r.controlManager),r.onPostRender.dispatch(r),r.quirks=e.util.Quirks(r),s.directionality&&(n.dir=s.directionality),s.nowrap&&(n.style.whiteSpace="nowrap"),s.protect&&r.onBeforeSetContent.add(function(e,t){i(s.protect,function(e){t.content=t.content.replace(e,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),r.onSetContent.add(function(){r.addVisual(r.getBody())}),s.padd_empty_editor&&r.onPostProcess.add(function(e,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),r.load({initial:!0,format:"html"}),r.startContent=r.getContent({format:"raw"}),r.initialized=!0,r.onInit.dispatch(r),r.execCallback("setupcontent_callback",r.id,n,c),r.execCallback("init_instance_callback",r),r.focus(!0),r.nodeChanged({initial:!0}),r.contentStyles.length>0&&(o="",i(r.contentStyles,function(e){o+=e+"\r\n"}),r.dom.addStyle(o)),i(r.contentCSS,function(e){r.dom.loadCSS(e)}),s.auto_focus&&setTimeout(function(){var t=e.get(s.auto_focus);t.selection.select(t.getBody(),1),t.selection.collapse(1),t.getBody().focus(),t.getWin().focus()},100),d=c=n=null},focus:function(t){var n,o,i,r,a=this,s=a.selection,d=a.settings.content_editable,c=a.getDoc();t||(a.lastIERng&&s.setRng(a.lastIERng),o=s.getRng(),o.item&&(i=o.item(0)),a._refreshContentEditable(),d||a.getWin().focus(),(e.isGecko||d)&&(r=a.getBody(),r.setActive?r.setActive():r.focus(),d&&s.normalize()),i&&i.ownerDocument==c&&(o=c.body.createControlRange(),o.addElement(i),o.select())),e.activeEditor!=a&&(null!=(n=e.activeEditor)&&n.onDeactivate.dispatch(n,a),a.onActivate.dispatch(a,n)),e._setActive(a)},execCallback:function(t){var n,o=this,i=o.settings[t];if(i)return o.callbackLookup&&(n=o.callbackLookup[t])&&(i=n.func,n=n.scope),s(i,"string")&&(n=i.replace(/\.\w+$/,""),n=n?e.resolve(n):0,i=e.resolve(i),o.callbackLookup=o.callbackLookup||{},o.callbackLookup[t]={func:i,scope:n}),i.apply(n||o,Array.prototype.slice.call(arguments,1))},translate:function(t){var n=this.settings.language||"en",o=e.i18n;return t?o[n+"."+t]||t.replace(/\{\#([^\}]+)\}/g,function(e,t){return o[n+"."+t]||"{#"+t+"}"}):""},getLang:function(t,n){return e.i18n[(this.settings.language||"en")+"."+t]||(s(n)?n:"{#"+t+"}")},getParam:function(t,n,o){var r,a=e.trim,d=s(this.settings[t])?this.settings[t]:n;return"hash"===o?(r={},s(d,"string")?i(d.split(d.indexOf("=")>0?/[;,](?![^=;,]*(?:[;,]|$))/:","),function(e){e=e.split("="),r[a(e[0])]=a(e.length>1?e[1]:e)}):r=d,r):d},nodeChanged:function(e){var t,n=this,o=n.selection;n.initialized&&(e=e||{},t=o.getStart()||n.getBody(),t=a&&t.ownerDocument!=n.getDoc()?n.getBody():t,e.parents=[],n.dom.getParent(t,function(t){return"BODY"==t.nodeName?!0:void e.parents.push(t)}),n.onNodeChange.dispatch(n,e?e.controlManager||n.controlManager:n.controlManager,t,o.isCollapsed(),e))},addButton:function(e,t){var n=this;n.buttons=n.buttons||{},n.buttons[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,o){var r,a=this;return a.settings.custom_shortcuts===!1?!1:(a.shortcuts=a.shortcuts||{},s(n,"string")&&(r=n,n=function(){a.execCommand(r,!1,null)}),s(n,"object")&&(r=n,n=function(){a.execCommand(r[0],r[1],r[2])}),i(l(e),function(e){var r={func:n,scope:o||this,desc:a.translate(t),alt:!1,ctrl:!1,shift:!1};i(l(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":r[e]=!0;break;default:r.charCode=e.charCodeAt(0),r.keyCode=e.toUpperCase().charCodeAt(0)}}),a.shortcuts[(r.ctrl?"ctrl":"")+","+(r.alt?"alt":"")+","+(r.shift?"shift":"")+","+r.keyCode]=r}),!0)},execCommand:function(e,t,n,r){var a,s,d=this,c=0;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(e)||r&&r.skip_focus||d.focus(),r=o({},r),d.onBeforeExecCommand.dispatch(d,e,t,n,r),r.terminate?!1:d.execCallback("execcommand_callback",d.id,d.selection.getNode(),e,t,n)?(d.onExecCommand.dispatch(d,e,t,n,r),!0):(a=d.execCommands[e])&&(s=a.func.call(a.scope,t,n),s!==!0)?(d.onExecCommand.dispatch(d,e,t,n,r),s):(i(d.plugins,function(o){return o.execCommand&&o.execCommand(e,t,n)?(d.onExecCommand.dispatch(d,e,t,n,r),c=1,!1):void 0}),c?!0:d.theme&&d.theme.execCommand&&d.theme.execCommand(e,t,n)?(d.onExecCommand.dispatch(d,e,t,n,r),!0):d.editorCommands.execCommand(e,t,n)?(d.onExecCommand.dispatch(d,e,t,n,r),!0):(d.getDoc().execCommand(e,t,n),void d.onExecCommand.dispatch(d,e,t,n,r)))},queryCommandState:function(e){var t,n,o=this;if(!o._isHidden()){if((t=o.queryStateCommands[e])&&(n=t.func.call(t.scope),n!==!0))return n;if(t=o.editorCommands.queryCommandState(e),-1!==t)return t;try{return this.getDoc().queryCommandState(e)}catch(i){}}},queryCommandValue:function(e){var t,n,o=this;if(!o._isHidden()){if((t=o.queryValueCommands[e])&&(n=t.func.call(t.scope),n!==!0))return n;if(t=o.editorCommands.queryCommandValue(e),s(t))return t;try{return this.getDoc().queryCommandValue(e)}catch(i){}}},show:function(){var e=this;t.show(e.getContainer()),t.hide(e.id),e.load()},hide:function(){var e=this,n=e.getDoc();a&&n&&n.execCommand("SelectAll"),e.save(),t.hide(e.getContainer()),t.setStyle(e.id,"display",e.orgDisplay)},isHidden:function(){return!t.isHidden(this.id)},setProgressState:function(e,t,n){return this.onSetProgressState.dispatch(this,e,t,n),e},load:function(e){var t,n=this,o=n.getElement();return o?(e=e||{},e.load=!0,t=n.setContent(s(o.value)?o.value:o.innerHTML,e),e.element=o,e.no_events||n.onLoadContent.dispatch(n,e),e.element=o=null,t):void 0},save:function(e){var n,o,r=this,a=r.getElement();if(a&&r.initialized)return e=e||{},e.save=!0,e.element=a,n=e.content=r.getContent(e),e.no_events||r.onSaveContent.dispatch(r,e),n=e.content,/TEXTAREA|INPUT/i.test(a.nodeName)?a.value=n:(a.innerHTML=n,(o=t.getParent(r.id,"form"))&&i(o.elements,function(e){return e.name==r.id?(e.value=n,!1):void 0})),e.element=a=null,n},setContent:function(t,n){var o,i=this,r=i.getBody();return n=n||{},n.format=n.format||"html",n.set=!0,n.content=t,n.no_events||i.onBeforeSetContent.dispatch(i,n),t=n.content,e.isIE||0!==t.length&&!/^\s+$/.test(t)?("raw"!==n.format&&(t=new e.html.Serializer({},i.schema).serialize(i.parser.parse(t))),n.content=e.trim(t),i.dom.setHTML(r,n.content),n.no_events||i.onSetContent.dispatch(i,n),i.settings.content_editable&&document.activeElement!==i.getBody()||i.selection.normalize(),n.content):(o=i.settings.forced_root_block,t=o?"<"+o+'><br data-mce-bogus="1"></'+o+">":'<br data-mce-bogus="1">',r.innerHTML=t,i.selection.select(r,!0),void i.selection.collapse(!0))},getContent:function(t){var n,o=this,i=o.getBody();return t=t||{},t.format=t.format||"html",t.get=!0,t.getInner=!0,t.no_events||o.onBeforeGetContent.dispatch(o,t),n="raw"==t.format?i.innerHTML:"text"==t.format?i.innerText||i.textContent:o.serializer.serialize(i,t),t.content="text"!=t.format?e.trim(n):n,t.no_events||o.onGetContent.dispatch(o,t),t.content},isDirty:function(){var t=this;return e.trim(t.startContent)!=e.trim(t.getContent({format:"raw",no_events:1}))&&!t.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=t.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return t.get(this.settings.content_element||this.id)},getWin:function(){var e,n=this;return n.contentWindow||(e=t.get(n.id+"_ifr"),e&&(n.contentWindow=e.contentWindow)),n.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin(),e&&(t.contentDocument=e.document)),t.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var o=this,i=o.settings;return i.urlconverter_callback?o.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")?e:i.relative_urls?o.documentBaseURI.toRelative(e):e=o.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var t,n=this,o=n.settings,r=n.dom;e=e||n.getBody(),s(n.hasVisual)||(n.hasVisual=o.visual),i(r.select("table,a",e),function(e){var i;switch(e.nodeName){case"TABLE":return t=o.visual_table_class||"mceItemTable",i=r.getAttrib(e,"border"),void(i&&"0"!=i||(n.hasVisual?r.addClass(e,t):r.removeClass(e,t)));case"A":return void(r.getAttrib(e,"href",!1)||(i=r.getAttrib(e,"name")||e.id,t="mceItemAnchor",i&&(n.hasVisual?r.addClass(e,t):r.removeClass(e,t))))}}),n.onVisualAid.dispatch(n,e,n.hasVisual)},remove:function(){var o=this,i=o.getContainer(),r=o.getDoc();o.removed||(o.removed=1,a&&r&&r.execCommand("SelectAll"),o.save(),t.setStyle(o.id,"display",o.orgDisplay),o.settings.content_editable||(n.unbind(o.getWin()),n.unbind(o.getDoc())),n.unbind(o.getBody()),n.clear(i),o.execCallback("remove_instance_callback",o),o.onRemove.dispatch(o),o.onExecCommand.listeners=[],e.remove(o),t.remove(i))},destroy:function(t){var o=this;o.destroyed||(r&&(n.unbind(o.getDoc()),n.unbind(o.getWin()),n.unbind(o.getBody())),t||(e.removeUnload(o.destroy),tinyMCE.onBeforeUnload.remove(o._beforeUnload),o.theme&&o.theme.destroy&&o.theme.destroy(),o.controlManager.destroy(),o.selection.destroy(),o.dom.destroy()),o.formElement&&(o.formElement.submit=o.formElement._mceOldSubmit,o.formElement._mceOldSubmit=null),o.contentAreaContainer=o.formElement=o.container=o.settings.content_element=o.bodyElement=o.contentDocument=o.contentWindow=null,o.selection&&(o.selection=o.selection.win=o.selection.dom=o.selection.dom.doc=null),o.destroyed=1)},_refreshContentEditable:function(){var e,t,n=this;n._isHidden()&&(e=n.getBody(),t=e.parentNode,t.removeChild(e),t.appendChild(e),e.focus())},_isHidden:function(){var e;return r?(e=this.selection.getSel(),!e||!e.rangeCount||0===e.rangeCount):0}})}(tinymce),function(e){var t=e.each;e.Editor.prototype.setupEvents=function(){var n=this,o=n.settings;t(["onPreInit","onBeforeRenderUI","onPostRender","onLoad","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onSetAttrib"],function(t){n[t]=new e.util.Dispatcher(n)}),o.cleanup_callback&&(n.onBeforeSetContent.add(function(e,t){t.content=e.execCallback("cleanup_callback","insert_to_editor",t.content,t)}),n.onPreProcess.add(function(e,t){t.set&&e.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t),t.get&&e.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)}),n.onPostProcess.add(function(e,t){t.set&&(t.content=e.execCallback("cleanup_callback","insert_to_editor",t.content,t)),t.get&&(t.content=e.execCallback("cleanup_callback","get_from_editor",t.content,t))})),o.save_callback&&n.onGetContent.add(function(e,t){t.save&&(t.content=e.execCallback("save_callback",e.id,t.content,e.getBody()))}),o.handle_event_callback&&n.onEvent.add(function(e,t,o){n.execCallback("handle_event_callback",t,e,o)===!1&&(t.preventDefault(),t.stopPropagation())}),o.handle_node_change_callback&&n.onNodeChange.add(function(e,t,n){e.execCallback("handle_node_change_callback",e.id,n,-1,-1,!0,e.selection.isCollapsed())}),o.save_callback&&n.onSaveContent.add(function(e,t){var n=e.execCallback("save_callback",e.id,t.content,e.getBody());n&&(t.content=n)}),o.onchange_callback&&n.onChange.add(function(e,t){e.execCallback("onchange_callback",e,t)})},e.Editor.prototype.bindNativeEvents=function(){function n(e,t){e.type;s.removed||s.onEvent.dispatch(s,e,t)!==!1&&s[a[e.fakeType||e.type]].dispatch(s,e,t)}function o(){s.focus(!0)}function i(t,n){65==n.keyCode&&e.VK.metaKeyPressed(n)||s.selection.normalize(),s.nodeChanged()}function r(n,o){(n.altKey||n.ctrlKey||n.metaKey)&&t(s.shortcuts,function(t){var i=e.isMac?n.metaKey:n.ctrlKey;if(t.ctrl==i&&t.alt==n.altKey&&t.shift==n.shiftKey)return n.keyCode==t.keyCode||n.charCode&&n.charCode==t.charCode?(n.preventDefault(),o&&t.func.call(t.scope),!0):void 0})}var a,s=this,d=s.settings,c=s.dom;a={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"},t(a,function(t,o){var i=d.content_editable?s.getBody():s.getDoc();
switch(o){case"contextmenu":c.bind(i,o,n);break;case"paste":c.bind(s.getBody(),o,n);break;case"submit":case"reset":c.bind(s.getElement().form||e.DOM.getParent(s.id,"form"),o,n);break;default:c.bind(i,o,n)}}),c.bind(d.content_editable?s.getBody():e.isGecko?s.getDoc():s.getWin(),"focus",function(){s.focus(!0)}),d.content_editable&&e.isOpera&&(c.bind(s.getBody(),"click",o),c.bind(s.getBody(),"keydown",o)),s.onMouseUp.add(i),s.onKeyUp.add(function(t,n){var o=n.keyCode;(o>=33&&36>=o||o>=37&&40>=o||13==o||45==o||46==o||8==o||e.isMac&&(91==o||93==o)||n.ctrlKey)&&i(t,n)}),s.onReset.add(function(){s.setContent(s.startContent,{format:"raw"})}),s.onKeyUp.add(function(e,t){r(t)}),s.onKeyPress.add(function(e,t){r(t)}),s.onKeyDown.add(function(e,t){r(t,!0)}),e.isOpera&&s.onClick.add(function(e,t){t.preventDefault()})}}(tinymce),function(e){var t,n=e.each,o=!0,i=!1;e.EditorCommands=function(r){function a(e,t,n){var r;return e=e.toLowerCase(),(r=y.exec[e])?(r(e,t,n),o):i}function s(e){var t;return e=e.toLowerCase(),(t=y.state[e])?t(e):-1}function d(e){var t;return e=e.toLowerCase(),(t=y.value[e])?t(e):i}function c(e,t){t=t||"exec",n(e,function(e,o){n(o.toLowerCase().split(","),function(n){y[t][n]=e})})}function l(e,n,o){return n===t&&(n=i),o===t&&(o=null),r.getDoc().execCommand(e,n,o)}function u(e){return C.match(e)}function f(e,n){C.toggle(e,n?{value:n}:t)}function p(e){h=v.getBookmark(e)}function m(){v.moveToBookmark(h)}var h,g=r.dom,v=r.selection,y={state:{},exec:{},value:{}},b=r.settings,C=r.formatter;e.extend(this,{execCommand:a,queryCommandState:s,queryCommandValue:d,addCommands:c}),c({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){r.undoManager.add()},"Cut,Copy,Paste":function(t){var n,i=r.getDoc();try{l(t)}catch(a){n=o}(n||!i.queryCommandSupported(t))&&(e.isGecko?r.windowManager.confirm(r.getLang("clipboard_msg"),function(e){e&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):r.windowManager.alert(r.getLang("clipboard_no_support")))},unlink:function(e){v.isCollapsed()&&v.select(v.getNode()),l(e),v.collapse(i)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t=e.substring(7);n("left,center,right,full".split(","),function(e){t!=e&&C.remove("align"+e)}),f("align"+t),a("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;l(e),t=g.getParent(v.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(p(),g.split(n,t),m()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){f(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){f(e,n)},FontSize:function(t,n,o){var i,r;o>=1&&7>=o&&(r=e.explode(b.font_size_style_values),i=e.explode(b.font_size_classes),o=i?i[o-1]||o:r[o-1]||o),f(t,o)},RemoveFormat:function(e){C.remove(e)},mceBlockQuote:function(){f("blockquote")},FormatBlock:function(e,t,n){return f(n||"p")},mceCleanup:function(){var e=v.getBookmark();r.setContent(r.getContent({cleanup:o}),{cleanup:o}),v.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var i=n||v.getNode();i!=r.getBody()&&(p(),r.dom.remove(i,o),m())},mceSelectNodeDepth:function(e,t,n){var o=0;g.getParent(v.getNode(),function(e){return 1==e.nodeType&&o++==n?(v.select(e),i):void 0},r.getBody())},mceSelectNode:function(e,t,n){v.select(n)},mceInsertContent:function(t,n,o){var i,a,s,d,c,l,u,f,p,m,h,y,b,C;if(i=r.parser,a=new e.html.Serializer({},r.schema),b='<span id="mce_marker" data-mce-type="bookmark">﻿</span>',l={content:o,format:"html"},v.onBeforeSetContent.dispatch(v,l),o=l.content,-1==o.indexOf("{$caret}")&&(o+="{$caret}"),o=o.replace(/\{\$caret\}/,b),v.isCollapsed()||r.getDoc().execCommand("Delete",!1,null),s=v.getNode(),l={context:s.nodeName.toLowerCase()},c=i.parse(o,l),h=c.lastChild,"mce_marker"==h.attr("id"))for(u=h,h=h.prev;h;h=h.walk(!0))if(3==h.type||!g.isBlock(h.name)){h.parent.insert(u,h,"br"===h.name);break}if(l.invalid){for(v.setContent(b),s=v.getNode(),d=r.getBody(),9==s.nodeType?s=h=d:h=s;h!==d;)s=h,h=h.parentNode;o=s==d?d.innerHTML:g.getOuterHTML(s),o=a.serialize(i.parse(o.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return a.serialize(c)}))),s==d?g.setHTML(d,o):g.setOuterHTML(s,o)}else o=a.serialize(c),h=s.firstChild,y=s.lastChild,!h||h===y&&"BR"===h.nodeName?g.setHTML(s,o):v.setContent(o);u=g.get("mce_marker"),f=g.getRect(u),p=g.getViewPort(r.getWin()),(f.y+f.h>p.y+p.h||f.y<p.y||f.x>p.x+p.w||f.x<p.x)&&(C=e.isIE?r.getDoc().documentElement:r.getBody(),C.scrollLeft=f.x,C.scrollTop=f.y-p.h+25),m=g.createRng(),h=u.previousSibling,h&&3==h.nodeType?m.setStart(h,h.nodeValue.length):(m.setStartBefore(u),m.setEndBefore(u)),g.remove(u),v.setRng(m),v.onSetContent.dispatch(v,l),r.addVisual()},mceInsertRawHTML:function(e,t,n){v.setContent("tiny_mce_marker"),r.setContent(r.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){f(n)},mceSetContent:function(e,t,n){r.setContent(n)},"Indent,Outdent":function(e){var t,o,i;t=b.indentation,o=/[a-z%]+$/i.exec(t),t=parseInt(t),s("InsertUnorderedList")||s("InsertOrderedList")?l(e):(b.forced_root_block||g.getParent(v.getNode(),g.isBlock)||C.apply("div"),n(v.getSelectedBlocks(),function(n){"outdent"==e?(i=Math.max(0,parseInt(n.style.paddingLeft||0)-t),g.setStyle(n,"paddingLeft",i?i+o:"")):g.setStyle(n,"paddingLeft",parseInt(n.style.paddingLeft||0)+t+o)}))},mceRepaint:function(){if(e.isGecko)try{p(o),v.getSel()&&v.getSel().selectAllChildren(r.getBody()),v.collapse(o),m()}catch(t){}},mceToggleFormat:function(e,t,n){C.toggle(n)},InsertHorizontalRule:function(){r.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){r.hasVisual=!r.hasVisual,r.addVisual()},mceReplaceContent:function(e,t,n){r.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,v.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var o;"string"==typeof n&&(n={href:n}),o=g.getParent(v.getNode(),"a"),n.href=n.href.replace(" ","%20"),o&&n.href||C.remove("link"),n.href&&C.apply("link",n,o)},selectAll:function(){var e=g.getRoot(),t=g.createRng();v.getRng().setStart?(t.setStart(e,0),t.setEnd(e,e.childNodes.length),v.setRng(t)):l("SelectAll")}}),c({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(t){var n="align"+t.substring(7),i=v.isCollapsed()?[g.getParent(v.getNode(),g.isBlock)]:v.getSelectedBlocks(),r=e.map(i,function(e){return!!C.matchNode(e,n)});return-1!==e.inArray(r,o)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return u(e)},mceBlockQuote:function(){return u("blockquote")},Outdent:function(){var e;if(b.inline_styles){if((e=g.getParent(v.getStart(),g.isBlock))&&parseInt(e.style.paddingLeft)>0)return o;if((e=g.getParent(v.getEnd(),g.isBlock))&&parseInt(e.style.paddingLeft)>0)return o}return s("InsertUnorderedList")||s("InsertOrderedList")||!b.inline_styles&&!!g.getParent(v.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=g.getParent(v.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),c({"FontSize,FontName":function(e){var t,n=0;return(t=g.getParent(v.getNode(),"span"))&&(n="fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),c({Undo:function(){r.undoManager.undo()},Redo:function(){r.undoManager.redo()}})}}(tinymce),function(e){var t=e.util.Dispatcher;e.UndoManager=function(n){function o(){return e.trim(n.getContent({format:"raw",no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\/span>/g,""))}function i(){r.typing=!1,r.add()}var r,a,s,d,c,l=0,u=[];return onBeforeAdd=new t(r),s=new t(r),d=new t(r),c=new t(r),s.add(function(e,t){return e.hasUndo()?n.onChange.dispatch(n,t,e):void 0}),d.add(function(e,t){return n.onUndo.dispatch(n,t,e)}),c.add(function(e,t){return n.onRedo.dispatch(n,t,e)}),n.onInit.add(function(){r.add()}),n.onBeforeExecCommand.add(function(e,t,n,o,i){"Undo"==t||"Redo"==t||"mceRepaint"==t||i&&i.skip_undo||r.beforeChange()}),n.onExecCommand.add(function(e,t,n,o,i){"Undo"==t||"Redo"==t||"mceRepaint"==t||i&&i.skip_undo||r.add()}),n.onSaveContent.add(i),n.dom.bind(n.dom.getRoot(),"dragend",i),n.dom.bind(n.getBody(),"focusout",function(){!n.removed&&r.typing&&i()}),n.onKeyUp.add(function(e,t){var n=t.keyCode;(n>=33&&36>=n||n>=37&&40>=n||45==n||13==n||t.ctrlKey)&&i()}),n.onKeyDown.add(function(e,t){var n=t.keyCode;return n>=33&&36>=n||n>=37&&40>=n||45==n?void(r.typing&&i()):void((16>n||n>20)&&224!=n&&91!=n&&!r.typing&&(r.beforeChange(),r.typing=!0,r.add()))}),n.onMouseDown.add(function(){r.typing&&i()}),n.addShortcut("ctrl+z","undo_desc","Undo"),n.addShortcut("ctrl+y","redo_desc","Redo"),r={data:u,typing:!1,onBeforeAdd:onBeforeAdd,onAdd:s,onUndo:d,onRedo:c,beforeChange:function(){a=n.selection.getBookmark(2,!0)},add:function(e){var t,i,s=n.settings;if(e=e||{},e.content=o(),r.onBeforeAdd.dispatch(r,e),i=u[l],i&&i.content==e.content)return null;if(u[l]&&(u[l].beforeBookmark=a),s.custom_undo_redo_levels&&u.length>s.custom_undo_redo_levels){for(t=0;t<u.length-1;t++)u[t]=u[t+1];u.length--,l=u.length}return e.bookmark=n.selection.getBookmark(2,!0),l<u.length-1&&(u.length=l+1),u.push(e),l=u.length-1,r.onAdd.dispatch(r,e),n.isNotDirty=0,e},undo:function(){var e;return r.typing&&(r.add(),r.typing=!1),l>0&&(e=u[--l],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.beforeBookmark),r.onUndo.dispatch(r,e)),e},redo:function(){var e;return l<u.length-1&&(e=u[++l],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.bookmark),r.onRedo.dispatch(r,e)),e},clear:function(){u=[],l=0,r.typing=!1},hasUndo:function(){return l>0||this.typing},hasRedo:function(){return l<u.length-1&&!this.typing}}}}(tinymce),tinymce.ForceBlocks=function(e){function t(){var t,a,s,d,c,l,u,f,p,m=i.getStart(),h=e.getBody(),g=-16777215;if(m&&1===m.nodeType&&n.forced_root_block){for(;m&&m!=h;){if(r[m.nodeName])return;m=m.parentNode}for(t=i.getRng(),t.setStart?(a=t.startContainer,s=t.startOffset,d=t.endContainer,c=t.endOffset):(t.item&&(m=t.item(0),t=e.getDoc().body.createTextRange(),t.moveToElementText(m)),p=t.parentElement().ownerDocument===e.getDoc(),tmpRng=t.duplicate(),tmpRng.collapse(!0),s=-1*tmpRng.move("character",g),tmpRng.collapsed||(tmpRng=t.duplicate(),tmpRng.collapse(!1),c=-1*tmpRng.move("character",g)-s)),m=h.firstChild;m;)if(3===m.nodeType||1==m.nodeType&&!r[m.nodeName]){if(3===m.nodeType&&0==m.nodeValue.length){u=m,m=m.nextSibling,o.remove(u);continue}l||(l=o.create(n.forced_root_block),m.parentNode.insertBefore(l,m),f=!0),u=m,m=m.nextSibling,l.appendChild(u)}else l=null,m=m.nextSibling;if(f){if(t.setStart)t.setStart(a,s),t.setEnd(d,c),i.setRng(t);else if(p)try{t=e.getDoc().body.createTextRange(),t.moveToElementText(h),t.collapse(!0),t.moveStart("character",s),c>0&&t.moveEnd("character",c),t.select()}catch(v){}e.nodeChanged()}}}var n=e.settings,o=e.dom,i=e.selection,r=e.schema.getBlockElements();n.forced_root_block&&(e.onKeyUp.add(t),e.onNodeChange.add(t))},function(e){var t=(e.DOM,e.dom.Event),n=e.each,o=e.extend;e.create("tinymce.ControlManager",{ControlManager:function(t,o){var i=this;o=o||{},i.editor=t,i.controls={},i.onAdd=new e.util.Dispatcher(i),i.onPostRender=new e.util.Dispatcher(i),i.prefix=o.prefix||t.id+"_",i._cls={},i.onPostRender.add(function(){n(i.controls,function(e){e.postRender()})})},get:function(e){return this.controls[this.prefix+e]||this.controls[e]},setActive:function(e,t){var n=null;return(n=this.get(e))&&n.setActive(t),n},setDisabled:function(e,t){var n=null;return(n=this.get(e))&&n.setDisabled(t),n},add:function(e){var t=this;return e&&(t.controls[e.id]=e,t.onAdd.dispatch(e,t)),e},createControl:function(e){var t,o,i,r,a=this,s=a.editor;for(a.controlFactories||(a.controlFactories=[],n(s.plugins,function(e){e.createControl&&a.controlFactories.push(e)})),r=a.controlFactories,o=0,i=r.length;i>o;o++)if(t=r[o].createControl(e,a))return a.add(t);return"|"===e||"separator"===e?a.createSeparator():s.buttons&&(t=s.buttons[e])?a.createButton(e,t):a.add(t)},createDropMenu:function(t,n,i){var r,a,s,d,c=this,l=c.editor;return n=o({"class":"mceDropDown",constrain:l.settings.constrain_menus},n),n["class"]=n["class"]+" "+l.getParam("skin")+"Skin",(s=l.getParam("skin_variant"))&&(n["class"]+=" "+l.getParam("skin")+"Skin"+s.substring(0,1).toUpperCase()+s.substring(1)),n["class"]+="rtl"==l.settings.directionality?" mceRtl":"",t=c.prefix+t,d=i||c._cls.dropmenu||e.ui.DropMenu,r=c.controls[t]=new d(t,n),r.onAddItem.add(function(e,t){var n=t.settings;n.title=l.getLang(n.title,n.title),n.onclick||(n.onclick=function(){n.cmd&&l.execCommand(n.cmd,n.ui||!1,n.value)})}),l.onRemove.add(function(){r.destroy()}),e.isIE&&(r.onShowMenu.add(function(){l.focus(),a=l.selection.getBookmark(1)}),r.onHideMenu.add(function(){a&&(l.selection.moveToBookmark(a),a=0)})),c.add(r)},createListBox:function(n,i,r){function a(t){return t.settings.use_accessible_selects&&!e.isGecko}var s,d,c=this,l=c.editor;return c.get(n)?null:(i.title=l.translate(i.title),i.scope=i.scope||l,i.onselect||(i.onselect=function(e){l.execCommand(i.cmd,i.ui||!1,e||i.value)}),i=o({title:i.title,"class":"mce_"+n,scope:i.scope,control_manager:c},i),n=c.prefix+n,l.settings.use_native_selects||a(l)?s=new e.ui.NativeListBox(n,i):(d=r||c._cls.listbox||e.ui.ListBox,s=new d(n,i,l)),c.controls[n]=s,e.isWebKit&&s.onPostRender.add(function(e,n){t.add(n,"mousedown",function(){l.bookmark=l.selection.getBookmark(1)}),t.add(n,"focus",function(){l.selection.moveToBookmark(l.bookmark),l.bookmark=null})}),s.hideMenu&&l.onMouseDown.add(s.hideMenu,s),c.add(s))},createButton:function(t,n,i){var r,a,s=this,d=s.editor;return s.get(t)?null:(n.title=d.translate(n.title),n.label=d.translate(n.label),n.scope=n.scope||d,n.onclick||n.menu_button||(n.onclick=function(){d.execCommand(n.cmd,n.ui||!1,n.value)}),n=o({title:n.title,"class":"mce_"+t,unavailable_prefix:d.getLang("unavailable",""),scope:n.scope,control_manager:s},n),t=s.prefix+t,n.menu_button?(a=i||s._cls.menubutton||e.ui.MenuButton,r=new a(t,n,d),d.onMouseDown.add(r.hideMenu,r)):(a=s._cls.button||e.ui.Button,r=new a(t,n,d)),s.add(r))},createMenuButton:function(e,t,n){return t=t||{},t.menu_button=1,this.createButton(e,t,n)},createSplitButton:function(t,n,i){var r,a,s=this,d=s.editor;return s.get(t)?null:(n.title=d.translate(n.title),n.scope=n.scope||d,n.onclick||(n.onclick=function(e){d.execCommand(n.cmd,n.ui||!1,e||n.value)}),n.onselect||(n.onselect=function(e){d.execCommand(n.cmd,n.ui||!1,e||n.value)}),n=o({title:n.title,"class":"mce_"+t,scope:n.scope,control_manager:s},n),t=s.prefix+t,a=i||s._cls.splitbutton||e.ui.SplitButton,r=s.add(new a(t,n,d)),d.onMouseDown.add(r.hideMenu,r),r)},createColorSplitButton:function(t,n,i){var r,a,s,d=this,c=d.editor;return d.get(t)?null:(n.title=c.translate(n.title),n.scope=n.scope||c,n.onclick||(n.onclick=function(t){e.isIE&&(s=c.selection.getBookmark(1)),c.execCommand(n.cmd,n.ui||!1,t||n.value)}),n.onselect||(n.onselect=function(e){c.execCommand(n.cmd,n.ui||!1,e||n.value)}),n=o({title:n.title,"class":"mce_"+t,menu_class:c.getParam("skin")+"Skin",scope:n.scope,more_colors_title:c.getLang("more_colors")},n),t=d.prefix+t,a=i||d._cls.colorsplitbutton||e.ui.ColorSplitButton,r=new a(t,n,c),c.onMouseDown.add(r.hideMenu,r),c.onRemove.add(function(){r.destroy()}),e.isIE&&(r.onShowMenu.add(function(){c.focus(),s=c.selection.getBookmark(1)}),r.onHideMenu.add(function(){s&&(c.selection.moveToBookmark(s),s=0)})),d.add(r))},createToolbar:function(t,n,o){var i,r,a=this;return t=a.prefix+t,r=o||a._cls.toolbar||e.ui.Toolbar,i=new r(t,n,a.editor),a.get(t)?null:a.add(i)},createToolbarGroup:function(t,n,o){var i,r,a=this;return t=a.prefix+t,r=o||this._cls.toolbarGroup||e.ui.ToolbarGroup,i=new r(t,n,a.editor),a.get(t)?null:a.add(i)},createSeparator:function(t){var n=t||this._cls.separator||e.ui.Separator;return new n},setControlType:function(e,t){return this._cls[e.toLowerCase()]=t},destroy:function(){n(this.controls,function(e){e.destroy()}),this.controls=null}})}(tinymce),function(e){var t=e.util.Dispatcher,n=e.each,o=e.isIE,i=e.isOpera;e.create("tinymce.WindowManager",{WindowManager:function(e){var n=this;n.editor=e,n.onOpen=new t(n),n.onClose=new t(n),n.params={},n.features={}},open:function(t,r){var a,s,d,c,l=this,u="",f="modal"==l.editor.settings.dialog_type,p=e.DOM.getViewPort();t=t||{},r=r||{},s=i?p.w:screen.width,d=i?p.h:screen.height,t.name=t.name||"mc_"+(new Date).getTime(),t.width=parseInt(t.width||320),t.height=parseInt(t.height||240),t.resizable=!0,t.left=t.left||parseInt(s/2)-t.width/2,t.top=t.top||parseInt(d/2)-t.height/2,r.inline=!1,r.mce_width=t.width,r.mce_height=t.height,r.mce_auto_focus=t.auto_focus,f&&o&&(t.center=!0,t.help=!1,t.dialogWidth=t.width+"px",t.dialogHeight=t.height+"px",t.scroll=t.scrollbars||!1),n(t,function(t,n){e.is(t,"boolean")&&(t=t?"yes":"no"),/^(name|url)$/.test(n)||(u+=o&&f?(u?";":"")+n+":"+t:(u?",":"")+n+"="+t)}),l.features=t,l.params=r,l.onOpen.dispatch(l,t,r),c=t.url||t.file,c=e._addVer(c);try{o&&f?(a=1,window.showModalDialog(c,window,u)):a=window.open(c,t.name,u)}catch(m){}a||alert(l.editor.getLang("popup_blocked"))},close:function(e){e.close(),this.onClose.dispatch(this)},createInstance:function(t,n,o,i,r,a){var s=e.resolve(t);return new s(n,o,i,r,a)},confirm:function(e,t,n,o){o=o||window,t.call(n||this,o.confirm(this._decode(this.editor.getLang(e,e))))},alert:function(e,t,n,o){var i=this;o=o||window,o.alert(i._decode(i.editor.getLang(e,e))),t&&t.call(n||i)},resizeBy:function(e,t,n){n.resizeBy(e,t)},_decode:function(t){return e.DOM.decode(t).replace(/\\n/g,"\n")}})}(tinymce),function(e){e.Formatter=function(t){function n(e){return!!t.schema.getTextBlocks()[e.toLowerCase()]}function o(e,t){return P.getParents(e,t,P.getRoot())}function i(e){return 1===e.nodeType&&"_mce_caret"===e.id}function r(){d({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){I(n,function(t,n){P.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),I("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(e){d(e,{block:e,remove:"all"})}),d(t.settings.formats)}function a(){t.addShortcut("ctrl+b","bold_desc","Bold"),t.addShortcut("ctrl+i","italic_desc","Italic"),t.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;6>=e;e++)t.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);t.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),t.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),t.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function s(e){return e?D[e]:D}function d(e,t){e&&("string"!=typeof e?I(e,function(e,t){d(t,e)}):(t=t.length?t:[t],I(t,function(e){e.deep===L&&(e.deep=!e.selector),e.split===L&&(e.split=!e.selector||e.inline),e.remove===L&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),D[e]=t))}function c(o,r,a){function d(e,t){t=t||b,e&&(t.onformat&&t.onformat(e,t,r,a),I(t.styles,function(t,n){P.setStyle(e,n,C(t,r))}),I(t.attributes,function(t,n){P.setAttrib(e,n,C(t,r))}),I(t.classes,function(t){t=C(t,r),P.hasClass(e,t)||P.addClass(e,t)}))}function l(){function e(e,t){var n=new H(t);for(a=n.current();a;a=n.prev())if(a.childNodes.length>1||a==e||"BR"==a.tagName)return a}var n=t.selection.getRng(),o=n.startContainer,i=n.endContainer;if(o!=i&&0===n.endOffset){var r=e(o,i),s=3==r.nodeType?r.length:r.childNodes.length;n.setEnd(r,s)}return n}function u(t,n,o,i,r){var a,s,d=[],c=-1,l=-1,u=-1;return I(t.childNodes,function(e,t){return"UL"===e.nodeName||"OL"===e.nodeName?(c=t,a=e,!1):void 0}),I(t.childNodes,function(e,t){"SPAN"===e.nodeName&&"bookmark"==P.getAttrib(e,"data-mce-type")&&(e.id==n.id+"_start"?l=t:e.id==n.id+"_end"&&(u=t))}),0>=c||c>l&&u>c?(I(e.grep(t.childNodes),r),0):(s=P.clone(o,$),I(e.grep(t.childNodes),function(e,t){(c>l&&c>t||l>c&&t>c)&&(d.push(e),e.parentNode.removeChild(e))}),c>l?t.insertBefore(s,a):l>c&&t.insertBefore(s,a.nextSibling),i.push(s),I(d,function(e){s.appendChild(e)}),s)}function p(t,a,s){var c,l,p=[],m=!0;c=b.inline||b.block,l=P.create(c),d(l),F.walk(t,function(t){function h(t){var C,_,k,S,E;return E=m,C=t.nodeName.toLowerCase(),_=t.parentNode.nodeName.toLowerCase(),1===t.nodeType&&G(t)&&(E=m,m="true"===G(t),S=!0),y(C,"br")?(v=0,void(b.block&&P.remove(t))):b.wrapper&&f(t,o,r)?void(v=0):m&&!S&&b.block&&!b.wrapper&&n(C)?(t=P.rename(t,c),d(t),p.push(t),void(v=0)):b.selector&&(I(g,function(e){"collapsed"in e&&e.collapsed!==x||P.is(t,e.selector)&&!i(t)&&(d(t,e),k=!0)}),!b.inline||k)?void(v=0):void(m&&!S&&U(c,C)&&U(_,c)&&(s||3!==t.nodeType||1!==t.nodeValue.length||65279!==t.nodeValue.charCodeAt(0))&&!i(t)?(v||(v=P.clone(l,$),t.parentNode.insertBefore(v,t),p.push(v)),v.appendChild(t)):"li"==C&&a?v=u(t,a,l,p,h):(v=0,I(e.grep(t.childNodes),h),S&&(m=E),v=0))}var v;I(t,h)}),b.wrap_links===!1&&I(p,function(t){function n(t){var o,i,r;if("A"===t.nodeName){for(i=P.clone(l,$),p.push(i),r=e.grep(t.childNodes),o=0;o<r.length;o++)i.appendChild(r[o]);t.appendChild(i)}I(e.grep(t.childNodes),n)}n(t)}),I(p,function(e){function t(e){var t=0;return I(e.childNodes,function(e){_(e)||N(e)||t++}),t}function n(e){var t,n;return I(e.childNodes,function(e){return 1!=e.nodeType||N(e)||i(e)?void 0:(t=e,$)}),t&&v(t,b)&&(n=P.clone(t,$),d(n),P.replace(n,e,W),P.remove(t,1)),n||e}var a;if(a=t(e),(p.length>1||!V(e))&&0===a)return void P.remove(e,1);if(b.inline||b.wrapper){if(b.exact||1!==a||(e=n(e)),I(g,function(t){I(P.select(t.inline,e),function(e){var n;if(t.wrap_links===!1){n=e.parentNode;do if("A"===n.nodeName)return;while(n=n.parentNode)}S(t,r,e,t.exact?e:null)})}),f(e.parentNode,o,r))return P.remove(e,1),e=0,W;b.merge_with_parents&&P.getParent(e.parentNode,function(t){return f(t,o,r)?(P.remove(e,1),e=0,W):void 0}),e&&b.merge_siblings!==!1&&(e=T(w(e),e),e=T(e,w(e,W)))}})}var m,h,g=s(o),b=g[0],x=O.isCollapsed();if(b)if(a)a.nodeType?(h=P.createRng(),h.setStartBefore(a),h.setEndAfter(a),p(k(h,g),null,!0)):p(a,null,!0);else if(x&&b.inline&&!P.select("td.mceSelected,th.mceSelected").length)B("apply",o,r);else{var E=t.selection.getNode();z||!g[0].defaultBlock||P.getParent(E,P.isBlock)||c(g[0].defaultBlock),t.selection.setRng(l()),m=O.getBookmark(),p(k(O.getRng(W),g),m),b.styles&&(b.styles.color||b.styles.textDecoration)&&(e.walk(E,X,"childNodes"),X(E)),O.moveToBookmark(m),M(O.getRng(W)),t.nodeChanged()}}function l(n,i,r){function a(t){var n,o,r,s,d;if(3!==t.nodeType){if(1===t.nodeType&&G(t)&&(s=b,b="true"===G(t),d=!0),n=e.grep(t.childNodes),b&&!d)for(o=0,r=v.length;r>o&&!S(v[o],i,t,t);o++);if(y.deep&&n.length){for(o=0,r=n.length;r>o;o++)a(n[o]);d&&(b=s)}}}function d(e){var t;return I(o(e.parentNode).reverse(),function(e){var o;t||"_start"==e.id||"_end"==e.id||(o=f(e,n,i),o&&o.split!==!1&&(t=e))}),t}function c(e,t,n,o){var r,a,s,d,c,l;if(e){for(l=e.parentNode,r=t.parentNode;r&&r!=l;r=r.parentNode){for(a=P.clone(r,$),c=0;c<v.length;c++)if(S(v[c],i,a,a)){a=0;break}a&&(s&&a.appendChild(s),d||(d=a),s=a)}!o||y.mixed&&V(e)||(t=P.split(e,t)),s&&(n.parentNode.insertBefore(s,n),d.appendChild(n))}return t}function l(e){return c(d(e),e,e,!0)}function u(e){var t=P.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return N(n)&&(n=n[e?"firstChild":"lastChild"]),P.remove(t,!0),n}function m(e){var n,o;e=k(e,v,W),y.split&&(n=A(e,W),o=A(e),n!=o?(/^(TR|TD)$/.test(n.nodeName)&&n.firstChild&&(n=("TD"==n.nodeName?n.firstChild:n.firstChild.firstChild)||n),n=x(n,"span",{id:"_start","data-mce-type":"bookmark"}),o=x(o,"span",{id:"_end","data-mce-type":"bookmark"}),l(n),l(o),n=u(W),o=u()):n=o=l(n),e.startContainer=n.parentNode,e.startOffset=q(n),e.endContainer=o.parentNode,e.endOffset=q(o)+1),F.walk(e,function(e){I(e,function(e){a(e),1===e.nodeType&&"underline"===t.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===Y(e.parentNode)&&S({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var h,g,v=s(n),y=v[0],b=!0;return r?void(r.nodeType?(g=P.createRng(),g.setStartBefore(r),g.setEndAfter(r),m(g)):m(r)):void(O.isCollapsed()&&y.inline&&!P.select("td.mceSelected,th.mceSelected").length?B("remove",n,i):(h=O.getBookmark(),m(O.getRng(W)),O.moveToBookmark(h),y.inline&&p(n,i,O.getStart())&&M(O.getRng(!0)),t.nodeChanged()))}function u(e,t,n){var o=s(e);!p(e,t,n)||"toggle"in o[0]&&!o[0].toggle?c(e,t,n):l(e,t,n)}function f(e,t,n,o){function i(e,t,i){var r,a,s,d=t[i];if(t.onmatch)return t.onmatch(e,t,i);if(d)if(d.length===L){for(r in d)if(d.hasOwnProperty(r)){if(a="attributes"===i?P.getAttrib(e,r):b(e,r),o&&!a&&!t.exact)return;if((!o||t.exact)&&!y(a,C(d[r],n)))return}}else for(s=0;s<d.length;s++)if("attributes"===i?P.getAttrib(e,d[s]):b(e,d[s]))return t;return t}var r,a,d,c=s(t);if(c&&e)for(a=0;a<c.length;a++)if(r=c[a],v(e,r)&&i(e,r,"attributes")&&i(e,r,"styles")){if(d=r.classes)for(a=0;a<d.length;a++)if(!P.hasClass(e,d[a]))return;return r}}function p(e,t,n){function o(n){return n=P.getParent(n,function(n){return!!f(n,e,t,!0)}),f(n,e,t)}var i;return n?o(n):(n=O.getNode(),o(n)?W:(i=O.getStart(),i!=n&&o(i)?W:$))}function m(e,t){var n,o=[],i={};return n=O.getStart(),P.getParent(n,function(n){var r,a;for(r=0;r<e.length;r++)a=e[r],!i[a]&&f(n,a,t)&&(i[a]=!0,o.push(a))},P.getRoot()),o}function h(e){var t,n,i,r,a,d=s(e);if(d)for(t=O.getStart(),n=o(t),r=d.length-1;r>=0;r--){if(a=d[r].selector,!a)return W;for(i=n.length-1;i>=0;i--)if(P.is(n[i],a))return W}return $}function g(e,n,i){var r;return R||(R={},r={},t.onNodeChange.addToTop(function(e,t,n){var i=o(n),a={};I(R,function(e,t){I(i,function(n){return f(n,t,{},e.similar)?(r[t]||(I(e,function(e){e(!0,{node:n,format:t,parents:i})}),r[t]=e),a[t]=e,!1):void 0})}),I(r,function(e,t){a[t]||(delete r[t],I(e,function(e){e(!1,{node:n,format:t,parents:i})}))})})),I(e.split(","),function(e){R[e]||(R[e]=[],R[e].similar=i),R[e].push(n)}),this}function v(e,t){return y(e,t.inline)?W:y(e,t.block)?W:t.selector?P.is(e,t.selector):void 0}function y(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function b(e,t){var n=P.getStyle(e,t);return("color"==t||"backgroundColor"==t)&&(n=P.toHex(n)),"fontWeight"==t&&700==n&&(n="bold"),""+n}function C(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function _(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function x(e,t,n){var o=P.create(t,n);return e.parentNode.insertBefore(o,e),o.appendChild(e),o}function k(e,i,r){function a(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var n,o,r,a,s;if(n=o=e?h:v,a=e?"previousSibling":"nextSibling",s=P.getRoot(),3==n.nodeType&&!_(n)&&(e?g>0:b<n.nodeValue.length))return n;for(;;){if(!i[0].block_expand&&V(o))return o;for(r=o[a];r;r=r[a])if(!N(r)&&!_(r)&&!t(r))return o;if(o.parentNode==s){n=o;break}o=o.parentNode}return n}function s(e,t){for(t===L&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)e=e.childNodes[t],e&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function d(e){for(var t=e;t;){if(1===t.nodeType&&G(t))return"false"===G(t)?t:e;t=t.parentNode}return e}function c(e,n,o){function i(e,t){var n,i,a=e.nodeValue;return"undefined"==typeof t&&(t=o?a.length:0),o?(n=a.lastIndexOf(" ",t),i=a.lastIndexOf(" ",t),n=n>i?n:i,-1===n||r||n++):(n=a.indexOf(" ",t),i=a.indexOf(" ",t),n=-1!==n&&(-1===i||i>n)?n:i),n}var a,s,d,c;if(3===e.nodeType){if(d=i(e,n),-1!==d)return{container:e,offset:d};c=e}for(a=new H(e,P.getParent(e,V)||t.getBody());s=a[o?"prev":"next"]();)if(3===s.nodeType){if(c=s,d=i(s),-1!==d)return{container:s,offset:d}}else if(V(s))break;return c?(n=o?0:c.length,{container:c,offset:n}):void 0}function l(t,n){var r,a,s,d;for(3==t.nodeType&&0===t.nodeValue.length&&t[n]&&(t=t[n]),r=o(t),a=0;a<r.length;a++)for(s=0;s<i.length;s++)if(d=i[s],!("collapsed"in d&&d.collapsed!==e.collapsed)&&P.is(r[a],d.selector))return r[a];return t}function u(e,t){var r;if(i[0].wrapper||(r=P.getParent(e,i[0].block)),r||(r=P.getParent(3==e.nodeType?e.parentNode:e,n)),r&&i[0].wrapper&&(r=o(r,"ul,ol").reverse()[0]||r),!r)for(r=e;r[t]&&!V(r[t])&&(r=r[t],!y(r,"br")););return r||e}var f,p,m,h=e.startContainer,g=e.startOffset,v=e.endContainer,b=e.endOffset;if(1==h.nodeType&&h.hasChildNodes()&&(f=h.childNodes.length-1,h=h.childNodes[g>f?f:g],3==h.nodeType&&(g=0)),1==v.nodeType&&v.hasChildNodes()&&(f=v.childNodes.length-1,v=v.childNodes[b>f?f:b-1],3==v.nodeType&&(b=v.nodeValue.length)),h=d(h),v=d(v),(N(h.parentNode)||N(h))&&(h=N(h)?h:h.parentNode,h=h.nextSibling||h,3==h.nodeType&&(g=0)),(N(v.parentNode)||N(v))&&(v=N(v)?v:v.parentNode,v=v.previousSibling||v,3==v.nodeType&&(b=v.length)),i[0].inline&&(e.collapsed&&(m=c(h,g,!0),m&&(h=m.container,g=m.offset),m=c(v,b),m&&(v=m.container,b=m.offset)),p=s(v,b),p.node)){for(;p.node&&0===p.offset&&p.node.previousSibling;)p=s(p.node.previousSibling);p.node&&p.offset>0&&3===p.node.nodeType&&" "===p.node.nodeValue.charAt(p.offset-1)&&p.offset>1&&(v=p.node,v.splitText(p.offset-1))}return(i[0].inline||i[0].block_expand)&&(i[0].inline&&3==h.nodeType&&0!==g||(h=a(!0)),i[0].inline&&3==v.nodeType&&b!==v.nodeValue.length||(v=a())),i[0].selector&&i[0].expand!==$&&!i[0].inline&&(h=l(h,"previousSibling"),v=l(v,"nextSibling")),(i[0].block||i[0].selector)&&(h=u(h,"previousSibling"),v=u(v,"nextSibling"),i[0].block&&(V(h)||(h=a(!0)),V(v)||(v=a()))),1==h.nodeType&&(g=q(h),h=h.parentNode),1==v.nodeType&&(b=q(v)+1,v=v.parentNode),{startContainer:h,startOffset:g,endContainer:v,endOffset:b}}function S(e,t,n,o){var i,r,a;if(!v(n,e))return $;if("all"!=e.remove)for(I(e.styles,function(e,i){e=C(e,t),"number"==typeof i&&(i=e,o=0),(!o||y(b(o,i),e))&&P.setStyle(n,i,""),a=1}),a&&""==P.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),I(e.attributes,function(e,i){var r;if(e=C(e,t),"number"==typeof i&&(i=e,o=0),!o||y(P.getAttrib(o,i),e)){if("class"==i&&(e=P.getAttrib(n,i),e&&(r="",I(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(r+=(r?" ":"")+e)}),r)))return void P.setAttrib(n,i,r);"class"==i&&n.removeAttribute("className"),j.test(i)&&n.removeAttribute("data-mce-"+i),n.removeAttribute(i)
}}),I(e.classes,function(e){e=C(e,t),(!o||P.hasClass(o,e))&&P.removeClass(n,e)}),r=P.getAttribs(n),i=0;i<r.length;i++)if(0!==r[i].nodeName.indexOf("_"))return $;return"none"!=e.remove?(E(n,e),W):void 0}function E(t,n){function o(e,t,n){return e=w(e,t,n),!e||"BR"==e.nodeName||V(e)}var i,r=t.parentNode;n.block&&(z?r==P.getRoot()&&(n.list_block&&y(t,n.list_block)||I(e.grep(t.childNodes),function(e){U(z,e.nodeName.toLowerCase())?i?i.appendChild(e):i=x(e,z):i=0})):V(t)&&!V(r)&&(o(t,$)||o(t.firstChild,W,1)||t.insertBefore(P.create("br"),t.firstChild),o(t,W)||o(t.lastChild,$,1)||t.appendChild(P.create("br")))),n.selector&&n.inline&&!y(n.inline,t)||P.remove(t,1)}function w(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!_(e))return e}function N(e){return e&&1==e.nodeType&&"bookmark"==e.getAttribute("data-mce-type")}function T(t,n){function o(e,t){function n(e){var t={};return I(P.getAttribs(e),function(n){var o=n.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&(t[o]=P.getAttrib(e,o))}),t}function o(e,t){var n,o;for(o in e)if(e.hasOwnProperty(o)){if(n=t[o],n===L)return $;if(e[o]!=n)return $;delete t[o]}for(o in t)if(t.hasOwnProperty(o))return $;return W}return e.nodeName!=t.nodeName?$:o(n(e),n(t))&&o(P.parseStyle(P.getAttrib(e,"style")),P.parseStyle(P.getAttrib(t,"style")))?W:$}function i(e,t){for(r=e;r;r=r[t]){if(3==r.nodeType&&0!==r.nodeValue.length)return e;if(1==r.nodeType&&!N(r))return r}return e}var r,a;if(t&&n&&(t=i(t,"previousSibling"),n=i(n,"nextSibling"),o(t,n))){for(r=t.nextSibling;r&&r!=n;)a=r,r=r.nextSibling,t.appendChild(a);return P.remove(n),I(e.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n}function n(e){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(e)}function A(e,n){var o,i,r;return o=e[n?"startContainer":"endContainer"],i=e[n?"startOffset":"endOffset"],1==o.nodeType&&(r=o.childNodes.length-1,!n&&i&&i--,o=o.childNodes[i>r?r:i]),3===o.nodeType&&n&&i>=o.nodeValue.length&&(o=new H(o,t.getBody()).next()||o),3!==o.nodeType||n||0!==i||(o=new H(o,t.getBody()).prev()||o),o}function B(n,o,i){function r(e){var n=P.create("span",{id:v,"data-mce-bogus":!0,style:y?"color:red":""});return e&&n.appendChild(t.getDoc().createTextNode(K)),n}function a(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==K||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function d(e){for(;e;){if(e.id===v)return e;e=e.parentNode}}function u(e){var t;if(e)for(t=new H(e,e),e=t.current();e;e=t.next())if(3===e.nodeType)return e}function p(e,t){var n,o;if(e)o=O.getRng(!0),a(e)?(t!==!1&&(o.setStartBefore(e),o.setEndBefore(e)),P.remove(e)):(n=u(e),n.nodeValue.charAt(0)===K&&(n=n.deleteData(0,1)),P.remove(e,1)),O.setRng(o);else if(e=d(O.getStart()),!e)for(;e=P.get(v);)p(e,!1)}function m(){var e,t,n,a,l,f,p;e=O.getRng(!0),a=e.startOffset,f=e.startContainer,p=f.nodeValue,t=d(O.getStart()),t&&(n=u(t)),p&&a>0&&a<p.length&&/\w/.test(p.charAt(a))&&/\w/.test(p.charAt(a-1))?(l=O.getBookmark(),e.collapse(!0),e=k(e,s(o)),e=F.split(e),c(o,i,e),O.moveToBookmark(l)):(t&&n.nodeValue===K?c(o,i,t):(t=r(!0),n=t.firstChild,e.insertNode(t),a=1,c(o,i,t)),O.setCursorLocation(n,a))}function h(){var e,t,n,a,d,c,u,p,m=O.getRng(!0),h=[];for(e=m.startContainer,t=m.startOffset,d=e,3==e.nodeType&&((t!=e.nodeValue.length||e.nodeValue===K)&&(a=!0),d=d.parentNode);d;){if(f(d,o,i)){c=d;break}d.nextSibling&&(a=!0),h.push(d),d=d.parentNode}if(c)if(a)n=O.getBookmark(),m.collapse(!0),m=k(m,s(o),!0),m=F.split(m),l(o,i,m),O.moveToBookmark(n);else{for(p=r(),d=p,u=h.length-1;u>=0;u--)d.appendChild(P.clone(h[u],!1)),d=d.firstChild;d.appendChild(P.doc.createTextNode(K)),d=d.firstChild,P.insertAfter(p,c),O.setCursorLocation(d,1)}}function g(){var t;t=d(O.getStart()),t&&!P.isEmpty(t)&&e.walk(t,function(e){1!=e.nodeType||e.id===v||P.isEmpty(e)||P.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var v="_mce_caret",y=t.settings.caret_debug;self._hasCaretEvents||(t.onBeforeGetContent.addToTop(function(){var e,t=[];if(a(d(O.getStart()),t))for(e=t.length;e--;)P.setAttrib(t[e],"data-mce-bogus","1")}),e.each("onMouseUp onKeyUp".split(" "),function(e){t[e].addToTop(function(){p(),g()})}),t.onKeyDown.addToTop(function(e,t){var n=t.keyCode;(8==n||37==n||39==n)&&p(d(O.getStart())),g()}),O.onSetContent.add(g),self._hasCaretEvents=!0),"apply"==n?m():h()}function M(e){var t,n,o,i,r,a=e.startContainer,s=e.startOffset;if(3==a.nodeType&&s>=a.nodeValue.length&&(s=q(a),a=a.parentNode,t=!0),1==a.nodeType)for(i=a.childNodes,a=i[Math.min(s,i.length-1)],n=new H(a,P.getParent(a,P.isBlock)),(s>i.length-1||t)&&n.next(),o=n.current();o;o=n.next())if(3==o.nodeType&&!_(o))return r=P.create("a",null,K),o.parentNode.insertBefore(r,o),e.setStart(o,0),O.setRng(e),void P.remove(r)}var R,L,D={},I=e.each,P=t.dom,O=t.selection,H=e.dom.TreeWalker,F=new e.dom.RangeUtils(P),U=t.schema.isValidChild,V=(e.isArray,P.isBlock),z=t.settings.forced_root_block,q=P.nodeIndex,K="﻿",j=/^(src|href|style)$/,$=!1,W=!0,G=P.getContentEditable,Y=function(e){var n;return t.dom.getParent(e,function(e){return n=t.dom.getStyle(e,"text-decoration"),n&&"none"!==n}),n},X=function(e){var n;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(n=Y(e.parentNode),t.dom.getStyle(e,"color")&&n?t.dom.setStyle(e,"text-decoration",n):t.dom.getStyle(e,"textdecoration")===n&&t.dom.setStyle(e,"text-decoration",null))};e.extend(this,{get:s,register:d,apply:c,remove:l,toggle:u,match:p,matchAll:m,matchNode:f,canApply:h,formatChanged:g}),r(),a()}}(tinymce),tinymce.onAddEditor.add(function(e,t){function n(t,n){e.each(n,function(e,n){e&&a.setStyle(t,n,e)}),a.rename(t,"span")}function o(n,o){a=n.dom,s.convert_fonts_to_spans&&e.each(a.select("font,u,strike",o.node),function(e){i[e.nodeName.toLowerCase()](t.dom,e)})}var i,r,a,s=t.settings;s.inline_styles&&(r=e.explode(s.font_size_legacy_values),i={font:function(e,t){n(t,{backgroundColor:t.style.backgroundColor,color:t.color,fontFamily:t.face,fontSize:r[parseInt(t.size,10)-1]})},u:function(e,t){n(t,{textDecoration:"underline"})},strike:function(e,t){n(t,{textDecoration:"line-through"})}},t.onPreProcess.add(o),t.onSetContent.add(o),t.onInit.add(function(){t.selection.onSetContent.add(o)}))}),function(e){var t=e.dom.TreeWalker;e.EnterKey=function(n){function o(o){function c(e){return e&&i.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==i.getContentEditable(e)}function l(t){var n;e.isIE&&i.isBlock(t)&&(n=r.getRng(),t.appendChild(i.create("span",null," ")),r.select(t),t.lastChild.outerHTML="",r.setRng(n))}function u(e){for(var t,n=e,o=[];n=n.firstChild;){if(i.isBlock(n))return;1!=n.nodeType||d[n.nodeName.toLowerCase()]||o.push(n)}for(t=o.length;t--;)n=o[t],!n.hasChildNodes()||n.firstChild==n.lastChild&&""===n.firstChild.nodeValue?i.remove(n):"A"==n.nodeName&&" "===(n.innerText||n.textContent)&&i.remove(n)}function f(e){var o,a,s,c,l,u,f=e;if(s=i.createRng(),e.hasChildNodes()){for(o=new t(e,e);a=o.current();){if(3==a.nodeType){s.setStart(a,0),s.setEnd(a,0);break}if(d[a.nodeName.toLowerCase()]){s.setStartBefore(a),s.setEndBefore(a);break}f=a,a=o.next()}a||(s.setStart(f,0),s.setEnd(f,0))}else"BR"==e.nodeName?e.nextSibling&&i.isBlock(e.nextSibling)?((!N||9>N)&&(u=i.create("br"),e.parentNode.insertBefore(u,e)),s.setStartBefore(e),s.setEndBefore(e)):(s.setStartAfter(e),s.setEndAfter(e)):(s.setStart(e,0),s.setEnd(e,0));r.setRng(s),i.remove(u),l=i.getViewPort(n.getWin()),c=i.getPos(e).y,(c<l.y||c+25>l.y+l.h)&&n.getWin().scrollTo(0,c<l.y?c:c-l.h+25)}function p(t){var n,o,r,s=S;if(n=t||"TABLE"==R?i.create(t||D):w.cloneNode(!1),r=n,a.keep_styles!==!1)do if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(s.nodeName)){if("_mce_caret"==s.id)continue;o=s.cloneNode(!1),i.setAttrib(o,"id",""),n.hasChildNodes()?(o.appendChild(n.firstChild),n.appendChild(o)):(r=o,n.appendChild(o))}while(s=s.parentNode);return e.isIE||(r.innerHTML='<br data-mce-bogus="1">'),n}function m(e){var n,o,i;if(3==S.nodeType&&(e?E>0:E<S.nodeValue.length))return!1;if(S.parentNode==w&&I&&!e)return!0;if(e&&1==S.nodeType&&S==w.firstChild)return!0;if("TABLE"===S.nodeName||S.previousSibling&&"TABLE"==S.previousSibling.nodeName)return I&&!e||!I&&e;for(n=new t(S,w),3==S.nodeType&&(e&&0==E?n.prev():e||E!=S.nodeValue.length||n.next());o=n.current();){if(1===o.nodeType){if(!o.getAttribute("data-mce-bogus")&&(i=o.nodeName.toLowerCase(),d[i]&&"br"!==i))return!1}else if(3===o.nodeType&&!/^[ \t\r\n]*$/.test(o.nodeValue))return!1;e?n.prev():n.next()}return!0}function h(e,t){var n,o,r,a,s,d=D||"P";if(o=i.getParent(e,i.isBlock),!o||!c(o)){if(o=o||k,!o.hasChildNodes())return n=i.create(d),o.appendChild(n),P.setStart(n,0),P.setEnd(n,0),n;for(a=e;a.parentNode!=o;)a=a.parentNode;for(;a&&!i.isBlock(a);)r=a,a=a.previousSibling;if(r){for(n=i.create(d),r.parentNode.insertBefore(n,r),a=r;a&&!i.isBlock(a);)s=a.nextSibling,n.appendChild(a),a=s;P.setStart(e,t),P.setEnd(e,t)}}return e}function g(){function e(e){for(var t=M[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===w}A=D?p(D):i.create("BR"),e(!0)&&e()?i.replace(A,M):e(!0)?M.parentNode.insertBefore(A,M):e()?(i.insertAfter(A,M),l(A)):(x=P.cloneRange(),x.setStartAfter(w),x.setEndAfter(M),B=x.extractContents(),i.insertAfter(B,M),i.insertAfter(A,M)),i.remove(w),f(A),s.add()}function v(){for(var e,n=new t(S,w);e=n.current();){if("BR"==e.nodeName)return!0;e=n.next()}}function y(){var t,n,o;S&&3==S.nodeType&&E>=S.nodeValue.length&&(e.isIE||v()||(t=i.create("br"),P.insertNode(t),P.setStartAfter(t),P.setEndAfter(t),n=!0)),t=i.create("br"),P.insertNode(t),e.isIE&&"PRE"==R&&(!N||8>N)&&t.parentNode.insertBefore(i.doc.createTextNode("\r"),t),o=i.create("span",{},"&nbsp;"),t.parentNode.insertBefore(o,t),r.scrollIntoView(o),i.remove(o),n?(P.setStartBefore(t),P.setEndBefore(t)):(P.setStartAfter(t),P.setEndAfter(t)),r.setRng(P),s.add()}function b(e){do 3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function C(e){var t,n,o=i.getRoot();for(t=e;t!==o&&"false"!==i.getContentEditable(t);)"true"===i.getContentEditable(t)&&(n=t),t=t.parentNode;return t!==o?n:o}function _(t){var n;e.isIE||(t.normalize(),n=t.lastChild,(!n||/^(left|right)$/gi.test(i.getStyle(n,"float",!0)))&&i.add(t,"br"))}var x,k,S,E,w,N,T,A,B,M,R,L,D,I,P=r.getRng(!0);if(!P.collapsed)return void n.execCommand("Delete");if(!o.isDefaultPrevented()&&(S=P.startContainer,E=P.startOffset,D=(a.force_p_newlines?"p":"")||a.forced_root_block,D=D?D.toUpperCase():"",N=i.doc.documentMode,T=o.shiftKey,1==S.nodeType&&S.hasChildNodes()&&(I=E>S.childNodes.length-1,S=S.childNodes[Math.min(E,S.childNodes.length-1)]||S,E=I&&3==S.nodeType?S.nodeValue.length:0),k=C(S))){if(s.beforeChange(),!i.isBlock(k)&&k!=i.getRoot())return void((!D||T)&&y());if((D&&!T||!D&&T)&&(S=h(S,E)),w=i.getParent(S,i.isBlock),M=w?i.getParent(w.parentNode,i.isBlock):null,R=w?w.nodeName.toUpperCase():"",L=M?M.nodeName.toUpperCase():"","LI"!=L||o.ctrlKey||(w=M,R=L),"LI"==R){if(!D&&T)return void y();if(i.isEmpty(w))return/^(UL|OL|LI)$/.test(M.parentNode.nodeName)?!1:void g()}if("PRE"==R&&a.br_in_pre!==!1){if(!T)return void y()}else if(!D&&!T&&"LI"!=R||D&&T)return void y();D=D||"P",m()?(A=/^(H[1-6]|PRE)$/.test(R)&&"HGROUP"!=L?p(D):p(),a.end_container_on_empty_block&&c(M)&&i.isEmpty(w)?A=i.split(M,w):i.insertAfter(A,w),f(A)):m(!0)?(A=w.parentNode.insertBefore(p(),w),l(A)):(x=P.cloneRange(),x.setEndAfter(w),B=x.extractContents(),b(B),A=B.firstChild,i.insertAfter(B,w),u(A),_(w),f(A)),i.setAttrib(A,"id",""),s.add()}}var i=n.dom,r=n.selection,a=n.settings,s=n.undoManager,d=n.schema.getNonEmptyElements();n.onKeyDown.add(function(e,t){13==t.keyCode&&o(t)!==!1&&t.preventDefault()})}}(tinymce);
tinyMCE.addI18n({en:{common:{more_colors:"More Colors...",invalid_data:"Error: Invalid values entered, these are marked in red.",popup_blocked:"Sorry, but we have noticed that your popup-blocker has disabled a window that provides application functionality. You will need to disable popup blocking on this site in order to fully utilize this tool.",clipboard_no_support:"Currently not supported by your browser, use keyboard shortcuts instead.",clipboard_msg:"Copy/Cut/Paste is not available in Mozilla and Firefox.\nDo you want more information about this issue?",not_set:"-- Not Set --",class_name:"Class",browse:"Browse",close:"Close",cancel:"Cancel",update:"Update",insert:"Insert",apply:"Apply",edit_confirm:"Do you want to use the WYSIWYG mode for this textarea?",invalid_data_number:"{#field} must be a number",invalid_data_min:"{#field} must be a number greater than {#min}",invalid_data_size:"{#field} must be a number or percentage",value:"(value)"},contextmenu:{full:"Full",right:"Right",center:"Center",left:"Left",align:"Alignment"},insertdatetime:{day_short:"Sun,Mon,Tue,Wed,Thu,Fri,Sat,Sun",day_long:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday,Sunday",months_short:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",months_long:"January,February,March,April,May,June,July,August,September,October,November,December",inserttime_desc:"Insert Time",insertdate_desc:"Insert Date",time_fmt:"%H:%M:%S",date_fmt:"%Y-%m-%d"},print:{print_desc:"Print"},preview:{preview_desc:"Preview"},directionality:{rtl_desc:"Direction Right to Left",ltr_desc:"Direction Left to Right"},layer:{content:"New layer...",absolute_desc:"Toggle Absolute Positioning",backward_desc:"Move Backward",forward_desc:"Move Forward",insertlayer_desc:"Insert New Layer"},save:{save_desc:"Save",cancel_desc:"Cancel All Changes"},nonbreaking:{nonbreaking_desc:"Insert Non-Breaking Space Character"},iespell:{download:"ieSpell not detected. Do you want to install it now?",iespell_desc:"Check Spelling"},advhr:{delta_height:"",delta_width:"",advhr_desc:"Insert Horizontal Line"},emotions:{delta_height:"",delta_width:"",emotions_desc:"Emotions"},searchreplace:{replace_desc:"Find/Replace",delta_width:"",delta_height:"",search_desc:"Find"},advimage:{delta_width:"",image_desc:"Insert/Edit Image",delta_height:""},advlink:{delta_height:"",delta_width:"",link_desc:"Insert/Edit Link"},xhtmlxtras:{attribs_delta_height:"",attribs_delta_width:"",ins_delta_height:"",ins_delta_width:"",del_delta_height:"",del_delta_width:"",acronym_delta_height:"",acronym_delta_width:"",abbr_delta_height:"",abbr_delta_width:"",cite_delta_height:"",cite_delta_width:"",attribs_desc:"Insert/Edit Attributes",ins_desc:"Insertion",del_desc:"Deletion",acronym_desc:"Acronym",abbr_desc:"Abbreviation",cite_desc:"Citation"},style:{delta_height:"",delta_width:"",desc:"Edit CSS Style"},paste:{plaintext_mode_stick:"Paste is now in plain text mode. Click again to toggle back to regular paste mode.",plaintext_mode:"Paste is now in plain text mode. Click again to toggle back to regular paste mode. After you paste something you will be returned to regular paste mode.",selectall_desc:"Select All",paste_word_desc:"Paste from Word",paste_text_desc:"Paste as Plain Text"},paste_dlg:{word_title:"Use Ctrl+V on your keyboard to paste the text into the window.",text_linebreaks:"Keep Linebreaks",text_title:"Use Ctrl+V on your keyboard to paste the text into the window."},table:{merge_cells_delta_height:"",merge_cells_delta_width:"",table_delta_height:"",table_delta_width:"",cellprops_delta_height:"",cellprops_delta_width:"",rowprops_delta_height:"",rowprops_delta_width:"",cell:"Cell",col:"Column",row:"Row",del:"Delete Table",copy_row_desc:"Copy Table Row",cut_row_desc:"Cut Table Row",paste_row_after_desc:"Paste Table Row After",paste_row_before_desc:"Paste Table Row Before",props_desc:"Table Properties",cell_desc:"Table Cell Properties",row_desc:"Table Row Properties",merge_cells_desc:"Merge Table Cells",split_cells_desc:"Split Merged Table Cells",delete_col_desc:"Delete Column",col_after_desc:"Insert Column After",col_before_desc:"Insert Column Before",delete_row_desc:"Delete Row",row_after_desc:"Insert Row After",row_before_desc:"Insert Row Before",desc:"Insert/Edit Table"},autosave:{warning_message:"If you restore the saved content, you will lose all the content that is currently in the editor.\n\nAre you sure you want to restore the saved content?",restore_content:"Restore auto-saved content.",unload_msg:"The changes you made will be lost if you navigate away from this page."},fullscreen:{desc:"Toggle Full Screen Mode"},media:{delta_height:"",delta_width:"",edit:"Edit Embedded Media",desc:"Insert/Edit Embedded Media"},fullpage:{desc:"Document Properties",delta_width:"",delta_height:""},template:{desc:"Insert Predefined Template Content"},visualchars:{desc:"Show/Hide Visual Control Characters"},spellchecker:{desc:"Toggle Spell Checker",menu:"Spell Checker Settings",ignore_word:"Ignore Word",ignore_words:"Ignore All",langs:"Languages",wait:"Please wait...",sug:"Suggestions",no_sug:"No Suggestions",no_mpell:"No misspellings found.",learn_word:"Learn word"},pagebreak:{desc:"Insert Page Break for Printing"},advlist:{types:"Types",def:"Default",lower_alpha:"Lower Alpha",lower_greek:"Lower Greek",lower_roman:"Lower Roman",upper_alpha:"Upper Alpha",upper_roman:"Upper Roman",circle:"Circle",disc:"Disc",square:"Square"},colors:{333300:"Dark olive",993300:"Burnt orange","000000":"Black","003300":"Dark green","003366":"Dark azure","000080":"Navy Blue",333399:"Indigo",333333:"Very dark gray",800000:"Maroon",FF6600:"Orange",808000:"Olive","008000":"Green","008080":"Teal","0000FF":"Blue",666699:"Grayish blue",808080:"Gray",FF0000:"Red",FF9900:"Amber","99CC00":"Yellow green",339966:"Sea green","33CCCC":"Turquoise","3366FF":"Royal blue",800080:"Purple",999999:"Medium gray",FF00FF:"Magenta",FFCC00:"Gold",FFFF00:"Yellow","00FF00":"Lime","00FFFF":"Aqua","00CCFF":"Sky blue",993366:"Brown",C0C0C0:"Silver",FF99CC:"Pink",FFCC99:"Peach",FFFF99:"Light yellow",CCFFCC:"Pale green",CCFFFF:"Pale cyan","99CCFF":"Light sky blue",CC99FF:"Plum",FFFFFF:"White"},aria:{rich_text_area:"Rich Text Area"},wordcount:{words:"Words:"},visualblocks:{desc:"Show/hide block elements"}}});
!function(){tinymce.create("tinymce.plugins.StylePlugin",{init:function(t,n){t.addCommand("mceStyleProps",function(){var e=!1,i=t.selection.getSelectedBlocks(),o=[];1===i.length?o.push(t.selection.getNode().style.cssText):(tinymce.each(i,function(e){o.push(t.dom.getAttrib(e,"style"))}),e=!0),t.windowManager.open({file:n+"/props.htm",width:480+parseInt(t.getLang("style.delta_width",0)),height:340+parseInt(t.getLang("style.delta_height",0)),inline:1},{applyStyleToBlocks:e,plugin_url:n,styles:o})}),t.addCommand("mceSetElementStyle",function(n,i){(e=t.selection.getNode())&&(t.dom.setAttrib(e,"style",i),t.execCommand("mceRepaint"))}),t.onNodeChange.add(function(e,t,n){t.setDisabled("styleprops","BODY"===n.nodeName)}),t.addButton("styleprops",{title:"style.desc",cmd:"mceStyleProps"})},getInfo:function(){return{longname:"Style",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/style",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("style",tinymce.plugins.StylePlugin)}();
!function(e){function t(e,t){var n,o=t.ownerDocument,l=o.createRange();return l.setStartBefore(t),l.setEnd(e.endContainer,e.endOffset),n=o.createElement("body"),n.appendChild(l.cloneContents()),0==n.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}function n(e,t){return parseInt(e.getAttribute(t)||1)}function o(t,o,r){function a(e,t){return e=e.cloneNode(t),e.removeAttribute("id"),e}function c(){var e=0;I=[],l(["thead","tbody","tfoot"],function(r){var a=o.select("> "+r+" tr",t);l(a,function(t,a){a+=e,l(o.select("> td, > th",t),function(e,t){var o,l,c,i;if(I[a])for(;I[a][t];)t++;for(c=n(e,"rowspan"),i=n(e,"colspan"),l=a;a+c>l;l++)for(I[l]||(I[l]=[]),o=t;t+i>o;o++)I[l][o]={part:r,real:l==a&&o==t,elm:e,rowspan:c,colspan:i}})}),e+=a.length})}function d(e,t){var n;return n=I[t],n?n[e]:void 0}function s(e,t,n){e&&(n=parseInt(n),1===n?e.removeAttribute(t,1):e.setAttribute(t,n,1))}function f(e){return e&&(o.hasClass(e.elm,"mceSelected")||e==k)}function u(){var e=[];return l(t.rows,function(t){l(t.cells,function(n){return o.hasClass(n,"mceSelected")||n==k.elm?(e.push(t),!1):void 0})}),e}function m(){var e=o.createRng();e.setStartAfter(t),e.setEndAfter(t),r.setRng(e),o.remove(t)}function b(t){var n;return e.walk(t,function(r){var c;return 3==r.nodeType?(l(o.getParents(r.parentNode,null,t).reverse(),function(e){e=a(e,!1),n?c&&c.appendChild(e):n=c=e,c=e}),c&&(c.innerHTML=e.isIE?"&nbsp;":'<br data-mce-bogus="1" />'),!1):void 0},"childNodes"),t=a(t,!1),s(t,"rowSpan",1),s(t,"colSpan",1),n?t.appendChild(n):e.isIE||(t.innerHTML='<br data-mce-bogus="1" />'),t}function g(){var e=o.createRng();return l(o.select("tr",t),function(e){0==e.cells.length&&o.remove(e)}),0==o.select("tr",t).length?(e.setStartAfter(t),e.setEndAfter(t),r.setRng(e),void o.remove(t)):(l(o.select("thead,tbody,tfoot",t),function(e){0==e.rows.length&&o.remove(e)}),c(),row=I[Math.min(I.length-1,E.y)],void(row&&(r.select(row[Math.min(row.length-1,E.x)].elm,!0),r.collapse(!0))))}function p(e,t,n,l){var r,a,c,i,d;for(r=I[t][e].elm.parentNode,c=1;n>=c;c++)if(r=o.getNext(r,"tr")){for(a=e;a>=0;a--)if(d=I[t+c][a].elm,d.parentNode==r){for(i=1;l>=i;i++)o.insertAfter(b(d),d);break}if(-1==a)for(i=1;l>=i;i++)r.insertBefore(b(r.cells[0]),r.cells[0])}}function h(){l(I,function(e,t){l(e,function(e,l){var r,a,c;if(f(e)&&(e=e.elm,r=n(e,"colspan"),a=n(e,"rowspan"),r>1||a>1)){for(s(e,"rowSpan",1),s(e,"colSpan",1),c=0;r-1>c;c++)o.insertAfter(b(e),e);p(l,t,a-1,r)}})})}function v(t,n,r){var a,i,u,m,b,p,v,w,t,_,C;if(t?(pos=A(t),a=pos.x,i=pos.y,u=a+(n-1),m=i+(r-1)):(E=L=null,l(I,function(e,t){l(e,function(e,n){f(e)&&(E||(E={x:n,y:t}),L={x:n,y:t})})}),a=E.x,i=E.y,u=L.x,m=L.y),v=d(a,i),w=d(u,m),v&&w&&v.part==w.part){for(h(),c(),v=d(a,i).elm,s(v,"colSpan",u-a+1),s(v,"rowSpan",m-i+1),p=i;m>=p;p++)for(b=a;u>=b;b++)I[p]&&I[p][b]&&(t=I[p][b].elm,t!=v&&(_=e.grep(t.childNodes),l(_,function(e){v.appendChild(e)}),_.length&&(_=e.grep(v.childNodes),C=0,l(_,function(e){"BR"==e.nodeName&&o.getAttrib(e,"data-mce-bogus")&&C++<_.length-1&&v.removeChild(e)})),o.remove(t)));g()}}function w(e){var t,r,c,i,d,u,m,g,p;for(l(I,function(n,o){return l(n,function(n){return f(n)&&(n=n.elm,d=n.parentNode,u=a(d,!1),t=o,e)?!1:void 0}),e?!t:void 0}),i=0;i<I[0].length;i++)if(I[t][i]&&(r=I[t][i].elm,r!=c)){if(e){if(t>0&&I[t-1][i]&&(g=I[t-1][i].elm,p=n(g,"rowSpan"),p>1)){s(g,"rowSpan",p+1);continue}}else if(p=n(r,"rowspan"),p>1){s(r,"rowSpan",p+1);continue}m=b(r),s(m,"colSpan",r.colSpan),u.appendChild(m),c=r}u.hasChildNodes()&&(e?d.parentNode.insertBefore(u,d):o.insertAfter(u,d))}function _(e){var t,r;l(I,function(n){return l(n,function(n,o){return f(n)&&(t=o,e)?!1:void 0}),e?!t:void 0}),l(I,function(l,a){var c,i,d;l[t]&&(c=l[t].elm,c!=r&&(d=n(c,"colspan"),i=n(c,"rowspan"),1==d?e?(c.parentNode.insertBefore(b(c),c),p(t,a,i-1,d)):(o.insertAfter(b(c),c),p(t,a,i-1,d)):s(c,"colSpan",c.colSpan+1),r=c))})}function C(){var t=[];l(I,function(r){l(r,function(r,a){f(r)&&-1===e.inArray(t,a)&&(l(I,function(e){var t,l=e[a].elm;t=n(l,"colSpan"),t>1?s(l,"colSpan",t-1):o.remove(l)}),t.push(a))})}),g()}function T(){function e(e){var t,r,a;t=o.getNext(e,"tr"),l(e.cells,function(e){var t=n(e,"rowSpan");t>1&&(s(e,"rowSpan",t-1),r=A(e),p(r.x,r.y,1,1))}),r=A(e.cells[0]),l(I[r.y],function(e){var t;e=e.elm,e!=a&&(t=n(e,"rowSpan"),1>=t?o.remove(e):s(e,"rowSpan",t-1),a=e)})}var t;t=u(),l(t.reverse(),function(t){e(t)}),g()}function S(){var e=u();return o.remove(e),g(),e}function R(){var e=u();return l(e,function(t,n){e[n]=a(t,!0)}),e}function N(e,t){if(e){var n=u(),r=n[t?0:n.length-1],a=r.cells.length;l(I,function(e){var t;return a=0,l(e,function(e){e.real&&(a+=e.colspan),e.elm.parentNode==r&&(t=1)}),t?!1:void 0}),t||e.reverse(),l(e,function(e){var n,l=e.cells.length;for(i=0;l>i;i++)n=e.cells[i],s(n,"colSpan",1),s(n,"rowSpan",1);for(i=l;a>i;i++)e.appendChild(b(e.cells[l-1]));for(i=a;l>i;i++)o.remove(e.cells[i]);t?r.parentNode.insertBefore(e,r):o.insertAfter(e,r)}),o.removeClass(o.select("td.mceSelected,th.mceSelected"),"mceSelected")}}function A(e){var t;return l(I,function(n,o){return l(n,function(n,l){return n.elm==e?(t={x:l,y:o},!1):void 0}),!t}),t}function P(e){E=A(e)}function B(){var e,t;return e=t=0,l(I,function(n,o){l(n,function(n,l){var r,a;f(n)&&(n=I[o][l],l>e&&(e=l),o>t&&(t=o),n.real&&(r=n.colspan-1,a=n.rowspan-1,r&&l+r>e&&(e=l+r),a&&o+a>t&&(t=o+a)))})}),{x:e,y:t}}function D(e){var t,n,l,r,a,c,i,d;if(L=A(e),E&&L){for(t=Math.min(E.x,L.x),n=Math.min(E.y,L.y),l=Math.max(E.x,L.x),r=Math.max(E.y,L.y),a=l,c=r,y=n;c>=y;y++)e=I[y][t],e.real||t-(e.colspan-1)<t&&(t-=e.colspan-1);for(x=t;a>=x;x++)e=I[n][x],e.real||n-(e.rowspan-1)<n&&(n-=e.rowspan-1);for(y=n;r>=y;y++)for(x=t;l>=x;x++)e=I[y][x],e.real&&(i=e.colspan-1,d=e.rowspan-1,i&&x+i>a&&(a=x+i),d&&y+d>c&&(c=y+d));for(o.removeClass(o.select("td.mceSelected,th.mceSelected"),"mceSelected"),y=n;c>=y;y++)for(x=t;a>=x;x++)I[y][x]&&o.addClass(I[y][x].elm,"mceSelected")}}var I,E,L,k;c(),k=o.getParent(r.getStart(),"th,td"),k&&(E=A(k),L=B(),k=d(E.x,E.y)),e.extend(this,{deleteTable:m,split:h,merge:v,insertRow:w,insertCol:_,deleteCols:C,deleteRows:T,cutRows:S,copyRows:R,pasteRows:N,getPos:A,setStartCell:P,setEndCell:D})}var l=e.each;e.create("tinymce.plugins.TablePlugin",{init:function(r,a){function c(e){var t=r.selection,n=r.dom.getParent(e||t.getNode(),"table");return n?new o(n,r.dom,t):void 0}function i(){r.getBody().style.webkitUserSelect="",f&&(r.dom.removeClass(r.dom.select("td.mceSelected,th.mceSelected"),"mceSelected"),f=!1)}var d,s,f=!0;l([["table","table.desc","mceInsertTable",!0],["delete_table","table.del","mceTableDelete"],["delete_col","table.delete_col_desc","mceTableDeleteCol"],["delete_row","table.delete_row_desc","mceTableDeleteRow"],["col_after","table.col_after_desc","mceTableInsertColAfter"],["col_before","table.col_before_desc","mceTableInsertColBefore"],["row_after","table.row_after_desc","mceTableInsertRowAfter"],["row_before","table.row_before_desc","mceTableInsertRowBefore"],["row_props","table.row_desc","mceTableRowProps",!0],["cell_props","table.cell_desc","mceTableCellProps",!0],["split_cells","table.split_cells_desc","mceTableSplitCells",!0],["merge_cells","table.merge_cells_desc","mceTableMergeCells",!0]],function(e){r.addButton(e[0],{title:e[1],cmd:e[2],ui:e[3]})}),e.isIE||r.onClick.add(function(e,t){t=t.target,"TABLE"===t.nodeName&&(e.selection.select(t),e.nodeChanged())}),r.onPreProcess.add(function(e,t){var n,o,l,r,a=e.dom;for(n=a.select("table",t.node),o=n.length;o--;)l=n[o],a.setAttrib(l,"data-mce-style",""),(r=a.getAttrib(l,"width"))&&(a.setStyle(l,"width",r),a.setAttrib(l,"width","")),(r=a.getAttrib(l,"height"))&&(a.setStyle(l,"height",r),a.setAttrib(l,"height",""))}),r.onNodeChange.add(function(e,t,n){var o;n=e.selection.getStart(),o=e.dom.getParent(n,"td,th,caption"),t.setActive("table","TABLE"===n.nodeName||!!o),o&&"CAPTION"===o.nodeName&&(o=0),t.setDisabled("delete_table",!o),t.setDisabled("delete_col",!o),t.setDisabled("delete_table",!o),t.setDisabled("delete_row",!o),t.setDisabled("col_after",!o),t.setDisabled("col_before",!o),t.setDisabled("row_after",!o),t.setDisabled("row_before",!o),t.setDisabled("row_props",!o),t.setDisabled("cell_props",!o),t.setDisabled("split_cells",!o),t.setDisabled("merge_cells",!o)}),r.onInit.add(function(o){function r(e,t,n,o){var l,r,a,c=3,i=e.dom.getParent(t.startContainer,"TABLE");return i&&(l=i.parentNode),r=t.startContainer.nodeType==c&&0==t.startOffset&&0==t.endOffset&&o&&("TR"==n.nodeName||n==l),a=("TD"==n.nodeName||"TH"==n.nodeName)&&!o,r||a}function a(t){if(e.isWebKit){var n=t.selection.getRng(),o=t.selection.getNode(),l=t.dom.getParent(n.startContainer,"TD,TH");if(r(t,n,o,l)){l||(l=o);for(var a=l.lastChild;a.lastChild;)a=a.lastChild;n.setEnd(a,a.nodeValue.length),t.selection.setRng(n)}}}function u(t,o){function r(n,o,l){var r=n?"previousSibling":"nextSibling",c=t.dom.getParent(o,"tr"),s=c[r];if(s)return p(t,o,s,n),e.dom.Event.cancel(l),!0;var f=t.dom.getParent(c,"table"),u=c.parentNode,m=u.nodeName.toLowerCase();if("tbody"===m||m===(n?"tfoot":"thead")){var b=a(n,f,u,"tbody");if(null!==b)return i(n,b,o,l)}return d(n,c,r,f,l)}function a(e,n,o,l){var r=t.dom.select(">"+l,n),a=r.indexOf(o);if(e&&0===a||!e&&a===r.length-1)return c(e,n);if(-1===a){var i="thead"===o.tagName.toLowerCase()?0:r.length-1;return r[i]}return r[a+(e?-1:1)]}function c(e,n){var o=e?"thead":"tfoot",l=t.dom.select(">"+o,n);return 0!==l.length?l[0]:null}function i(n,o,l,r){var a=s(o,n);return a&&p(t,l,a,n),e.dom.Event.cancel(r),!0}function d(n,o,l,a,c){var i=a[l];if(i)return f(i),!0;var d=t.dom.getParent(a,"td,th");if(d)return r(n,d,c);var u=s(o,!n);return f(u),e.dom.Event.cancel(c)}function s(e,n){var o=e&&e[n?"lastChild":"firstChild"];return o&&"BR"===o.nodeName?t.dom.getParent(o,"td,th"):o}function f(e){t.selection.setCursorLocation(e,0)}function u(){return _==w.UP||_==w.DOWN}function m(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"tr");return null!==n}function b(e){for(var t=0,o=e;o.previousSibling;)o=o.previousSibling,t+=n(o,"colspan");return t}function g(e,t){var o=0,r=0;return l(e.children,function(e,l){return o+=n(e,"colspan"),r=l,o>t?!1:void 0}),r}function p(e,t,n,o){var l=b(e.dom.getParent(t,"td,th")),r=g(n,l),a=n.childNodes[r],c=s(a,o);f(c||a)}function h(e){var n=t.selection.getNode(),o=t.dom.getParent(n,"td,th"),l=t.dom.getParent(e,"td,th");return o&&o!==l&&v(o,l)}function v(e,n){return t.dom.getParent(e,"TABLE")===t.dom.getParent(n,"TABLE")}var w=e.VK,_=o.keyCode;if(u()&&m(t)){var C=t.selection.getNode();setTimeout(function(){h(C)&&r(!o.shiftKey&&_===w.UP,C,o)},0)}}function m(){var t;for(t=o.getBody().lastChild;t&&3==t.nodeType&&!t.nodeValue.length;t=t.previousSibling);t&&"TABLE"==t.nodeName&&(o.settings.forced_root_block?o.dom.add(o.getBody(),o.settings.forced_root_block,null,e.isIE?"&nbsp;":'<br data-mce-bogus="1" />'):o.dom.add(o.getBody(),"br",{"data-mce-bogus":"1"}))}var b,g,p,h=o.dom;d=o.windowManager,o.onMouseDown.add(function(e,t){2!=t.button&&(i(),g=h.getParent(t.target,"td,th"),b=h.getParent(g,"table"))}),h.bind(o.getDoc(),"mouseover",function(e){var t,n,l=e.target;if(g&&(p||l!=g)&&("TD"==l.nodeName||"TH"==l.nodeName)){n=h.getParent(l,"table"),n==b&&(p||(p=c(n),p.setStartCell(g),o.getBody().style.webkitUserSelect="none"),p.setEndCell(l),f=!0),t=o.selection.getSel();try{t.removeAllRanges?t.removeAllRanges():t.empty()}catch(r){}e.preventDefault()}}),o.onMouseUp.add(function(t){function n(t,n){var l=new e.dom.TreeWalker(t,t);do{if(3==t.nodeType&&0!=e.trim(t.nodeValue).length)return void(n?o.setStart(t,0):o.setEnd(t,t.nodeValue.length));if("BR"==t.nodeName)return void(n?o.setStartBefore(t):o.setEndBefore(t))}while(t=n?l.next():l.prev())}{var o,l,r,a,c,i,d=t.selection;d.getSel()}if(g){if(p&&(t.getBody().style.webkitUserSelect=""),l=h.select("td.mceSelected,th.mceSelected"),l.length>0){o=h.createRng(),a=l[0],i=l[l.length-1],o.setStartBefore(a),o.setEndAfter(a),n(a,1),r=new e.dom.TreeWalker(a,h.getParent(l[0],"table"));do if("TD"==a.nodeName||"TH"==a.nodeName){if(!h.hasClass(a,"mceSelected"))break;c=a}while(a=r.next());n(c),d.setRng(o)}t.nodeChanged(),g=p=b=null}}),o.onKeyUp.add(function(){i()}),o.onKeyDown.add(function(e){a(e)}),o.onMouseDown.add(function(e,t){2!=t.button&&a(e)}),o.plugins.table.fixTableCellSelection=a,o&&o.plugins.contextmenu&&o.plugins.contextmenu.onContextMenu.add(function(e,t,n){var l,r=o.selection,a=r.getNode()||o.getBody();o.dom.getParent(n,"td")||o.dom.getParent(n,"th")||o.dom.select("td.mceSelected,th.mceSelected").length?(t.removeAll(),"A"!=a.nodeName||o.dom.getAttrib(a,"name")||(t.add({title:"advanced.link_desc",icon:"link",cmd:o.plugins.advlink?"mceAdvLink":"mceLink",ui:!0}),t.add({title:"advanced.unlink_desc",icon:"unlink",cmd:"UnLink"}),t.addSeparator()),"IMG"==a.nodeName&&-1==a.className.indexOf("mceItem")&&(t.add({title:"advanced.image_desc",icon:"image",cmd:o.plugins.advimage?"mceAdvImage":"mceImage",ui:!0}),t.addSeparator()),t.add({title:"table.desc",icon:"table",cmd:"mceInsertTable",value:{action:"insert"}}),t.add({title:"table.props_desc",icon:"table_props",cmd:"mceInsertTable"}),t.add({title:"table.del",icon:"delete_table",cmd:"mceTableDelete"}),t.addSeparator(),l=t.addMenu({title:"table.cell"}),l.add({title:"table.cell_desc",icon:"cell_props",cmd:"mceTableCellProps"}),l.add({title:"table.split_cells_desc",icon:"split_cells",cmd:"mceTableSplitCells"}),l.add({title:"table.merge_cells_desc",icon:"merge_cells",cmd:"mceTableMergeCells"}),l=t.addMenu({title:"table.row"}),l.add({title:"table.row_desc",icon:"row_props",cmd:"mceTableRowProps"}),l.add({title:"table.row_before_desc",icon:"row_before",cmd:"mceTableInsertRowBefore"}),l.add({title:"table.row_after_desc",icon:"row_after",cmd:"mceTableInsertRowAfter"}),l.add({title:"table.delete_row_desc",icon:"delete_row",cmd:"mceTableDeleteRow"}),l.addSeparator(),l.add({title:"table.cut_row_desc",icon:"cut",cmd:"mceTableCutRow"}),l.add({title:"table.copy_row_desc",icon:"copy",cmd:"mceTableCopyRow"}),l.add({title:"table.paste_row_before_desc",icon:"paste",cmd:"mceTablePasteRowBefore"}).setDisabled(!s),l.add({title:"table.paste_row_after_desc",icon:"paste",cmd:"mceTablePasteRowAfter"}).setDisabled(!s),l=t.addMenu({title:"table.col"}),l.add({title:"table.col_before_desc",icon:"col_before",cmd:"mceTableInsertColBefore"}),l.add({title:"table.col_after_desc",icon:"col_after",cmd:"mceTableInsertColAfter"}),l.add({title:"table.delete_col_desc",icon:"delete_col",cmd:"mceTableDeleteCol"})):t.add({title:"table.desc",icon:"table",cmd:"mceInsertTable"})}),e.isWebKit&&o.onKeyDown.add(u),e.isGecko&&o.onKeyDown.add(function(e,n){var o,l,r=e.dom;(37==n.keyCode||38==n.keyCode)&&(o=e.selection.getRng(),l=r.getParent(o.startContainer,"table"),l&&e.getBody().firstChild==l&&t(o,l)&&(o=r.createRng(),o.setStartBefore(l),o.setEndBefore(l),e.selection.setRng(o),n.preventDefault()))}),o.onKeyUp.add(m),o.onSetContent.add(m),o.onVisualAid.add(m),o.onPreProcess.add(function(e,t){var n=t.node.lastChild;n&&("BR"==n.nodeName||1==n.childNodes.length&&("BR"==n.firstChild.nodeName||" "==n.firstChild.nodeValue))&&n.previousSibling&&"TABLE"==n.previousSibling.nodeName&&e.dom.remove(n)}),m(),o.startContent=o.getContent({format:"raw"})}),l({mceTableSplitCells:function(e){e.split()},mceTableMergeCells:function(e){var t,n,o;o=r.dom.getParent(r.selection.getNode(),"th,td"),o&&(t=o.rowSpan,n=o.colSpan),r.dom.select("td.mceSelected,th.mceSelected").length?e.merge():d.open({url:a+"/merge_cells.htm",width:240+parseInt(r.getLang("table.merge_cells_delta_width",0)),height:110+parseInt(r.getLang("table.merge_cells_delta_height",0)),inline:1},{rows:t,cols:n,onaction:function(t){e.merge(o,t.cols,t.rows)},plugin_url:a})},mceTableInsertRowBefore:function(e){e.insertRow(!0)},mceTableInsertRowAfter:function(e){e.insertRow()},mceTableInsertColBefore:function(e){e.insertCol(!0)},mceTableInsertColAfter:function(e){e.insertCol()},mceTableDeleteCol:function(e){e.deleteCols()},mceTableDeleteRow:function(e){e.deleteRows()},mceTableCutRow:function(e){s=e.cutRows()},mceTableCopyRow:function(e){s=e.copyRows()},mceTablePasteRowBefore:function(e){e.pasteRows(s,!0)},mceTablePasteRowAfter:function(e){e.pasteRows(s)},mceTableDelete:function(e){e.deleteTable()}},function(e,t){r.addCommand(t,function(){var t=c();t&&(e(t),r.execCommand("mceRepaint"),i())})}),l({mceInsertTable:function(e){d.open({url:a+"/table.htm",width:400+parseInt(r.getLang("table.table_delta_width",0)),height:320+parseInt(r.getLang("table.table_delta_height",0)),inline:1},{plugin_url:a,action:e?e.action:0})},mceTableRowProps:function(){d.open({url:a+"/row.htm",width:400+parseInt(r.getLang("table.rowprops_delta_width",0)),height:295+parseInt(r.getLang("table.rowprops_delta_height",0)),inline:1},{plugin_url:a})},mceTableCellProps:function(){d.open({url:a+"/cell.htm",width:400+parseInt(r.getLang("table.cellprops_delta_width",0)),height:295+parseInt(r.getLang("table.cellprops_delta_height",0)),inline:1},{plugin_url:a})}},function(e,t){r.addCommand(t,function(t,n){e(n)})})}}),e.PluginManager.add("table",e.plugins.TablePlugin)}(tinymce);
!function(){tinymce.create("tinymce.plugins.AdvancedImagePlugin",{init:function(e,i){e.addCommand("mceAdvImage",function(){-1==e.dom.getAttrib(e.selection.getNode(),"class","").indexOf("mceItem")&&e.windowManager.open({file:i+"/image.htm",width:480+parseInt(e.getLang("advimage.delta_width",0)),height:385+parseInt(e.getLang("advimage.delta_height",0)),inline:1},{plugin_url:i})}),e.addButton("image",{title:"advimage.image_desc",cmd:"mceAdvImage"})},getInfo:function(){return{longname:"Advanced image",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advimage",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("advimage",tinymce.plugins.AdvancedImagePlugin)}();
!function(){tinymce.create("tinymce.plugins.AdvancedLinkPlugin",{init:function(n,i){this.editor=n,n.addCommand("mceAdvLink",function(){var e=n.selection;(!e.isCollapsed()||n.dom.getParent(e.getNode(),"A"))&&n.windowManager.open({file:i+"/link.htm",width:480+parseInt(n.getLang("advlink.delta_width",0)),height:400+parseInt(n.getLang("advlink.delta_height",0)),inline:1},{plugin_url:i})}),n.addButton("link",{title:"advlink.link_desc",cmd:"mceAdvLink"}),n.addShortcut("ctrl+k","advlink.advlink_desc","mceAdvLink"),n.onNodeChange.add(function(n,i,e,t){i.setDisabled("link",t&&"A"!=e.nodeName),i.setActive("link","A"==e.nodeName&&!e.name)})},getInfo:function(){return{longname:"Advanced link",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlink",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("advlink",tinymce.plugins.AdvancedLinkPlugin)}();
!function(){function e(e){return"string"==typeof e?e.replace(/[^0-9%]/g,""):e}function t(e){var t,a;if(e&&!e.splice){for(t=[],a=0;!0&&e[a];a++)t[a]=e[a];return t}return e}var a,r,i=tinymce.explode("id,name,width,height,style,align,class,hspace,vspace,bgcolor,type"),s=tinymce.makeMap(i.join(",")),o=tinymce.html.Node,c=tinymce.util.JSON;a=[["Flash","d27cdb6e-ae6d-11cf-96b8-444553540000","application/x-shockwave-flash","http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"],["ShockWave","166b1bca-3f9c-11cf-8075-444553540000","application/x-director","http://download.macromedia.com/pub/shockwave/cabs/director/sw.cab#version=8,5,1,0"],["WindowsMedia","6bf52a52-394a-11d3-b153-00c04f79faa6,22d6f312-b0f6-11d0-94ab-0080c74c7e95,05589fa1-c356-11ce-bf01-00aa0055595a","application/x-mplayer2","http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701"],["QuickTime","02bf25d5-8c17-4b23-bc80-d3488abddc6b","video/quicktime","http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0"],["RealMedia","cfcdaa03-8be4-11cf-b84b-0020afbbccfa","audio/x-pn-realaudio-plugin","http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"],["Java","8ad9c840-044e-11d1-b3e9-00805f499d93","application/x-java-applet","http://java.sun.com/products/plugin/autodl/jinstall-1_5_0-windows-i586.cab#Version=1,5,0,0"],["Silverlight","dfeaf541-f3e1-4c24-acac-99c30715084a","application/x-silverlight-2"],["Iframe"],["Video"],["EmbeddedAudio"],["Audio"]],tinymce.create("tinymce.plugins.MediaPlugin",{init:function(e,t){function s(t){return t&&"IMG"===t.nodeName&&e.dom.hasClass(t,"mceItemMedia")}var o,n,d,m,l=this,p={};for(l.editor=e,l.url=t,r="",o=0;o<a.length;o++){for(m=a[o][0],d={name:m,clsids:tinymce.explode(a[o][1]||""),mimes:tinymce.explode(a[o][2]||""),codebase:a[o][3]},n=0;n<d.clsids.length;n++)p["clsid:"+d.clsids[n]]=d;for(n=0;n<d.mimes.length;n++)p[d.mimes[n]]=d;p["mceItem"+m]=d,p[m.toLowerCase()]=d,r+=(r?"|":"")+m}tinymce.each(e.getParam("media_types","video=mp4,m4v,ogv,webm;silverlight=xap;flash=swf,flv;shockwave=dcr;quicktime=mov,qt,mpg,mpeg;shockwave=dcr;windowsmedia=avi,wmv,wm,asf,asx,wmx,wvx;realmedia=rm,ra,ram;java=jar;audio=mp3,ogg").split(";"),function(e){var t,a,r;for(e=e.split(/=/),a=tinymce.explode(e[1].toLowerCase()),t=0;t<a.length;t++)r=p[e[0].toLowerCase()],r&&(p[a[t]]=r)}),r=new RegExp("write("+r+")\\(([^)]+)\\)"),l.lookup=p,e.onPreInit.add(function(){e.schema.addValidElements("object[id|style|width|height|classid|codebase|*],param[name|value],embed[id|style|width|height|type|src|*],video[*],audio[*],source[*]"),e.parser.addNodeFilter("object,embed,video,audio,script,iframe",function(e){for(var t=e.length;t--;)l.objectToImg(e[t])}),e.serializer.addNodeFilter("img",function(e,t,a){for(var r,i=e.length;i--;)r=e[i],-1!==(r.attr("class")||"").indexOf("mceItemMedia")&&l.imgToObject(r,a)})}),e.onInit.add(function(){e.theme&&e.theme.onResolveName&&e.theme.onResolveName.add(function(t,a){"img"===a.name&&e.dom.hasClass(a.node,"mceItemMedia")&&(a.name="media")}),e&&e.plugins.contextmenu&&e.plugins.contextmenu.onContextMenu.add(function(e,t,a){"IMG"===a.nodeName&&-1!==a.className.indexOf("mceItemMedia")&&t.add({title:"media.edit",icon:"media",cmd:"mceMedia"})})}),e.addCommand("mceMedia",function(){var a,r;r=e.selection.getNode(),s(r)&&(a=e.dom.getAttrib(r,"data-mce-json"),a&&(a=c.parse(a),tinymce.each(i,function(t){var i=e.dom.getAttrib(r,t);i&&(a[t]=i)}),a.type=l.getType(r.className).name.toLowerCase())),a||(a={type:"flash",video:{sources:[]},params:{}}),e.windowManager.open({file:t+"/media.htm",width:430+parseInt(e.getLang("media.delta_width",0)),height:500+parseInt(e.getLang("media.delta_height",0)),inline:1},{plugin_url:t,data:a})}),e.addButton("media",{title:"media.desc",cmd:"mceMedia"}),e.onNodeChange.add(function(e,t,a){t.setActive("media",s(a))})},convertUrl:function(e,t){var a=this,r=a.editor,i=r.settings,s=i.url_converter,o=i.url_converter_scope||a;return e?t?r.documentBaseURI.toAbsolute(e):s.call(o,e,"src","object"):e},getInfo:function(){return{longname:"Media",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/media",version:tinymce.majorVersion+"."+tinymce.minorVersion}},dataToImg:function(a,r){{var i,s,o,n,d=this,m=d.editor;m.documentBaseURI}if(a.params.src=d.convertUrl(a.params.src,r),s=a.video.attrs,s&&(s.src=d.convertUrl(s.src,r)),s&&(s.poster=d.convertUrl(s.poster,r)),i=t(a.video.sources))for(n=0;n<i.length;n++)i[n].src=d.convertUrl(i[n].src,r);return o=d.editor.dom.create("img",{id:a.id,style:a.style,align:a.align,hspace:a.hspace,vspace:a.vspace,src:d.editor.theme.url+"/img/trans.gif","class":"mceItemMedia mceItem"+d.getType(a.type).name,"data-mce-json":c.serialize(a,"'")}),o.width=a.width=e(a.width||("audio"==a.type?"300":"320")),o.height=a.height=e(a.height||("audio"==a.type?"32":"240")),o},dataToHtml:function(e,t){return this.editor.serializer.serialize(this.dataToImg(e,t),{forced_root_block:"",force_absolute:t})},htmlToData:function(e){var t,a,r;return r={type:"flash",video:{sources:[]},params:{}},t=this.editor.parser.parse(e),a=t.getAll("img")[0],a&&(r=c.parse(a.attr("data-mce-json")),r.type=this.getType(a.attr("class")).name.toLowerCase(),tinymce.each(i,function(e){var t=a.attr(e);t&&(r[e]=t)})),r},getType:function(e){var t,a,r;for(a=tinymce.explode(e," "),t=0;t<a.length;t++)if(r=this.lookup[a[t]])return r},imgToObject:function(a,r){function s(e,t){var a,r,i,s,o;o=M.getParam("flash_video_player_url",j.convertUrl(j.url+"/moxieplayer.swf")),o&&(a=M.documentBaseURI,h.params.src=o,M.getParam("flash_video_player_absvideourl",!0)&&(e=a.toAbsolute(e||"",!0),t=a.toAbsolute(t||"",!0)),i="",r=M.getParam("flash_video_player_flashvars",{url:"$url",poster:"$poster"}),tinymce.each(r,function(a,r){a=a.replace(/\$url/,e||""),a=a.replace(/\$poster/,t||""),a.length>0&&(i+=(i?"&":"")+r+"="+escape(a))}),i.length&&(h.params.flashvars=i),s=M.getParam("flash_video_player_params",{allowfullscreen:!0,allowscriptaccess:!0}),tinymce.each(s,function(e,t){h.params[t]=""+e}))}var n,d,m,l,p,h,u,f,g,v,w,y,b,_,x,I,j=this,M=j.editor;if(h=a.attr("data-mce-json")){if(h=c.parse(h),v=this.getType(a.attr("class")),x=a.attr("data-mce-style"),x||(x=a.attr("style"),x&&(x=M.dom.serializeStyle(M.dom.parseStyle(x,"img")))),h.width=a.attr("width")||h.width,h.height=a.attr("height")||h.height,"Iframe"===v.name){b=new o("iframe",1),tinymce.each(i,function(e){var t=a.attr(e);"class"==e&&t&&(t=t.replace(/mceItem.+ ?/g,"")),t&&t.length>0&&b.attr(e,t)});for(l in h.params)b.attr(l,h.params[l]);return b.attr({style:x,src:h.params.src}),void a.replace(b)}if(this.editor.settings.media_use_script)return b=new o("script",1).attr("type","text/javascript"),p=new o("#text",3),p.value="write"+v.name+"("+c.serialize(tinymce.extend(h.params,{width:a.attr("width"),height:a.attr("height")}))+");",b.append(p),void a.replace(b);if("Video"===v.name&&h.video.sources[0]){for(n=new o("video",1).attr(tinymce.extend({id:a.attr("id"),width:e(a.attr("width")),height:e(a.attr("height")),style:x},h.video.attrs)),h.video.attrs&&(_=h.video.attrs.poster),f=h.video.sources=t(h.video.sources),w=0;w<f.length;w++)/\.mp4$/.test(f[w].src)&&(y=f[w].src);for(f[0].type||(n.attr("src",f[0].src),f.splice(0,1)),w=0;w<f.length;w++)u=new o("source",1).attr(f[w]),u.shortEnded=!0,n.append(u);y?(s(y,_),v=j.getType("flash")):h.params.src=""}if("Audio"===v.name&&h.video.sources[0]){for(I=new o("audio",1).attr(tinymce.extend({id:a.attr("id"),width:e(a.attr("width")),height:e(a.attr("height")),style:x},h.video.attrs)),h.video.attrs&&(_=h.video.attrs.poster),f=h.video.sources=t(h.video.sources),f[0].type||(I.attr("src",f[0].src),f.splice(0,1)),w=0;w<f.length;w++)u=new o("source",1).attr(f[w]),u.shortEnded=!0,I.append(u);h.params.src=""}if("EmbeddedAudio"===v.name){m=new o("embed",1),m.shortEnded=!0,m.attr({id:a.attr("id"),width:e(a.attr("width")),height:e(a.attr("height")),style:x,type:a.attr("type")});for(l in h.params)m.attr(l,h.params[l]);tinymce.each(i,function(e){h[e]&&"type"!=e&&m.attr(e,h[e])}),h.params.src=""}if(h.params.src){/\.flv$/i.test(h.params.src)&&s(h.params.src,""),r&&r.force_absolute&&(h.params.src=M.documentBaseURI.toAbsolute(h.params.src)),d=new o("object",1).attr({id:a.attr("id"),width:e(a.attr("width")),height:e(a.attr("height")),style:x}),tinymce.each(i,function(e){var t=h[e];"class"==e&&t&&(t=t.replace(/mceItem.+ ?/g,"")),t&&"type"!=e&&d.attr(e,t)});for(l in h.params)g=new o("param",1),g.shortEnded=!0,p=h.params[l],"src"===l&&"WindowsMedia"===v.name&&(l="url"),g.attr({name:l,value:p}),d.append(g);if(this.editor.getParam("media_strict",!0))d.attr({data:h.params.src,type:v.mimes[0]});else{d.attr({classid:"clsid:"+v.clsids[0],codebase:v.codebase}),m=new o("embed",1),m.shortEnded=!0,m.attr({id:a.attr("id"),width:e(a.attr("width")),height:e(a.attr("height")),style:x,type:v.mimes[0]});for(l in h.params)m.attr(l,h.params[l]);tinymce.each(i,function(e){h[e]&&"type"!=e&&m.attr(e,h[e])}),d.append(m)}h.object_html&&(p=new o("#text",3),p.raw=!0,p.value=h.object_html,d.append(p)),n&&n.append(d)}n&&h.video_html&&(p=new o("#text",3),p.raw=!0,p.value=h.video_html,n.append(p)),I&&h.video_html&&(p=new o("#text",3),p.raw=!0,p.value=h.video_html,I.append(p));var A=n||I||d||m;A?a.replace(A):a.remove()}},objectToImg:function(t){function a(e){return new tinymce.html.Serializer({inner:!0,validate:!1}).serialize(e)}function n(e,t){return z[(e.attr(t)||"").toLowerCase()]}function d(e){var t=e.replace(/^.*\.([^.]+)$/,"$1");return z[t.toLowerCase()||""]}var m,l,p,h,u,f,g,v,w,y,b,_,x,I,j,M,A,k,T,C,N,E,P,U,z=this.lookup,L=this.editor.settings.url_converter,R=this.editor.settings.url_converter_scope;if(t.parent){if("script"===t.name){if(t.firstChild&&(T=r.exec(t.firstChild.value)),!T)return;k=T[1],A={video:{},params:c.parse(T[2])},v=A.params.width,w=A.params.height}if(A=A||{video:{},params:{}},u=new o("img",1),u.attr({src:this.editor.theme.url+"/img/trans.gif"}),f=t.name,"video"===f||"audio"==f){p=t,m=t.getAll("object")[0],l=t.getAll("embed")[0],v=p.attr("width"),w=p.attr("height"),g=p.attr("id"),A.video={attrs:{},sources:[]},C=A.video.attrs;for(f in p.attributes.map)C[f]=p.attributes.map[f];for(j=t.attr("src"),j&&A.video.sources.push({src:L.call(R,j,"src",t.name)}),M=p.getAll("source"),b=0;b<M.length;b++)j=M[b].remove(),A.video.sources.push({src:L.call(R,j.attr("src"),"src","source"),type:j.attr("type"),media:j.attr("media")});C.poster&&(C.poster=L.call(R,C.poster,"poster",t.name))}if("object"===t.name&&(m=t,l=t.getAll("embed")[0]),"embed"===t.name&&(l=t),"iframe"===t.name&&(h=t,k="Iframe"),m){for(v=v||m.attr("width"),w=w||m.attr("height"),y=y||m.attr("style"),g=g||m.attr("id"),N=N||m.attr("hspace"),E=E||m.attr("vspace"),P=P||m.attr("align"),U=U||m.attr("bgcolor"),A.name=m.attr("name"),I=m.getAll("param"),b=0;b<I.length;b++)x=I[b],f=x.remove().attr("name"),s[f]||(A.params[f]=x.attr("value"));A.params.src=A.params.src||m.attr("data")}if(l){v=v||l.attr("width"),w=w||l.attr("height"),y=y||l.attr("style"),g=g||l.attr("id"),N=N||l.attr("hspace"),E=E||l.attr("vspace"),P=P||l.attr("align"),U=U||l.attr("bgcolor");for(f in l.attributes.map)s[f]||A.params[f]||(A.params[f]=l.attributes.map[f])}if(h){v=e(h.attr("width")),w=e(h.attr("height")),y=y||h.attr("style"),g=h.attr("id"),N=h.attr("hspace"),E=h.attr("vspace"),P=h.attr("align"),U=h.attr("bgcolor"),tinymce.each(i,function(e){u.attr(e,h.attr(e))});for(f in h.attributes.map)s[f]||A.params[f]||(A.params[f]=h.attributes.map[f])}A.params.movie&&(A.params.src=A.params.src||A.params.movie,delete A.params.movie),A.params.src&&(A.params.src=L.call(R,A.params.src,"src","object")),p&&("video"===t.name?k=z.video.name:"audio"===t.name&&(k=z.audio.name)),m&&!k&&(k=(n(m,"clsid")||n(m,"classid")||n(m,"type")||{}).name),l&&!k&&(k=(n(l,"type")||d(A.params.src)||{}).name),l&&"EmbeddedAudio"==k&&(A.params.type=l.attr("type")),t.replace(u),l&&l.remove(),m&&(_=a(m.remove()),_&&(A.object_html=_)),p&&(_=a(p.remove()),_&&(A.video_html=_)),A.hspace=N,A.vspace=E,A.align=P,A.bgcolor=U,u.attr({id:g,"class":"mceItemMedia mceItem"+(k||"Flash"),style:y,width:v||("audio"==t.name?"300":"320"),height:w||("audio"==t.name?"32":"240"),hspace:N,vspace:E,align:P,bgcolor:U,"data-mce-json":c.serialize(A,"'")})}}}),tinymce.PluginManager.add("media",tinymce.plugins.MediaPlugin)}();
!function(){var e=tinymce.dom.Event,t=(tinymce.each,tinymce.DOM);tinymce.create("tinymce.plugins.ContextMenu",{init:function(t){function n(t,n){return c=0,n&&2==n.button?void(c=n.ctrlKey):void(a._menu&&(a._menu.removeAll(),a._menu.destroy(),e.remove(t.getDoc(),"click",d),a._menu=null))}var i,o,c,d,a=this;a.editor=t,o=t.settings.contextmenu_never_use_native,a.onContextMenu=new tinymce.util.Dispatcher(this),d=function(e){n(t,e)},i=t.onContextMenu.add(function(t,n){(0!==c?c:n.ctrlKey)&&!o||(e.cancel(n),"IMG"==n.target.nodeName&&t.selection.select(n.target),a._getMenu(t).showMenu(n.clientX||n.pageX,n.clientY||n.pageY),e.add(t.getDoc(),"click",d),t.nodeChanged())}),t.onRemove.add(function(){a._menu&&a._menu.removeAll()}),t.onMouseDown.add(n),t.onKeyDown.add(n),t.onKeyDown.add(function(t,n){!n.shiftKey||n.ctrlKey||n.altKey||121!==n.keyCode||(e.cancel(n),i(t,n))})},getInfo:function(){return{longname:"Contextmenu",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/contextmenu",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_getMenu:function(e){var n,i,o=this,c=o._menu,d=e.selection,a=d.isCollapsed(),u=d.getNode()||e.getBody();return c&&(c.removeAll(),c.destroy()),i=t.getPos(e.getContentAreaContainer()),c=e.controlManager.createDropMenu("contextmenu",{offset_x:i.x+e.getParam("contextmenu_offset_x",0),offset_y:i.y+e.getParam("contextmenu_offset_y",0),constrain:1,keyboard_focus:!0}),o._menu=c,c.add({title:"advanced.cut_desc",icon:"cut",cmd:"Cut"}).setDisabled(a),c.add({title:"advanced.copy_desc",icon:"copy",cmd:"Copy"}).setDisabled(a),c.add({title:"advanced.paste_desc",icon:"paste",cmd:"Paste"}),("A"==u.nodeName&&!e.dom.getAttrib(u,"name")||!a)&&(c.addSeparator(),c.add({title:"advanced.link_desc",icon:"link",cmd:e.plugins.advlink?"mceAdvLink":"mceLink",ui:!0}),c.add({title:"advanced.unlink_desc",icon:"unlink",cmd:"UnLink"})),c.addSeparator(),c.add({title:"advanced.image_desc",icon:"image",cmd:e.plugins.advimage?"mceAdvImage":"mceImage",ui:!0}),c.addSeparator(),n=c.addMenu({title:"contextmenu.align"}),n.add({title:"contextmenu.left",icon:"justifyleft",cmd:"JustifyLeft"}),n.add({title:"contextmenu.center",icon:"justifycenter",cmd:"JustifyCenter"}),n.add({title:"contextmenu.right",icon:"justifyright",cmd:"JustifyRight"}),n.add({title:"contextmenu.full",icon:"justifyfull",cmd:"JustifyFull"}),o.onContextMenu.dispatch(o,c,u,a),c}}),tinymce.PluginManager.add("contextmenu",tinymce.plugins.ContextMenu)}();
!function(){function e(e,t){return e.getParam(t,n[t])}var t=tinymce.each,n={paste_auto_cleanup_on_paste:!0,paste_enable_default_filters:!0,paste_block_drop:!1,paste_retain_style_properties:"none",paste_strip_class_attributes:"mso",paste_remove_spans:!1,paste_remove_styles:!1,paste_remove_styles_if_webkit:!0,paste_convert_middot_lists:!0,paste_convert_headers_to_strong:!1,paste_dialog_width:"450",paste_dialog_height:"400",paste_max_consecutive_linebreaks:2,paste_text_use_dialog:!1,paste_text_sticky:!1,paste_text_sticky_default:!1,paste_text_notifyalways:!1,paste_text_linebreaktype:"combined",paste_text_replacements:[[/\u2026/g,"..."],[/[\x93\x94\u201c\u201d]/g,'"'],[/[\x60\x91\x92\u2018\u2019]/g,"'"]]};tinymce.create("tinymce.plugins.PastePlugin",{init:function(n,s){function a(t,s){var a,o=n.dom;i.onPreProcess.dispatch(i,t),t.node=o.create("div",0,t.content),tinymce.isGecko&&(a=n.selection.getRng(!0),a.startContainer==a.endContainer&&3==a.startContainer.nodeType&&1===t.node.childNodes.length&&/^(p|h[1-6]|pre)$/i.test(t.node.firstChild.nodeName)&&-1===t.content.indexOf("__MCE_ITEM__")&&o.remove(t.node.firstChild,!0)),i.onPostProcess.dispatch(i,t),t.content=n.serializer.serialize(t.node,{getInner:1,forced_root_block:""}),!s&&n.pasteAsPlainText?(i._insertPlainText(t.content),e(n,"paste_text_sticky")||(n.pasteAsPlainText=!1,n.controlManager.setActive("pastetext",!1))):i._insert(t.content)}function o(e){function s(e){e.preventDefault()}var o,i,r,c,l,d,p=n.selection,_=n.dom,g=n.getBody();if((e.clipboardData||_.doc.dataTransfer)&&(d=(e.clipboardData||_.doc.dataTransfer).getData("Text"),n.pasteAsPlainText))return e.preventDefault(),void a({content:_.encode(d).replace(/\r?\n/g,"<br />")});if(!_.get("_mcePaste"))return o=_.add(g,"div",{id:"_mcePaste","class":"mcePaste","data-mce-bogus":"1"},"﻿﻿"),l=g!=n.getDoc().body?_.getPos(n.selection.getStart(),g).y:g.scrollTop+_.getViewPort(n.getWin()).y,_.setStyles(o,{position:"absolute",left:tinymce.isGecko?-40:0,top:l-25,width:1,height:1,overflow:"hidden"}),tinymce.isIE?(c=p.getRng(),r=_.doc.body.createTextRange(),r.moveToElementText(o),r.execCommand("Paste"),_.remove(o),"﻿﻿"===o.innerHTML?(n.execCommand("mcePasteWord"),void e.preventDefault()):(p.setRng(c),p.setContent(""),setTimeout(function(){a({content:o.innerHTML})},0),tinymce.dom.Event.cancel(e))):(_.bind(n.getDoc(),"mousedown",s),_.bind(n.getDoc(),"keydown",s),i=n.selection.getRng(),o=o.firstChild,r=n.getDoc().createRange(),r.setStart(o,0),r.setEnd(o,2),p.setRng(r),window.setTimeout(function(){var e,o="";_.select("div.mcePaste > div.mcePaste").length?o="<p>"+_.encode(d).replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br />")+"</p>":(e=_.select("div.mcePaste"),t(e,function(e){var n=e.firstChild;n&&"DIV"==n.nodeName&&n.style.marginTop&&n.style.backgroundColor&&_.remove(n,1),t(_.select("span.Apple-style-span",e),function(e){_.remove(e,1)}),t(_.select("br[data-mce-bogus]",e),function(e){_.remove(e)}),"mcePaste"!=e.parentNode.className&&(o+=e.innerHTML)})),t(_.select("div.mcePaste"),function(e){_.remove(e)}),i&&p.setRng(i),a({content:o}),_.unbind(n.getDoc(),"mousedown",s),_.unbind(n.getDoc(),"keydown",s)},0),void 0)}var i=this;i.editor=n,i.url=s,i.onPreProcess=new tinymce.util.Dispatcher(i),i.onPostProcess=new tinymce.util.Dispatcher(i),i.onPreProcess.add(i._preProcess),i.onPostProcess.add(i._postProcess),i.onPreProcess.add(function(e,t){n.execCallback("paste_preprocess",e,t)}),i.onPostProcess.add(function(e,t){n.execCallback("paste_postprocess",e,t)}),n.onKeyDown.addToTop(function(e,t){return(tinymce.isMac?t.metaKey:t.ctrlKey)&&86==t.keyCode||t.shiftKey&&45==t.keyCode?!1:void 0}),n.pasteAsPlainText=e(n,"paste_text_sticky_default"),n.addCommand("mceInsertClipboardContent",function(e,t){a(t,!0)}),e(n,"paste_text_use_dialog")||n.addCommand("mcePasteText",function(){var t=tinymce.util.Cookie;n.pasteAsPlainText=!n.pasteAsPlainText,n.controlManager.setActive("pastetext",n.pasteAsPlainText),n.pasteAsPlainText&&!t.get("tinymcePasteText")&&(n.windowManager.alert(e(n,"paste_text_sticky")?n.translate("paste.plaintext_mode_sticky"):n.translate("paste.plaintext_mode")),e(n,"paste_text_notifyalways")||t.set("tinymcePasteText","1",new Date((new Date).getFullYear()+1,12,31)))}),n.addButton("pastetext",{title:"paste.paste_text_desc",cmd:"mcePasteText"}),n.addButton("selectall",{title:"paste.selectall_desc",cmd:"selectall"}),e(n,"paste_auto_cleanup_on_paste")&&(tinymce.isOpera||/Firefox\/2/.test(navigator.userAgent)?n.onKeyDown.addToTop(function(e,t){((tinymce.isMac?t.metaKey:t.ctrlKey)&&86==t.keyCode||t.shiftKey&&45==t.keyCode)&&o(t)}):n.onPaste.addToTop(function(e,t){return o(t)})),n.onInit.add(function(){n.controlManager.setActive("pastetext",n.pasteAsPlainText),e(n,"paste_block_drop")&&n.dom.bind(n.getBody(),["dragend","dragover","draggesture","dragdrop","drop","drag"],function(e){return e.preventDefault(),e.stopPropagation(),!1})}),i._legacySupport()},getInfo:function(){return{longname:"Paste text/word",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/paste",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_preProcess:function(n,s){function a(e){t(e,function(e){l=e.constructor==RegExp?l.replace(e,""):l.replace(e[0],e[1])})}function o(e,t){if("all"===r)return"";var n=d(p(t.replace(/^(["'])(.*)\1$/,"$2")," "),function(e){return/^(?!mso)/i.test(e)});return n.length?' class="'+n.join(" ")+'"':""}var i,r,c=this.editor,l=s.content,d=tinymce.grep,p=tinymce.explode,_=tinymce.trim;if(0!=c.settings.paste_enable_default_filters){if(tinymce.isIE&&document.documentMode>=9&&/<(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)/.test(s.content)&&(a([[/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1"]]),a([[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])),/class="?Mso|style="[^"]*\bmso-|w:WordDocument/i.test(l)||s.wordContent){s.wordContent=!0,a([/^\s*(&nbsp;)+/gi,/(&nbsp;|<br[^>]*>)+\s*$/gi]),e(c,"paste_convert_headers_to_strong")&&(l=l.replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>")),e(c,"paste_convert_middot_lists")&&a([[/<!--\[if !supportLists\]-->/gi,"$&__MCE_ITEM__"],[/(<span[^>]+(?:mso-list:|:\s*symbol)[^>]+>)/gi,"$1__MCE_ITEM__"],[/(<p[^>]+(?:MsoListParagraph)[^>]+>)/gi,"$1__MCE_ITEM__"]]),a([/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "]]);do i=l.length,l=l.replace(/(<[a-z][^>]*\s)(?:id|name|language|type|on\w+|\w+:\w+)=(?:"[^"]*"|\w+)\s?/gi,"$1");while(i!=l.length);0==e(c,"paste_retain_style_properties").replace(/^none$/i,"").length?l=l.replace(/<\/?span[^>]*>/gi,""):a([[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}],[/(<[a-z][^>]*)\sstyle="([^"]*)"/gi,function(e,n,s){var a=[],o=0,i=p(_(s).replace(/&quot;/gi,"'"),";");return t(i,function(e){function t(e){return e+("0"!==e&&/\d$/.test(e))?"px":""}var n,s,i=p(e,":");if(2==i.length){switch(n=i[0].toLowerCase(),s=i[1].toLowerCase(),n){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-table-layout-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":return void(a[o++]=n.replace(/^mso-|-alt$/g,"")+":"+t(s));case"horiz-align":return void(a[o++]="text-align:"+s);case"vert-align":return void(a[o++]="vertical-align:"+s);case"font-color":case"mso-foreground":return void(a[o++]="color:"+s);case"mso-background":case"mso-highlight":return void(a[o++]="background:"+s);case"mso-default-height":return void(a[o++]="min-height:"+t(s));case"mso-default-width":return void(a[o++]="min-width:"+t(s));case"mso-padding-between-alt":return void(a[o++]="border-collapse:separate;border-spacing:"+t(s));case"text-line-through":return void(("single"==s||"double"==s)&&(a[o++]="text-decoration:line-through"));case"mso-zero-height":return void("yes"==s&&(a[o++]="display:none"))}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?!align|decor|indent|trans)|top-bar|version|vnd|word-break)/.test(n))return;a[o++]=n+":"+i[1]}}),o>0?n+' style="'+a.join(";")+'"':n}]])}e(c,"paste_convert_headers_to_strong")&&a([[/<h[1-6][^>]*>/gi,"<p><strong>"],[/<\/h[1-6][^>]*>/gi,"</strong></p>"]]),a([[/Version:[\d.]+\nStartHTML:\d+\nEndHTML:\d+\nStartFragment:\d+\nEndFragment:\d+/gi,""]]),r=e(c,"paste_strip_class_attributes"),"none"!==r&&(l=l.replace(/ class="([^"]+)"/gi,o),l=l.replace(/ class=([\-\w]+)/gi,o)),e(c,"paste_remove_spans")&&(l=l.replace(/<\/?span[^>]*>/gi,"")),s.content=l}},_postProcess:function(n,s){var a,o=this,i=o.editor,r=i.dom;0!=i.settings.paste_enable_default_filters&&(s.wordContent&&(t(r.select("a",s.node),function(e){e.href&&-1==e.href.indexOf("#_Toc")||r.remove(e,1)}),e(i,"paste_convert_middot_lists")&&o._convertLists(n,s),a=e(i,"paste_retain_style_properties"),tinymce.is(a,"string")&&"all"!==a&&"*"!==a&&(a=tinymce.explode(a.replace(/^none$/i,"")),t(r.select("*",s.node),function(e){var t,n,s,o={},i=0;if(a)for(t=0;t<a.length;t++)n=a[t],s=r.getStyle(e,n),s&&(o[n]=s,i++);r.setAttrib(e,"style",""),a&&i>0?r.setStyles(e,o):"SPAN"!=e.nodeName||e.className||r.remove(e,!0)}))),e(i,"paste_remove_styles")||e(i,"paste_remove_styles_if_webkit")&&tinymce.isWebKit?t(r.select("*[style]",s.node),function(e){e.removeAttribute("style"),e.removeAttribute("data-mce-style")}):tinymce.isWebKit&&t(r.select("*",s.node),function(e){e.removeAttribute("data-mce-style")}))},_convertLists:function(e,n){var s,a,o,i,r,c=e.editor.dom,l=-1,d=[];t(c.select("p",n.node),function(e){var n,r,p,_,g,m="";for(n=e.firstChild;n&&3==n.nodeType;n=n.nextSibling)m+=n.nodeValue;m=e.innerHTML.replace(/<\/?\w+[^>]*>/gi,"").replace(/&nbsp;/g," "),/^(__MCE_ITEM__)+[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*\u00a0*/.test(m)&&(r="ul"),/^__MCE_ITEM__\s*\w+\.\s*\u00a0+/.test(m)&&(r="ol"),r?(o=parseFloat(e.style.marginLeft||0),o>l&&d.push(o),s&&r==i?o>l?s=a.appendChild(c.create(r)):l>o&&(_=tinymce.inArray(d,o),g=c.getParents(s.parentNode,r),s=g[g.length-1-_]||s):(s=c.create(r),c.insertAfter(s,e)),t(c.select("span",e),function(e){var t=e.innerHTML.replace(/<\/?\w+[^>]*>/gi,"");"ul"==r&&/^__MCE_ITEM__[\u2022\u00b7\u00a7\u00d8o\u25CF]/.test(t)?c.remove(e):/^__MCE_ITEM__[\s\S]*\w+\.(&nbsp;|\u00a0)*\s*/.test(t)&&c.remove(e)}),p=e.innerHTML,p="ul"==r?e.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*(&nbsp;|\u00a0)+\s*/,""):e.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^\s*\w+\.(&nbsp;|\u00a0)+\s*/,""),a=s.appendChild(c.create("li",0,p)),c.remove(e),l=o,i=r):s=l=0}),r=n.node.innerHTML,-1!=r.indexOf("__MCE_ITEM__")&&(n.node.innerHTML=r.replace(/__MCE_ITEM__/g,""))},_insert:function(e,t){var n=this.editor,s=n.selection.getRng();n.selection.isCollapsed()||s.startContainer==s.endContainer||n.getDoc().execCommand("Delete",!1,null),n.execCommand("mceInsertContent",!1,e,{skip_undo:t})},_insertPlainText:function(n){function s(e){t(e,function(e){n=e.constructor==RegExp?n.replace(e,""):n.replace(e[0],e[1])})}var a=this.editor,o=e(a,"paste_text_linebreaktype"),i=e(a,"paste_text_replacements"),r=tinymce.is;if("string"==typeof n&&n.length>0){s(/<(?:p|br|h[1-6]|ul|ol|dl|table|t[rdh]|div|blockquote|fieldset|pre|address|center)[^>]*>/i.test(n)?[/[\n\r]+/g]:[/\r+/g]),s([[/<\/(?:p|h[1-6]|ul|ol|dl|table|div|blockquote|fieldset|pre|address|center)>/gi,"\n\n"],[/<br[^>]*>|<\/tr>/gi,"\n"],[/<\/t[dh]>\s*<t[dh][^>]*>/gi,"	"],/<[a-z!\/?][^>]*>/gi,[/&nbsp;/gi," "],[/(?:(?!\n)\s)*(\n+)(?:(?!\n)\s)*/gi,"$1"]]);var c=Number(e(a,"paste_max_consecutive_linebreaks"));if(c>-1){for(var l=new RegExp("\n{"+(c+1)+",}","g"),d="";d.length<c;)d+="\n";s([[l,d]])}n=a.dom.decode(tinymce.html.Entities.encodeRaw(n)),r(i,"array")?s(i):r(i,"string")&&s(new RegExp(i,"gi")),s("none"==o?[[/\n+/g," "]]:"br"==o?[[/\n/g,"<br />"]]:"p"==o?[[/\n+/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"]]:[[/\n\n/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"],[/\n/g,"<br />"]]),a.execCommand("mceInsertContent",!1,n)}},_legacySupport:function(){var t=this,n=t.editor;n.addCommand("mcePasteWord",function(){n.windowManager.open({file:t.url+"/pasteword.htm",width:parseInt(e(n,"paste_dialog_width")),height:parseInt(e(n,"paste_dialog_height")),inline:1})}),e(n,"paste_text_use_dialog")&&n.addCommand("mcePasteText",function(){n.windowManager.open({file:t.url+"/pastetext.htm",width:parseInt(e(n,"paste_dialog_width")),height:parseInt(e(n,"paste_dialog_height")),inline:1})}),n.addButton("pasteword",{title:"paste.paste_word_desc",cmd:"mcePasteWord"})}}),tinymce.PluginManager.add("paste",tinymce.plugins.PastePlugin)}();
!function(){var e=tinymce.DOM;tinymce.create("tinymce.plugins.FullScreenPlugin",{init:function(l,t){var o,i,r=this,c={};r.editor=l,l.addCommand("mceFullScreen",function(){var s,a=e.doc.documentElement;if(l.getParam("fullscreen_is_enabled"))return void(l.getParam("fullscreen_new_window")?closeFullscreen():e.win.setTimeout(function(){tinymce.dom.Event.remove(e.win,"resize",r.resizeFunc),tinyMCE.get(l.getParam("fullscreen_editor_id")).setContent(l.getContent()),tinyMCE.remove(l),e.remove("mce_fullscreen_container"),a.style.overflow=l.getParam("fullscreen_html_overflow"),e.setStyle(e.doc.body,"overflow",l.getParam("fullscreen_overflow")),e.win.scrollTo(l.getParam("fullscreen_scrollx"),l.getParam("fullscreen_scrolly")),tinyMCE.settings=tinyMCE.oldSettings},10));if(l.getParam("fullscreen_new_window")){s=e.win.open(t+"/fullscreen.htm","mceFullScreenPopup","fullscreen=yes,menubar=no,toolbar=no,scrollbars=no,resizable=yes,left=0,top=0,width="+screen.availWidth+",height="+screen.availHeight);try{s.resizeTo(screen.availWidth,screen.availHeight)}catch(u){}}else tinyMCE.oldSettings=tinyMCE.settings,c.fullscreen_overflow=e.getStyle(e.doc.body,"overflow",1)||"auto",c.fullscreen_html_overflow=e.getStyle(a,"overflow",1),o=e.getViewPort(),c.fullscreen_scrollx=o.x,c.fullscreen_scrolly=o.y,tinymce.isOpera&&"visible"==c.fullscreen_overflow&&(c.fullscreen_overflow="auto"),tinymce.isIE&&"scroll"==c.fullscreen_overflow&&(c.fullscreen_overflow="auto"),!tinymce.isIE||"visible"!=c.fullscreen_html_overflow&&"scroll"!=c.fullscreen_html_overflow||(c.fullscreen_html_overflow="auto"),"0px"==c.fullscreen_overflow&&(c.fullscreen_overflow=""),e.setStyle(e.doc.body,"overflow","hidden"),a.style.overflow="hidden",o=e.getViewPort(),e.win.scrollTo(0,0),tinymce.isIE&&(o.h-=1),i=tinymce.isIE6||"BackCompat"==document.compatMode?"absolute;top:"+o.y:"fixed;top:0",n=e.add(e.doc.body,"div",{id:"mce_fullscreen_container",style:"position:"+i+";left:0;width:"+o.w+"px;height:"+o.h+"px;z-index:200000;"}),e.add(n,"div",{id:"mce_fullscreen"}),tinymce.each(l.settings,function(e,n){c[n]=e}),c.id="mce_fullscreen",c.width=n.clientWidth,c.height=n.clientHeight-15,c.fullscreen_is_enabled=!0,c.fullscreen_editor_id=l.id,c.theme_advanced_resizing=!1,c.save_onsavecallback=function(){l.setContent(tinyMCE.get(c.id).getContent()),l.execCommand("mceSave")},tinymce.each(l.getParam("fullscreen_settings"),function(e,n){c[n]=e}),"external"===c.theme_advanced_toolbar_location&&(c.theme_advanced_toolbar_location="top"),r.fullscreenEditor=new tinymce.Editor("mce_fullscreen",c),r.fullscreenEditor.onInit.add(function(){r.fullscreenEditor.setContent(l.getContent()),r.fullscreenEditor.focus()}),r.fullscreenEditor.render(),r.fullscreenElement=new tinymce.dom.Element("mce_fullscreen_container"),r.fullscreenElement.update(),r.resizeFunc=tinymce.dom.Event.add(e.win,"resize",function(){var e,n,l=tinymce.DOM.getViewPort(),t=r.fullscreenEditor;e=t.dom.getSize(t.getContainer().getElementsByTagName("table")[0]),n=t.dom.getSize(t.getContainer().getElementsByTagName("iframe")[0]),t.theme.resizeTo(l.w-e.w+n.w,l.h-e.h+n.h)})}),l.addButton("fullscreen",{title:"fullscreen.desc",cmd:"mceFullScreen"}),l.onNodeChange.add(function(e,n){n.setActive("fullscreen",e.getParam("fullscreen_is_enabled"))})},getInfo:function(){return{longname:"Fullscreen",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullscreen",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("fullscreen",tinymce.plugins.FullScreenPlugin)}();
!function(){tinymce.create("tinymce.plugins.Nonbreaking",{init:function(n){var e=this;e.editor=n,n.addCommand("mceNonBreaking",function(){n.execCommand("mceInsertContent",!1,n.plugins.visualchars&&n.plugins.visualchars.state?'<span data-mce-bogus="1" class="mceItemHidden mceItemNbsp">&nbsp;</span>':"&nbsp;")}),n.addButton("nonbreaking",{title:"nonbreaking.nonbreaking_desc",cmd:"mceNonBreaking"}),n.getParam("nonbreaking_force_tab")&&n.onKeyDown.add(function(n,e){9==e.keyCode&&(e.preventDefault(),n.execCommand("mceNonBreaking"),n.execCommand("mceNonBreaking"),n.execCommand("mceNonBreaking"))})},getInfo:function(){return{longname:"Nonbreaking space",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/nonbreaking",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("nonbreaking",tinymce.plugins.Nonbreaking)}();
!function(){tinymce.create("tinymce.plugins.XHTMLXtrasPlugin",{init:function(t,e){t.addCommand("mceCite",function(){t.windowManager.open({file:e+"/cite.htm",width:350+parseInt(t.getLang("xhtmlxtras.cite_delta_width",0)),height:250+parseInt(t.getLang("xhtmlxtras.cite_delta_height",0)),inline:1},{plugin_url:e})}),t.addCommand("mceAcronym",function(){t.windowManager.open({file:e+"/acronym.htm",width:350+parseInt(t.getLang("xhtmlxtras.acronym_delta_width",0)),height:250+parseInt(t.getLang("xhtmlxtras.acronym_delta_height",0)),inline:1},{plugin_url:e})}),t.addCommand("mceAbbr",function(){t.windowManager.open({file:e+"/abbr.htm",width:350+parseInt(t.getLang("xhtmlxtras.abbr_delta_width",0)),height:250+parseInt(t.getLang("xhtmlxtras.abbr_delta_height",0)),inline:1},{plugin_url:e})}),t.addCommand("mceDel",function(){t.windowManager.open({file:e+"/del.htm",width:340+parseInt(t.getLang("xhtmlxtras.del_delta_width",0)),height:310+parseInt(t.getLang("xhtmlxtras.del_delta_height",0)),inline:1},{plugin_url:e})}),t.addCommand("mceIns",function(){t.windowManager.open({file:e+"/ins.htm",width:340+parseInt(t.getLang("xhtmlxtras.ins_delta_width",0)),height:310+parseInt(t.getLang("xhtmlxtras.ins_delta_height",0)),inline:1},{plugin_url:e})}),t.addCommand("mceAttributes",function(){t.windowManager.open({file:e+"/attributes.htm",width:380+parseInt(t.getLang("xhtmlxtras.attr_delta_width",0)),height:370+parseInt(t.getLang("xhtmlxtras.attr_delta_height",0)),inline:1},{plugin_url:e})}),t.addButton("cite",{title:"xhtmlxtras.cite_desc",cmd:"mceCite"}),t.addButton("acronym",{title:"xhtmlxtras.acronym_desc",cmd:"mceAcronym"}),t.addButton("abbr",{title:"xhtmlxtras.abbr_desc",cmd:"mceAbbr"}),t.addButton("del",{title:"xhtmlxtras.del_desc",cmd:"mceDel"}),t.addButton("ins",{title:"xhtmlxtras.ins_desc",cmd:"mceIns"}),t.addButton("attribs",{title:"xhtmlxtras.attribs_desc",cmd:"mceAttributes"}),t.onNodeChange.add(function(t,e,n,i){if(n=t.dom.getParent(n,"CITE,ACRONYM,ABBR,DEL,INS"),e.setDisabled("cite",i),e.setDisabled("acronym",i),e.setDisabled("abbr",i),e.setDisabled("del",i),e.setDisabled("ins",i),e.setDisabled("attribs",n&&"BODY"==n.nodeName),e.setActive("cite",0),e.setActive("acronym",0),e.setActive("abbr",0),e.setActive("del",0),e.setActive("ins",0),n)do e.setDisabled(n.nodeName.toLowerCase(),0),e.setActive(n.nodeName.toLowerCase(),1);while(n=n.parentNode)}),t.onPreInit.add(function(){t.dom.create("abbr")})},getInfo:function(){return{longname:"XHTML Xtras Plugin",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/xhtmlxtras",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("xhtmlxtras",tinymce.plugins.XHTMLXtrasPlugin)}();
!function(){var e=tinymce.each;tinymce.create("tinymce.plugins.AdvListPlugin",{init:function(t){function i(t){var i=[];return e(t.split(/,/),function(e){i.push({title:"advlist."+("default"==e?"def":e.replace(/-/g,"_")),styles:{listStyleType:"default"==e?"":e}})}),i}var n=this;n.editor=t,n.numlist=t.getParam("advlist_number_styles")||i("default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman"),n.bullist=t.getParam("advlist_bullet_styles")||i("default,circle,disc,square"),tinymce.isIE&&/MSIE [2-7]/.test(navigator.userAgent)&&(n.isIE7=!0)},createControl:function(t,i){function n(t,i){var n=!0;return e(i.styles,function(e,i){return r.dom.getStyle(t,i)!=e?(n=!1,!1):void 0}),n}function o(){var e,i=r.dom,o=r.selection;e=i.getParent(o.getNode(),"ol,ul"),(!e||e.nodeName==("bullist"==t?"OL":"UL")||n(e,s))&&r.execCommand("bullist"==t?"InsertUnorderedList":"InsertOrderedList"),s&&(e=i.getParent(o.getNode(),"ol,ul"),e&&(i.setStyles(e,s.styles),e.removeAttribute("data-mce-style"))),r.focus()}var l,s,d=this,r=d.editor;return"numlist"==t||"bullist"==t?("advlist.def"==d[t][0].title&&(s=d[t][0]),l=i.createSplitButton(t,{title:"advanced."+t+"_desc","class":"mce_"+t,onclick:function(){o()}}),l.onRenderMenu.add(function(i,l){l.onHideMenu.add(function(){d.bookmark&&(r.selection.moveToBookmark(d.bookmark),d.bookmark=0)}),l.onShowMenu.add(function(){var i,o=r.dom,a=o.getParent(r.selection.getNode(),"ol,ul");(a||s)&&(i=d[t],e(l.items,function(t){var o=!0;t.setSelected(0),a&&!t.isDisabled()&&(e(i,function(e){return e.id!=t.id||n(a,e)?void 0:(o=!1,!1)}),o&&t.setSelected(1))}),a||l.items[s.id].setSelected(1)),r.focus(),tinymce.isIE&&(d.bookmark=r.selection.getBookmark(1))}),l.add({id:r.dom.uniqueId(),title:"advlist.types","class":"mceMenuItemTitle",titleItem:!0}).setDisabled(1),e(d[t],function(e){d.isIE7&&"lower-greek"==e.styles.listStyleType||(e.id=r.dom.uniqueId(),l.add({id:e.id,title:e.title,onclick:function(){s=e,o()}}))})}),l):void 0},getInfo:function(){return{longname:"Advanced lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlist",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("advlist",tinymce.plugins.AdvListPlugin)}();
!function(e){function t(e,t){function a(e){return e.replace(/%(\w+)/g,"")}var o,n,r,i=e.dom,d="";return previewStyles=e.settings.preview_styles,previewStyles===!1?"":(previewStyles||(previewStyles="font-family font-size font-weight text-decoration text-transform color background-color"),o=t.block||t.inline||"span",n=i.create(o),s(t.styles,function(e,t){e=a(e),e&&i.setStyle(n,t,e)}),s(t.attributes,function(e,t){e=a(e),e&&i.setAttrib(n,t,e)}),s(t.classes,function(e){e=a(e),i.hasClass(n,e)||i.addClass(n,e)}),i.setStyles(n,{position:"absolute",left:-65535}),e.getBody().appendChild(n),r=i.getStyle(e.getBody(),"fontSize",!0),r=/px$/.test(r)?parseInt(r,10):0,s(previewStyles.split(" "),function(t){var a=i.getStyle(n,t,!0);if("background-color"!=t||!/transparent|rgba\s*\([^)]+,\s*0\)/.test(a)||(a=i.getStyle(e.getBody(),t,!0),"#ffffff"!=i.toHex(a).toLowerCase())){if("font-size"==t&&/em|%$/.test(a)){if(0===r)return;a=parseFloat(a,10)/(/%$/.test(a)?100:1),a=a*r+"px"}d+=t+":"+a+";"}}),i.remove(n),d)}var a,o=e.DOM,n=e.dom.Event,r=e.extend,s=e.each,i=e.util.Cookie,d=e.explode;e.ThemeManager.requireLangPack("advanced"),e.create("tinymce.themes.AdvancedTheme",{sizes:[8,10,12,14,18,24,36],controls:{bold:["bold_desc","Bold"],italic:["italic_desc","Italic"],underline:["underline_desc","Underline"],strikethrough:["striketrough_desc","Strikethrough"],justifyleft:["justifyleft_desc","JustifyLeft"],justifycenter:["justifycenter_desc","JustifyCenter"],justifyright:["justifyright_desc","JustifyRight"],justifyfull:["justifyfull_desc","JustifyFull"],bullist:["bullist_desc","InsertUnorderedList"],numlist:["numlist_desc","InsertOrderedList"],outdent:["outdent_desc","Outdent"],indent:["indent_desc","Indent"],cut:["cut_desc","Cut"],copy:["copy_desc","Copy"],paste:["paste_desc","Paste"],undo:["undo_desc","Undo"],redo:["redo_desc","Redo"],link:["link_desc","mceLink"],unlink:["unlink_desc","unlink"],image:["image_desc","mceImage"],cleanup:["cleanup_desc","mceCleanup"],help:["help_desc","mceHelp"],code:["code_desc","mceCodeEditor"],hr:["hr_desc","InsertHorizontalRule"],removeformat:["removeformat_desc","RemoveFormat"],sub:["sub_desc","subscript"],sup:["sup_desc","superscript"],forecolor:["forecolor_desc","ForeColor"],forecolorpicker:["forecolor_desc","mceForeColor"],backcolor:["backcolor_desc","HiliteColor"],backcolorpicker:["backcolor_desc","mceBackColor"],charmap:["charmap_desc","mceCharMap"],visualaid:["visualaid_desc","mceToggleVisualAid"],anchor:["anchor_desc","mceInsertAnchor"],newdocument:["newdocument_desc","mceNewDocument"],blockquote:["blockquote_desc","mceBlockQuote"]},stateControls:["bold","italic","underline","strikethrough","bullist","numlist","justifyleft","justifycenter","justifyright","justifyfull","sub","sup","blockquote"],init:function(t,a){var n,i,d,c=this;c.editor=t,c.url=a,c.onResolveName=new e.util.Dispatcher(this),n=t.settings,t.forcedHighContrastMode=t.settings.detect_highcontrast&&c._isHighContrast(),t.settings.skin=t.forcedHighContrastMode?"highcontrast":t.settings.skin,n.theme_advanced_buttons1||(n=r({theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect",theme_advanced_buttons2:"bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code",theme_advanced_buttons3:"hr,removeformat,visualaid,|,sub,sup,|,charmap"},n)),c.settings=n=r({theme_advanced_path:!0,theme_advanced_toolbar_location:"top",theme_advanced_blockformats:"p,address,pre,h1,h2,h3,h4,h5,h6",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1,theme_advanced_font_sizes:"1,2,3,4,5,6,7",theme_advanced_font_selector:"span",theme_advanced_show_current_color:0,readonly:t.settings.readonly},n),n.font_size_style_values||(n.font_size_style_values="8pt,10pt,12pt,14pt,18pt,24pt,36pt"),e.is(n.theme_advanced_font_sizes,"string")&&(n.font_size_style_values=e.explode(n.font_size_style_values),n.font_size_classes=e.explode(n.font_size_classes||""),d={},t.settings.theme_advanced_font_sizes=n.theme_advanced_font_sizes,s(t.getParam("theme_advanced_font_sizes","","hash"),function(e,t){var a;t==e&&e>=1&&7>=e&&(t=e+" ("+c.sizes[e-1]+"pt)",a=n.font_size_classes[e-1],e=n.font_size_style_values[e-1]||c.sizes[e-1]+"pt"),/^\s*\./.test(e)&&(a=e.replace(/\./g,"")),d[t]=a?{"class":a}:{fontSize:e}}),n.theme_advanced_font_sizes=d),(i=n.theme_advanced_path_location)&&"none"!=i&&(n.theme_advanced_statusbar_location=n.theme_advanced_path_location),"none"==n.theme_advanced_statusbar_location&&(n.theme_advanced_statusbar_location=0),t.settings.content_css!==!1&&t.contentCSS.push(t.baseURI.toAbsolute(a+"/skins/"+t.settings.skin+"/content.css")),t.onInit.add(function(){t.settings.readonly||(t.onNodeChange.add(c._nodeChanged,c),t.onKeyUp.add(c._updateUndoStatus,c),t.onMouseUp.add(c._updateUndoStatus,c),t.dom.bind(t.dom.getRoot(),"dragend",function(){c._updateUndoStatus(t)}))}),t.onSetProgressState.add(function(e,t,a){var n,r,s=e.id;t?c.progressTimer=setTimeout(function(){n=e.getContainer(),n=n.insertBefore(o.create("DIV",{style:"position:relative"}),n.firstChild),r=o.get(e.id+"_tbl"),o.add(n,"div",{id:s+"_blocker","class":"mceBlocker",style:{width:r.clientWidth+2,height:r.clientHeight+2}}),o.add(n,"div",{id:s+"_progress","class":"mceProgress",style:{left:r.clientWidth/2,top:r.clientHeight/2}})},a||0):(o.remove(s+"_blocker"),o.remove(s+"_progress"),clearTimeout(c.progressTimer))}),o.loadCSS(n.editor_css?t.documentBaseURI.toAbsolute(n.editor_css):a+"/skins/"+t.settings.skin+"/ui.css"),n.skin_variant&&o.loadCSS(a+"/skins/"+t.settings.skin+"/ui_"+n.skin_variant+".css")},_isHighContrast:function(){var e,t=o.add(o.getRoot(),"div",{style:"background-color: rgb(171,239,86);"});return e=(o.getStyle(t,"background-color",!0)+"").toLowerCase().replace(/ /g,""),o.remove(t),"rgb(171,239,86)"!=e&&"#abef56"!=e},createControl:function(e,t){var a,o;if(o=t.createControl(e))return o;switch(e){case"styleselect":return this._createStyleSelect();case"formatselect":return this._createBlockFormats();case"fontselect":return this._createFontSelect();case"fontsizeselect":return this._createFontSizeSelect();case"forecolor":return this._createForeColorMenu();case"backcolor":return this._createBackColorMenu()}return(a=this.controls[e])?t.createButton(e,{title:"advanced."+a[0],cmd:a[1],ui:a[2],value:a[3]}):void 0},execCommand:function(e,t,a){var o=this["_"+e];return o?(o.call(this,t,a),!0):!1},_importClasses:function(){var e=this.editor,a=e.controlManager.get("styleselect");0==a.getLength()&&s(e.dom.getClasses(),function(o,n){var r,s="style_"+n;r={inline:"span",attributes:{"class":o["class"]},selector:"*"},e.formatter.register(s,r),a.add(o["class"],s,{style:function(){return t(e,r)}})})},_createStyleSelect:function(){var a,o=this,r=o.editor,i=r.controlManager;return a=i.createListBox("styleselect",{title:"advanced.style_select",onselect:function(t){var o,n,i=[];return s(a.items,function(e){i.push(e.value)}),r.focus(),r.undoManager.add(),o=r.formatter.matchAll(i),e.each(o,function(e){t&&e!=t||(e&&r.formatter.remove(e),n=!0)}),n||r.formatter.apply(t),r.undoManager.add(),r.nodeChanged(),!1}}),r.onPreInit.add(function(){var e=0,n=r.getParam("style_formats");n?s(n,function(o){var n,i=0;s(o,function(){i++}),i>1?(n=o.name=o.name||"style_"+e++,r.formatter.register(n,o),a.add(o.title,n,{style:function(){return t(r,o)}})):a.add(o.title)}):s(r.getParam("theme_advanced_styles","","hash"),function(n,s){var i,d;n&&(i="style_"+e++,d={inline:"span",classes:n,selector:"*"},r.formatter.register(i,d),a.add(o.editor.translate(s),i,{style:function(){return t(r,d)}}))})}),0==a.getLength()&&a.onPostRender.add(function(e,t){a.NativeListBox?n.add(t.id,"focus",o._importClasses,o):(n.add(t.id+"_text","focus",o._importClasses,o),n.add(t.id+"_text","mousedown",o._importClasses,o),n.add(t.id+"_open","focus",o._importClasses,o),n.add(t.id+"_open","mousedown",o._importClasses,o))}),a},_createFontSelect:function(){var e,t=this,a=t.editor;return e=a.controlManager.createListBox("fontselect",{title:"advanced.fontdefault",onselect:function(t){var o=e.items[e.selectedIndex];return!t&&o?void a.execCommand("FontName",!1,o.value):(a.execCommand("FontName",!1,t),e.select(function(e){return t==e}),o&&o.value==t&&e.select(null),!1)}}),e&&s(a.getParam("theme_advanced_fonts",t.settings.theme_advanced_fonts,"hash"),function(t,o){e.add(a.translate(o),t,{style:-1==t.indexOf("dings")?"font-family:"+t:""})}),e},_createFontSizeSelect:function(){var e,t=this,a=t.editor,o=0;return e=a.controlManager.createListBox("fontsizeselect",{title:"advanced.font_size",onselect:function(t){var o=e.items[e.selectedIndex];return!t&&o?(o=o.value,void(o["class"]?(a.formatter.toggle("fontsize_class",{value:o["class"]}),a.undoManager.add(),a.nodeChanged()):a.execCommand("FontSize",!1,o.fontSize))):(t["class"]?(a.focus(),a.undoManager.add(),a.formatter.toggle("fontsize_class",{value:t["class"]}),a.undoManager.add(),a.nodeChanged()):a.execCommand("FontSize",!1,t.fontSize),e.select(function(e){return t==e}),o&&(o.value.fontSize==t.fontSize||o.value["class"]&&o.value["class"]==t["class"])&&e.select(null),!1)}}),e&&s(t.settings.theme_advanced_font_sizes,function(a,n){var r=a.fontSize;r>=1&&7>=r&&(r=t.sizes[parseInt(r)-1]+"pt"),e.add(n,a,{style:"font-size:"+r,"class":"mceFontSize"+o++ +(" "+(a["class"]||""))})}),e},_createBlockFormats:function(){var e,a={p:"advanced.paragraph",address:"advanced.address",pre:"advanced.pre",h1:"advanced.h1",h2:"advanced.h2",h3:"advanced.h3",h4:"advanced.h4",h5:"advanced.h5",h6:"advanced.h6",div:"advanced.div",blockquote:"advanced.blockquote",code:"advanced.code",dt:"advanced.dt",dd:"advanced.dd",samp:"advanced.samp"},o=this;return e=o.editor.controlManager.createListBox("formatselect",{title:"advanced.block",onselect:function(e){return o.editor.execCommand("FormatBlock",!1,e),!1}}),e&&s(o.editor.getParam("theme_advanced_blockformats",o.settings.theme_advanced_blockformats,"hash"),function(n,r){e.add(o.editor.translate(r!=n?r:a[n]),n,{"class":"mce_formatPreview mce_"+n,style:function(){return t(o.editor,{block:n})}})}),e},_createForeColorMenu:function(){var e,t,a=this,o=a.settings,n={};return o.theme_advanced_more_colors&&(n.more_colors_func=function(){a._mceColorPicker(0,{color:e.value,func:function(t){e.setColor(t)}})}),(t=o.theme_advanced_text_colors)&&(n.colors=t),o.theme_advanced_default_foreground_color&&(n.default_color=o.theme_advanced_default_foreground_color),n.title="advanced.forecolor_desc",n.cmd="ForeColor",n.scope=this,e=a.editor.controlManager.createColorSplitButton("forecolor",n)},_createBackColorMenu:function(){var e,t,a=this,o=a.settings,n={};return o.theme_advanced_more_colors&&(n.more_colors_func=function(){a._mceColorPicker(0,{color:e.value,func:function(t){e.setColor(t)}})}),(t=o.theme_advanced_background_colors)&&(n.colors=t),o.theme_advanced_default_background_color&&(n.default_color=o.theme_advanced_default_background_color),n.title="advanced.backcolor_desc",n.cmd="HiliteColor",n.scope=this,e=a.editor.controlManager.createColorSplitButton("backcolor",n)},renderUI:function(t){var a,r,i,d,c,l,_=this,u=_.editor,h=_.settings;switch(u.settings&&(u.settings.aria_label=h.aria_label+u.getLang("advanced.help_shortcut")),a=c=o.create("span",{role:"application","aria-labelledby":u.id+"_voice",id:u.id+"_parent","class":"mceEditor "+u.settings.skin+"Skin"+(h.skin_variant?" "+u.settings.skin+"Skin"+_._ufirst(h.skin_variant):"")+("rtl"==u.settings.directionality?" mceRtl":"")}),o.add(a,"span",{"class":"mceVoiceLabel",style:"display:none;",id:u.id+"_voice"},h.aria_label),o.boxModel||(a=o.add(a,"div",{"class":"mceOldBoxModel"})),a=d=o.add(a,"table",{role:"presentation",id:u.id+"_tbl","class":"mceLayout",cellSpacing:0,cellPadding:0}),a=i=o.add(a,"tbody"),(h.theme_advanced_layout_manager||"").toLowerCase()){case"rowlayout":r=_._rowLayout(h,i,t);break;case"customlayout":r=u.execCallback("theme_advanced_custom_layout",h,i,t,c);break;default:r=_._simpleLayout(h,i,t,c)}return a=t.targetNode,l=d.rows,o.addClass(l[0],"mceFirst"),o.addClass(l[l.length-1],"mceLast"),s(o.select("tr",i),function(e){o.addClass(e.firstChild,"mceFirst"),o.addClass(e.childNodes[e.childNodes.length-1],"mceLast")}),o.get(h.theme_advanced_toolbar_container)?o.get(h.theme_advanced_toolbar_container).appendChild(c):o.insertAfter(c,a),n.add(u.id+"_path_row","click",function(e){return e=e.target,"A"==e.nodeName?(_._sel(e.className.replace(/^.*mcePath_([0-9]+).*$/,"$1")),!1):void 0}),u.getParam("accessibility_focus")||n.add(o.add(c,"a",{href:"#"},"<!-- IE -->"),"focus",function(){tinyMCE.get(u.id).focus()}),"external"==h.theme_advanced_toolbar_location&&(t.deltaHeight=0),_.deltaHeight=t.deltaHeight,t.targetNode=null,u.onKeyDown.add(function(t,a){var r=121,s=122;if(a.altKey){if(a.keyCode===r)return e.isWebKit&&window.focus(),_.toolbarGroup.focus(),n.cancel(a);if(a.keyCode===s)return o.get(t.id+"_path_row").focus(),n.cancel(a)}}),u.addShortcut("alt+0","","mceShortcuts",_),{iframeContainer:r,editorContainer:u.id+"_parent",sizeContainer:d,deltaHeight:t.deltaHeight}},getInfo:function(){return{longname:"Advanced theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:e.majorVersion+"."+e.minorVersion}},resizeBy:function(e,t){var a=o.get(this.editor.id+"_ifr");this.resizeTo(a.clientWidth+e,a.clientHeight+t)},resizeTo:function(e,t,a){var n=this.editor,r=this.settings,s=o.get(n.id+"_tbl"),d=o.get(n.id+"_ifr");e=Math.max(r.theme_advanced_resizing_min_width||100,e),t=Math.max(r.theme_advanced_resizing_min_height||100,t),e=Math.min(r.theme_advanced_resizing_max_width||65535,e),t=Math.min(r.theme_advanced_resizing_max_height||65535,t),o.setStyle(s,"height",""),o.setStyle(d,"height",t),r.theme_advanced_resize_horizontal&&(o.setStyle(s,"width",""),o.setStyle(d,"width",e),e<s.clientWidth&&(e=s.clientWidth,o.setStyle(d,"width",s.clientWidth))),a&&r.theme_advanced_resizing_use_cookie&&i.setHash("TinyMCE_"+n.id+"_size",{cw:e,ch:t})},destroy:function(){var e=this.editor.id;n.clear(e+"_resize"),n.clear(e+"_path_row"),n.clear(e+"_external_close")},_simpleLayout:function(e,t,r,s){var i,d,c,l,_=this,u=_.editor,h=e.theme_advanced_toolbar_location,m=e.theme_advanced_statusbar_location;return e.readonly?(i=o.add(t,"tr"),i=d=o.add(i,"td",{"class":"mceIframeContainer"}),d):("top"==h&&_._addToolbars(t,r),"external"==h&&(i=l=o.create("div",{style:"position:relative"}),i=o.add(i,"div",{id:u.id+"_external","class":"mceExternalToolbar"}),o.add(i,"a",{id:u.id+"_external_close",href:"javascript:;","class":"mceExternalClose"}),i=o.add(i,"table",{id:u.id+"_tblext",cellSpacing:0,cellPadding:0}),c=o.add(i,"tbody"),"mceOldBoxModel"==s.firstChild.className?s.firstChild.appendChild(l):s.insertBefore(l,s.firstChild),_._addToolbars(c,r),u.onMouseUp.add(function(){var e=o.get(u.id+"_external");o.show(e),o.hide(a);var t=n.add(u.id+"_external_close","click",function(){return o.hide(u.id+"_external"),n.remove(u.id+"_external_close","click",t),!1});o.show(e),o.setStyle(e,"top",0-o.getRect(u.id+"_tblext").h-1),o.hide(e),o.show(e),e.style.filter="",a=u.id+"_external",e=null})),"top"==m&&_._addStatusBar(t,r),e.theme_advanced_toolbar_container||(i=o.add(t,"tr"),i=d=o.add(i,"td",{"class":"mceIframeContainer"})),"bottom"==h&&_._addToolbars(t,r),"bottom"==m&&_._addStatusBar(t,r),d)},_rowLayout:function(e,t,a){var n,r,i,c,l,_,u=this,h=u.editor,m=h.controlManager;return n=e.theme_advanced_containers_default_class||"",r=e.theme_advanced_containers_default_align||"center",s(d(e.theme_advanced_containers||""),function(s,d){var h=e["theme_advanced_container_"+s]||"";switch(s.toLowerCase()){case"mceeditor":i=o.add(t,"tr"),i=c=o.add(i,"td",{"class":"mceIframeContainer"});break;case"mceelementpath":u._addStatusBar(t,a);break;default:_=(e["theme_advanced_container_"+s+"_align"]||r).toLowerCase(),_="mce"+u._ufirst(_),i=o.add(o.add(t,"tr"),"td",{"class":"mceToolbar "+(e["theme_advanced_container_"+s+"_class"]||n)+" "+_||r}),l=m.createToolbar("toolbar"+d),u._addControls(h,l),o.setHTML(i,l.renderHTML()),a.deltaHeight-=e.theme_advanced_row_height}}),c},_addControls:function(e,t){var a,o=this,n=o.settings,r=o.editor.controlManager;n.theme_advanced_disable&&!o._disabled?(a={},s(d(n.theme_advanced_disable),function(e){a[e]=1}),o._disabled=a):a=o._disabled,s(d(e),function(e){var n;if(!a||!a[e]){if("tablecontrols"==e)return void s(["table","|","row_props","cell_props","|","row_before","row_after","delete_row","|","col_before","col_after","delete_col","|","split_cells","merge_cells"],function(e){e=o.createControl(e,r),e&&t.add(e)});n=o.createControl(e,r),n&&t.add(n)}})},_addToolbars:function(e,t){var a,n,r,s,i,d,c=this,l=c.editor,_=c.settings,u=l.controlManager,h=[],m=!1;for(d=u.createToolbarGroup("toolbargroup",{name:l.getLang("advanced.toolbar"),tab_focus_toolbar:l.getParam("theme_advanced_tab_focus_toolbar")}),c.toolbarGroup=d,i=_.theme_advanced_toolbar_align.toLowerCase(),i="mce"+c._ufirst(i),s=o.add(o.add(e,"tr",{role:"presentation"}),"td",{"class":"mceToolbar "+i,role:"toolbar"}),a=1;r=_["theme_advanced_buttons"+a];a++)m=!0,n=u.createToolbar("toolbar"+a,{"class":"mceToolbarRow"+a}),_["theme_advanced_buttons"+a+"_add"]&&(r+=","+_["theme_advanced_buttons"+a+"_add"]),_["theme_advanced_buttons"+a+"_add_before"]&&(r=_["theme_advanced_buttons"+a+"_add_before"]+","+r),c._addControls(r,n),d.add(n),t.deltaHeight-=_.theme_advanced_row_height;m||(t.deltaHeight-=_.theme_advanced_row_height),h.push(d.renderHTML()),h.push(o.createHTML("a",{href:"#",accesskey:"z",title:l.getLang("advanced.toolbar_focus"),onfocus:"tinyMCE.getInstanceById('"+l.id+"').focus();"},"<!-- IE -->")),o.setHTML(s,h.join(""))},_addStatusBar:function(e,t){var a,r,s=this,d=s.editor,c=s.settings;a=o.add(e,"tr"),a=r=o.add(a,"td",{"class":"mceStatusbar"}),a=o.add(a,"div",{id:d.id+"_path_row",role:"group","aria-labelledby":d.id+"_path_voice"}),c.theme_advanced_path?(o.add(a,"span",{id:d.id+"_path_voice"},d.translate("advanced.path")),o.add(a,"span",{},": ")):o.add(a,"span",{},"&#160;"),c.theme_advanced_resizing&&(o.add(r,"a",{id:d.id+"_resize",href:"javascript:;",onclick:"return false;","class":"mceResize",tabIndex:"-1"}),c.theme_advanced_resizing_use_cookie&&d.onPostRender.add(function(){{var e=i.getHash("TinyMCE_"+d.id+"_size");o.get(d.id+"_tbl")}e&&s.resizeTo(e.cw,e.ch)}),d.onPostRender.add(function(){n.add(d.id+"_resize","click",function(e){e.preventDefault()}),n.add(d.id+"_resize","mousedown",function(e){function t(e){e.preventDefault(),f=h+(e.screenX-_),g=m+(e.screenY-u),s.resizeTo(f,g)}function a(e){n.remove(o.doc,"mousemove",r),n.remove(d.getDoc(),"mousemove",i),n.remove(o.doc,"mouseup",c),n.remove(d.getDoc(),"mouseup",l),f=h+(e.screenX-_),g=m+(e.screenY-u),s.resizeTo(f,g,!0),d.nodeChanged()}var r,i,c,l,_,u,h,m,f,g,v;e.preventDefault(),_=e.screenX,u=e.screenY,v=o.get(s.editor.id+"_ifr"),h=f=v.clientWidth,m=g=v.clientHeight,r=n.add(o.doc,"mousemove",t),i=n.add(d.getDoc(),"mousemove",t),c=n.add(o.doc,"mouseup",a),l=n.add(d.getDoc(),"mouseup",a)})})),t.deltaHeight-=21,a=e=null},_updateUndoStatus:function(e){var t=e.controlManager,a=e.undoManager;t.setDisabled("undo",!a.hasUndo()&&!a.typing),t.setDisabled("redo",!a.hasRedo())},_nodeChanged:function(t,a,n,r,i){function d(e){var t,a=i.parents,o=e;for("string"==typeof e&&(o=function(t){return t.nodeName==e}),t=0;t<a.length;t++)if(o(a[t]))return a[t]}function c(e,t){(u=a.get(e))&&(t||(t=u.settings.default_color),t!==u.value&&u.displayColor(t))}function c(e,t){(u=a.get(e))&&(t||(t=u.settings.default_color),t!==u.value&&u.displayColor(t))}var l,_,u,h,m,f,g,v,p,b,y=this,C=0,k=y.settings;e.each(y.stateControls,function(e){a.setActive(e,t.queryCommandState(y.controls[e][1]))}),a.setActive("visualaid",t.hasVisual),y._updateUndoStatus(t),a.setDisabled("outdent",!t.queryCommandState("Outdent")),l=d("A"),(u=a.get("link"))&&(u.setDisabled(!l&&r||l&&!l.href),u.setActive(!!l&&!l.name&&!l.id)),(u=a.get("unlink"))&&(u.setDisabled(!l&&r),u.setActive(!!l&&!l.name&&!l.id)),(u=a.get("anchor"))&&u.setActive(!r&&!!l&&(l.name||l.id&&!l.href)),l=d("IMG"),(u=a.get("image"))&&u.setActive(!r&&!!l&&-1==n.className.indexOf("mceItem")),(u=a.get("styleselect"))&&(y._importClasses(),p=[],s(u.items,function(e){p.push(e.value)}),b=t.formatter.matchAll(p),u.select(b[0]),e.each(b,function(e,t){t>0&&u.mark(e)})),(u=a.get("formatselect"))&&(l=d(t.dom.isBlock),l&&u.select(l.nodeName.toLowerCase())),d(function(e){return"SPAN"===e.nodeName&&!h&&e.className&&(h=e.className),t.dom.is(e,k.theme_advanced_font_selector)&&(!m&&e.style.fontSize&&(m=e.style.fontSize),!f&&e.style.fontFamily&&(f=e.style.fontFamily.replace(/[\"\']+/g,"").replace(/^([^,]+).*/,"$1").toLowerCase()),!g&&e.style.color&&(g=e.style.color),!v&&e.style.backgroundColor&&(v=e.style.backgroundColor)),!1}),(u=a.get("fontselect"))&&u.select(function(e){return e.replace(/^([^,]+).*/,"$1").toLowerCase()==f}),(u=a.get("fontsizeselect"))&&(!k.theme_advanced_runtime_fontsize||m||h||(m=t.dom.getStyle(n,"fontSize",!0)),u.select(function(e){return e.fontSize&&e.fontSize===m?!0:e["class"]&&e["class"]===h?!0:void 0})),k.theme_advanced_show_current_color&&(c("forecolor",g),c("backcolor",v)),k.theme_advanced_show_current_color&&(c("forecolor",g),c("backcolor",v)),k.theme_advanced_path&&k.theme_advanced_statusbar_location&&(l=o.get(t.id+"_path")||o.add(t.id+"_path_row","span",{id:t.id+"_path"}),y.statusKeyboardNavigation&&(y.statusKeyboardNavigation.destroy(),y.statusKeyboardNavigation=null),o.setHTML(l,""),d(function(a){var n,r=a.nodeName.toLowerCase(),s="";if(!(1!=a.nodeType||"br"===r||a.getAttribute("data-mce-bogus")||o.hasClass(a,"mceItemHidden")||o.hasClass(a,"mceItemRemoved"))){switch(e.isIE&&"HTML"!==a.scopeName&&a.scopeName&&(r=a.scopeName+":"+r),r=r.replace(/mce\:/g,"")){case"b":r="strong";break;case"i":r="em";break;case"img":(_=o.getAttrib(a,"src"))&&(s+="src: "+_+" ");break;case"a":(_=o.getAttrib(a,"name"))&&(s+="name: "+_+" ",r+="#"+_),(_=o.getAttrib(a,"href"))&&(s+="href: "+_+" ");break;case"font":(_=o.getAttrib(a,"face"))&&(s+="font: "+_+" "),(_=o.getAttrib(a,"size"))&&(s+="size: "+_+" "),(_=o.getAttrib(a,"color"))&&(s+="color: "+_+" ");break;case"span":(_=o.getAttrib(a,"style"))&&(s+="style: "+_+" ")}(_=o.getAttrib(a,"id"))&&(s+="id: "+_+" "),(_=a.className)&&(_=_.replace(/\b\s*(webkit|mce|Apple-)\w+\s*\b/g,""),_&&(s+="class: "+_+" ",(t.dom.isBlock(a)||"img"==r||"span"==r)&&(r+="."+_))),r=r.replace(/(html:)/g,""),r={name:r,node:a,title:s},y.onResolveName.dispatch(y,r),s=r.title,r=r.name,n=o.create("a",{href:"javascript:;",role:"button",onmousedown:"return false;",title:s,"class":"mcePath_"+C++},r),l.hasChildNodes()?(l.insertBefore(o.create("span",{"aria-hidden":"true"}," » "),l.firstChild),l.insertBefore(n,l.firstChild)):l.appendChild(n)}},t.getBody()),o.select("a",l).length>0&&(y.statusKeyboardNavigation=new e.ui.KeyboardNavigation({root:t.id+"_path_row",items:o.select("a",l),excludeFromTabOrder:!0,onCancel:function(){t.focus()}},o)))},_sel:function(e){this.editor.execCommand("mceSelectNodeDepth",!1,e)},_mceInsertAnchor:function(){var e=this.editor;e.windowManager.open({url:this.url+"/anchor.htm",width:320+parseInt(e.getLang("advanced.anchor_delta_width",0)),height:90+parseInt(e.getLang("advanced.anchor_delta_height",0)),inline:!0},{theme_url:this.url})},_mceCharMap:function(){var e=this.editor;e.windowManager.open({url:this.url+"/charmap.htm",width:550+parseInt(e.getLang("advanced.charmap_delta_width",0)),height:265+parseInt(e.getLang("advanced.charmap_delta_height",0)),inline:!0},{theme_url:this.url})},_mceHelp:function(){var e=this.editor;e.windowManager.open({url:this.url+"/about.htm",width:480,height:380,inline:!0},{theme_url:this.url})},_mceShortcuts:function(){var e=this.editor;e.windowManager.open({url:this.url+"/shortcuts.htm",width:480,height:380,inline:!0},{theme_url:this.url})},_mceColorPicker:function(e,t){var a=this.editor;t=t||{},a.windowManager.open({url:this.url+"/color_picker.htm",width:375+parseInt(a.getLang("advanced.colorpicker_delta_width",0)),height:250+parseInt(a.getLang("advanced.colorpicker_delta_height",0)),close_previous:!1,inline:!0},{input_color:t.color,func:t.func,theme_url:this.url})},_mceCodeEditor:function(){var e=this.editor;e.windowManager.open({url:this.url+"/source_editor.htm",width:parseInt(e.getParam("theme_advanced_source_editor_width",720)),height:parseInt(e.getParam("theme_advanced_source_editor_height",580)),inline:!0,resizable:!0,maximizable:!0},{theme_url:this.url})},_mceImage:function(){var e=this.editor;-1==e.dom.getAttrib(e.selection.getNode(),"class","").indexOf("mceItem")&&e.windowManager.open({url:this.url+"/image.htm",width:355+parseInt(e.getLang("advanced.image_delta_width",0)),height:275+parseInt(e.getLang("advanced.image_delta_height",0)),inline:!0},{theme_url:this.url})},_mceLink:function(){var e=this.editor;e.windowManager.open({url:this.url+"/link.htm",width:310+parseInt(e.getLang("advanced.link_delta_width",0)),height:200+parseInt(e.getLang("advanced.link_delta_height",0)),inline:!0},{theme_url:this.url})},_mceNewDocument:function(){var e=this.editor;e.windowManager.confirm("advanced.newdocument",function(t){t&&e.execCommand("mceSetContent",!1,"")})},_mceForeColor:function(){var e=this;this._mceColorPicker(0,{color:e.fgColor,func:function(t){e.fgColor=t,e.editor.execCommand("ForeColor",!1,t)}})},_mceBackColor:function(){var e=this;this._mceColorPicker(0,{color:e.bgColor,func:function(t){e.bgColor=t,e.editor.execCommand("HiliteColor",!1,t)}})},_ufirst:function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}}),e.ThemeManager.add("advanced",e.themes.AdvancedTheme)}(tinymce);
tinyMCE.addI18n("en.advanced",{underline_desc:"Underline (Ctrl+U)",italic_desc:"Italic (Ctrl+I)",bold_desc:"Bold (Ctrl+B)",dd:"Definition Description",dt:"Definition Term ",samp:"Code Sample",code:"Code",blockquote:"Block Quote",h6:"Heading 6",h5:"Heading 5",h4:"Heading 4",h3:"Heading 3",h2:"Heading 2",h1:"Heading 1",pre:"Preformatted",address:"Address",div:"DIV",paragraph:"Paragraph",block:"Format",fontdefault:"Font Family",font_size:"Font Size",style_select:"Styles",anchor_delta_height:"",anchor_delta_width:"",charmap_delta_height:"",charmap_delta_width:"",colorpicker_delta_height:"",colorpicker_delta_width:"",link_delta_height:"",link_delta_width:"",image_delta_height:"",image_delta_width:"",more_colors:"More Colors...",toolbar_focus:"Jump to tool buttons - Alt+Q, Jump to editor - Alt-Z, Jump to element path - Alt-X",newdocument:"Are you sure you want clear all contents?",path:"Path",clipboard_msg:"Copy/Cut/Paste is not available in Mozilla and Firefox.\nDo you want more information about this issue?",blockquote_desc:"Block Quote",help_desc:"Help",newdocument_desc:"New Document",image_props_desc:"Image Properties",paste_desc:"Paste (Ctrl+V)",copy_desc:"Copy (Ctrl+C)",cut_desc:"Cut (Ctrl+X)",anchor_desc:"Insert/Edit Anchor",visualaid_desc:"show/Hide Guidelines/Invisible Elements",charmap_desc:"Insert Special Character",backcolor_desc:"Select Background Color",forecolor_desc:"Select Text Color",custom1_desc:"Your Custom Description Here",removeformat_desc:"Remove Formatting",hr_desc:"Insert Horizontal Line",sup_desc:"Superscript",sub_desc:"Subscript",code_desc:"Edit HTML Source",cleanup_desc:"Cleanup Messy Code",image_desc:"Insert/Edit Image",unlink_desc:"Unlink",link_desc:"Insert/Edit Link",redo_desc:"Redo (Ctrl+Y)",undo_desc:"Undo (Ctrl+Z)",indent_desc:"Increase Indent",outdent_desc:"Decrease Indent",numlist_desc:"Insert/Remove Numbered List",bullist_desc:"Insert/Remove Bulleted List",justifyfull_desc:"Align Full",justifyright_desc:"Align Right",justifycenter_desc:"Align Center",justifyleft_desc:"Align Left",striketrough_desc:"Strikethrough",help_shortcut:"Press ALT-F10 for toolbar. Press ALT-0 for help",rich_text_area:"Rich Text Area",shortcuts_desc:"Accessability Help",toolbar:"Toolbar"});
!function(){{var n=tinymce.DOM;tinymce.dom.Event,tinymce.each}tinymce.create("tinymce.plugins.CurryPopups",{init:function(n){n.onBeforeRenderUI.add(function(){n.windowManager=new tinymce.InlineWindowManager(n)})},getInfo:function(){return{longname:"CurryCMS Inline Popups",author:"Jesper Ek",authorurl:"http://currycms.com",infourl:"http://currycms.com",version:"0.1b"}}}),tinymce.create("tinymce.InlineWindowManager:tinymce.WindowManager",{InlineWindowManager:function(n){this.parent(n),this.windows={}},open:function(t,e){if(t=t||{},e=e||{},!t.inline)return i.parent(t,e);var i=this,o=n.uniqueId(),r={title:t.title||"",width:"auto",height:"auto"},c=$("<div />").attr("id","dialog-"+o),u={id:o,features:t,element:c};if(t.type||(this.bookmark=this.editor.selection.getBookmark(1)),t.content)"confirm"==t.type?r.buttons=[{text:"Ok",click:function(){t.button_func(!0)}},{text:"Cancel",click:function(){t.button_func(!1)}}]:"alert"==t.type&&(r.buttons=[{text:"Ok",click:function(){t.button_func(!0)}}]),c.html($("<div />",{"class":"dialog-tinymce-content",html:t.content}));else var a=$("<iframe />",{id:o+"_ifr",frameborder:0}).css({width:t.width,height:t.height+5}).attr("scrollbars","no").appendTo(c);return e.mce_inline=!0,e.mce_window_id=o,e.mce_auto_focus=t.auto_focus,this.features=t,this.params=e,this.onOpen.dispatch(this,t,e),u.dialog=$.util.openDialog(null,"",c,r),t.content||a.attr("src",t.url||t.file),i.windows[o]=u,u},resizeBy:function(){},focus:function(){},close:function(n,t){var e,i=this,t=t||n.frameElement.id.replace(/_ifr$/,"");return i.windows[t]?void((e=i.windows[t])&&(e.dialog.trigger("dialogclose"),delete i.windows[t])):void i.parent(n)},setTitle:function(){},alert:function(n,t,e){this._messagePopup("alert","Alert",n,t,e)},confirm:function(n,t,e){this._messagePopup("confirm","Confirm",n,t,e)},_messagePopup:function(t,e,i,o){var r,c=this;r=c.open({title:e,type:t,button_func:function(n){o&&o.call(n||c,n),c.close(null,r.id)},content:n.encode(c.editor.getLang(i,i)),inline:1,width:400,height:130})}}),tinymce.PluginManager.add("currypopups",tinymce.plugins.CurryPopups)}();
!function(t){function n(){function n(t){"remove"===t&&this.each(function(t,n){var e=r(n);e&&e.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(t,n){var e=tinyMCE.get(n.id.replace(/_parent$/,""));e&&e.remove()})}function i(t){var i,r=this;if(t!==e)n.call(r),r.each(function(n,e){var i;(i=tinyMCE.get(e.id))&&i.setContent(t)});else if(r.length>0&&(i=tinyMCE.get(r[0].id)))return i.getContent()}function r(t){var n=null;return t&&t.id&&a.tinymce&&(n=tinyMCE.get(t.id)),n}function c(t){return!!(t&&t.length&&a.tinymce&&t.is(":tinymce"))}var s={};t.each(["text","html","val"],function(n,a){var u=s[a]=t.fn[a],l="text"===a;t.fn[a]=function(n){var a=this;if(!c(a))return u.apply(a,arguments);if(n!==e)return i.call(a.filter(":tinymce"),n),u.apply(a.not(":tinymce"),arguments),a;var s="",o=arguments;return(l?a:a.eq(0)).each(function(n,e){var i=r(e);s+=i?l?i.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):i.getContent({save:!0}):u.apply(t(e),o)}),s}}),t.each(["append","prepend"],function(n,i){var a=s[i]=t.fn[i],u="prepend"===i;t.fn[i]=function(t){var n=this;return c(n)?t!==e?(n.filter(":tinymce").each(function(n,e){var i=r(e);i&&i.setContent(u?t+i.getContent():i.getContent()+t)}),a.apply(n.not(":tinymce"),arguments),n):void 0:a.apply(n,arguments)}}),t.each(["remove","replaceWith","replaceAll","empty"],function(e,i){var r=s[i]=t.fn[i];t.fn[i]=function(){return n.call(this,i),r.apply(this,arguments)}}),s.attr=t.fn.attr,t.fn.attr=function(n,a){var u=this,l=arguments;if(!n||"value"!==n||!c(u))return a!==e?s.attr.apply(u,l):s.attr.apply(u,l);if(a!==e)return i.call(u.filter(":tinymce"),a),s.attr.apply(u.not(":tinymce"),l),u;var o=u[0],f=r(o);return f?f.getContent({save:!0}):s.attr.apply(t(o),l)}}var e,i,r=[],a=window;t.fn.tinymce=function(e){function c(){var i=[],r=0;n&&(n(),n=null),f.each(function(t,n){var a,c=n.id,s=e.oninit;c||(n.id=c=tinymce.DOM.uniqueId()),a=new tinymce.Editor(c,e),i.push(a),a.onInit.add(function(){var t,n=s;f.css("visibility",""),s&&++r==i.length&&(tinymce.is(n,"string")&&(t=-1===n.indexOf(".")?null:tinymce.resolve(n.replace(/\.\w+$/,"")),n=tinymce.resolve(n)),n.apply(t||tinymce,i))})}),t.each(i,function(t,n){n.render()})}var s,u,l,o,f=this,p="",y="";return f.length?e?(f.css("visibility","hidden"),a.tinymce||i||!(s=e.script_url)?1===i?r.push(c):c():(i=1,u=s.substring(0,s.lastIndexOf("/")),/_(src|dev)\.js/g.test(s)&&(y="_src"),l=s.lastIndexOf("?"),-1!=l&&(p=s.substring(l+1)),a.tinyMCEPreInit=a.tinyMCEPreInit||{base:u,suffix:y,query:p},-1!=s.indexOf("gzip")&&(o=e.language||"en",s=s+(/\?/.test(s)?"&":"?")+"js=true&core=true&suffix="+escape(y)+"&themes="+escape(e.theme)+"&plugins="+escape(e.plugins)+"&languages="+o,a.tinyMCE_GZ||(tinyMCE_GZ={start:function(){function n(t){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(t))}tinymce.suffix=y,n("langs/"+o+".js"),n("themes/"+e.theme+"/editor_template"+y+".js"),n("themes/"+e.theme+"/langs/"+o+".js"),t.each(e.plugins.split(","),function(t,e){e&&(n("plugins/"+e+"/editor_plugin"+y+".js"),n("plugins/"+e+"/langs/"+o+".js"))})},end:function(){}})),t.ajax({type:"GET",url:s,dataType:"script",cache:!0,success:function(){tinymce.dom.Event.domLoaded=1,i=2,e.script_loaded&&e.script_loaded(),c(),t.each(r,function(t,n){n()})}})),f):tinyMCE.get(f[0].id):f},t.extend(t.expr[":"],{tinymce:function(t){return!!(t.id&&"tinyMCE"in window&&tinyMCE.get(t.id))}})}(jQuery);
!function(e){e.bw||(e.bw={}),e.bw.url=function(t){var r=this;return r.scheme="",r.user="",r.pass="",r.host="",r.port="",r.path="",r.fragment="",r.env={},r.fromUrl=function(e){var t=/^((\w+):\/\/)?(([^@:]+)(:([^@]*))?@)?(([^\/:]+)(:(\d+))?)?((\/[^\?#]*)?(\?([^#]+))?(#(.+))?)?/,n=e.match(t);null!=n&&(r.scheme=n[2],r.user=n[4],r.pass=n[6],r.host=n[8],r.port=n[10],r.path=n[12],r.env=r._parseQueryString(n[14]),r.fragment=n[16])},r.doPost=function(t){var n=e('<form action="'+r.getUrl()+'" method="post" style="display: none">'+r._createHiddenInput(t)+"</form>");n.appendTo("body"),n.submit()},r.isAbsolute=function(){return r.scheme||r.user||r.pass||r.host||r.port},r.getBase=function(t){if(r.isAbsolute()||t){var n=new e.bw.url,o=(r.scheme?r.scheme:n.scheme)+"://";return(r.user||r.pass)&&(o+=r.user+":"+r.pass+"@"),o+=r.host?r.host:n.host,r.port&&(o+=":"+r.port),o}return""},r.getUrl=function(){var t=r.getBase();if(""===r.path){var n=new e.bw.url;t+=n.path}else null===r.path||(t+=r.path);if(r.env){var o=e.param(r.env);o.length&&(t+="?"+o)}return r.fragment&&(t+="#"+r.fragment),t},r._createHiddenInput=function(e,t){t||(t="");var n="";for(var o in e){var s=t.length?t+"["+o+"]":o,a="";a="object"==typeof e[o]?r._createHiddenInput(e[o],s):'<input type="hidden" name="'+s+'" value="'+e[o]+'" />',a&&(n&&(n+="&"),n+=a)}return n},r.toString=function(){return r.getUrl()},r._parseQueryString=function(e){var t={};if(!e)return t;for(var r=e.split("&"),n=0;n<r.length;n++){var o=r[n].split("=");if(2==o.length){var s=decodeURIComponent(o[0]),a=decodeURIComponent(o[1]);s=s.replace("+"," "),a=a.replace("+"," "),"[]"==s.substring(s.length-2)?(s=s.substring(0,s.length-2),"undefined"==typeof t[s]?t[s]=[a]:t[s].push(a)):t[s]=a}}return t},r.fromUrl("undefined"==typeof t?window.location.href:t),r}}(jQuery);
jQuery.cookie=function(e,i,n){if("undefined"==typeof i){var o=null;if(document.cookie&&""!=document.cookie)for(var r=document.cookie.split(";"),t=0;t<r.length;t++){var p=jQuery.trim(r[t]);if(p.substring(0,e.length+1)==e+"="){o=decodeURIComponent(p.substring(e.length+1));break}}return o}n=n||{},null===i&&(i="",n=$.extend({},n),n.expires=-1);var u="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var s;"number"==typeof n.expires?(s=new Date,s.setTime(s.getTime()+24*n.expires*60*60*1e3)):s=n.expires,u="; expires="+s.toUTCString()}var a=n.path?"; path="+n.path:"",c=n.domain?"; domain="+n.domain:"",m=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(i),u,a,c,m].join("")};
function _log(e){if(_canLog){var t=Array.prototype.slice.apply(arguments,[1]),i=new Date,s=i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"."+i.getMilliseconds();t[0]=s+" - "+t[0];try{switch(e){case"info":window.console.info.apply(window.console,t);break;case"warn":window.console.warn.apply(window.console,t);break;default:window.console.log.apply(window.console,t)}}catch(n){window.console||(_canLog=!1)}}}function logMsg(){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)}var _canLog=!0,getDynaTreePersistData=null,DTNodeStatus_Error=-1,DTNodeStatus_Loading=1,DTNodeStatus_Ok=0;!function($){function getDtNodeFromElement(e){return alert("getDtNodeFromElement is deprecated"),$.ui.dynatree.getNode(e)}function noop(){}function _initDragAndDrop(e){var t=e.options.dnd||null;t&&(t.onDragStart||t.onDrop)&&_registerDnd(),t&&t.onDragStart&&e.$tree.draggable({addClasses:!1,appendTo:"body",containment:!1,delay:0,distance:4,revert:!1,scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToDynatree:!0,helper:function(e){var t=$.ui.dynatree.getNode(e.target);return t?t.tree._onDragEvent("helper",t,null,e,null,null):"<div></div>"},start:function(e,t){var i=t.helper.data("dtSourceNode");return!!i},_last:null}),t&&t.onDrop&&e.$tree.droppable({addClasses:!1,tolerance:"intersect",greedy:!1,_last:null})}var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}},DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(e,t,i){this.parent=e,this.tree=t,"string"==typeof i&&(i={title:i}),void 0===i.key&&(i.key="_"+t._nodeCount++),this.data=$.extend({},$.ui.dynatree.nodedatadefaults,i),this.li=null,this.span=null,this.ul=null,this.childList=null,this._isLoading=!1,this.hasSubSel=!1,this.bExpanded=!1,this.bSelected=!1},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(e,t){var i=$.extend({},this.data);if(i.activate=this.tree.activeNode===this,i.focus=this.tree.focusNode===this,i.expand=this.bExpanded,i.select=this.bSelected,t&&t(i),e&&this.childList){i.children=[];for(var s=0,n=this.childList.length;n>s;s++)i.children.push(this.childList[s].toDict(!0,t))}else delete i.children;return i},fromDict:function(e){var t=e.children;return void 0===t?(this.data=$.extend(this.data,e),void this.render()):(e=$.extend({},e),e.children=void 0,this.data=$.extend(this.data,e),this.removeChildren(),void this.addChild(t))},_getInnerHtml:function(){var e,t=this.tree,i=t.options,s=t.cache,n=this.getLevel(),a=this.data,r="";n<i.minExpandLevel?n>1&&(r+=s.tagConnector):r+=this.hasChildren()!==!1?s.tagExpander:s.tagConnector,i.checkbox&&a.hideCheckbox!==!0&&!a.isStatusNode&&(r+=s.tagCheckbox),a.icon?(e="/"===a.icon.charAt(0)?a.icon:i.imagePath+a.icon,r+="<img src='"+e+"' alt='' />"):a.icon===!1||(r+=a.iconClass?"<span class='"+a.iconClass+"'></span>":s.tagNodeIcon);var o="";if(i.onCustomRender&&(o=i.onCustomRender.call(t,this)||""),!o){var d=a.tooltip?' title="'+a.tooltip.replace(/\"/g,"&quot;")+'"':"",l=a.href||"#";o=i.noLink||a.noLink?'<span style="display:inline-block;" class="'+i.classNames.title+'"'+d+">"+a.title+"</span>":'<a href="'+l+'" class="'+i.classNames.title+'"'+d+">"+a.title+"</a>"}return r+=o},_fixOrder:function(){var e=this.childList;if(e&&this.ul)for(var t=this.ul.firstChild,i=0,s=e.length-1;s>i;i++){var n=e[i],a=t.dtnode;n!==a?(this.tree.logDebug("_fixOrder: mismatch at index "+i+": "+n+" != "+a),this.ul.insertBefore(n.li,a.li)):t=t.nextSibling}},render:function(e,t){var i=this.tree,s=this.parent,n=this.data,a=i.options,r=a.classNames,o=this.isLastSibling(),d=!1;if(s||this.ul){if(s){this.li||(d=!0,this.li=document.createElement("li"),this.li.dtnode=this,n.key&&a.generateIds&&(this.li.id=a.idPrefix+n.key),this.span=document.createElement("span"),this.span.className=r.title,this.li.appendChild(this.span),s.ul||(s.ul=document.createElement("ul"),s.ul.style.display="none",s.li.appendChild(s.ul)),s.ul.appendChild(this.li)),this.span.innerHTML=this._getInnerHtml();var l=[];l.push(r.node),n.isFolder&&l.push(r.folder),this.bExpanded&&l.push(r.expanded),this.hasChildren()!==!1&&l.push(r.hasChildren),n.isLazy&&null===this.childList&&l.push(r.lazy),o&&l.push(r.lastsib),this.bSelected&&l.push(r.selected),this.hasSubSel&&l.push(r.partsel),i.activeNode===this&&l.push(r.active),n.addClass&&l.push(n.addClass),l.push(r.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(n.isLazy&&null===this.childList?"d":"")+(o?"l":"")),l.push(r.combinedIconPrefix+(this.bExpanded?"e":"c")+(n.isFolder?"f":"")),this.span.className=l.join(" "),this.li.className=o?r.lastsib:"",d&&a.onCreate&&a.onCreate.call(i,this,this.span),a.onRender&&a.onRender.call(i,this,this.span)}}else this.li=this.span=null,this.ul=document.createElement("ul"),this.ul.className=a.minExpandLevel>1?r.container+" "+r.noConnector:r.container;if((this.bExpanded||t===!0)&&this.childList){for(var h=0,c=this.childList.length;c>h;h++)this.childList[h].render(!1,t);this._fixOrder()}if(this.ul){var u="none"===this.ul.style.display,p=!!this.bExpanded;if(e&&a.fx&&u===p){var f=a.fx.duration||200;$(this.ul).animate(a.fx,f)}else this.ul.style.display=this.bExpanded||!s?"":"none"}},getKeyPath:function(e){var t=[];return this.visitParents(function(e){e.parent&&t.unshift(e.data.key)},!e),"/"+t.join(this.tree.options.keyPathSeparator)},getParent:function(){return this.parent},getChildren:function(){return void 0===this.hasChildren()?void 0:this.childList},hasChildren:function(){return this.data.isLazy?null===this.childList||void 0===this.childList?void 0:0===this.childList.length?!1:1===this.childList.length&&this.childList[0].isStatusNode()?void 0:!0:!!this.childList},isFirstSibling:function(){var e=this.parent;return!e||e.childList[0]===this},isLastSibling:function(){var e=this.parent;return!e||e.childList[e.childList.length-1]===this},isLoading:function(){return!!this._isLoading},getPrevSibling:function(){if(!this.parent)return null;for(var e=this.parent.childList,t=1,i=e.length;i>t;t++)if(e[t]===this)return e[t-1];return null},getNextSibling:function(){if(!this.parent)return null;for(var e=this.parent.childList,t=0,i=e.length-1;i>t;t++)if(e[t]===this)return e[t+1];return null},isStatusNode:function(){return this.data.isStatusNode===!0},isChildOf:function(e){return this.parent&&this.parent===e},isDescendantOf:function(e){if(!e)return!1;for(var t=this.parent;t;){if(t===e)return!0;t=t.parent}return!1},countChildren:function(){var e=this.childList;if(!e)return 0;for(var t=e.length,i=0,s=t;s>i;i++){var n=e[i];t+=n.countChildren()}return t},sortChildren:function(e,t){var i=this.childList;if(i){if(e=e||function(e,t){var i=e.data.title.toLowerCase(),s=t.data.title.toLowerCase();return i===s?0:i>s?1:-1},i.sort(e),t)for(var s=0,n=i.length;n>s;s++)i[s].childList&&i[s].sortChildren(e,"$norender$");"$norender$"!==t&&this.render()}},_setStatusNode:function(e){var t=this.childList?this.childList[0]:null;if(e)t?(e.isStatusNode=!0,e.key="_statusNode",t.data=e,t.render()):(e.isStatusNode=!0,e.key="_statusNode",t=this.addChild(e));else if(t&&t.isStatusNode()){try{this.ul&&(this.ul.removeChild(t.li),t.li=null)}catch(i){}1===this.childList.length?this.childList=[]:this.childList.shift()}},setLazyNodeStatus:function(e,t){var i=t&&t.tooltip?t.tooltip:null,s=t&&t.info?" ("+t.info+")":"";switch(e){case DTNodeStatus_Ok:this._setStatusNode(null),$(this.span).removeClass(this.tree.options.classNames.nodeLoading),this._isLoading=!1,this.tree.options.autoFocus&&(this===this.tree.tnRoot&&this.childList&&this.childList.length>0?this.childList[0].focus():this.focus());break;case DTNodeStatus_Loading:this._isLoading=!0,$(this.span).addClass(this.tree.options.classNames.nodeLoading),this.parent||this._setStatusNode({title:this.tree.options.strings.loading+s,tooltip:i,addClass:this.tree.options.classNames.nodeWait});break;case DTNodeStatus_Error:this._isLoading=!1,this._setStatusNode({title:this.tree.options.strings.loadError+s,tooltip:i,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+e+"'."}},_parentList:function(e,t){for(var i=[],s=t?this:this.parent;s;)(e||s.parent)&&i.unshift(s),s=s.parent;return i},getLevel:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},_getTypeForOuterNodeEvent:function(e){var t=this.tree.options.classNames,i=e.target;if(i.className.indexOf(t.node)<0)return null;for(var s=e.pageX-i.offsetLeft,n=e.pageY-i.offsetTop,a=0,r=i.childNodes.length;r>a;a++){var o=i.childNodes[a],d=o.offsetLeft-i.offsetLeft,l=o.offsetTop-i.offsetTop,h=o.clientWidth,c=o.clientHeight;if(s>=d&&d+h>=s&&n>=l&&l+c>=n){if(o.className==t.title)return"title";if(o.className==t.expander)return"expander";if(o.className==t.checkbox)return"checkbox";if(o.className==t.nodeIcon)return"icon"}}return"prefix"},getEventTargetType:function(e){var t=e&&e.target?e.target.className:"",i=this.tree.options.classNames;return t===i.title?"title":t===i.expander?"expander":t===i.checkbox?"checkbox":t===i.nodeIcon?"icon":t===i.empty||t===i.vline||t===i.connector?"prefix":t.indexOf(i.node)>=0?this._getTypeForOuterNodeEvent(e):null},isVisible:function(){for(var e=this._parentList(!0,!1),t=0,i=e.length;i>t;t++)if(!e[t].bExpanded)return!1;return!0},makeVisible:function(){for(var e=this._parentList(!0,!1),t=0,i=e.length;i>t;t++)e[t]._expand(!0)},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(e){}},isFocused:function(){return this.tree.tnFocused===this},_activate:function(e,t){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",e,t,this);var i=this.tree.options;if(!(this.data.isStatusNode||t&&i.onQueryActivate&&i.onQueryActivate.call(this.tree,e,this)===!1))if(e){if(this.tree.activeNode){if(this.tree.activeNode===this)return;this.tree.activeNode.deactivate()}i.activeVisible&&this.makeVisible(),this.tree.activeNode=this,i.persist&&$.cookie(i.cookieId+"-active",this.data.key,i.cookie),this.tree.persistence.activeKey=this.data.key,$(this.span).addClass(i.classNames.active),t&&i.onActivate&&i.onActivate.call(this.tree,this)}else if(this.tree.activeNode===this){if(i.onQueryActivate&&i.onQueryActivate.call(this.tree,!1,this)===!1)return;$(this.span).removeClass(i.classNames.active),i.persist&&$.cookie(i.cookieId+"-active","",i.cookie),this.tree.persistence.activeKey=null,this.tree.activeNode=null,t&&i.onDeactivate&&i.onDeactivate.call(this.tree,this)}},activate:function(){this._activate(!0,!0)},activateSilently:function(){this._activate(!0,!1)},deactivate:function(){this._activate(!1,!0)},isActive:function(){return this.tree.activeNode===this},_userActivate:function(){var e=!0,t=!1;if(this.data.isFolder)switch(this.tree.options.clickFolderMode){case 2:e=!1,t=!0;break;case 3:e=t=!0}null===this.parent&&(t=!1),t&&(this.toggleExpand(),this.focus()),e&&this.activate()},_setSubSel:function(e){e?(this.hasSubSel=!0,$(this.span).addClass(this.tree.options.classNames.partsel)):(this.hasSubSel=!1,$(this.span).removeClass(this.tree.options.classNames.partsel))},_updatePartSelectionState:function(){var e;if(!this.hasChildren())return e=this.bSelected&&!this.data.unselectable&&!this.data.isStatusNode,this._setSubSel(!1),e;var t,i,s=this.childList,n=!0,a=!0;for(t=0,i=s.length;i>t;t++){var r=s[t],o=r._updatePartSelectionState();o!==!1&&(a=!1),o!==!0&&(n=!1)}return e=n?!0:a?!1:void 0,this._setSubSel(void 0===e),this.bSelected=e===!0,e},_fixSelectionState:function(){var e,t,i;if(this.bSelected)for(this.visit(function(e){e.parent._setSubSel(!0),e.data.unselectable||e._select(!0,!1,!1)}),e=this.parent;e;){e._setSubSel(!0);var s=!0;for(t=0,i=e.childList.length;i>t;t++){var n=e.childList[t];if(!n.bSelected&&!n.data.isStatusNode&&!n.data.unselectable){s=!1;break}}s&&e._select(!0,!1,!1),e=e.parent}else for(this._setSubSel(!1),this.visit(function(e){e._setSubSel(!1),e._select(!1,!1,!1)}),e=this.parent;e;){e._select(!1,!1,!1);var a=!1;for(t=0,i=e.childList.length;i>t;t++)if(e.childList[t].bSelected||e.childList[t].hasSubSel){a=!0;break}e._setSubSel(a),e=e.parent}},_select:function(e,t,i){var s=this.tree.options;this.data.isStatusNode||this.bSelected!==e&&(t&&s.onQuerySelect&&s.onQuerySelect.call(this.tree,e,this)===!1||(1==s.selectMode&&e&&this.tree.visit(function(e){return e.bSelected?(e._select(!1,!1,!1),!1):void 0}),this.bSelected=e,e?(s.persist&&this.tree.persistence.addSelect(this.data.key),$(this.span).addClass(s.classNames.selected),i&&3===s.selectMode&&this._fixSelectionState(),t&&s.onSelect&&s.onSelect.call(this.tree,!0,this)):(s.persist&&this.tree.persistence.clearSelect(this.data.key),$(this.span).removeClass(s.classNames.selected),i&&3===s.selectMode&&this._fixSelectionState(),t&&s.onSelect&&s.onSelect.call(this.tree,!1,this))))},select:function(e){return this.data.unselectable?this.bSelected:this._select(e!==!1,!0,!0)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},isLazy:function(){return!!this.data.isLazy},_loadContent:function(){try{var e=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this),this.setLazyNodeStatus(DTNodeStatus_Loading),!0===e.onLazyRead.call(this.tree,this)&&(this.setLazyNodeStatus(DTNodeStatus_Ok),this.tree.logDebug("_loadContent: succeeded - %o",this))}catch(t){this.tree.logWarning("_loadContent: failed - %o",t),this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+t})}},_expand:function(e,t){if(this.bExpanded===e)return void this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",e,this);this.tree.logDebug("dtnode._expand(%o) - %o",e,this);var i=this.tree.options;if(!e&&this.getLevel()<i.minExpandLevel)return void this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",e,this);if(!i.onQueryExpand||i.onQueryExpand.call(this.tree,e,this)!==!1){this.bExpanded=e,i.persist&&(e?this.tree.persistence.addExpand(this.data.key):this.tree.persistence.clearExpand(this.data.key));var s=!(this.data.isLazy&&null===this.childList||this._isLoading||t);if(this.render(s),this.bExpanded&&this.parent&&i.autoCollapse)for(var n=this._parentList(!1,!0),a=0,r=n.length;r>a;a++)n[a].collapseSiblings();return i.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()&&this.tree.activeNode.deactivate(),e&&this.data.isLazy&&null===this.childList&&!this._isLoading?void this._loadContent():void(i.onExpand&&i.onExpand.call(this.tree,e,this))}},isExpanded:function(){return this.bExpanded},expand:function(e){e=e!==!1,(this.childList||this.data.isLazy||!e)&&(null!==this.parent||e)&&this._expand(e)},scheduleAction:function(e,t){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.logDebug("clearTimeout(%o)",this.tree.timer));var i=this;switch(e){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){i.tree.logDebug("setTimeout: trigger expand"),i.expand(!0)},t);break;case"activate":this.tree.timer=setTimeout(function(){i.tree.logDebug("setTimeout: trigger activate"),i.activate()},t);break;default:throw"Invalid mode "+e}this.tree.logDebug("setTimeout(%s, %s): %s",e,t,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(null!==this.parent)for(var e=this.parent.childList,t=0,i=e.length;i>t;t++)e[t]!==this&&e[t].bExpanded&&e[t]._expand(!1)},_onClick:function(e){var t=this.getEventTargetType(e);if("expander"===t)this.toggleExpand(),this.focus();else if("checkbox"===t)this.toggleSelect(),this.focus();else{this._userActivate();var i=this.span.getElementsByTagName("a");if(!i[0])return!0;$.browser.msie&&parseInt($.browser.version,10)<9||i[0].focus()}e.preventDefault()},_onDblClick:function(){},_onKeydown:function(e){var t,i=!0;switch(e.which){case 107:case 187:this.bExpanded||this.toggleExpand();break;case 109:case 189:this.bExpanded&&this.toggleExpand();break;case 32:this._userActivate();break;case 8:this.parent&&this.parent.focus();break;case 37:this.bExpanded?(this.toggleExpand(),this.focus()):this.parent&&this.parent.parent&&this.parent.focus();break;case 39:this.bExpanded||!this.childList&&!this.data.isLazy?this.childList&&this.childList[0].focus():(this.toggleExpand(),this.focus());break;case 38:for(t=this.getPrevSibling();t&&t.bExpanded&&t.childList;)t=t.childList[t.childList.length-1];!t&&this.parent&&this.parent.parent&&(t=this.parent),t&&t.focus();break;case 40:if(this.bExpanded&&this.childList)t=this.childList[0];else for(var s=this._parentList(!1,!0),n=s.length-1;n>=0&&!(t=s[n].getNextSibling());n--);t&&t.focus();break;default:i=!1}i&&e.preventDefault()},_onKeypress:function(){},_onFocus:function(e){var t=this.tree.options;"blur"==e.type||"focusout"==e.type?(t.onBlur&&t.onBlur.call(this.tree,this),this.tree.tnFocused&&$(this.tree.tnFocused.span).removeClass(t.classNames.focused),this.tree.tnFocused=null,t.persist&&$.cookie(t.cookieId+"-focus","",t.cookie)):("focus"==e.type||"focusin"==e.type)&&(this.tree.tnFocused&&this.tree.tnFocused!==this&&(this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused),$(this.tree.tnFocused.span).removeClass(t.classNames.focused)),this.tree.tnFocused=this,t.onFocus&&t.onFocus.call(this.tree,this),$(this.tree.tnFocused.span).addClass(t.classNames.focused),t.persist&&$.cookie(t.cookieId+"-focus",this.data.key,t.cookie))},visit:function(e,t){var i=!0;if(t===!0&&(i=e(this),i===!1||"skip"==i))return i;if(this.childList)for(var s=0,n=this.childList.length;n>s&&(i=this.childList[s].visit(e,!0),i!==!1);s++);return i},visitParents:function(e,t){if(t&&e(this)===!1)return!1;for(var i=this.parent;i;){if(e(i)===!1)return!1;i=i.parent}return!0},remove:function(){if(this===this.tree.root)throw"Cannot remove system root";return this.parent.removeChild(this)},removeChild:function(e){var t=this.childList;if(1==t.length){if(e!==t[0])throw"removeChild: invalid child";return this.removeChildren()}e===this.tree.activeNode&&e.deactivate(),this.tree.options.persist&&(e.bSelected&&this.tree.persistence.clearSelect(e.data.key),e.bExpanded&&this.tree.persistence.clearExpand(e.data.key)),e.removeChildren(!0),this.ul.removeChild(e.li);for(var i=0,s=t.length;s>i;i++)if(t[i]===e){this.childList.splice(i,1);break}},removeChildren:function(e,t){this.tree.logDebug("%s.removeChildren(%o)",this,e);var i=this.tree,s=this.childList;if(s){for(var n=0,a=s.length;a>n;n++){var r=s[n];r!==i.activeNode||t||r.deactivate(),this.tree.options.persist&&!t&&(r.bSelected&&this.tree.persistence.clearSelect(r.data.key),r.bExpanded&&this.tree.persistence.clearExpand(r.data.key)),r.removeChildren(!0,t),this.ul&&$("li",$(this.ul)).remove()}this.childList=null}e||(this._isLoading=!1,this.render())},setTitle:function(e){this.fromDict({title:e})},reload:function(){throw"Use reloadChildren() instead"},reloadChildren:function(e){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.reloadChildren() requires lazy nodes.";if(e){var t=this,i="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(i,function(s,n,a){if(t.tree.$tree.unbind(i),t.tree.logDebug("loaded %o, %o, %o",s,n,a),n!==t)throw"got invalid load event";e.call(t.tree,n,a)})}this.removeChildren(),this._loadContent()},_loadKeyPath:function(e,t){var i=this.tree;if(i.logDebug("%s._loadKeyPath(%s)",this,e),""===e)throw"Key path must not be empty";var s=e.split(i.options.keyPathSeparator);if(""===s[0])throw"Key path must be relative (don't start with '/')";var n=s.shift();if(this.childList)for(var a=0,r=this.childList.length;r>a;a++){var o=this.childList[a];if(o.data.key===n){if(0===s.length)t.call(i,o,"ok");else if(!o.data.isLazy||null!==o.childList&&void 0!==o.childList)t.call(i,o,"loaded"),o._loadKeyPath(s.join(i.options.keyPathSeparator),t);else{i.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,e,o);var d=this;o.reloadChildren(function(n,a){a?(i.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",n,e,n),t.call(i,o,"loaded"),n._loadKeyPath(s.join(i.options.keyPathSeparator),t)):(i.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",d,e),t.call(i,o,"error"))})}return}}t.call(i,void 0,"notfound",n,0===s.length),i.logWarning("Node not found: "+n)},resetLazy:function(){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.resetLazy() requires lazy nodes.";this.expand(!1),this.removeChildren()},_addChildNode:function(e,t){var i=this.tree,s=i.options,n=i.persistence;if(e.parent=this,null===this.childList?this.childList=[]:t||this.childList.length>0&&$(this.childList[this.childList.length-1].span).removeClass(s.classNames.lastsib),t){var a=$.inArray(t,this.childList);if(0>a)throw"<beforeNode> must be a child of <this>";this.childList.splice(a,0,e)}else this.childList.push(e);var r=i.isInitializing();if(s.persist&&n.cookiesFound&&r?(n.activeKey===e.data.key&&(i.activeNode=e),n.focusedKey===e.data.key&&(i.focusNode=e),e.bExpanded=$.inArray(e.data.key,n.expandedKeyList)>=0,e.bSelected=$.inArray(e.data.key,n.selectedKeyList)>=0):(e.data.activate&&(i.activeNode=e,s.persist&&(n.activeKey=e.data.key)),e.data.focus&&(i.focusNode=e,s.persist&&(n.focusedKey=e.data.key)),e.bExpanded=e.data.expand===!0,e.bExpanded&&s.persist&&n.addExpand(e.data.key),e.bSelected=e.data.select===!0,e.bSelected&&s.persist&&n.addSelect(e.data.key)),s.minExpandLevel>=e.getLevel()&&(this.bExpanded=!0),e.bSelected&&3==s.selectMode)for(var o=this;o;)o.hasSubSel||o._setSubSel(!0),o=o.parent;return i.bEnableUpdate&&this.render(),e},addChild:function(e,t){if("string"==typeof e)throw"Invalid data type for "+e;if(e&&0!==e.length){if(e instanceof DynaTreeNode)return this._addChildNode(e,t);e.length||(e=[e]);for(var i=this.tree.enableUpdate(!1),s=null,n=0,a=e.length;a>n;n++){var r=e[n],o=this._addChildNode(new DynaTreeNode(this,this.tree,r),t);s||(s=o),r.children&&o.addChild(r.children,null)}return this.tree.enableUpdate(i),s}},append:function(e){return this.tree.logWarning("node.append() is deprecated (use node.addChild() instead)."),this.addChild(e,null)},appendAjax:function(e){var t=this;if(this.removeChildren(!1,!0),this.setLazyNodeStatus(DTNodeStatus_Loading),e.debugLazyDelay){var i=e.debugLazyDelay;return e.debugLazyDelay=0,this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+i),void setTimeout(function(){t.appendAjax(e)},i)}var s=e.success,n=e.error,a="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key,r=$.extend({},this.tree.options.ajaxDefaults,e,{success:function(e,i){var n=t.tree.phase;t.tree.phase="init",r.postProcess?e=r.postProcess.call(this,e,this.dataType):e&&e.hasOwnProperty("d")&&(e="string"==typeof e.d?$.parseJSON(e.d):e.d),$.isArray(e)&&0===e.length||t.addChild(e,null),t.tree.phase="postInit",s&&s.call(r,t,e,i),t.tree.logDebug("trigger "+a),t.tree.$tree.trigger(a,[t,!0]),t.tree.phase=n,t.setLazyNodeStatus(DTNodeStatus_Ok),$.isArray(e)&&0===e.length&&(t.childList=[],t.render())},error:function(e,i,s){t.tree.logWarning("appendAjax failed:",i,":\n",e,"\n",s),n&&n.call(r,t,e,i,s),t.tree.$tree.trigger(a,[t,!1]),t.setLazyNodeStatus(DTNodeStatus_Error,{info:i,tooltip:""+s})}});$.ajax(r)},move:function(e,t){var i;if(this!==e){if(!this.parent)throw"Cannot move system root";(void 0===t||"over"==t)&&(t="child");var s=this.parent,n="child"===t?e:e.parent;if(n.isDescendantOf(this))throw"Cannot move a node to it's own descendant";if(1==this.parent.childList.length)this.parent.childList=this.parent.data.isLazy?[]:null,this.parent.bExpanded=!1;else{if(i=$.inArray(this,this.parent.childList),0>i)throw"Internal error";this.parent.childList.splice(i,1)}if(this.parent.ul&&this.parent.ul.removeChild(this.li),this.parent=n,n.hasChildren())switch(t){case"child":n.childList.push(this);break;case"before":if(i=$.inArray(e,n.childList),0>i)throw"Internal error";n.childList.splice(i,0,this);break;case"after":if(i=$.inArray(e,n.childList),0>i)throw"Internal error";n.childList.splice(i+1,0,this);break;default:throw"Invalid mode "+t}else n.childList=[this];if(n.ul||(n.ul=document.createElement("ul"),n.ul.style.display="none",n.li.appendChild(n.ul)),this.li&&n.ul.appendChild(this.li),this.tree!==e.tree)throw this.visit(function(t){t.tree=e.tree},null,!0),"Not yet implemented.";s.isDescendantOf(n)||s.render(),n.isDescendantOf(s)||n.render()}},lastentry:void 0};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(e,t){var i=new DynaTreeStatus(e,t);return i.read(),i.toDict()},getDynaTreePersistData=DynaTreeStatus._getTreePersistData,DynaTreeStatus.prototype={initialize:function(e,t){void 0===e&&(e=$.ui.dynatree.prototype.options.cookieId),t=$.extend({},$.ui.dynatree.prototype.options.cookie,t),this.cookieId=e,this.cookieOpts=t,this.cookiesFound=void 0,this.activeKey=null,this.focusedKey=null,this.expandedKeyList=null,this.selectedKeyList=null},_log:function(){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)},read:function(){this.cookiesFound=!1;var e=$.cookie(this.cookieId+"-active");this.activeKey=null===e?"":e,null!==e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-focus"),this.focusedKey=null===e?"":e,null!==e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-expand"),this.expandedKeyList=null===e?[]:e.split(","),null!==e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-select"),this.selectedKeyList=null===e?[]:e.split(","),null!==e&&(this.cookiesFound=!0)},write:function(){$.cookie(this.cookieId+"-active",null===this.activeKey?"":this.activeKey,this.cookieOpts),$.cookie(this.cookieId+"-focus",null===this.focusedKey?"":this.focusedKey,this.cookieOpts),$.cookie(this.cookieId+"-expand",null===this.expandedKeyList?"":this.expandedKeyList.join(","),this.cookieOpts),$.cookie(this.cookieId+"-select",null===this.selectedKeyList?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(e){$.inArray(e,this.expandedKeyList)<0&&(this.expandedKeyList.push(e),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},clearExpand:function(e){var t=$.inArray(e,this.expandedKeyList);t>=0&&(this.expandedKeyList.splice(t,1),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},addSelect:function(e){$.inArray(e,this.selectedKeyList)<0&&(this.selectedKeyList.push(e),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},clearSelect:function(e){var t=$.inArray(e,this.selectedKeyList);t>=0&&(this.selectedKeyList.splice(t,1),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},isReloading:function(){return this.cookiesFound===!0},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:void 0};var DynaTree=Class.create();DynaTree.version="$Version: 1.2.2$",DynaTree.prototype={initialize:function(e){this.phase="init",this.$widget=e,this.options=e.options,this.$tree=e.element,this.timer=null,this.divTree=this.$tree.get(0),_initDragAndDrop(this)},_load:function(e){var t=(this.$widget,this.options),i=this;this.bEnableUpdate=!0,this._nodeCount=1,this.activeNode=null,this.focusNode=null,void 0!==t.rootVisible&&this.logWarning("Option 'rootVisible' is no longer supported."),t.minExpandLevel<1&&(this.logWarning("Option 'minExpandLevel' must be >= 1."),t.minExpandLevel=1),t.classNames!==$.ui.dynatree.prototype.options.classNames&&(t.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,t.classNames)),t.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults&&(t.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,t.ajaxDefaults)),t.dnd!==$.ui.dynatree.prototype.options.dnd&&(t.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,t.dnd)),t.imagePath||$("script").each(function(){var e=/.*dynatree[^\/]*\.js$/i;return this.src.search(e)>=0?(t.imagePath=this.src.indexOf("/")>=0?this.src.slice(0,this.src.lastIndexOf("/"))+"/skin/":"skin/",i.logDebug("Guessing imagePath from '%s': '%s'",this.src,t.imagePath),!1):void 0}),this.persistence=new DynaTreeStatus(t.cookieId,t.cookie),t.persist&&($.cookie||_log("warn","Please include jquery.cookie.js to use persistence."),this.persistence.read()),this.logDebug("DynaTree.persistence: %o",this.persistence.toDict()),this.cache={tagEmpty:"<span class='"+t.classNames.empty+"'></span>",tagVline:"<span class='"+t.classNames.vline+"'></span>",tagExpander:"<span class='"+t.classNames.expander+"'></span>",tagConnector:"<span class='"+t.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+t.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+t.classNames.checkbox+"'></span>",lastentry:void 0},(t.children||t.initAjax&&t.initAjax.url||t.initId)&&$(this.divTree).empty();var s=this.$tree.find(">ul:first").hide();this.tnRoot=new DynaTreeNode(null,this,{}),this.tnRoot.bExpanded=!0,this.tnRoot.render(),this.divTree.appendChild(this.tnRoot.ul);var n=this.tnRoot,a=t.persist&&this.persistence.isReloading(),r=!1,o=this.enableUpdate(!1);this.logDebug("Dynatree._load(): read tree structure..."),t.children?n.addChild(t.children):t.initAjax&&t.initAjax.url?(r=!0,n.data.isLazy=!0,this._reloadAjax(e)):t.initId?this._createFromTag(n,$("#"+t.initId)):(this._createFromTag(n,s),s.remove()),this._checkConsistency(),r||3!=t.selectMode||n._updatePartSelectionState(),this.logDebug("Dynatree._load(): render nodes..."),this.enableUpdate(o),this.logDebug("Dynatree._load(): bind events..."),this.$widget.bind(),this.logDebug("Dynatree._load(): postInit..."),this.phase="postInit",t.persist&&this.persistence.write(),this.focusNode&&this.focusNode.isVisible()&&(this.logDebug("Focus on init: %o",this.focusNode),this.focusNode.focus()),r||(t.onPostInit&&t.onPostInit.call(this,a,!1),e&&e.call(this,"ok")),this.phase="idle"},_reloadAjax:function(e){var t=this.options;if(!t.initAjax||!t.initAjax.url)throw"tree.reload() requires 'initAjax' mode.";var i=this.persistence,s=$.extend({},t.initAjax);s.addActiveKey&&(s.data.activeKey=i.activeKey),s.addFocusedKey&&(s.data.focusedKey=i.focusedKey),s.addExpandedKeyList&&(s.data.expandedKeyList=i.expandedKeyList.join(",")),s.addSelectedKeyList&&(s.data.selectedKeyList=i.selectedKeyList.join(",")),s.success&&this.logWarning("initAjax: success callback is ignored; use onPostInit instead."),s.error&&this.logWarning("initAjax: error callback is ignored; use onPostInit instead.");var n=i.isReloading();s.success=function(i){3==t.selectMode&&i.tree.tnRoot._updatePartSelectionState(),t.onPostInit&&t.onPostInit.call(i.tree,n,!1),e&&e.call(i.tree,"ok")},s.error=function(i,s,a,r){t.onPostInit&&t.onPostInit.call(i.tree,n,!0,s,a,r),e&&e.call(i.tree,"error",s,a,r)},this.logDebug("Dynatree._init(): send Ajax request..."),this.tnRoot.appendAjax(s)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(){return this.tnRoot.toDict(!0)},serializeArray:function(e){for(var t=this.getSelectedNodes(e),i=this.$tree.attr("name")||this.$tree.attr("id"),s=[],n=0,a=t.length;a>n;n++)s.push({name:i,value:t[n].data.key});return s},getPersistData:function(){return this.persistence.toDict()},logDebug:function(){this.options.debugLevel>=2&&(Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments))},logInfo:function(){this.options.debugLevel>=1&&(Array.prototype.unshift.apply(arguments,["info"]),_log.apply(this,arguments))},logWarning:function(){Array.prototype.unshift.apply(arguments,["warn"]),_log.apply(this,arguments)},isInitializing:function(){return"init"==this.phase||"postInit"==this.phase},isReloading:function(){return("init"==this.phase||"postInit"==this.phase)&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return"userEvent"==this.phase},redraw:function(){this.tnRoot.render(!1,!1)},renderInvisibleNodes:function(){this.tnRoot.render(!1,!0)},reload:function(e){this._load(e)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(e){var t=document.getElementById(this.options.idPrefix+e);if(t)return t.dtnode?t.dtnode:null;var i=null;return this.visit(function(t){return t.data.key==e?(i=t,!1):void 0},!0),i
},getActiveNode:function(){return this.activeNode},reactivate:function(e){var t=this.activeNode;t&&(this.activeNode=null,t.activate(),e&&t.focus())},getSelectedNodes:function(e){var t=[];return this.tnRoot.visit(function(i){return i.bSelected&&(t.push(i),e===!0)?"skip":void 0}),t},activateKey:function(e){var t=null===e?null:this.getNodeByKey(e);return t?(t.focus(),t.activate(),t):(this.activeNode&&this.activeNode.deactivate(),this.activeNode=null,null)},loadKeyPath:function(e,t){var i=e.split(this.options.keyPathSeparator);return""===i[0]&&i.shift(),i[0]==this.tnRoot.data.key&&(this.logDebug("Removed leading root key."),i.shift()),e=i.join(this.options.keyPathSeparator),this.tnRoot._loadKeyPath(e,t)},selectKey:function(e,t){var i=this.getNodeByKey(e);return i?(i.select(t),i):null},enableUpdate:function(e){return this.bEnableUpdate==e?e:(this.bEnableUpdate=e,e&&this.redraw(),!e)},count:function(){return this.tnRoot.countChildren()},visit:function(e,t){return this.tnRoot.visit(e,t)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each(function(){var $li=$(this),$liSpan=$li.find(">span:first"),$liA=$li.find(">a:first"),title,href=null,target=null,tooltip;if($liSpan.length)title=$liSpan.html();else if($liA.length)title=$liA.html(),href=$liA.attr("href"),target=$liA.attr("target"),tooltip=$liA.attr("title");else{title=$li.html();var iPos=title.search(/<ul/i);title=$.trim(iPos>=0?title.substring(0,iPos):title)}var data={title:title,tooltip:tooltip,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};if(href&&(data.href=href,data.target=target),$li.attr("title")&&(data.tooltip=$li.attr("title")),$li.attr("id")&&(data.key=$li.attr("id")),$li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){"{"!=dataAttr.charAt(0)&&(dataAttr="{"+dataAttr+"}");try{$.extend(data,eval("("+dataAttr+")"))}catch(e){throw"Error parsing node data: "+e+"\ndata:\n'"+dataAttr+"'"}}}var childNode=parentTreeNode.addChild(data),$ul=$li.find(">ul:first");$ul.length&&self._createFromTag(childNode,$ul)})},_checkConsistency:function(){},_setDndStatus:function(e,t,i,s,n){var a=e?$(e.span):null,r=$(t.span);if(this.$dndMarker||(this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().css({"z-index":1e3}).prependTo($(this.divTree).parent())),"after"===s||"before"===s||"over"===s){var o="0 0";switch(s){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-before"),o="0 -8";break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-after"),o="0 8";break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before"),this.$dndMarker.addClass("dynatree-drop-over"),r.addClass("dynatree-drop-target"),o="8 0"}this.$dndMarker.show().position({my:"left top",at:"left top",of:r,offset:o})}else r.removeClass("dynatree-drop-target"),this.$dndMarker.hide();"after"===s?r.addClass("dynatree-drop-after"):r.removeClass("dynatree-drop-after"),"before"===s?r.addClass("dynatree-drop-before"):r.removeClass("dynatree-drop-before"),n===!0?(a&&a.addClass("dynatree-drop-accept"),r.addClass("dynatree-drop-accept"),i.addClass("dynatree-drop-accept")):(a&&a.removeClass("dynatree-drop-accept"),r.removeClass("dynatree-drop-accept"),i.removeClass("dynatree-drop-accept")),n===!1?(a&&a.addClass("dynatree-drop-reject"),r.addClass("dynatree-drop-reject"),i.addClass("dynatree-drop-reject")):(a&&a.removeClass("dynatree-drop-reject"),r.removeClass("dynatree-drop-reject"),i.removeClass("dynatree-drop-reject"))},_onDragEvent:function(e,t,i,s,n,a){var r,o,d=(this.options,this.options.dnd),l=null,h=$(t.span);switch(e){case"helper":var c=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append($(s.target).closest("a").clone());$("ul.dynatree-container",t.tree.divTree).append(c),c.data("dtSourceNode",t),l=c;break;case"start":t.isStatusNode()?l=!1:d.onDragStart&&(l=d.onDragStart(t)),l===!1?(this.logDebug("tree.onDragStart() cancelled"),n.helper.trigger("mouseup"),n.helper.hide()):h.addClass("dynatree-drag-source");break;case"enter":l=d.onDragEnter?d.onDragEnter(t,i):null,l=l?{over:l===!0||"over"===l||$.inArray("over",l)>=0,before:l===!0||"before"===l||$.inArray("before",l)>=0,after:l===!0||"after"===l||$.inArray("after",l)>=0}:!1,n.helper.data("enterResponse",l);break;case"over":if(o=n.helper.data("enterResponse"),r=null,o===!1);else if("string"==typeof o)r=o;else{var u=h.offset(),p={x:s.pageX-u.left,y:s.pageY-u.top},f={x:p.x/h.width(),y:p.y/h.height()};o.after&&f.y>.75?r="after":!o.over&&o.after&&f.y>.5?r="after":o.before&&f.y<=.25?r="before":!o.over&&o.before&&f.y<=.5?r="before":o.over&&(r="over"),d.preventVoidMoves&&(t===i?r=null:"before"===r&&i&&t===i.getNextSibling()?r=null:"after"===r&&i&&t===i.getPrevSibling()?r=null:"over"===r&&i&&i.parent===t&&i.isLastSibling()&&(r=null)),n.helper.data("hitMode",r)}"over"===r&&d.autoExpandMS&&t.hasChildren()!==!1&&!t.bExpanded&&t.scheduleAction("expand",d.autoExpandMS),r&&d.onDragOver&&(l=d.onDragOver(t,i,r),("over"===l||"before"===l||"after"===l)&&(r=l)),this._setDndStatus(i,t,n.helper,r,l!==!1&&null!==r);break;case"drop":var y=n.helper.hasClass("dynatree-drop-reject");r=n.helper.data("hitMode"),r&&d.onDrop&&!y&&d.onDrop(t,i,r,n,a);break;case"leave":t.scheduleAction("cancel"),n.helper.data("enterResponse",null),n.helper.data("hitMode",null),this._setDndStatus(i,t,n.helper,"out",void 0),d.onDragLeave&&d.onDragLeave(t,i);break;case"stop":h.removeClass("dynatree-drag-source"),d.onDragStop&&d.onDragStop(t);break;default:throw"Unsupported drag event: "+e}return l},cancelDrag:function(){var e=$.ui.ddmanager.current;e&&e.cancel()},lastentry:void 0},$.widget("ui.dynatree",{_init:function(){return parseFloat($.ui.version)<1.8?(this.options.debugLevel>=0&&_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher."),this._create()):void(this.options.debugLevel>=2&&_log("debug","ui.dynatree._init() was called; no current default functionality."))},_create:function(){var e=this.options;e.debugLevel>=1&&logMsg("Dynatree._create(): version='%s', debugLevel=%o.",$.ui.dynatree.version,this.options.debugLevel),this.options.event+=".dynatree";this.element.get(0);this.tree=new DynaTree(this),this.tree._load(),this.tree.logDebug("Dynatree._init(): done.")},bind:function(){function e(e){e=$.event.fix(e||window.event);var t=$.ui.dynatree.getNode(e.target);return t?t._onFocus(e):!1}this.unbind();var t="click.dynatree dblclick.dynatree";this.options.keyboard&&(t+=" keypress.dynatree keydown.dynatree"),this.element.bind(t,function(e){var t=$.ui.dynatree.getNode(e.target);if(!t)return!0;var i=t.tree,s=i.options;i.logDebug("event(%s): dtnode: %s",e.type,t);var n=i.phase;i.phase="userEvent";try{switch(e.type){case"click":return s.onClick&&s.onClick.call(i,t,e)===!1?!1:t._onClick(e);case"dblclick":return s.onDblClick&&s.onDblClick.call(i,t,e)===!1?!1:t._onDblClick(e);case"keydown":return s.onKeydown&&s.onKeydown.call(i,t,e)===!1?!1:t._onKeydown(e);case"keypress":return s.onKeypress&&s.onKeypress.call(i,t,e)===!1?!1:t._onKeypress(e)}}catch(a){i.logWarning("bind(%o): dtnode: %o, error: %o",e,t,a)}finally{i.phase=n}});var i=this.tree.divTree;i.addEventListener?(i.addEventListener("focus",e,!0),i.addEventListener("blur",e,!0)):i.onfocusin=i.onfocusout=e},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind(),$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind(),$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:void 0}),parseFloat($.ui.version)<1.8&&($.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"),$.ui.dynatree.version="$Version: 1.2.2$",$.ui.dynatree.getNode=function(e){if(e instanceof DynaTreeNode)return e;for(void 0!==e.selector&&(e=e[0]);e;){if(e.dtnode)return e.dtnode;e=e.parentNode}return null},$.ui.dynatree.getPersistData=DynaTreeStatus._getTreePersistData,$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:null,children:null,initId:null,initAjax:null,autoFocus:!0,keyboard:!0,persist:!1,autoCollapse:!1,clickFolderMode:3,activeVisible:!0,checkbox:!1,selectMode:2,fx:null,noLink:!1,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onCreate:null,onRender:null,postProcess:null,dnd:{onDragStart:null,onDragStop:null,autoExpandMS:1e3,preventVoidMoves:!0,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:!1,timeout:0,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:!1,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:1,lastentry:void 0},parseFloat($.ui.version)<1.8&&($.ui.dynatree.defaults=$.ui.dynatree.prototype.options),$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:!1,isLazy:!1,tooltip:null,href:null,icon:null,addClass:null,noLink:!1,activate:!1,focus:!1,expand:!1,select:!1,hideCheckbox:!1,unselectable:!1,children:null,lastentry:void 0};var didRegisterDnd=!1,_registerDnd=function(){didRegisterDnd||($.ui.plugin.add("draggable","connectToDynatree",{start:function(e,t){var i=$(this).data("draggable"),s=t.helper.data("dtSourceNode")||null;return s?(i.offset.click.top=-2,i.offset.click.left=16,s.tree._onDragEvent("start",s,null,e,t,i)):void 0},drag:function(e,t){var i=$(this).data("draggable"),s=t.helper.data("dtSourceNode")||null,n=t.helper.data("dtTargetNode")||null,a=$.ui.dynatree.getNode(e.target);if(e.target&&!a){var r=$(e.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0;if(r)return}t.helper.data("dtTargetNode",a),n&&n!==a&&n.tree._onDragEvent("leave",n,s,e,t,i),a&&a.tree.options.dnd.onDrop&&(a===n?a.tree._onDragEvent("over",a,s,e,t,i):a.tree._onDragEvent("enter",a,s,e,t,i))},stop:function(e,t){var i=$(this).data("draggable"),s=t.helper.data("dtSourceNode")||null,n=t.helper.data("dtTargetNode")||null,a=(i._mouseDownEvent,e.type),r="mouseup"==a&&1==e.which;r||logMsg("Drag was cancelled"),n&&(r&&n.tree._onDragEvent("drop",n,s,e,t,i),n.tree._onDragEvent("leave",n,s,e,t,i)),s&&s.tree._onDragEvent("stop",s,null,e,t,i)}}),didRegisterDnd=!0)}}(jQuery);
!function(e){var o=function(){var o=65,t='<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>',r={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!1},i=function(o,t){var r=j(o);e(t).data("colorpicker").fields.eq(1).val(r.r).end().eq(2).val(r.g).end().eq(3).val(r.b).end()},a=function(o,t){e(t).data("colorpicker").fields.eq(4).val(o.h).end().eq(5).val(o.s).end().eq(6).val(o.b).end()},n=function(o,t){e(t).data("colorpicker").fields.eq(0).val(B(o)).end()},c=function(o,t){e(t).data("colorpicker").selector.css("backgroundColor","#"+B({h:o.h,s:100,b:100})),e(t).data("colorpicker").selectorIndic.css({left:parseInt(150*o.s/100,10),top:parseInt(150*(100-o.b)/100,10)})},d=function(o,t){e(t).data("colorpicker").hue.css("top",parseInt(150-150*o.h/360,10))},l=function(o,t){e(t).data("colorpicker").currentColor.css("backgroundColor","#"+B(o))},s=function(o,t){e(t).data("colorpicker").newColor.css("backgroundColor","#"+B(o))},p=function(t){var r=t.charCode||t.keyCode||-1;if(r>o&&90>=r||32==r)return!1;var i=e(this).parent().parent();i.data("colorpicker").livePreview===!0&&u.apply(this)},u=function(o){var t,r=e(this).parent().parent();r.data("colorpicker").color=t=this.parentNode.className.indexOf("_hex")>0?E(z(this.value)):this.parentNode.className.indexOf("_hsb")>0?H({h:parseInt(r.data("colorpicker").fields.eq(4).val(),10),s:parseInt(r.data("colorpicker").fields.eq(5).val(),10),b:parseInt(r.data("colorpicker").fields.eq(6).val(),10)}):T(O({r:parseInt(r.data("colorpicker").fields.eq(1).val(),10),g:parseInt(r.data("colorpicker").fields.eq(2).val(),10),b:parseInt(r.data("colorpicker").fields.eq(3).val(),10)})),o&&(i(t,r.get(0)),n(t,r.get(0)),a(t,r.get(0))),c(t,r.get(0)),d(t,r.get(0)),s(t,r.get(0)),r.data("colorpicker").onChange.apply(r,[t,B(t),j(t)])},f=function(){var o=e(this).parent().parent();o.data("colorpicker").fields.parent().removeClass("colorpicker_focus")},h=function(){o=this.parentNode.className.indexOf("_hex")>0?70:65,e(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),e(this).parent().addClass("colorpicker_focus")},v=function(o){var t=e(this).parent().find("input").focus(),r={el:e(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:o.pageY,field:t,val:parseInt(t.val(),10),preview:e(this).parent().parent().data("colorpicker").livePreview};e(document).bind("mouseup",r,g),e(document).bind("mousemove",r,m)},m=function(e){return e.data.field.val(Math.max(0,Math.min(e.data.max,parseInt(e.data.val+e.pageY-e.data.y,10)))),e.data.preview&&u.apply(e.data.field.get(0),[!0]),!1},g=function(o){return u.apply(o.data.field.get(0),[!0]),o.data.el.removeClass("colorpicker_slider").find("input").focus(),e(document).unbind("mouseup",g),e(document).unbind("mousemove",m),!1},k=function(){var o={cal:e(this).parent(),y:e(this).offset().top};o.preview=o.cal.data("colorpicker").livePreview,e(document).bind("mouseup",o,_),e(document).bind("mousemove",o,b)},b=function(e){return u.apply(e.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,e.pageY-e.data.y)))/150,10)).get(0),[e.data.preview]),!1},_=function(o){return i(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),n(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),e(document).unbind("mouseup",_),e(document).unbind("mousemove",b),!1},x=function(){var o={cal:e(this).parent(),pos:e(this).offset()};o.preview=o.cal.data("colorpicker").livePreview,e(document).bind("mouseup",o,y),e(document).bind("mousemove",o,w)},w=function(e){return u.apply(e.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,e.pageY-e.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,e.pageX-e.data.pos.left))/150,10)).get(0),[e.data.preview]),!1},y=function(o){return i(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),n(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),e(document).unbind("mouseup",y),e(document).unbind("mousemove",w),!1},C=function(){e(this).addClass("colorpicker_focus")},M=function(){e(this).removeClass("colorpicker_focus")},I=function(){var o=e(this).parent(),t=o.data("colorpicker").color;o.data("colorpicker").origColor=t,l(t,o.get(0)),o.data("colorpicker").onSubmit(t,B(t),j(t),o.data("colorpicker").el)},q=function(){var o=e("#"+e(this).data("colorpickerId"));o.data("colorpicker").onBeforeShow.apply(this,[o.get(0)]);var t=e(this).offset(),r=S(),i=t.top+this.offsetHeight,a=t.left;return i+176>r.t+r.h&&(i-=this.offsetHeight+176),a+356>r.l+r.w&&(a-=356),o.css({left:a+"px",top:i+"px"}),0!=o.data("colorpicker").onShow.apply(this,[o.get(0)])&&o.show(),e(document).bind("mousedown",{cal:o},P),!1},P=function(o){N(o.data.cal.get(0),o.target,o.data.cal.get(0))||(0!=o.data.cal.data("colorpicker").onHide.apply(this,[o.data.cal.get(0)])&&o.data.cal.hide(),e(document).unbind("mousedown",P))},N=function(e,o,t){if(e==o)return!0;if(e.contains)return e.contains(o);if(e.compareDocumentPosition)return!!(16&e.compareDocumentPosition(o));for(var r=o.parentNode;r&&r!=t;){if(r==e)return!0;r=r.parentNode}return!1},S=function(){var e="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(e?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(e?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(e?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(e?document.documentElement.clientHeight:document.body.clientHeight)}},H=function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},O=function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}},z=function(e){var o=6-e.length;if(o>0){for(var t=[],r=0;o>r;r++)t.push("0");t.push(e),e=t.join("")}return e},Y=function(e){var e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:e>>16,g:(65280&e)>>8,b:255&e}},E=function(e){return T(Y(e))},T=function(e){var o={h:0,s:0,b:0},t=Math.min(e.r,e.g,e.b),r=Math.max(e.r,e.g,e.b),i=r-t;return o.b=r,o.s=0!=r?255*i/r:0,o.h=0!=o.s?e.r==r?(e.g-e.b)/i:e.g==r?2+(e.b-e.r)/i:4+(e.r-e.g)/i:-1,o.h*=60,o.h<0&&(o.h+=360),o.s*=100/255,o.b*=100/255,o},j=function(e){var o={},t=Math.round(e.h),r=Math.round(255*e.s/100),i=Math.round(255*e.b/100);if(0==r)o.r=o.g=o.b=i;else{var a=i,n=(255-r)*i/255,c=(a-n)*(t%60)/60;360==t&&(t=0),60>t?(o.r=a,o.b=n,o.g=n+c):120>t?(o.g=a,o.b=n,o.r=a-c):180>t?(o.g=a,o.r=n,o.b=n+c):240>t?(o.b=a,o.r=n,o.g=a-c):300>t?(o.b=a,o.g=n,o.r=n+c):360>t?(o.r=a,o.g=n,o.b=a-c):(o.r=0,o.g=0,o.b=0)}return{r:Math.round(o.r),g:Math.round(o.g),b:Math.round(o.b)}},W=function(o){var t=[o.r.toString(16),o.g.toString(16),o.b.toString(16)];return e.each(t,function(e,o){1==o.length&&(t[e]="0"+o)}),t.join("")},B=function(e){return W(j(e))},D=function(){var o=e(this).parent(),t=o.data("colorpicker").origColor;o.data("colorpicker").color=t,i(t,o.get(0)),n(t,o.get(0)),a(t,o.get(0)),c(t,o.get(0)),d(t,o.get(0)),s(t,o.get(0))};return{init:function(o){if(o=e.extend({},r,o||{}),"string"==typeof o.color)o.color=E(o.color);else if(void 0!=o.color.r&&void 0!=o.color.g&&void 0!=o.color.b)o.color=T(o.color);else{if(void 0==o.color.h||void 0==o.color.s||void 0==o.color.b)return this;o.color=H(o.color)}return this.each(function(){if(!e(this).data("colorpickerId")){var r=e.extend({},o);r.origColor=o.color;var m="collorpicker_"+parseInt(1e3*Math.random());e(this).data("colorpickerId",m);var g=e(t).attr("id",m);r.flat?g.appendTo(this).show():g.appendTo(document.body),r.fields=g.find("input").bind("keyup",p).bind("change",u).bind("blur",f).bind("focus",h),g.find("span").bind("mousedown",v).end().find(">div.colorpicker_current_color").bind("click",D),r.selector=g.find("div.colorpicker_color").bind("mousedown",x),r.selectorIndic=r.selector.find("div div"),r.el=this,r.hue=g.find("div.colorpicker_hue div"),g.find("div.colorpicker_hue").bind("mousedown",k),r.newColor=g.find("div.colorpicker_new_color"),r.currentColor=g.find("div.colorpicker_current_color"),g.data("colorpicker",r),g.find("div.colorpicker_submit").bind("mouseenter",C).bind("mouseleave",M).bind("click",I),i(r.color,g.get(0)),a(r.color,g.get(0)),n(r.color,g.get(0)),d(r.color,g.get(0)),c(r.color,g.get(0)),l(r.color,g.get(0)),s(r.color,g.get(0)),r.flat?g.css({position:"relative",display:"block"}):e(this).bind(r.eventName,q)}})},showPicker:function(){return this.each(function(){e(this).data("colorpickerId")&&q.apply(this)})},hidePicker:function(){return this.each(function(){e(this).data("colorpickerId")&&e("#"+e(this).data("colorpickerId")).hide()})},setColor:function(o){if("string"==typeof o)o=E(o);else if(void 0!=o.r&&void 0!=o.g&&void 0!=o.b)o=T(o);else{if(void 0==o.h||void 0==o.s||void 0==o.b)return this;o=H(o)}return this.each(function(){if(e(this).data("colorpickerId")){var t=e("#"+e(this).data("colorpickerId"));t.data("colorpicker").color=o,t.data("colorpicker").origColor=o,i(o,t.get(0)),a(o,t.get(0)),n(o,t.get(0)),d(o,t.get(0)),c(o,t.get(0)),l(o,t.get(0)),s(o,t.get(0))}})}}}();e.fn.extend({ColorPicker:o.init,ColorPickerHide:o.hidePicker,ColorPickerShow:o.showPicker,ColorPickerSetColor:o.setColor})}(jQuery);
(function(){var t;t=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,s,i,r,h,l;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:t.label,children:0,disabled:t.disabled}),h=t.childNodes,l=[],i=0,r=h.length;r>i;i++)s=h[i],l.push(this.add_option(s,e,t.disabled));return l},t.prototype.add_option=function(t,e,s){return"OPTION"===t.nodeName.toUpperCase()?(""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:s===!0?s:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},t}(),t.select_to_array=function(e){var s,i,r,h,l;for(i=new t,l=e.childNodes,r=0,h=l.length;h>r;r++)s=l[r],i.add_node(s);return i.parsed},this.SelectParser=t}).call(this),function(){var t,e;e=this,t=function(){function t(t,e){this.form_field=t,this.options=null!=e?e:{},this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1},t.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(){var t=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return t.blur_test()},100))},t.prototype.result_add_option=function(t){var e,s;return t.disabled?"":(t.dom_id=this.container_id+"_o_"+t.array_index,e=t.selected&&this.is_multiple?[]:["active-result"],t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),s=""!==t.style.cssText?' style="'+t.style+'"':"",'<li id="'+t.dom_id+'" class="'+e.join(" ")+'"'+s+">"+t.html+"</li>")},t.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.keyup_checker=function(t){var e,s;switch(e=null!=(s=t.which)?s:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.generate_field_id=function(){var t;return t=this.generate_random_id(),this.form_field.id=t,t},t.prototype.generate_random_char=function(){var t,e,s;return t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",s=Math.floor(Math.random()*t.length),e=t.substring(s,s+1)},t}(),e.AbstractChosen=t}.call(this),function(){var t,e,s,i,r={}.hasOwnProperty,h=function(t,e){function s(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t};i=this,t=jQuery,t.fn.extend({chosen:function(s){var i,r,h;return h=navigator.userAgent.toLowerCase(),r=/(msie) ([\w.]+)/.exec(h)||[],i={name:r[1]||"",version:r[2]||"0"},"msie"===i.name&&("6.0"===i.version||"7.0"===i.version&&7===document.documentMode)?this:this.each(function(){var i;return i=t(this),i.hasClass("chzn-done")?void 0:i.data("chosen",new e(this,s))})}}),e=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return h(r,e),r.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_value=this.form_field_jq.val(),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},r.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},r.prototype.set_up_html=function(){var e,i,r,h,l,n;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",e=["chzn-container"],e.push("chzn-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chzn-rtl"),this.f_width=this.form_field_jq.outerWidth(),r={id:this.container_id,"class":e.join(" "),style:"width: "+this.f_width+"px;",title:this.form_field.title},i=t("<div />",r),i.html(this.is_multiple?'<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>':'<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(i),this.container=t("#"+this.container_id),this.dropdown=this.container.find("div.chzn-drop").first(),h=this.container.height(),l=this.f_width-s(this.dropdown),this.dropdown.css({width:l+"px",top:h+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),n=l-s(this.search_container)-s(this.search_field),this.search_field.css({width:n+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},r.prototype.register_observers=function(){var t=this;return this.container.mousedown(function(e){t.container_mousedown(e)}),this.container.mouseup(function(e){t.container_mouseup(e)}),this.container.mouseenter(function(e){t.mouse_enter(e)}),this.container.mouseleave(function(e){t.mouse_leave(e)}),this.search_results.mouseup(function(e){t.search_results_mouseup(e)}),this.search_results.mouseover(function(e){t.search_results_mouseover(e)}),this.search_results.mouseout(function(e){t.search_results_mouseout(e)}),this.form_field_jq.bind("liszt:updated",function(e){t.results_update_field(e)}),this.form_field_jq.bind("liszt:activate",function(e){t.activate_field(e)}),this.form_field_jq.bind("liszt:open",function(e){t.container_mousedown(e)}),this.search_field.blur(function(e){t.input_blur(e)}),this.search_field.keyup(function(e){t.keyup_checker(e)}),this.search_field.keydown(function(e){t.keydown_checker(e)}),this.search_field.focus(function(e){t.input_focus(e)}),this.is_multiple?this.search_choices.click(function(e){t.choices_click(e)}):this.container.click(function(t){t.preventDefault()})},r.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field()):(this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus",this.activate_action))},r.prototype.container_mousedown=function(e){var s;return this.is_disabled?void 0:(s=null!=e?t(e.target).hasClass("search-choice-close"):!1,e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),this.pending_destroy_click||s?this.pending_destroy_click=!1:(this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chzn-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(document).click(this.click_test_action),this.results_show()),this.activate_field()))},r.prototype.container_mouseup=function(t){return"ABBR"!==t.target.nodeName||this.is_disabled?void 0:this.results_reset(t)},r.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chzn-container-active")?this.close_field():void 0},r.prototype.close_field=function(){return t(document).unbind("click",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},r.prototype.activate_field=function(){return this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},r.prototype.test_active_click=function(e){return t(e.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},r.prototype.results_build=function(){var t,e,s,r,h;for(this.parsing=!0,this.results_data=i.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),t="",h=this.results_data,s=0,r=h.length;r>s;s++)e=h[s],e.group?t+=this.result_add_group(e):e.empty||(t+=this.result_add_option(e),e.selected&&this.is_multiple?this.choice_build(e):e.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(e.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(t),this.parsing=!1},r.prototype.result_add_group=function(e){return e.disabled?"":(e.dom_id=this.container_id+"_g_"+e.array_index,'<li id="'+e.dom_id+'" class="group-result">'+t("<div />").text(e.label).html()+"</li>")},r.prototype.result_do_highlight=function(t){var e,s,i,r,h;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),i=parseInt(this.search_results.css("maxHeight"),10),h=this.search_results.scrollTop(),r=i+h,s=this.result_highlight.position().top+this.search_results.scrollTop(),e=s+this.result_highlight.outerHeight(),e>=r)return this.search_results.scrollTop(e-i>0?e-i:0);if(h>s)return this.search_results.scrollTop(s)}},r.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},r.prototype.results_show=function(){var t;if(this.is_multiple){if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1}else this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);return t=this.is_multiple?this.container.height():this.container.height()-1,this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:t+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},r.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},r.prototype.set_tab_index=function(){var t;return this.form_field_jq.attr("tabindex")?(t=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.search_field.attr("tabindex",t)):void 0},r.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},r.prototype.search_results_mouseup=function(e){var s;return s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),s.length?(this.result_highlight=s,this.result_select(e),this.search_field.focus()):void 0},r.prototype.search_results_mouseover=function(e){var s;return s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),s?this.result_do_highlight(s):void 0},r.prototype.search_results_mouseout=function(e){return t(e.target).hasClass("active-result")?this.result_clear_highlight():void 0},r.prototype.choices_click=function(e){return e.preventDefault(),!this.active_field||t(e.target).hasClass("search-choice")||this.results_showing?void 0:this.results_show()},r.prototype.choice_build=function(e){var s,i,r,h=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(s=this.container_id+"_c_"+e.array_index,this.choices+=1,i=e.disabled?'<li class="search-choice search-choice-disabled" id="'+s+'"><span>'+e.html+"</span></li>":'<li class="search-choice" id="'+s+'"><span>'+e.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+e.array_index+'"></a></li>',this.search_container.before(i),r=t("#"+s).find("a").first(),r.click(function(t){return h.choice_destroy_link_click(t)}))},r.prototype.choice_destroy_link_click=function(e){return e.preventDefault(),this.is_disabled?e.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(t(e.target)))},r.prototype.choice_destroy=function(t){return this.result_deselect(t.attr("rel"))?(this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()):void 0},r.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},r.prototype.results_reset_cleanup=function(){return this.current_value=this.form_field_jq.val(),this.selected_item.find("abbr").remove()},r.prototype.result_select=function(t){var e,s,i,r;return this.result_highlight?(e=this.result_highlight,s=e.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(e):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=e,this.selected_item.removeClass("chzn-default")),e.addClass("result-selected"),r=s.substr(s.lastIndexOf("_")+1),i=this.results_data[r],i.selected=!0,this.form_field.options[i.options_index].selected=!0,this.is_multiple?this.choice_build(i):(this.selected_item.find("span").first().text(i.text),this.allow_single_deselect&&this.single_deselect_control_build()),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()):void 0},r.prototype.result_activate=function(t){return t.addClass("active-result")},r.prototype.result_deactivate=function(t){return t.removeClass("active-result")},r.prototype.result_deselect=function(e){var s,i;return i=this.results_data[e],this.form_field.options[i.options_index].disabled?!1:(i.selected=!1,this.form_field.options[i.options_index].selected=!1,s=t("#"+this.container_id+"_o_"+e),s.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[i.options_index].value}),this.search_field_scale(),!0)},r.prototype.single_deselect_control_build=function(){return this.allow_single_deselect&&this.selected_item.find("abbr").length<1?this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'):void 0},r.prototype.winnow_results=function(){var e,s,i,r,h,l,n,o,a,c,_,d,u,f,p,g,m,v;for(this.no_results_clear(),a=0,c=this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html(),l=this.search_contains?"":"^",h=new RegExp(l+c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),u=new RegExp(c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),v=this.results_data,f=0,g=v.length;g>f;f++)if(s=v[f],!s.disabled&&!s.empty)if(s.group)t("#"+s.dom_id).css("display","none");else if(!this.is_multiple||!s.selected){if(e=!1,o=s.dom_id,n=t("#"+o),h.test(s.html))e=!0,a+=1;else if(this.enable_split_word_search&&(s.html.indexOf(" ")>=0||0===s.html.indexOf("["))&&(r=s.html.replace(/\[|\]/g,"").split(" "),r.length))for(p=0,m=r.length;m>p;p++)i=r[p],h.test(i)&&(e=!0,a+=1);e?(c.length?(_=s.html.search(u),d=s.html.substr(0,_+c.length)+"</em>"+s.html.substr(_+c.length),d=d.substr(0,_)+"<em>"+d.substr(_)):d=s.html,n.html(d),this.result_activate(n),null!=s.group_array_index&&t("#"+this.results_data[s.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&o===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(n))}return 1>a&&c.length?this.no_results(c):this.winnow_results_set_highlight()},r.prototype.winnow_results_clear=function(){var e,s,i,r,h;for(this.search_field.val(""),s=this.search_results.find("li"),h=[],i=0,r=s.length;r>i;i++)e=s[i],e=t(e),h.push(e.hasClass("group-result")?e.css("display","auto"):this.is_multiple&&e.hasClass("result-selected")?void 0:this.result_activate(e));return h},r.prototype.winnow_results_set_highlight=function(){var t,e;return this.result_highlight||(e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),t=e.length?e.first():this.search_results.find(".active-result").first(),null==t)?void 0:this.result_do_highlight(t)},r.prototype.no_results=function(e){var s;return s=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),s.find("span").first().html(e),this.search_results.append(s)},r.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},r.prototype.keydown_arrow=function(){var e,s;return this.result_highlight?this.results_showing&&(s=this.result_highlight.nextAll("li.active-result").first(),s&&this.result_do_highlight(s)):(e=this.search_results.find("li.active-result").first(),e&&this.result_do_highlight(t(e))),this.results_showing?void 0:this.results_show()},r.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},r.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},r.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},r.prototype.keydown_checker=function(t){var e,s;switch(e=null!=(s=t.which)?s:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},r.prototype.search_field_scale=function(){var e,s,i,r,h,l,n,o,a;if(this.is_multiple){for(i=0,n=0,h="position:absolute; left: -1000px; top: -1000px; display:none;",l=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],o=0,a=l.length;a>o;o++)r=l[o],h+=r+":"+this.search_field.css(r)+";";return s=t("<div />",{style:h}),s.text(this.search_field.val()),t("body").append(s),n=s.width()+25,s.remove(),n>this.f_width-10&&(n=this.f_width-10),this.search_field.css({width:n+"px"}),e=this.container.height(),this.dropdown.css({top:e+"px"})}},r.prototype.generate_random_id=function(){var e;for(e="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();t("#"+e).length>0;)e+=this.generate_random_char();return e},r}(AbstractChosen),i.Chosen=e,s=function(t){var e;return e=t.outerWidth()-t.width()},i.get_side_border_padding=s}.call(this);
!function(e){e.modelview=function(t,n){var i=this;i.$el=e(t),i.el=t,i.$el.data("modelview-instance")||(i.$el.data("modelview-instance",i),i.init=function(){var t=i.$el.data("modelview");i.options=e.extend({},e.modelview.defaultOptions,t,n);var a=0;for(var o in i.options.columns){if(o===i.options.idColumn)break;a++}i.options.idColumnIndex=a,i.$el.on("input",".search-query",function(){e(this).closest(".modelview")[0]==i.el&&i.reload({q:e(this).val()})}),e(document).on("model-update",function(e,t){i.options.model==t&&i.reload()}),i.$el.on("click",".modelview-param",function(){return e(this).closest(".modelview")[0]==i.el&&i.reload(URI(e(this).attr("href")).search(!0)),!1}),i.$el.delegate(".modelview-col-select :checkbox","change",function(){e(this).closest(".modelview")[0]==i.el&&(e(this).closest("tr").toggleClass("modelview-selected",e(this).is(":checked")),e(this).closest(".modelview").toggleClass("modelview-has-selection",!!e(this).closest("tbody").find(".modelview-selected").length))}),i.$el.delegate(".modelview-row td","click",function(t){if(!e(t.target).parents().andSelf().is(i.options.cancel)&&e(this).closest(".modelview")[0]==i.el){var n=e(this).parent().find(":checkbox");return n.is(":checked")?n.removeAttr("checked").trigger("change"):n.attr("checked","checked").trigger("change"),!1}}),i.buildMain(),i.options.sortable&&e.require("jquery-ui",function(){e(i.$el.find(".modelview-table-wrapper table tbody")).sortable({axis:"y",items:"> .modelview-row",forcePlaceholderSize:!0,forceHelperSize:!0,containment:"parent",tolerance:"pointer",delay:200,helper:function(t,n){var i=n.children(),a=n.clone();return a.children().each(function(t){e(this).width(i.eq(t).width())}),a},start:function(t,n){var i=this,a=n.item.siblings(".inline-content");a.children().children("div").slideUp(null,function(){a.remove(),e(i).sortable("refreshPositions")})},update:function(){var t=e(this).sortable("serialize",{key:"item[]",attribute:"data-mv-id",expression:/(.+)/});e.post(i.options.sortable,t,function(){})}})}),i.reload()},i.buildMain=function(){i.$el.empty().append(i.buildHeader()).append(i.buildBody()).append(i.buildFooter())},i.buildHeader=function(){var t=e('<div class="modelview-header"></div>').append(e("<h1 />",{text:i.options.title}));return t.append(i.buildGeneralActions()),i.$search=e('<div class="modelview-search form-search"><div class="input-append"><input type="text" name="q" class="input-small search-query"><button type="submit" class="btn"><span class="icon-search"></span></button></div></div>'),t.append(i.$search),t},i.buildGeneralActions=function(){var t=e('<div class="btn-group"></div>');for(var n in i.options.actions){var a=i.options.actions[n];a.general&&t.append(e("<a />",{href:a.href,"class":"btn btn-small "+a.class,text:a.label}))}return t},i.buildBody=function(){var t=e("<tr />"),n=0;for(var a in i.options.columns){var o=i.options.columns[a];o.hide||(t.append(o.sortable?e("<th />").append(e("<a />",{text:o.label,"class":"modelview-param",href:URI(window.location.href).addSearch({sort_column:a,sort_order:"asc"})})):e("<th />",{text:o.label})),++n)}return i.options.visibleColumns=n,t.prepend(e('<th class="modelview-col-select"><input type="checkbox" name="item_all" value="1" /></th>')),t.append(e('<th class="modelview-single-actions">&nbsp;</th>')),t=e("<thead />").append(t),t=e("<table />").append(t).append("<tbody />"),t=e("<div />",{"class":"modelview-table-wrapper"}).append(t)},i.buildFooter=function(){return i.$status=e("<span>Initializing...</span>"),e("<div />",{"class":"modelview-footer"}).append(i.buildMultiActions()).append(i.$status).append(i.buildPager())},i.buildMultiActions=function(){return""},i.buildPager=function(){var e,t,n=document.createElement("div"),a=document.createElement("ul");n.className="modelview-pager pagination";var o=Math.ceil(i.options.numItems/i.options.maxPerPage);if(!i.options.maxPerPage||!o||1>=o)return i.$status.text("Showing "+i.options.numItems+" items."),i.$search.toggle(""!==i.$search.find(".search-query").val()),n;var l=1+(i.options.currentPage-1)*i.options.maxPerPage,r=Math.min(i.options.numItems,i.options.currentPage*i.options.maxPerPage);i.$status.text("Showing "+l+" to "+r+" of "+i.options.numItems+" items."),i.$search.show();for(var s=Math.max(1,i.options.currentPage-3),c=Math.min(o,i.options.currentPage+3),d=s;c>=d;++d)e=document.createElement("li"),e.className=i.options.currentPage==d?"active":"",t=document.createElement("a"),t.className="modelview-param",t.textContent=d,t.href="?p="+d,e.appendChild(t),a.appendChild(e);return n.appendChild(a),n},i.buildCell=function(e,t,n){var a=document.createElement("td");if(e.action){var o=i.options.actions[e.action],l=document.createElement("a");l.href=i.actionLink(o,n),l.className=o.class,l[e.escape?"textContent":"innerHTML"]=t,a.appendChild(l)}else a[e.escape?"textContent":"innerHTML"]=t;return a},i.actionLink=function(e,t){var n=URI(e.href);return"undefined"!=typeof t&&n.addSearch({item:t}),n},i.buildSingleActions=function(e){var t,n=document.createElement("td"),a=document.createElement("div"),o=document.createElement("i"),l=document.createElement("ul");n.className="modelview-single-actions",a.className="dropdown",o.className="icon-cog",l.className="dropdown-menu pull-right",n.appendChild(a),a.appendChild(o),a.appendChild(l);for(var r in i.options.actions){var s=i.options.actions[r];if(s.single){var c=document.createElement("a");c.href=i.actionLink(s,e),c.className=s.class,c.textContent=s.label,t=document.createElement("li"),t.appendChild(c),l.appendChild(t)}}return n},i.populate=function(t){var n,a,o,l,r,s=i.$el.children(".modelview-table-wrapper").children("table").children("tbody")[0];e(s).empty();for(r in t){l=t[r][i.options.idColumnIndex],o=0,n=document.createElement("tr"),n.setAttribute("data-mv-id",encodeURIComponent(l)),n.className="modelview-row",a=document.createElement("td"),a.className="modelview-col-select",a.innerHTML='<input type="checkbox" name="item[]" value="'+l+'" />',n.appendChild(a);for(var c in i.options.columns){var d=i.options.columns[c];d.hide||(a=i.buildCell(d,t[r][o],l),n.appendChild(a)),++o}a=i.buildSingleActions(l),n.appendChild(a),s.appendChild(n)}n||(n=document.createElement("tr"),n.className="modelview-no-hits",a=document.createElement("td"),a.setAttribute("colspan",i.options.visibleColumns+2),a.textContent="No entries found",n.appendChild(a),s.appendChild(n))},i.reload=function(t){var n=URI(i.options.url);"undefined"!=typeof t&&n.addSearch(t),i.$status.text("Loading..."),e.post(n,function(t){i.options.currentPage=t.page,i.options.numItems=t.total;var n=i.$el.children(".modelview-table-wrapper"),a=n.clearQueue().css("height","").height();i.populate(t.rows);var o=n.height();n.height(a).animate({height:o},function(){e(this).css("height","").css("overflow","")}),i.$el.find(".modelview-pager").replaceWith(i.buildPager())})},i.init())},e.modelview.defaultOptions={numItems:0,maxPerPage:0,cancel:"input,textarea,button,select,option,a",sortable:!1},e.fn.modelview=function(t){return this.each(function(){new e.modelview(this,t)})}}(jQuery),$(document).delegate(".modelview .inline","click",function(){var e=$(this),t=$(this).closest("tr"),n=t.next(".inline-content"),i=null;if(n.length){var a=n;if(n.children().children("div").slideUp(null,function(){a.remove()}),n.data("mv-href")==e.attr("href"))return!1}else i=t.siblings(".inline-content"),i.children().children("div").slideUp(null,function(){i.remove()});var o=0;t.children().each(function(){o+=parseInt($(this).attr("colspan")||1)}),n=$('<tr class="inline-content"><td colspan="'+o+'"><div class="inline-wrapper"></div></td></tr>'),n.data("mv-href",e.attr("href"));var l=n.find("div").addClass("inline-wrapper-hide");return t.after(n),l.load(e.attr("href")+"&curry_context=main",function(){i&&i.remove(),$('<a href="#" class="inline-close">✖</a>').prependTo(this).click(function(){return l.slideUp(null,function(){n.remove()}),!1}),l.one("curry-init-complete",function(){l.removeClass("inline-wrapper-hide").hide().slideDown()}),l.trigger("curry-init")}),!1}),$(document).delegate(".modelview .post","click",function(){return $.post($(this).attr("href")),!1}),$(document).delegate(".inline-content form:not(.no-ajax)","submit",function(){var e=$(this),t=$(this).closest("div"),n=$(this).closest("tr");return e.find(":submit").attr("disabled",!0),$.util.ajaxform(this,{dataType:"text",success:function(i){if(e.find(":submit").attr("disabled",!1),i.length){var a=e.parent();a.is(".inline-wrapper")&&e.siblings(":not(.inline-close)").remove(),e.replaceWith(i),a.trigger("curry-init")}else t.slideUp(null,function(){n.remove()})}},{curry_context:"main"}),!1});
!function(t,r){"object"==typeof exports?module.exports=r(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],r):t.URI=r(t.punycode,t.IPv6,t.SecondLevelDomains)}(this,function(t,r,e){function s(t,r){return this instanceof s?(void 0===t&&(t="undefined"!=typeof location?location.href+"":""),this.href(t),void 0!==r?this.absoluteTo(r):this):new s(t,r)}function n(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function i(t){return"[object Array]"===String(Object.prototype.toString.call(t))}function a(t){return encodeURIComponent(t).replace(/[!'()*]/g,escape).replace(/\*/g,"%2A")}var o=s.prototype,h=Object.prototype.hasOwnProperty;s._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:s.duplicateQueryParameters}},s.duplicateQueryParameters=!1,s.protocol_expression=/^[a-z][a-z0-9-+-]*$/i,s.idn_expression=/[^a-z0-9\.-]/i,s.punycode_expression=/(xn--)/i,s.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,s.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,s.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/gi,s.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},s.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,s.encode=a,s.decode=decodeURIComponent,s.iso8859=function(){s.encode=escape,s.decode=unescape},s.unicode=function(){s.encode=a,s.decode=decodeURIComponent},s.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},s.encodeQuery=function(t){return s.encode(t+"").replace(/%20/g,"+")},s.decodeQuery=function(t){return s.decode((t+"").replace(/\+/g,"%20"))},s.recodePath=function(t){t=(t+"").split("/");for(var r=0,e=t.length;e>r;r++)t[r]=s.encodePathSegment(s.decode(t[r]));return t.join("/")},s.decodePath=function(t){t=(t+"").split("/");for(var r=0,e=t.length;e>r;r++)t[r]=s.decodePathSegment(t[r]);return t.join("/")};var u,p={encode:"encode",decode:"decode"},d=function(t,r){return function(e){return s[r](e+"").replace(s.characters[t][r].expression,function(e){return s.characters[t][r].map[e]})}};for(u in p)s[u+"PathSegment"]=d("pathname",p[u]);s.encodeReserved=d("reserved","encode"),s.parse=function(t,r){var e;return r||(r={}),e=t.indexOf("#"),e>-1&&(r.fragment=t.substring(e+1)||null,t=t.substring(0,e)),e=t.indexOf("?"),e>-1&&(r.query=t.substring(e+1)||null,t=t.substring(0,e)),"//"===t.substring(0,2)?(r.protocol="",t=t.substring(2),t=s.parseAuthority(t,r)):(e=t.indexOf(":"),e>-1&&(r.protocol=t.substring(0,e),r.protocol&&!r.protocol.match(s.protocol_expression)?r.protocol=void 0:"file"===r.protocol?t=t.substring(e+3):"//"===t.substring(e+1,e+3)?(t=t.substring(e+3),t=s.parseAuthority(t,r)):(t=t.substring(e+1),r.urn=!0))),r.path=t,r},s.parseHost=function(t,r){var e,s=t.indexOf("/");return-1===s&&(s=t.length),"["===t.charAt(0)?(e=t.indexOf("]"),r.hostname=t.substring(1,e)||null,r.port=t.substring(e+2,s)||null):t.indexOf(":")!==t.lastIndexOf(":")?(r.hostname=t.substring(0,s)||null,r.port=null):(e=t.substring(0,s).split(":"),r.hostname=e[0]||null,r.port=e[1]||null),r.hostname&&"/"!==t.substring(s).charAt(0)&&(s++,t="/"+t),t.substring(s)||"/"},s.parseAuthority=function(t,r){return t=s.parseUserinfo(t,r),s.parseHost(t,r)},s.parseUserinfo=function(t,r){var e=t.indexOf("@"),n=t.indexOf("/");return e>-1&&(-1===n||n>e)?(n=t.substring(0,e).split(":"),r.username=n[0]?s.decode(n[0]):null,n.shift(),r.password=n[0]?s.decode(n.join(":")):null,t=t.substring(e+1)):(r.username=null,r.password=null),t},s.parseQuery=function(t){if(!t)return{};if(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!t)return{};var r={};t=t.split("&");for(var e,n,i=t.length,a=0;i>a;a++)e=t[a].split("="),n=s.decodeQuery(e.shift()),e=e.length?s.decodeQuery(e.join("=")):null,r[n]?("string"==typeof r[n]&&(r[n]=[r[n]]),r[n].push(e)):r[n]=e;return r},s.build=function(t){var r="";return t.protocol&&(r+=t.protocol+":"),t.urn||!r&&!t.hostname||(r+="//"),r+=s.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&"string"==typeof t.hostname&&(r+="/"),r+=t.path),"string"==typeof t.query&&t.query&&(r+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(r+="#"+t.fragment),r},s.buildHost=function(t){var r="";return t.hostname?(s.ip6_expression.test(t.hostname)?r=t.port?r+("["+t.hostname+"]:"+t.port):r+t.hostname:(r+=t.hostname,t.port&&(r+=":"+t.port)),r):""},s.buildAuthority=function(t){return s.buildUserinfo(t)+s.buildHost(t)},s.buildUserinfo=function(t){var r="";return t.username&&(r+=s.encode(t.username),t.password&&(r+=":"+s.encode(t.password)),r+="@"),r},s.buildQuery=function(t,r){var e,n,a,o,u="";for(n in t)if(h.call(t,n)&&n)if(i(t[n]))for(e={},a=0,o=t[n].length;o>a;a++)void 0!==t[n][a]&&void 0===e[t[n][a]+""]&&(u+="&"+s.buildQueryParameter(n,t[n][a]),!0!==r&&(e[t[n][a]+""]=!0));else void 0!==t[n]&&(u+="&"+s.buildQueryParameter(n,t[n]));return u.substring(1)},s.buildQueryParameter=function(t,r){return s.encodeQuery(t)+(null!==r?"="+s.encodeQuery(r):"")},s.addQuery=function(t,r,e){if("object"==typeof r)for(var n in r)h.call(r,n)&&s.addQuery(t,n,r[n]);else{if("string"!=typeof r)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");void 0===t[r]?t[r]=e:("string"==typeof t[r]&&(t[r]=[t[r]]),i(e)||(e=[e]),t[r]=t[r].concat(e))}},s.removeQuery=function(t,r,e){var n;if(i(r))for(e=0,n=r.length;n>e;e++)t[r[e]]=void 0;else if("object"==typeof r)for(n in r)h.call(r,n)&&s.removeQuery(t,n,r[n]);else{if("string"!=typeof r)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");if(void 0!==e){if(t[r]===e)t[r]=void 0;else if(i(t[r])){n=t[r];var a,o,u={};if(i(e))for(a=0,o=e.length;o>a;a++)u[e[a]]=!0;else u[e]=!0;for(a=0,o=n.length;o>a;a++)void 0!==u[n[a]]&&(n.splice(a,1),o--,a--);t[r]=n}}else t[r]=void 0}},s.commonPath=function(t,r){var e,s=Math.min(t.length,r.length);for(e=0;s>e;e++)if(t.charAt(e)!==r.charAt(e)){e--;break}return 1>e?t.charAt(0)===r.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"!==t.charAt(e)&&(e=t.substring(0,e).lastIndexOf("/")),t.substring(0,e+1))},s.withinString=function(t,r){return t.replace(s.find_uri_expression,r)},s.ensureValidHostname=function(r){if(r.match(s.invalid_hostname_characters)){if(!t)throw new TypeError("Hostname '"+r+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(t.toASCII(r).match(s.invalid_hostname_characters))throw new TypeError("Hostname '"+r+"' contains characters other than [A-Z0-9.-]")}},o.build=function(t){return!0===t?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=s.build(this._parts),this._deferred_build=!1),this},o.clone=function(){return new s(this)},o.valueOf=o.toString=function(){return this.build(!1)._string},p={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},d=function(t){return function(r,e){return void 0===r?this._parts[t]||"":(this._parts[t]=r,this.build(!e),this)}};for(u in p)o[u]=d(p[u]);p={query:"?",fragment:"#"},d=function(t,r){return function(e,s){return void 0===e?this._parts[t]||"":(null!==e&&(e+="",e.charAt(0)===r&&(e=e.substring(1))),this._parts[t]=e,this.build(!s),this)}};for(u in p)o[u]=d(u,p[u]);p={search:["?","query"],hash:["#","fragment"]},d=function(t,r){return function(e,s){var n=this[t](e,s);return"string"==typeof n&&n.length?r+n:n}};for(u in p)o[u]=d(p[u][1],p[u][0]);o.pathname=function(t,r){if(void 0===t||!0===t){var e=this._parts.path||(this._parts.urn?"":"/");return t?s.decodePath(e):e}return this._parts.path=t?s.recodePath(t):"/",this.build(!r),this},o.path=o.pathname,o.href=function(t,r){var e;if(void 0===t)return this.toString();this._string="",this._parts=s._parts();var n=t instanceof s,i="object"==typeof t&&(t.hostname||t.path);if(!n&&i&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t)this._parts=s.parse(t,this._parts);else{if(!n&&!i)throw new TypeError("invalid input");for(e in n=n?t._parts:t)h.call(this._parts,e)&&(this._parts[e]=n[e])}return this.build(!r),this},o.is=function(t){var r=!1,n=!1,i=!1,a=!1,o=!1,h=!1,u=!1,p=!this._parts.urn;switch(this._parts.hostname&&(p=!1,n=s.ip4_expression.test(this._parts.hostname),i=s.ip6_expression.test(this._parts.hostname),r=n||i,o=(a=!r)&&e&&e.has(this._parts.hostname),h=a&&s.idn_expression.test(this._parts.hostname),u=a&&s.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return p;case"absolute":return!p;case"domain":case"name":return a;case"sld":return o;case"ip":return r;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return i;case"idn":return h;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return u}return null};var l=o.protocol,c=o.port,f=o.hostname;o.protocol=function(t,r){if(void 0!==t&&t&&(t=t.replace(/:(\/\/)?$/,""),t.match(/[^a-zA-z0-9\.+-]/)))throw new TypeError("Protocol '"+t+"' contains characters other than [A-Z0-9.+-]");return l.call(this,t,r)},o.scheme=o.protocol,o.port=function(t,r){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t&&(0===t&&(t=null),t&&(t+="",":"===t.charAt(0)&&(t=t.substring(1)),t.match(/[^0-9]/))))throw new TypeError("Port '"+t+"' contains characters other than [0-9]");return c.call(this,t,r)},o.hostname=function(t,r){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var e={};s.parseHost(t,e),t=e.hostname}return f.call(this,t,r)},o.host=function(t,r){return this._parts.urn?void 0===t?"":this:void 0===t?this._parts.hostname?s.buildHost(this._parts):"":(s.parseHost(t,this._parts),this.build(!r),this)},o.authority=function(t,r){return this._parts.urn?void 0===t?"":this:void 0===t?this._parts.hostname?s.buildAuthority(this._parts):"":(s.parseAuthority(t,this._parts),this.build(!r),this)},o.userinfo=function(t,r){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.username)return"";var e=s.buildUserinfo(this._parts);return e.substring(0,e.length-1)}return"@"!==t[t.length-1]&&(t+="@"),s.parseUserinfo(t,this._parts),this.build(!r),this},o.resource=function(t,r){var e;return void 0===t?this.path()+this.search()+this.hash():(e=s.parse(t),this._parts.path=e.path,this._parts.query=e.query,this._parts.fragment=e.fragment,this.build(!r),this)},o.subdomain=function(t,r){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var e=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,e)||""}return e=this._parts.hostname.length-this.domain().length,e=this._parts.hostname.substring(0,e),e=RegExp("^"+n(e)),t&&"."!==t.charAt(t.length-1)&&(t+="."),t&&s.ensureValidHostname(t),this._parts.hostname=this._parts.hostname.replace(e,t),this.build(!r),this},o.domain=function(t,r){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(r=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var e=this._parts.hostname.match(/\./g);return e&&2>e.length?this._parts.hostname:(e=this._parts.hostname.length-this.tld(r).length-1,e=this._parts.hostname.lastIndexOf(".",e-1)+1,this._parts.hostname.substring(e)||"")}if(!t)throw new TypeError("cannot set domain empty");return s.ensureValidHostname(t),!this._parts.hostname||this.is("IP")?this._parts.hostname=t:(e=RegExp(n(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(e,t)),this.build(!r),this},o.tld=function(t,r){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(r=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var s=this._parts.hostname.lastIndexOf("."),s=this._parts.hostname.substring(s+1);return!0!==r&&e&&e.list[s.toLowerCase()]?e.get(this._parts.hostname)||s:s}if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!e||!e.is(t))throw new TypeError("TLD '"+t+"' contains characters other than [A-Z0-9]");s=RegExp(n(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");s=RegExp(n(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,t)}return this.build(!r),this},o.directory=function(t,r){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var e=this._parts.path.length-this.filename().length-1,e=this._parts.path.substring(0,e)||(this._parts.hostname?"/":"");return t?s.decodePath(e):e}return e=this._parts.path.length-this.filename().length,e=this._parts.path.substring(0,e),e=RegExp("^"+n(e)),this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=s.recodePath(t),this._parts.path=this._parts.path.replace(e,t),this.build(!r),this},o.filename=function(t,r){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var e=this._parts.path.lastIndexOf("/"),e=this._parts.path.substring(e+1);return t?s.decodePathSegment(e):e}e=!1,"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(e=!0);var i=RegExp(n(this.filename())+"$");return t=s.recodePath(t),this._parts.path=this._parts.path.replace(i,t),e?this.normalizePath(r):this.build(!r),this},o.suffix=function(t,r){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var e=this.filename(),i=e.lastIndexOf(".");return-1===i?"":(e=e.substring(i+1),e=/^[a-z0-9%]+$/i.test(e)?e:"",t?s.decodePathSegment(e):e)}if("."===t.charAt(0)&&(t=t.substring(1)),e=this.suffix())i=RegExp(t?n(e)+"$":n("."+e)+"$");else{if(!t)return this;this._parts.path+="."+s.recodePath(t)}return i&&(t=s.recodePath(t),this._parts.path=this._parts.path.replace(i,t)),this.build(!r),this},o.segment=function(t,r,e){var s=this._parts.urn?":":"/",n=this.path(),a="/"===n.substring(0,1),n=n.split(s);if("number"!=typeof t&&(e=r,r=t,t=void 0),void 0!==t&&"number"!=typeof t)throw Error("Bad segment '"+t+"', must be 0-based integer");return a&&n.shift(),0>t&&(t=Math.max(n.length+t,0)),void 0===r?void 0===t?n:n[t]:(null===t||void 0===n[t]?i(r)?n=r:(r||"string"==typeof r&&r.length)&&(""===n[n.length-1]?n[n.length-1]=r:n.push(r)):r||"string"==typeof r&&r.length?n[t]=r:n.splice(t,1),a&&n.unshift(""),this.path(n.join(s),e))};var m=o.query;return o.query=function(t,r){if(!0===t)return s.parseQuery(this._parts.query);if("function"==typeof t){var e=s.parseQuery(this._parts.query),n=t.call(this,e);return this._parts.query=s.buildQuery(n||e,this._parts.duplicateQueryParameters),this.build(!r),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=s.buildQuery(t,this._parts.duplicateQueryParameters),this.build(!r),this):m.call(this,t,r)},o.setQuery=function(t,r,e){var n=s.parseQuery(this._parts.query);if("object"==typeof t)for(var i in t)h.call(t,i)&&(n[i]=t[i]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");n[t]=void 0!==r?r:null}return this._parts.query=s.buildQuery(n,this._parts.duplicateQueryParameters),"string"!=typeof t&&(e=r),this.build(!e),this},o.addQuery=function(t,r,e){var n=s.parseQuery(this._parts.query);return s.addQuery(n,t,void 0===r?null:r),this._parts.query=s.buildQuery(n,this._parts.duplicateQueryParameters),"string"!=typeof t&&(e=r),this.build(!e),this},o.removeQuery=function(t,r,e){var n=s.parseQuery(this._parts.query);return s.removeQuery(n,t,r),this._parts.query=s.buildQuery(n,this._parts.duplicateQueryParameters),"string"!=typeof t&&(e=r),this.build(!e),this},o.setSearch=o.setQuery,o.addSearch=o.addQuery,o.removeSearch=o.removeQuery,o.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},o.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},o.normalizeHostname=function(e){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&r&&(this._parts.hostname=r.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!e)),this},o.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===s.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},o.normalizePath=function(t){if(this._parts.urn||!this._parts.path||"/"===this._parts.path)return this;var r,e,n,i,a=this._parts.path;for("/"!==a.charAt(0)&&("."===a.charAt(0)&&(e=a.substring(0,a.indexOf("/"))),r=!0,a="/"+a),a=a.replace(/(\/(\.\/)+)|\/{2,}/g,"/");n=a.indexOf("/../"),-1!==n;){if(0===n){a=a.substring(3);break}i=a.substring(0,n).lastIndexOf("/"),-1===i&&(i=n),a=a.substring(0,i)+a.substring(n+3)}return r&&this.is("relative")&&(a=e?e+a:a.substring(1)),a=s.recodePath(a),this._parts.path=a,this.build(!t),this},o.normalizePathname=o.normalizePath,o.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(s.parseQuery(this._parts.query)):this._parts.query=null,this.build(!t)),this},o.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},o.normalizeSearch=o.normalizeQuery,o.normalizeHash=o.normalizeFragment,o.iso8859=function(){var t=s.encode,r=s.decode;return s.encode=escape,s.decode=decodeURIComponent,this.normalize(),s.encode=t,s.decode=r,this},o.unicode=function(){var t=s.encode,r=s.decode;return s.encode=a,s.decode=unescape,this.normalize(),s.encode=t,s.decode=r,this},o.readable=function(){var r=this.clone();r.username("").password("").normalize();var e="";if(r._parts.protocol&&(e+=r._parts.protocol+"://"),r._parts.hostname&&(r.is("punycode")&&t?(e+=t.toUnicode(r._parts.hostname),r._parts.port&&(e+=":"+r._parts.port)):e+=r.host()),r._parts.hostname&&r._parts.path&&"/"!==r._parts.path.charAt(0)&&(e+="/"),e+=r.path(!0),r._parts.query){for(var n="",i=0,a=r._parts.query.split("&"),o=a.length;o>i;i++){var h=(a[i]||"").split("="),n=n+("&"+s.decodeQuery(h[0]).replace(/&/g,"%26"));void 0!==h[1]&&(n+="="+s.decodeQuery(h[1]).replace(/&/g,"%26"))}e+="?"+n.substring(1)}return e+=r.hash()},o.absoluteTo=function(t){var r,e,n=this.clone(),i=["protocol","username","password","hostname","port"];if(this._parts.urn)throw Error("URNs do not have any generally defined hierachical components");if(this._parts.hostname)return n;for(t instanceof s||(t=new s(t)),r=0,e;e=i[r];r++)n._parts[e]=t._parts[e];for(i=["query","path"],r=0,e;e=i[r];r++)!n._parts[e]&&t._parts[e]&&(n._parts[e]=t._parts[e]);return"/"!==n.path().charAt(0)&&(t=t.directory(),n._parts.path=(t?t+"/":"")+n._parts.path,n.normalizePath()),n.build(),n},o.relativeTo=function(t){var r,e=this.clone(),i=["protocol","username","password","hostname","port"];if(this._parts.urn)throw Error("URNs do not have any generally defined hierachical components");if(t instanceof s||(t=new s(t)),"/"!==this.path().charAt(0)||"/"!==t.path().charAt(0))throw Error("Cannot calculate common path from non-relative URLs");if(r=s.commonPath(e.path(),t.path()),!r||"/"===r)return e;for(var a,o=0;a=i[o];o++)e._parts[a]=null;if(t=t.directory(),i=this.directory(),t===i)return e._parts.path="./"+e.filename(),e.build();if(t.substring(r.length),i=i.substring(r.length),t+"/"===r)return i&&(i+="/"),e._parts.path="./"+i+e.filename(),e.build();for(i="../",r=RegExp("^"+n(r)),t=t.replace(r,"/").match(/\//g).length-1;t--;)i+="../";return e._parts.path=e._parts.path.replace(r,i),e.build()},o.equals=function(t){var r=this.clone(),e=new s(t),n={},a={};t={};var o;if(r.normalize(),e.normalize(),r.toString()===e.toString())return!0;if(n=r.query(),a=e.query(),r.query(""),e.query(""),r.toString()!==e.toString()||n.length!==a.length)return!1;n=s.parseQuery(n),a=s.parseQuery(a);for(o in n)if(h.call(n,o)){if(i(n[o])){if(!i(a[o])||n[o].length!==a[o].length)return!1;for(n[o].sort(),a[o].sort(),r=0,e=n[o].length;e>r;r++)if(n[o][r]!==a[o][r])return!1}else if(n[o]!==a[o])return!1;t[o]=!0}for(o in a)if(h.call(a,o)&&!t[o])return!1;return!0},o.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},s});
!function(n){var t=[];n.require=function(t,e){n.isFunction(e)&&e()},n.registerComponent=function(n,e,o){t.push({selector:n,component:e,requirements:o})},n(document).bind("curry-init",function(e){for(var o in t){var r=t[o],i="string"==typeof r.selector?n(r.selector,e.target):n(e.target);i.length&&("string"==typeof r.component?i[r.component]():n.isFunction(r.component)&&r.component(i))}n(e.target).trigger("curry-init-complete")})}(jQuery);
!function(e){e.fn.previewImage=function(){return this.each(function(){function t(e){s.toggleClass("previewimage-empty",""===e),s.toggleClass("previewimage-loading",e===!0),s.toggleClass("previewimage-error",e===!1),e&&e!==!0?(n.attr("src",e).fadeIn(),r.show(),o.text(n.prop("naturalWidth")+"x"+n.prop("naturalHeight")).show()):(n.hide(),r.hide(),o.hide())}var i=new Image,a=this,n=e("<img />"),r=e('<a href="#" class="close">&times;</a>'),o=e('<span class="previewimage-info"></span>'),s=e('<div class="previewimage-wrapper"></div>').append(n).append(r).append(o);r.click(function(){return e(a).val("").change(),!1}),s.click(function(){e.util.openFinder(a)}),i.onload=function(){t(i.src)},i.onerror=function(){t(!1)},e(this).change(function(){e(this).val()?(i.src=e(this).val(),t(i.complete?i.src:!0)):t("")}).hide().after(s).change()})},e.fn.filebrowser=function(t){var i=e.extend({},e.fn.filebrowser.defaults,t);return this.each(function(){var t={};if(t.el=this,t.$el=e(this),!t.$el.data("filebrowser-instance")&&(t.$el.data("filebrowser-instance",t),t.options=e.extend({},i,e(this).data("filebrowser")),t.$el.wrap('<div class="filebrowser-wrapper input-append" />'),t.options.remote&&(t.$remote=e('<a href="#" class="btn" title="Browse online"><i class="icon-folder-open" /></a>'),t.$remote.click(function(){return e.util.openFinder(t.el,t.$el.data("finder"),t.$el.data("dialog")),!1}),t.$el.after(t.$remote)),t.options.local)){t.$local=e('<a href="#" class="btn" title="Browse computer"><i class="icon-cloud-upload" /></a>');var a=e('<input type="file" name="fileinput" />').change(function(){if(this.files.length){for(var i=t.$el.data("finder")||{},a=i.defaultPath||t.$el.val(),n=e.finder.defaultOptions.action+"&"+e.param({action:"Upload",path:a,"public":!0}),r=e('<div style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.75); color:white; text-align:center;"><p>Uploading files...</p></div>').appendTo("body"),o=new FormData,s=0;s<this.files.length;++s)o.append("file[]",this.files[s]);var l=new XMLHttpRequest;(l.upload||l).addEventListener("progress",function(e){e.lengthComputable&&r.html("<p>Uploading files... "+Math.round(e.loaded/e.total*100)+"%</p>")},!1),l.addEventListener("load",function(){try{var e=JSON.parse(this.responseText);e.status?t.$el.val(e.uploaded_public.join(":")):alert(e.error)}catch(i){alert("Error:"+this.responseText)}r.remove()},!1),l.open("post",n,!0),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.send(o)}});a.appendTo(t.$local),t.$el.after(t.$local);var n=a[0].form;n&&e(n).submit(function(){a.remove()})}})},e.fn.filebrowser.defaults={local:!0,remote:!0},e.fn.ctrlsave=function(t){return this.bind("keydown",function(i){return i.keyCode=="S".charCodeAt(0)&&i.ctrlKey?(i.preventDefault(),i.stopPropagation(),void 0==t?e(this).closest("form").submit():t(),!1):void 0})},e.fn.ajaxsubmit=function(){return this.bind("submit",function(t){var i=e(this).removeClass("ajaxsubmit-error").addClass("ajaxsubmit-loading"),a=e(":submit:not(:disabled)",this).attr("disabled",!0);i.find(":file").length&&alert("Unable to use ajaxsubmit with file uploads."),i.find(".codemirror").each(function(){var t=e(this).data("codemirror-instance");t.save()}),setTimeout(function(){e.post(i.attr("action"),"_ajaxsubmit=1&"+i.serialize(),function(t){t.success?(i.removeClass("ajaxsubmit-loading").addClass("ajaxsubmit-success"),setTimeout(function(){i.removeClass("ajaxsubmit-success")},250)):(i.removeClass("ajaxsubmit-loading").addClass("ajaxsubmit-error"),alert(t.error)),a.attr("disabled",!1),e.isPlainObject(t.values)&&e.each(t.values,function(e,t){i.find("[name="+e+"]").val(t)})})},100),t.preventDefault()})},e.fn.codemirror=function(t){var i=e.extend({},e.fn.codemirror.defaults,t);return this.each(function(){if(!e(this).data("codemirror-instance")){var t=e.extend({},i,e(this).data("codemirror")),a=CodeMirror.fromTextArea(this,t);e(this).data("codemirror-instance",a),a.dom=this}})},e.fn.codemirror.defaults={lineNumbers:!0},e.util={},e.util.openDialog=function(t,i,a,n){var r=e.extend({},n);r.title=r.title||i;var o=e('<div class="overlay" />').appendTo("body").hide(),s=e('<div class="dialog-container"><h1 class="dialog-title"><a href="#" class="dialog-close">&times;</a></h1><div class="dialog-content"></div></div>').appendTo(o);s.find(".dialog-title").prepend(r.title),r.width&&s.width(r.width),r.height&&"auto"!==r.height&&(s.height(r.height),s.find(".dialog-content").css({position:"absolute"}));var l=function(e){return 27==e.keyCode?(s.trigger("dialogclose"),!1):void 0};if(e(document).on("keyup",l),o.on("click",function(e){return e.target==this?(s.trigger("dialogclose"),!1):void 0}),s.on("click",".dialog-close",function(){return s.trigger("dialogclose"),!1}),s.on("curry-init",function(){s.hide(),s.css({marginLeft:-(s.outerWidth()/2),top:e(window).scrollTop()+Math.max(0,e(window).height()-s.outerHeight())/2}),s.show()}),s.bind("dialogclose",function(){r.close&&r.close(),e(document).off("keyup",l),o.fadeOut(function(){o.remove()}),s.find(".tinymce").remove(),s.remove()}),a instanceof jQuery?(o.fadeIn(),s.find(".dialog-content").append(a).trigger("curry-init")):a&&s.find(".dialog-content").load(a,"curry_context=main",function(){o.fadeIn(),s.trigger("curry-init")}),r.buttons){for(var d=e('<div class="dialog-buttons"></div>'),c=0;c<r.buttons.length;++c){var u=r.buttons[c];e("<button></button>").addClass("btn").text(u.text).click(function(e){return function(){s.trigger("dialogclose"),e.click()}}(u)).appendTo(d)}d.appendTo(s)}return s},e(document).on("click","button[type=submit], input[type=submit]",function(){this.form&&(e(this.form).data("curry-submit-element",this),e(this.form).data("curry-submit-value",e(this).val()))}),e.util.openFinder=function(t,i,a){i=e.extend({path:e(t).val()},i),a=e.extend({width:Math.min(900,e(window).width()-20)},a);var n=e('<div class="finder" />').finder(i).one("finder-update",function(){r.trigger("curry-init")}).bind("finder-select",function(i,a){e(t).val(a).change()}).bind("finder-close",function(){r.trigger("dialogclose")}),r=e.util.openDialog(null,"Browse for file...",n,a);return n},e(document).delegate("a.dialog","click",function(){var t=e(this).attr("title")||e(this).text();return e.util.openDialog(null,t,e(this).attr("href"),e(this).data("dialog")),!1}),e.util.ajaxform=function(t,i,a){var n={type:"POST",url:e(t).attr("action")};if("undefined"!=typeof window.FormData){if(n.data=new FormData(t),n.processData=!1,n.contentType=!1,"undefined"!=typeof a)for(var r in a)n.data.append(r,a[r]);if(e(t).data("curry-submit-element")){var o=e(t).data("curry-submit-element"),r=e(o).attr("name")||e(o).attr("id"),s=e(t).data("curry-submit-value");n.data.append(r,s)}}else if(e(t).find(":file").length&&alert("Your browser does not support file uploads using javascript."),n.data=e(t).serialize(),"undefined"!=typeof a&&(n.data+="&"+e.param(a)),e(t).data("curry-submit-element")){var o=e(t).data("curry-submit-element"),r=e(o).attr("name")||e(o).attr("id"),s=e(t).data("curry-submit-value");n.data+="&"+e.param([{name:r,value:s}])}return e.extend(n,i),e.ajax(n)},e(document).delegate(".dialog-container form:not(.no-ajax)","submit",function(){var t=e(this);t.find(":submit").attr("disabled",!0);var i=t.attr("action");return i+=(-1==i.indexOf("?")?"?":"&")+"curry_context=main",e.util.ajaxform(this,{url:i,success:function(e){t.find(":submit").attr("disabled",!1),e.length?t.closest(".dialog-content").html(e).trigger("curry-init"):t.closest(".dialog-container").trigger("dialogclose")}}),!1}),e(document).delegate("a.postback","click",function(t){if(!t.isDefaultPrevented()){var i=e(this);return e.require("jquery-bw-url",function(){var t=new e.bw.url(i.attr("href"));t.doPost(i.data("postback"))}),!1}})}(jQuery);
!function(e){function n(){o.toggle(!!++t)}function r(){o.toggle(!!--t)}e.registerComponent(".previewimage","previewImage"),e.registerComponent(".filebrowser","filebrowser"),e.registerComponent(".ctrlsave","ctrlsave"),e.registerComponent(".ajaxsubmit","ajaxsubmit"),e.registerComponent(".trigger-change","change"),e.registerComponent(".datepicker","datepicker",["jquery-ui"]),e.registerComponent(".chosen","chosen",["chosen"]),e.registerComponent(".modelview","modelview",["modelview"]),e.registerComponent(".codemirror",function(n){n.codemirror({initCallback:function(n){e(n.win.document).ctrlsave(function(){e(n.dom).val(n.getCode()),e(n.dom).closest("form").submit()})}})},["codemirror"]),e.registerComponent(".tinymce",function(n){n.each(function(){var n=e.extend({},window.tinymceSettings,e(this).data("tinymce"));e(this).tinymce(n)})},["tinymce"]),e.registerComponent("fieldset.advanced",function(n){n.addClass("advanced-hidden").children("legend").bind("click",function(){return e(this).parent().toggleClass("advanced-hidden"),!1})}),e.registerComponent(".toggle",function(n){n.bind("click",function(){return e(n.attr("rel")).toggle(),!1})}),e.registerComponent(".colorpicker",function(n){n.ColorPicker({onSubmit:function(n,r,t,o){e(o).val("#"+r),e(o).ColorPickerHide()},onBeforeShow:function(){e(this).ColorPickerSetColor(this.value)},onShow:function(n){return e(n).fadeIn(500),!1},onHide:function(n){return e(n).fadeOut(500),!1},onChange:function(n,r){var t=e(this).data("colorpicker").el;e(t).val("#"+r)}})},["colorpicker"]);var t=0,o=e('<div id="loader"/>');e(document).ready(function(){o.appendTo("body")}).delegate("script,link","curry-load",n).delegate("script,link","curry-success curry-error",r).ajaxStart(n).ajaxStop(r),e(document).ajaxComplete(function(n,r){var t,o=r.getAllResponseHeaders().split("\r\n");for(t in o){var i=o[t].match(/^X-Trigger-Events: (.+)/);if(i){var c=JSON.parse("["+i[1]+"]");for(var n in c){var a=c[n];e(document).trigger(a.type,a.params||[])}}}}),e(document).ajaxError(function(n,r,t,o){if(e.util&&e.util.openDialog){var i=e('<div class="dialog-error"><p>'+t.url+"</p><iframe></iframe></iframe></div>"),c=i.find("iframe")[0];e.util.openDialog(null,o,i);var a=c.contentWindow.document;a.open(),a.writeln(r.responseText),a.close()}else alert("An error occured.")}),e(document).ready(function(){if(e(document).trigger("curry-init"),window.frameElement){var n=window.frameElement,r=n.ownerDocument,t=r.createEvent("HTMLEvents");t.initEvent("curry-ready",!0,!0),n.dispatchEvent(t)}})}(jQuery);
!function($){$.finder=function(el,options){var base=this;base.$el=$(el),base.el=el,base.$el.data("finder-instance")||(base.$el.data("finder-instance",base),base.init=function(){base.options=$.extend({},$.finder.defaultOptions,$(this).data("finder"),options),base.options.path||(base.options.path=base.options.defaultPath),base.options.multiple&&-1!=base.options.path.indexOf(base.options.pathSeperator)&&(base.options.path=base.options.path.split(base.options.pathSeperator));var e=base.options.filter;base.options.filter=base.options.filters[0][1],e&&$.each(base.options.filters,function(t,a){(e==a[0]||e==a[1])&&(base.options.filter=a[1])}),base.bindEvents(),base.refresh()},base.askOverwrite=function(e){for(var t={},a=0;a<e.length;++a){var i=e[a];t[i]=confirm("Do you want to overwrite "+i+"?")}var n=base.options.action+"&"+$.param({action:"UploadOverwrite",overwrite:t});$.post(n,function(e){e.status?base.refresh():alert(e.error)})},base.bindEvents=function(e){base.$el.find(".folder").each(function(){this.addEventListener&&(this.addEventListener("dragenter",function(e){e.stopPropagation(),e.preventDefault()},!1),this.addEventListener("dragover",function(e){e.stopPropagation(),e.preventDefault()},!1),this.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer,a=t.files;a.length&&base.uploadFiles($(this).data("finder").action,a)},!1))}),base.$el.find(".upload").each(function(){var e=$(this).attr("href"),t=$('<div class="upload-input"></div>').insertAfter(this);t.css({position:"absolute",overflow:"hidden"}).offset($(this).offset()).width($(this).outerWidth()).height($(this).outerHeight());$('<input type="file" name="file[]" multiple/>').appendTo(t).change(function(){this.files?this.files.length&&base.uploadFiles(e,this.files):base.uploadFilesFallback(e,this)})});var t=base.$el.find("select");$.each(base.options.filters,function(e,a){t.append('<option value="'+a[1]+'"'+(a[1]==base.options.filter?' selected="selected"':"")+">"+a[2]+"</option>")}),t.bind("change",function(){base.options.filter=$(this).val(),base.refresh()}),e||($(document).on("finder-reload",function(){base.refresh()}),base.$el.delegate(".navigate","mousedown",function(e){var t=null,a=$(this),i=$(this).closest("li"),n=i.offset(),s=i.clone(),o=null,r=function(t){s.offset({left:n.left+t.pageX-e.pageX,top:n.top+t.pageY-e.pageY});var a=null;base.$el.find(".folder:not(.root), .is-folder .navigate").not(this).not(i.parent()).not(s).not(s.children()).each(function(){var e=$(this).offset();e.right=e.left+$(this).outerWidth(),e.bottom=e.top+$(this).outerHeight(),t.pageX>=e.left&&t.pageX<=e.right&&t.pageY>=e.top&&t.pageY<=e.bottom&&(a=this)}),o&&o!==a&&($(o).removeClass("drop-target"),o=null),a&&(o=a,$(o).addClass("drop-target"))};return setTimeout(function(){t!==!1&&(t=!0,s.insertAfter(i).css({position:"absolute"}).offset(n),$(document).bind("mousemove",r))},250),$(document).one("mouseup",function(){if(null===t)return void(t=!1);if(t=!1,$(document).unbind("mousemove",r),s.remove(),o){$(o).removeClass("drop-target");var e=a.data("finder").path,i=$(o).data("finder").path,n=function(t){var a=base.options.action+"&"+$.param({action:"Move",path:e,destination:i,overwrite:t});$.post(a,function(e){e.overwrite?confirm(e.error+"\nOverwrite?")&&n(!0):e.status?base.refresh():alert(e.error)})};n("")}return!1}),!1}),base.$el.delegate(".navigate","click",function(e){if(e.stopPropagation(),e.preventDefault(),!$(this).closest("li").hasClass("selected")){if((e.ctrlKey||e.shiftKey)&&base.options.multiple){$.isArray(base.options.path)||(base.options.path=[base.options.path]);var t=$(this).data("finder").path,a=$.inArray(t,base.options.path);-1==a?base.options.path.push(t):base.options.path.length>1&&base.options.path.splice(a,1)}else base.options.path=$(this).data("finder").path;base.options.public=!1,base.refresh()}}),base.$el.delegate(".navigate","dblclick",function(e){e.stopPropagation(),e.preventDefault(),e.ctrlKey||e.shiftKey||base.options.path!=$(this).data("finder").path||base.$el.find(".select").click()}),base.$el.delegate(".delete","click",function(){return confirm("Do you really want to delete the selected file(s)/folder(s)?")&&$.post($(this).attr("href"),function(e){e.status?base.refresh():alert(e.error)}),!1}),base.$el.delegate(".rename","click",function(){var e=$(this).data("finder").name,t=prompt("Rename file/folder",e);return t&&$.post($(this).attr("href"),{name:t},function(e){e.status?base.refresh():alert(e.error)}),!1}),base.$el.delegate(".create-directory","click",function(){var e=prompt("Create new directory","New Folder");return e&&$.post($(this).attr("href"),{name:e},function(e){e.status?base.refresh():alert(e.error)}),!1}),base.$el.delegate(".cancel","click",function(){return base.$el.trigger("finder-close"),!1}),base.$el.delegate(".select","click",function(){var e=base.$el.find("input[name=selection]");return e.length&&(base.$el.trigger("finder-select",e.val()),base.$el.trigger("finder-close")),!1}),base.$el.delegate(".fullscreen-preview","click",function(){return $(this).toggleClass("active"),!1}))},base.uploadFiles=function(e,t){for(var a=base.$el.addClass("loading").find(".overlay").html("<p>Uploading files...</p>"),i=0,n=0;n<t.length;++n)i+=t[n].size;if(!(base.options.maxUploadSize&&i>base.options.maxUploadSize)||confirm("The "+(1==t.length?"file":"files")+" you are trying to upload exceeds the servers max upload size, would you like to try anyway?")){var s=new XMLHttpRequest;(s.upload||s).addEventListener("progress",function(e){e.lengthComputable&&a.html("<p>Uploading files... "+Math.round(e.loaded/e.total*100)+"%</p>")},!1),s.addEventListener("load",function(){try{var e=JSON.parse(this.responseText);e.status?base.options.path=e.uploaded_virtual[0]:e.overwrite?base.askOverwrite(e.overwrite):alert(e.error)}catch(t){alert("An unknown server error occured.\n"+this.responseText)}base.refresh()},!1),s.open("post",e,!0),s.setRequestHeader("X-Requested-With","XMLHttpRequest");var o;if("undefined"!=typeof FormData){o=new FormData;for(var n=0;n<t.length;++n)o.append("file[]",t[n]);s.send(o)}else if($.isFunction(t[0].getAsBinary)){var r="----CurryFormBoundary"+(new Date).getTime(),l="\r\n";o="--"+r;for(var n=0;n<t.length;++n)o+=l+'Content-Disposition: form-data; name="file[]"; filename="'+t[n].name+'"'+l+"Content-Type: "+t[n].type+l+l+t[n].getAsBinary()+l+"--"+r;o+="--",s.setRequestHeader("Content-Type","multipart/form-data; boundary="+r),s.sendAsBinary(o)}}},base.uploadFilesFallback=function(action,fileInput){var iframeId="curry-upload-frame",$iframe=$('<iframe name="'+iframeId+'" />').attr({id:iframeId}).css({display:"none"}).appendTo("body"),$form=$(fileInput).wrap('<form method="POST" enctype="multipart/form-data" />').parent().attr({action:action+"&iframe=1",target:iframeId});$form.submit();var $overlay=base.$el.addClass("loading").find(".overlay").html("<p>Uploading files...</p>");$iframe.load(function(){var doc=$iframe[0].contentDocument?$iframe[0].contentDocument:$iframe[0].contentWindow.document,data={};try{data=eval("("+doc.body.innerHTML+")"),data.status?base.options.path=data.uploaded_virtual[0]:data.overwrite?base.askOverwrite(data.overwrite):alert(data.error)}catch(err){}$(fileInput).unwrap(),$iframe.remove(),base.refresh()})},base.refresh=function(){var e=base.$el.find(".wrapper"),t=e.scrollLeft(),a=e.length?e.get(0).scrollWidth:0,i=base.options.action+"&"+$.param({path:base.options.path,filter:base.options.filter,"public":base.options.public,type:base.options.type});base.$el.addClass("loading"),$.ajax(i,{dataType:"json",cache:!1,success:function(i){!base.options.maxUploadSize&&i.maxUploadSize&&(base.options.maxUploadSize=i.maxUploadSize),base.options.path=i.path,base.options.public=!1,base.$el.removeClass("loading");var n={};base.$el.find(".folder").each(function(){n[$(this).data().finder.path]=$(this).scrollTop()}),base.$el.html($(i.content).children()),base.bindEvents(!0),e=base.$el.find(".wrapper");var s=e.get(0).scrollWidth;if(e.scrollLeft(t),s>a){var o=e.get(0).scrollWidth-e.innerWidth();e.animate({scrollLeft:o})}else if(a>s){var r=$("<div />").css({display:"inline-block",width:a-s}).animate({width:0},function(){$(this).remove()});e.append(r).scrollLeft(t)}e.find(".folder").each(function(){var e=$(this).data().finder.path;e in n&&$(this).scrollTop(n[e])}),base.$el.trigger("finder-update")},error:function(e,t,a){alert(t+": "+a),base.$el.trigger("finder-close")}})},base.init())},$.finder.defaultOptions={action:"admin.php?module=Curry_Backend_FileBrowser",filter:null,filters:[["all","*","All files"],["images","*.jpg;*.png;*.gif","Image files"],["scripts","*.js","JavaScript files"],["stylesheets","*.css","Stylesheet files"],["markup","*.htm;*.html;*.xml","Markup files"]],multiple:!1,type:"file",path:"",defaultPath:"","public":!0,maxUploadSize:0,pathSeperator:":"},$.fn.finder=function(e){return this.each(function(){new $.finder(this,e)})},$.fn.getFinder=function(){return this.data("finder-instance")}}(jQuery);
tinymce.each(["langs/en.js","plugins/advimage/editor_plugin_src.js","plugins/advlink/editor_plugin_src.js","plugins/advlist/editor_plugin_src.js","plugins/contextmenu/editor_plugin_src.js","plugins/fullscreen/editor_plugin_src.js","plugins/media/editor_plugin_src.js","plugins/nonbreaking/editor_plugin_src.js","plugins/paste/editor_plugin_src.js","plugins/style/editor_plugin_src.js","plugins/table/editor_plugin_src.js","plugins/xhtmlxtras/editor_plugin_src.js","themes/advanced/editor_template_src.js","themes/advanced/langs/en.js"],function(e){tinymce.ScriptLoader.markDone(tinyMCE.baseURL+"/"+e)}),$.datepicker.setDefaults({dateFormat:"yy-mm-dd"}),$.extend($.ui.dialog.prototype.options,{modal:!0,resizable:!1,width:600}),$(document).on("sortstart",".ui-sortable",function(){$(this).data("curry-sortable-started",!0)}).on("mouseup.sortable",".ui-sortable",function(){if($(this).data("curry-sortable-started")){var e=$(this).data("sortable").currentItem;$(e).find(".tinymce").each(function(){var e=$(this).tinymce();$(this).data("curry-sortable-mce",e.settings),e.remove()}),$(this).data("curry-sortable-started",!1)}}).on("sortbeforestop",".ui-sortable",function(e,t){$(t.item).find(".tinymce").each(function(){$(this).tinymce($(this).data("curry-sortable-mce")),$(this).removeData("curry-sortable-mce")})}),window.tinymceSettings||(window.tinymceSettings={}),window.tinymceSettings=$.extend({width:"100%",theme:"advanced",plugins:"style,table,advimage,advlink,media,contextmenu,paste,fullscreen,nonbreaking,xhtmlxtras,advlist,currypopups",theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,|,indent,outdent,|,undo,redo,styleselect,formatselect",theme_advanced_buttons2:"link,unlink,anchor,|,image,media,table,hr,charmap,|,blockquote,cite,abbr,acronym,del,ins,sub,sup,|,removeformat,cleanup,code,|,fullscreen,help",theme_advanced_resizing:!0,paste_remove_spans:!0,paste_remove_styles:!0,paste_strip_class_attributes:"all",external_link_list_url:"",file_browser_callback:function(e,t,i,s){$.util.openFinder(s.document.getElementById(e))}},window.tinymceSettings);